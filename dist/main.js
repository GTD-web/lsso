/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./libs/common/decorators/public.decorator.ts":
/*!****************************************************!*\
  !*** ./libs/common/decorators/public.decorator.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Public = exports.IS_PUBLIC_KEY = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.IS_PUBLIC_KEY = 'isPublic';
const Public = () => (0, common_1.SetMetadata)(exports.IS_PUBLIC_KEY, true);
exports.Public = Public;


/***/ }),

/***/ "./libs/common/decorators/user.decorator.ts":
/*!**************************************************!*\
  !*** ./libs/common/decorators/user.decorator.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.User = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.User = (0, common_1.createParamDecorator)((data, ctx) => {
    const request = ctx.switchToHttp().getRequest();
    const user = request.user;
    return data ? user?.[data] : user;
});


/***/ }),

/***/ "./libs/common/dto/api-response.dto.ts":
/*!*********************************************!*\
  !*** ./libs/common/dto/api-response.dto.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ApiResponseDto = exports.ErrorResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ErrorResponseDto {
    constructor(code, message) {
        this.code = code;
        this.message = message;
    }
}
exports.ErrorResponseDto = ErrorResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïò§Î•ò ÏΩîÎìú' }),
    __metadata("design:type", String)
], ErrorResponseDto.prototype, "code", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïò§Î•ò Î©îÏãúÏßÄ' }),
    __metadata("design:type", String)
], ErrorResponseDto.prototype, "message", void 0);
class ApiResponseDto {
    constructor(success, data, error) {
        this.success = success;
        if (data !== undefined) {
            this.data = data;
        }
        if (error !== undefined) {
            this.error = error;
        }
    }
    static success(data) {
        return new ApiResponseDto(true, data);
    }
    static error(code, message) {
        return new ApiResponseDto(false, undefined, new ErrorResponseDto(code, message));
    }
}
exports.ApiResponseDto = ApiResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'API ÏöîÏ≤≠ ÏÑ±Í≥µ Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], ApiResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏöîÏ≤≠Ïù¥ ÏÑ±Í≥µÌïú Í≤ΩÏö∞ Î∞òÌôòÎêòÎäî Îç∞Ïù¥ÌÑ∞', required: false }),
    __metadata("design:type", Object)
], ApiResponseDto.prototype, "data", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏöîÏ≤≠Ïù¥ Ïã§Ìå®Ìïú Í≤ΩÏö∞ Î∞òÌôòÎêòÎäî Ïò§Î•ò Ï†ïÎ≥¥',
        required: false,
        type: ErrorResponseDto,
    }),
    __metadata("design:type", ErrorResponseDto)
], ApiResponseDto.prototype, "error", void 0);


/***/ }),

/***/ "./libs/common/dto/index.ts":
/*!**********************************!*\
  !*** ./libs/common/dto/index.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./api-response.dto */ "./libs/common/dto/api-response.dto.ts"), exports);


/***/ }),

/***/ "./libs/common/enums/employee-status.enum.ts":
/*!***************************************************!*\
  !*** ./libs/common/enums/employee-status.enum.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeStatus = void 0;
var EmployeeStatus;
(function (EmployeeStatus) {
    EmployeeStatus["Active"] = "\uC7AC\uC9C1\uC911";
    EmployeeStatus["Leave"] = "\uD734\uC9C1";
    EmployeeStatus["Terminated"] = "\uD1F4\uC0AC";
})(EmployeeStatus || (exports.EmployeeStatus = EmployeeStatus = {}));


/***/ }),

/***/ "./libs/common/enums/gender.enum.ts":
/*!******************************************!*\
  !*** ./libs/common/enums/gender.enum.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Gender = void 0;
var Gender;
(function (Gender) {
    Gender["Male"] = "MALE";
    Gender["Female"] = "FEMALE";
    Gender["Other"] = "OTHER";
})(Gender || (exports.Gender = Gender = {}));


/***/ }),

/***/ "./libs/common/enums/index.ts":
/*!************************************!*\
  !*** ./libs/common/enums/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebhookExecutionStatus = exports.WebhookEntityType = exports.WebhookEventType = exports.EmployeeStatus = exports.Gender = exports.Role = void 0;
var role_type_enum_1 = __webpack_require__(/*! ./role-type.enum */ "./libs/common/enums/role-type.enum.ts");
Object.defineProperty(exports, "Role", ({ enumerable: true, get: function () { return role_type_enum_1.Role; } }));
var gender_enum_1 = __webpack_require__(/*! ./gender.enum */ "./libs/common/enums/gender.enum.ts");
Object.defineProperty(exports, "Gender", ({ enumerable: true, get: function () { return gender_enum_1.Gender; } }));
var employee_status_enum_1 = __webpack_require__(/*! ./employee-status.enum */ "./libs/common/enums/employee-status.enum.ts");
Object.defineProperty(exports, "EmployeeStatus", ({ enumerable: true, get: function () { return employee_status_enum_1.EmployeeStatus; } }));
var webhook_event_type_enum_1 = __webpack_require__(/*! ./webhook-event-type.enum */ "./libs/common/enums/webhook-event-type.enum.ts");
Object.defineProperty(exports, "WebhookEventType", ({ enumerable: true, get: function () { return webhook_event_type_enum_1.WebhookEventType; } }));
var webhook_entity_type_enum_1 = __webpack_require__(/*! ./webhook-entity-type.enum */ "./libs/common/enums/webhook-entity-type.enum.ts");
Object.defineProperty(exports, "WebhookEntityType", ({ enumerable: true, get: function () { return webhook_entity_type_enum_1.WebhookEntityType; } }));
var webhook_execution_status_enum_1 = __webpack_require__(/*! ./webhook-execution-status.enum */ "./libs/common/enums/webhook-execution-status.enum.ts");
Object.defineProperty(exports, "WebhookExecutionStatus", ({ enumerable: true, get: function () { return webhook_execution_status_enum_1.WebhookExecutionStatus; } }));


/***/ }),

/***/ "./libs/common/enums/role-type.enum.ts":
/*!*********************************************!*\
  !*** ./libs/common/enums/role-type.enum.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Role = void 0;
var Role;
(function (Role) {
})(Role || (exports.Role = Role = {}));


/***/ }),

/***/ "./libs/common/enums/webhook-entity-type.enum.ts":
/*!*******************************************************!*\
  !*** ./libs/common/enums/webhook-entity-type.enum.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebhookEntityType = void 0;
var WebhookEntityType;
(function (WebhookEntityType) {
    WebhookEntityType["Department"] = "department";
    WebhookEntityType["Employee"] = "employee";
})(WebhookEntityType || (exports.WebhookEntityType = WebhookEntityType = {}));


/***/ }),

/***/ "./libs/common/enums/webhook-event-type.enum.ts":
/*!******************************************************!*\
  !*** ./libs/common/enums/webhook-event-type.enum.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebhookEventType = void 0;
var WebhookEventType;
(function (WebhookEventType) {
    WebhookEventType["DepartmentCreated"] = "department.created";
    WebhookEventType["DepartmentUpdated"] = "department.updated";
    WebhookEventType["DepartmentDeleted"] = "department.deleted";
    WebhookEventType["EmployeeCreated"] = "employee.created";
    WebhookEventType["EmployeeUpdated"] = "employee.updated";
    WebhookEventType["EmployeePositionChanged"] = "employee.position_changed";
    WebhookEventType["EmployeeDepartmentChanged"] = "employee.department_changed";
    WebhookEventType["EmployeeTerminated"] = "employee.terminated";
})(WebhookEventType || (exports.WebhookEventType = WebhookEventType = {}));


/***/ }),

/***/ "./libs/common/enums/webhook-execution-status.enum.ts":
/*!************************************************************!*\
  !*** ./libs/common/enums/webhook-execution-status.enum.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebhookExecutionStatus = void 0;
var WebhookExecutionStatus;
(function (WebhookExecutionStatus) {
    WebhookExecutionStatus["Pending"] = "pending";
    WebhookExecutionStatus["Executing"] = "executing";
    WebhookExecutionStatus["Success"] = "success";
    WebhookExecutionStatus["Failed"] = "failed";
    WebhookExecutionStatus["Timeout"] = "timeout";
    WebhookExecutionStatus["Cancelled"] = "cancelled";
    WebhookExecutionStatus["Retry"] = "retry";
})(WebhookExecutionStatus || (exports.WebhookExecutionStatus = WebhookExecutionStatus = {}));


/***/ }),

/***/ "./libs/common/filters/http-exception.filter.ts":
/*!******************************************************!*\
  !*** ./libs/common/filters/http-exception.filter.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HttpExceptionFilter = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
let HttpExceptionFilter = class HttpExceptionFilter {
    catch(exception, host) {
        const ctx = host.switchToHttp();
        const response = ctx.getResponse();
        const status = exception.getStatus();
        const exceptionResponse = exception.getResponse();
        response.status(status).json({
            statusCode: status,
            timestamp: new Date().toISOString(),
            message: typeof exceptionResponse === 'string' ? exceptionResponse : exceptionResponse.message,
        });
    }
};
exports.HttpExceptionFilter = HttpExceptionFilter;
exports.HttpExceptionFilter = HttpExceptionFilter = __decorate([
    (0, common_1.Catch)(common_1.HttpException)
], HttpExceptionFilter);


/***/ }),

/***/ "./libs/common/interceptors/error.interceptor.ts":
/*!*******************************************************!*\
  !*** ./libs/common/interceptors/error.interceptor.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ErrorInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const rxjs_1 = __webpack_require__(/*! rxjs */ "rxjs");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let ErrorInterceptor = class ErrorInterceptor {
    intercept(context, next) {
        return next.handle().pipe((0, operators_1.catchError)((error) => {
            if (error instanceof common_1.HttpException) {
                console.error('Error:', error);
                const response = error.getResponse();
                const message = response.message;
                const errorMessage = typeof message === 'object'
                    ? Array.isArray(message)
                        ? message.join('\n')
                        : message
                    : error.message;
                return (0, rxjs_1.throwError)(() => ({
                    success: false,
                    message: errorMessage,
                    statusCode: error.getStatus(),
                }));
            }
            console.error('Unexpected error:', error);
            return (0, rxjs_1.throwError)(() => ({
                success: false,
                message: 'ÏòàÏÉÅÏπò Î™ªÌïú Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.',
                statusCode: 500,
            }));
        }));
    }
};
exports.ErrorInterceptor = ErrorInterceptor;
exports.ErrorInterceptor = ErrorInterceptor = __decorate([
    (0, common_1.Injectable)()
], ErrorInterceptor);


/***/ }),

/***/ "./libs/common/interceptors/logging.interceptor.ts":
/*!*********************************************************!*\
  !*** ./libs/common/interceptors/logging.interceptor.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoggingInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
const log_application_service_1 = __webpack_require__(/*! src/modules/application/admin/log/log-application.service */ "./src/modules/application/admin/log/log-application.service.ts");
let LoggingInterceptor = class LoggingInterceptor {
    constructor(logsService) {
        this.logsService = logsService;
    }
    async intercept(context, next) {
        const startTime = Date.now();
        const ctx = context.switchToHttp();
        const request = ctx.getRequest();
        const passUrl = ['/api/admin', '/api/domain', '/api/webhook', '/api/auth/verify'];
        if (passUrl.some((url) => request.url.startsWith(url))) {
            return next.handle();
        }
        let ip = Array.isArray(request.headers['x-forwarded-for'])
            ? request.headers['x-forwarded-for'][0]
            : request.headers['x-forwarded-for'] || request.socket.remoteAddress || '';
        if (ip.includes(',')) {
            ip = ip.split(',')[0];
        }
        if (ip === '::ffff:127.0.0.1' || ip === '::1') {
            ip = '127.0.0.1';
        }
        const systemName = request.headers['x-system-name'];
        console.log('systemName', systemName);
        const logData = {
            origin: request.headers.origin,
            host: request.headers.host,
            method: request.method,
            url: request.url,
            params: request.params,
            query: request.query,
            body: request.body,
            ip: ip,
            userAgent: request.get('user-agent'),
            requestTimestamp: new Date(),
            responseTimestamp: null,
            responseTime: null,
            statusCode: null,
            response: null,
            system: systemName || null,
            error: null,
            isError: false,
        };
        return next.handle().pipe((0, operators_1.tap)(async (response) => {
            logData.responseTimestamp = new Date();
            logData.responseTime = logData.responseTimestamp - startTime;
            logData.statusCode = context.switchToHttp().getResponse().statusCode;
            logData.response = request.method !== 'GET' ? response : null;
            logData.system = logData.system !== null ? logData.system : response?.systemName;
        }), (0, operators_1.catchError)(async (error) => {
            logData.responseTimestamp = new Date();
            logData.responseTime = logData.responseTimestamp - startTime;
            logData.statusCode = error.status || 500;
            logData.error = {
                message: error.message,
            };
            logData.isError = true;
            throw error;
        }), (0, operators_1.finalize)(() => {
            this.logsService.Î°úÍ∑∏ÏÉùÏÑ±(logData);
        }));
    }
};
exports.LoggingInterceptor = LoggingInterceptor;
exports.LoggingInterceptor = LoggingInterceptor = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof log_application_service_1.LogApplicationService !== "undefined" && log_application_service_1.LogApplicationService) === "function" ? _a : Object])
], LoggingInterceptor);


/***/ }),

/***/ "./libs/common/interceptors/request.interceptor.ts":
/*!*********************************************************!*\
  !*** ./libs/common/interceptors/request.interceptor.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RequestInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let RequestInterceptor = class RequestInterceptor {
    intercept(context, next) {
        const request = context.switchToHttp().getRequest();
        const { method, url, body, query, params } = request;
        const now = Date.now();
        console.log(`[Request] ${new Date().toISOString()} ${method} ${url}`);
        if (Object.keys(body).length > 0) {
            console.log('Body:', body);
        }
        if (Object.keys(query).length > 0) {
            console.log('Query:', query);
        }
        if (Object.keys(params).length > 0) {
            console.log('Params:', params);
        }
        return next.handle().pipe((0, operators_1.tap)(() => {
            console.log(`[Response Time] ${Date.now() - now}ms`);
        }));
    }
};
exports.RequestInterceptor = RequestInterceptor;
exports.RequestInterceptor = RequestInterceptor = __decorate([
    (0, common_1.Injectable)()
], RequestInterceptor);


/***/ }),

/***/ "./libs/common/interfaces/repository.interface.ts":
/*!********************************************************!*\
  !*** ./libs/common/interfaces/repository.interface.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./libs/common/repositories/base.repository.ts":
/*!*****************************************************!*\
  !*** ./libs/common/repositories/base.repository.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let BaseRepository = class BaseRepository {
    constructor(repository) {
        this.repository = repository;
    }
    createQueryBuilder(alias) {
        return this.repository.createQueryBuilder(alias);
    }
    get manager() {
        return this.repository.manager;
    }
    async create(entity, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.create(entity);
    }
    async save(entity, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.save(entity);
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async update(entityId, entityData, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        const primaryColumn = repository.metadata.primaryColumns[0].propertyName;
        await repository.update(entityId, entityData);
        const updated = await repository.findOne({
            where: { [primaryColumn]: entityId },
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            withDeleted: repositoryOptions?.withDeleted,
        });
        if (!updated) {
            throw new common_1.NotFoundException(`${this.repository.metadata.name} Entity with id ${entityId} not found`);
        }
        return updated;
    }
    async delete(entityId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        await repository.delete(entityId);
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.count({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
};
exports.BaseRepository = BaseRepository;
exports.BaseRepository = BaseRepository = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _a : Object])
], BaseRepository);


/***/ }),

/***/ "./libs/common/services/base.service.ts":
/*!**********************************************!*\
  !*** ./libs/common/services/base.service.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const repository_interface_1 = __webpack_require__(/*! ../interfaces/repository.interface */ "./libs/common/interfaces/repository.interface.ts");
let BaseService = class BaseService {
    constructor(repository) {
        this.repository = repository;
    }
    async create(entity, options) {
        return this.repository.create(entity, options);
    }
    async save(entity, options) {
        return this.repository.save(entity, options);
    }
    async findAll(options) {
        return this.repository.findAll(options);
    }
    async findOne(options) {
        return this.repository.findOne(options);
    }
    async update(entityId, entity, options) {
        return this.repository.update(entityId, entity, options);
    }
    async delete(entityId, options) {
        return this.repository.delete(entityId, options);
    }
};
exports.BaseService = BaseService;
exports.BaseService = BaseService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof repository_interface_1.IRepository !== "undefined" && repository_interface_1.IRepository) === "function" ? _a : Object])
], BaseService);


/***/ }),

/***/ "./libs/common/utils/swagger.ts":
/*!**************************************!*\
  !*** ./libs/common/utils/swagger.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.setupSwagger = setupSwagger;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
function setupSwagger(app, dtos) {
    const config = new swagger_1.DocumentBuilder()
        .setTitle('LSSO API')
        .setDescription('LSSO(Login SSO) API')
        .setVersion('1.0')
        .addBearerAuth()
        .addBasicAuth()
        .build();
    const extraModels = [...dtos];
    const document = swagger_1.SwaggerModule.createDocument(app, config, {
        extraModels: extraModels,
    });
    const customJsUrl = `${process.env.APP_URL}${process.env.NODE_ENV !== 'development' ? '' : '/static'}/swagger-custom.js`;
    swagger_1.SwaggerModule.setup('api-docs', app, document, {
        customJs: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js',
            customJsUrl,
        ],
        customCssUrl: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.css',
        ],
        swaggerOptions: {
            docExpansion: 'none',
            tagsSorter: (a, b) => {
                const isAEnglish = /^[A-Za-z]/.test(a);
                const isBEnglish = /^[A-Za-z]/.test(b);
                if (isAEnglish && !isBEnglish)
                    return -1;
                if (!isAEnglish && isBEnglish)
                    return 1;
                return a.localeCompare(b, 'en');
            },
            persistAuthorization: true,
        },
    });
}


/***/ }),

/***/ "./libs/configs/env.config.ts":
/*!************************************!*\
  !*** ./libs/configs/env.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FIREBASE_CONFIG = exports.APP_CONFIG = exports.WEB_PUSH_CONFIG = exports.JWT_CONFIG = exports.PRODUCTION_DATABASE_CONFIG = exports.ENV = void 0;
const dotenv_1 = __webpack_require__(/*! dotenv */ "dotenv");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
(0, dotenv_1.config)();
exports.ENV = process.env;
exports["default"] = (0, config_1.registerAs)('database', () => {
    return {
        host: process.env.POSTGRES_HOST || 'aws-1-ap-northeast-2.pooler.supabase.com',
        port: parseInt(process.env.POSTGRES_PORT, 10) || 6543,
        username: process.env.POSTGRES_USER || 'postgres.sowdygzapciuqtnzwxvf',
        password: process.env.POSTGRES_PASSWORD || '163700as',
        database: process.env.POSTGRES_DATABASE || 'postgres',
        schema: process.env.POSTGRES_SCHEMA || 'public',
    };
});
exports.PRODUCTION_DATABASE_CONFIG = (0, config_1.registerAs)('productionDatabase', () => {
    return {
        host: process.env.PROD_POSTGRES_HOST,
        port: parseInt(process.env.PROD_POSTGRES_PORT, 10),
        username: process.env.PROD_POSTGRES_USER,
        password: process.env.PROD_POSTGRES_PASSWORD,
        database: process.env.PROD_POSTGRES_DATABASE,
        schema: process.env.PROD_POSTGRES_SCHEMA,
        ssl: process.env.PROD_POSTGRES_SSL,
    };
});
exports.JWT_CONFIG = (0, config_1.registerAs)('jwt', () => {
    return {
        secret: process.env.GLOBAL_SECRET,
        expiresIn: process.env.JWT_EXPIRES_IN,
    };
});
exports.WEB_PUSH_CONFIG = (0, config_1.registerAs)('webPush', () => {
    return {
        publicKey: process.env.WEB_PUSH_PUBLIC_KEY,
        privateKey: process.env.WEB_PUSH_PRIVATE_KEY,
    };
});
exports.APP_CONFIG = (0, config_1.registerAs)('app', () => {
    return {
        url: process.env.NODE_ENV === 'production' ? 'http://localhost:5001' : 'http://localhost:3000',
        port: process.env.NODE_ENV === 'production' ? 5001 : 3000,
        storage: {
            type: process.env.NODE_ENV,
        },
    };
});
exports.FIREBASE_CONFIG = (0, config_1.registerAs)('firebase', () => {
    return {
        type: process.env.FIREBASE_TYPE,
        projectId: process.env.FIREBASE_PROJECT_ID,
        privateKeyId: process.env.FIREBASE_PRIVATE_KEY_ID,
        privateKey: process.env.FIREBASE_PRIVATE_KEY,
        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,
        clientId: process.env.FIREBASE_CLIENT_ID,
        authUri: process.env.FIREBASE_AUTH_URI,
        tokenUri: process.env.FIREBASE_TOKEN_URI,
        authProviderX509CertUrl: process.env.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,
        clientX509CertUrl: process.env.FIREBASE_CLIENT_X509_CERT_URL,
        universeDomain: process.env.FIREBASE_UNIVERSE_DOMAIN,
    };
});


/***/ }),

/***/ "./libs/configs/jwt.config.ts":
/*!************************************!*\
  !*** ./libs/configs/jwt.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.jwtConfig = void 0;
const jwtConfig = (configService) => ({
    secret: configService.get('GLOBAL_SECRET'),
    signOptions: {
        expiresIn: configService.get('JWT_EXPIRES_IN'),
    },
});
exports.jwtConfig = jwtConfig;


/***/ }),

/***/ "./libs/configs/typeorm.config.ts":
/*!****************************************!*\
  !*** ./libs/configs/typeorm.config.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.typeOrmConfig = void 0;
const entities_1 = __webpack_require__(/*! ../database/entities */ "./libs/database/entities/index.ts");
const typeOrmConfig = (configService) => {
    const isProduction = configService.get('NODE_ENV') === 'production';
    const isVercel = configService.get('database.port') === 6543;
    return {
        type: 'postgres',
        host: configService.get('database.host'),
        port: configService.get('database.port'),
        username: configService.get('database.username'),
        password: configService.get('database.password'),
        database: configService.get('database.database'),
        entities: entities_1.Entities,
        schema: configService.get('database.schema'),
    };
};
exports.typeOrmConfig = typeOrmConfig;


/***/ }),

/***/ "./libs/database/entities/index.ts":
/*!*****************************************!*\
  !*** ./libs/database/entities/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Entities = exports.EmployeeSystemRole = exports.SystemRole = exports.EmployeeFcmToken = exports.FcmToken = exports.Log = exports.SystemWebhook = exports.EmployeeToken = exports.Token = exports.System = exports.WebhookEventLog = exports.Webhook = exports.EmployeeRankHistory = exports.EmployeeDepartmentPosition = exports.Rank = exports.Position = exports.DepartmentType = exports.Department = exports.Employee = void 0;
const employee_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/employee/employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
Object.defineProperty(exports, "Employee", ({ enumerable: true, get: function () { return employee_entity_1.Employee; } }));
const department_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/department/department.entity */ "./src/modules/domain/department/department.entity.ts");
Object.defineProperty(exports, "Department", ({ enumerable: true, get: function () { return department_entity_1.Department; } }));
Object.defineProperty(exports, "DepartmentType", ({ enumerable: true, get: function () { return department_entity_1.DepartmentType; } }));
const position_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/position/position.entity */ "./src/modules/domain/position/position.entity.ts");
Object.defineProperty(exports, "Position", ({ enumerable: true, get: function () { return position_entity_1.Position; } }));
const rank_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/rank/rank.entity */ "./src/modules/domain/rank/rank.entity.ts");
Object.defineProperty(exports, "Rank", ({ enumerable: true, get: function () { return rank_entity_1.Rank; } }));
const employee_department_position_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/employee-department-position/employee-department-position.entity */ "./src/modules/domain/employee-department-position/employee-department-position.entity.ts");
Object.defineProperty(exports, "EmployeeDepartmentPosition", ({ enumerable: true, get: function () { return employee_department_position_entity_1.EmployeeDepartmentPosition; } }));
const employee_rank_history_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/employee-rank-history/employee-rank-history.entity */ "./src/modules/domain/employee-rank-history/employee-rank-history.entity.ts");
Object.defineProperty(exports, "EmployeeRankHistory", ({ enumerable: true, get: function () { return employee_rank_history_entity_1.EmployeeRankHistory; } }));
const webhook_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/webhook/webhook.entity */ "./src/modules/domain/webhook/webhook.entity.ts");
Object.defineProperty(exports, "Webhook", ({ enumerable: true, get: function () { return webhook_entity_1.Webhook; } }));
const webhook_event_log_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/webhook-event-log/webhook-event-log.entity */ "./src/modules/domain/webhook-event-log/webhook-event-log.entity.ts");
Object.defineProperty(exports, "WebhookEventLog", ({ enumerable: true, get: function () { return webhook_event_log_entity_1.WebhookEventLog; } }));
const system_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/system/system.entity */ "./src/modules/domain/system/system.entity.ts");
Object.defineProperty(exports, "System", ({ enumerable: true, get: function () { return system_entity_1.System; } }));
const token_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/token/token.entity */ "./src/modules/domain/token/token.entity.ts");
Object.defineProperty(exports, "Token", ({ enumerable: true, get: function () { return token_entity_1.Token; } }));
const employee_token_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/employee-token/employee-token.entity */ "./src/modules/domain/employee-token/employee-token.entity.ts");
Object.defineProperty(exports, "EmployeeToken", ({ enumerable: true, get: function () { return employee_token_entity_1.EmployeeToken; } }));
const system_webhook_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/system-webhook/system-webhook.entity */ "./src/modules/domain/system-webhook/system-webhook.entity.ts");
Object.defineProperty(exports, "SystemWebhook", ({ enumerable: true, get: function () { return system_webhook_entity_1.SystemWebhook; } }));
const log_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/log/log.entity */ "./src/modules/domain/log/log.entity.ts");
Object.defineProperty(exports, "Log", ({ enumerable: true, get: function () { return log_entity_1.Log; } }));
const fcm_token_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/fcm-token/fcm-token.entity */ "./src/modules/domain/fcm-token/fcm-token.entity.ts");
Object.defineProperty(exports, "FcmToken", ({ enumerable: true, get: function () { return fcm_token_entity_1.FcmToken; } }));
const employee_fcm_token_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/employee-fcm-token/employee-fcm-token.entity */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.entity.ts");
Object.defineProperty(exports, "EmployeeFcmToken", ({ enumerable: true, get: function () { return employee_fcm_token_entity_1.EmployeeFcmToken; } }));
const system_role_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/system-role/system-role.entity */ "./src/modules/domain/system-role/system-role.entity.ts");
Object.defineProperty(exports, "SystemRole", ({ enumerable: true, get: function () { return system_role_entity_1.SystemRole; } }));
const employee_system_role_entity_1 = __webpack_require__(/*! ../../../src/modules/domain/employee-system-role/employee-system-role.entity */ "./src/modules/domain/employee-system-role/employee-system-role.entity.ts");
Object.defineProperty(exports, "EmployeeSystemRole", ({ enumerable: true, get: function () { return employee_system_role_entity_1.EmployeeSystemRole; } }));
exports.Entities = [
    employee_entity_1.Employee,
    department_entity_1.Department,
    position_entity_1.Position,
    rank_entity_1.Rank,
    employee_department_position_entity_1.EmployeeDepartmentPosition,
    employee_rank_history_entity_1.EmployeeRankHistory,
    webhook_entity_1.Webhook,
    webhook_event_log_entity_1.WebhookEventLog,
    system_entity_1.System,
    token_entity_1.Token,
    employee_token_entity_1.EmployeeToken,
    system_webhook_entity_1.SystemWebhook,
    log_entity_1.Log,
    fcm_token_entity_1.FcmToken,
    employee_fcm_token_entity_1.EmployeeFcmToken,
    system_role_entity_1.SystemRole,
    employee_system_role_entity_1.EmployeeSystemRole,
];


/***/ }),

/***/ "./src/app.controller.ts":
/*!*******************************!*\
  !*** ./src/app.controller.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const express_1 = __webpack_require__(/*! express */ "express");
const path_1 = __webpack_require__(/*! path */ "path");
const fs = __webpack_require__(/*! fs */ "fs");
const app_service_1 = __webpack_require__(/*! ./app.service */ "./src/app.service.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
let AppController = class AppController {
    constructor(appService, httpAdapterHost) {
        this.appService = appService;
        this.httpAdapterHost = httpAdapterHost;
    }
    async healthCheck() {
        return {
            status: 'ok',
            timestamp: new Date().toISOString(),
            uptime: process.uptime(),
        };
    }
    async setInitialPassword(res, token) {
        return res.render('pages/set-initial-password', {
            token,
        });
    }
    async changePassword(res, token) {
        return res.render('pages/change-password', {
            token,
        });
    }
    async getSwaggerCustomJs(res) {
        try {
            const filePath = (0, path_1.join)(process.cwd(), 'public', 'swagger-custom.js');
            if (!fs.existsSync(filePath)) {
                console.error('swagger-custom.js file not found at:', filePath);
                return res.status(404).send('File not found');
            }
            const fileContent = fs.readFileSync(filePath, 'utf8');
            res.setHeader('Content-Type', 'application/javascript');
            res.setHeader('Cache-Control', 'public, max-age=86400');
            res.send(fileContent);
        }
        catch (error) {
            console.error('Error serving swagger-custom.js:', error);
            res.status(500).send('Internal server error');
        }
    }
    async getServerRoutes() {
        try {
            const httpAdapter = this.httpAdapterHost.httpAdapter;
            const app = httpAdapter.getInstance();
            const routes = [];
            if (app._router && app._router.stack) {
                console.log('üîç app._router.stack:', app._router);
                const extractRoutes = (stack, basePath = '') => {
                    stack.forEach((layer) => {
                        if (layer.route) {
                            const methods = Object.keys(layer.route.methods);
                            methods.forEach((method) => {
                                if (method !== '_all') {
                                    let routePath = basePath + layer.route.path;
                                    routePath = this.convertExpressToOpenApiPath(routePath);
                                    routes.push({
                                        path: routePath,
                                        method: method.toUpperCase(),
                                        source: 'direct',
                                        originalPath: basePath + layer.route.path,
                                    });
                                }
                            });
                        }
                        else if (layer.name === 'router' && layer.handle.stack) {
                            const routerPath = layer.regexp.source
                                .replace('\\', '')
                                .replace('^', '')
                                .replace('$', '')
                                .replace('\\/', '/')
                                .replace('(?=\\/|$)', '')
                                .replace('\\', '');
                            extractRoutes(layer.handle.stack, basePath + routerPath);
                        }
                    });
                };
                extractRoutes(app._router.stack);
            }
            const documentedRoutes = routes.filter((route) => this.isDocumentedApi(route.path));
            const uniqueRoutes = documentedRoutes
                .filter((route, index, self) => index === self.findIndex((r) => r.path === route.path && r.method === route.method))
                .sort((a, b) => {
                if (a.path === b.path) {
                    return a.method.localeCompare(b.method);
                }
                return a.path.localeCompare(b.path);
            });
            return {
                success: true,
                timestamp: new Date().toISOString(),
                totalRoutes: uniqueRoutes.length,
                routes: uniqueRoutes,
                metadata: {
                    generatedAt: new Date().toISOString(),
                    serverType: 'NestJS + Express',
                    note: 'SwaggerÎ°ú Î¨∏ÏÑúÌôîÎêú API ÎùºÏö∞Ìä∏Îßå Ìè¨Ìï®Ìï©ÎãàÎã§.',
                    filteredRoutes: routes.length - documentedRoutes.length,
                    conversionNote: 'Express Í≤ΩÎ°ú ÌååÎùºÎØ∏ÌÑ∞(:param)Î•º OpenAPI ÌòïÏãù({param})ÏúºÎ°ú Î≥ÄÌôòÌñàÏäµÎãàÎã§.',
                },
            };
        }
        catch (error) {
            return {
                success: false,
                error: error.message,
                routes: [],
                totalRoutes: 0,
                metadata: {
                    generatedAt: new Date().toISOString(),
                    error: 'ÎùºÏö∞Ìä∏ Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.',
                },
            };
        }
    }
    convertExpressToOpenApiPath(path) {
        return path.replace(/:([^/]+)/g, '{$1}');
    }
    isDocumentedApi(path) {
        if (!path.startsWith('/api/')) {
            return false;
        }
        const excludePatterns = [
            '/_debug',
            '/static',
            '/health',
            '/metrics',
            '/favicon',
            '/docs',
        ];
        for (const pattern of excludePatterns) {
            if (path.includes(pattern)) {
                return false;
            }
        }
        return true;
    }
};
exports.AppController = AppController;
__decorate([
    (0, common_1.Get)('health'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], AppController.prototype, "healthCheck", null);
__decorate([
    (0, common_1.Get)('set-initial-password'),
    __param(0, (0, common_1.Res)()),
    __param(1, (0, common_1.Query)('token')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof express_1.Response !== "undefined" && express_1.Response) === "function" ? _c : Object, String]),
    __metadata("design:returntype", Promise)
], AppController.prototype, "setInitialPassword", null);
__decorate([
    (0, common_1.Get)('change-password'),
    __param(0, (0, common_1.Res)()),
    __param(1, (0, common_1.Query)('token')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof express_1.Response !== "undefined" && express_1.Response) === "function" ? _d : Object, String]),
    __metadata("design:returntype", Promise)
], AppController.prototype, "changePassword", null);
__decorate([
    (0, common_1.Get)('static/swagger-custom.js'),
    __param(0, (0, common_1.Res)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof express_1.Response !== "undefined" && express_1.Response) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], AppController.prototype, "getSwaggerCustomJs", null);
__decorate([
    (0, common_1.Get)('_debug/routes'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], AppController.prototype, "getServerRoutes", null);
exports.AppController = AppController = __decorate([
    (0, swagger_1.ApiExcludeController)(),
    (0, common_1.Controller)(),
    __metadata("design:paramtypes", [typeof (_a = typeof app_service_1.AppService !== "undefined" && app_service_1.AppService) === "function" ? _a : Object, typeof (_b = typeof core_1.HttpAdapterHost !== "undefined" && core_1.HttpAdapterHost) === "function" ? _b : Object])
], AppController);


/***/ }),

/***/ "./src/app.module.ts":
/*!***************************!*\
  !*** ./src/app.module.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const http_exception_filter_1 = __webpack_require__(/*! ../libs/common/filters/http-exception.filter */ "./libs/common/filters/http-exception.filter.ts");
const app_controller_1 = __webpack_require__(/*! ./app.controller */ "./src/app.controller.ts");
const app_service_1 = __webpack_require__(/*! ./app.service */ "./src/app.service.ts");
const typeorm_config_1 = __webpack_require__(/*! ../libs/configs/typeorm.config */ "./libs/configs/typeorm.config.ts");
const config_2 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const env_config_1 = __webpack_require__(/*! ../libs/configs/env.config */ "./libs/configs/env.config.ts");
const entities_1 = __webpack_require__(/*! ../libs/database/entities */ "./libs/database/entities/index.ts");
const sso_application_module_1 = __webpack_require__(/*! ./modules/application/single-sign-on/sso-application.module */ "./src/modules/application/single-sign-on/sso-application.module.ts");
const organization_information_application_module_1 = __webpack_require__(/*! ./modules/application/organization-information/organization-information-application.module */ "./src/modules/application/organization-information/organization-information-application.module.ts");
const fcm_token_management_application_module_1 = __webpack_require__(/*! ./modules/application/fcm-token-management/fcm-token-management-application.module */ "./src/modules/application/fcm-token-management/fcm-token-management-application.module.ts");
const admin_module_1 = __webpack_require__(/*! ./modules/application/admin/admin.module */ "./src/modules/application/admin/admin.module.ts");
let AppModule = class AppModule {
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            config_1.ConfigModule.forRoot({
                isGlobal: true,
                load: [env_config_1.default, env_config_1.JWT_CONFIG, env_config_1.PRODUCTION_DATABASE_CONFIG],
            }),
            typeorm_1.TypeOrmModule.forRootAsync({
                inject: [config_2.ConfigService],
                useFactory: typeorm_config_1.typeOrmConfig,
            }),
            typeorm_1.TypeOrmModule.forFeature(entities_1.Entities),
            sso_application_module_1.SsoApplicationModule,
            organization_information_application_module_1.OrganizationInformationApplicationModule,
            fcm_token_management_application_module_1.FcmTokenManagementApplicationModule,
            admin_module_1.AdminModule,
        ],
        controllers: [app_controller_1.AppController],
        providers: [
            {
                provide: core_1.APP_FILTER,
                useClass: http_exception_filter_1.HttpExceptionFilter,
            },
            app_service_1.AppService,
        ],
    })
], AppModule);


/***/ }),

/***/ "./src/app.service.ts":
/*!****************************!*\
  !*** ./src/app.service.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
let AppService = class AppService {
    constructor(configService) {
        this.configService = configService;
    }
    getHello() {
        const testenv = this.configService.get('GLOBAL_SECRET');
        return testenv || 'Hello World!';
    }
};
exports.AppService = AppService;
exports.AppService = AppService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], AppService);


/***/ }),

/***/ "./src/dtos.index.ts":
/*!***************************!*\
  !*** ./src/dtos.index.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SSODto = exports.EmployeeDetailListResponseDto = exports.EmployeeDetailInfoDto = exports.NextEmployeeNumberResponseDto = exports.EmployeeListResponseDto = exports.AdminEmployeeResponseDto = exports.BulkUpdateResultDto = exports.BulkUpdateStatusRequestDto = exports.BulkUpdateRankRequestDto = exports.BulkUpdatePositionRequestDto = exports.BulkUpdateTeamRequestDto = exports.BulkUpdateDepartmentRequestDto = exports.EmployeeAssignmentDetailDto = exports.EmployeeRankHistoryResponseDto = exports.PromoteEmployeeRequestDto = exports.EmployeeAssignmentDetailResponseDto = exports.EmployeeAssignmentListResponseDto = exports.EmployeeAssignmentResponseDto = exports.UpdateManagerStatusRequestDto = exports.UpdateEmployeeAssignmentRequestDto = exports.AssignEmployeeRequestDto = exports.RankResponseDto = exports.UpdateRankRequestDto = exports.CreateRankRequestDto = exports.PositionResponseDto = exports.UpdatePositionRequestDto = exports.CreatePositionRequestDto = exports.UpdateDepartmentParentRequestDto = exports.UpdateDepartmentOrderRequestDto = exports.DepartmentListResponseDto = exports.DepartmentResponseDto = exports.UpdateDepartmentRequestDto = exports.CreateDepartmentRequestDto = void 0;
__exportStar(__webpack_require__(/*! ../libs/common/dto */ "./libs/common/dto/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./modules/application/organization-information/dto */ "./src/modules/application/organization-information/dto/index.ts"), exports);
var dto_1 = __webpack_require__(/*! ./modules/application/admin/organization/dto */ "./src/modules/application/admin/organization/dto/index.ts");
Object.defineProperty(exports, "CreateDepartmentRequestDto", ({ enumerable: true, get: function () { return dto_1.CreateDepartmentRequestDto; } }));
Object.defineProperty(exports, "UpdateDepartmentRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdateDepartmentRequestDto; } }));
Object.defineProperty(exports, "DepartmentResponseDto", ({ enumerable: true, get: function () { return dto_1.DepartmentResponseDto; } }));
Object.defineProperty(exports, "DepartmentListResponseDto", ({ enumerable: true, get: function () { return dto_1.DepartmentListResponseDto; } }));
Object.defineProperty(exports, "UpdateDepartmentOrderRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdateDepartmentOrderRequestDto; } }));
Object.defineProperty(exports, "UpdateDepartmentParentRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdateDepartmentParentRequestDto; } }));
Object.defineProperty(exports, "CreatePositionRequestDto", ({ enumerable: true, get: function () { return dto_1.CreatePositionRequestDto; } }));
Object.defineProperty(exports, "UpdatePositionRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdatePositionRequestDto; } }));
Object.defineProperty(exports, "PositionResponseDto", ({ enumerable: true, get: function () { return dto_1.PositionResponseDto; } }));
Object.defineProperty(exports, "CreateRankRequestDto", ({ enumerable: true, get: function () { return dto_1.CreateRankRequestDto; } }));
Object.defineProperty(exports, "UpdateRankRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdateRankRequestDto; } }));
Object.defineProperty(exports, "RankResponseDto", ({ enumerable: true, get: function () { return dto_1.RankResponseDto; } }));
Object.defineProperty(exports, "AssignEmployeeRequestDto", ({ enumerable: true, get: function () { return dto_1.AssignEmployeeRequestDto; } }));
Object.defineProperty(exports, "UpdateEmployeeAssignmentRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdateEmployeeAssignmentRequestDto; } }));
Object.defineProperty(exports, "UpdateManagerStatusRequestDto", ({ enumerable: true, get: function () { return dto_1.UpdateManagerStatusRequestDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentResponseDto", ({ enumerable: true, get: function () { return dto_1.EmployeeAssignmentResponseDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentListResponseDto", ({ enumerable: true, get: function () { return dto_1.EmployeeAssignmentListResponseDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentDetailResponseDto", ({ enumerable: true, get: function () { return dto_1.EmployeeAssignmentDetailResponseDto; } }));
Object.defineProperty(exports, "PromoteEmployeeRequestDto", ({ enumerable: true, get: function () { return dto_1.PromoteEmployeeRequestDto; } }));
Object.defineProperty(exports, "EmployeeRankHistoryResponseDto", ({ enumerable: true, get: function () { return dto_1.EmployeeRankHistoryResponseDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentDetailDto", ({ enumerable: true, get: function () { return dto_1.EmployeeAssignmentDetailDto; } }));
Object.defineProperty(exports, "BulkUpdateDepartmentRequestDto", ({ enumerable: true, get: function () { return dto_1.BulkUpdateDepartmentRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateTeamRequestDto", ({ enumerable: true, get: function () { return dto_1.BulkUpdateTeamRequestDto; } }));
Object.defineProperty(exports, "BulkUpdatePositionRequestDto", ({ enumerable: true, get: function () { return dto_1.BulkUpdatePositionRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateRankRequestDto", ({ enumerable: true, get: function () { return dto_1.BulkUpdateRankRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateStatusRequestDto", ({ enumerable: true, get: function () { return dto_1.BulkUpdateStatusRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateResultDto", ({ enumerable: true, get: function () { return dto_1.BulkUpdateResultDto; } }));
Object.defineProperty(exports, "AdminEmployeeResponseDto", ({ enumerable: true, get: function () { return dto_1.AdminEmployeeResponseDto; } }));
Object.defineProperty(exports, "EmployeeListResponseDto", ({ enumerable: true, get: function () { return dto_1.EmployeeListResponseDto; } }));
Object.defineProperty(exports, "NextEmployeeNumberResponseDto", ({ enumerable: true, get: function () { return dto_1.NextEmployeeNumberResponseDto; } }));
Object.defineProperty(exports, "EmployeeDetailInfoDto", ({ enumerable: true, get: function () { return dto_1.EmployeeDetailInfoDto; } }));
Object.defineProperty(exports, "EmployeeDetailListResponseDto", ({ enumerable: true, get: function () { return dto_1.EmployeeDetailListResponseDto; } }));
__exportStar(__webpack_require__(/*! ./modules/application/admin/employee/dto */ "./src/modules/application/admin/employee/dto/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./modules/application/admin/log/dto */ "./src/modules/application/admin/log/dto/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./modules/application/admin/system/dto */ "./src/modules/application/admin/system/dto/index.ts"), exports);
exports.SSODto = __webpack_require__(/*! ./modules/application/single-sign-on/dto */ "./src/modules/application/single-sign-on/dto/index.ts");
__exportStar(__webpack_require__(/*! ./modules/application/fcm-token-management/dto */ "./src/modules/application/fcm-token-management/dto/index.ts"), exports);


/***/ }),

/***/ "./src/modules/application/admin/admin.module.ts":
/*!*******************************************************!*\
  !*** ./src/modules/application/admin/admin.module.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const organization_module_1 = __webpack_require__(/*! ./organization/organization.module */ "./src/modules/application/admin/organization/organization.module.ts");
const system_module_1 = __webpack_require__(/*! ./system/system.module */ "./src/modules/application/admin/system/system.module.ts");
const log_module_1 = __webpack_require__(/*! ./log/log.module */ "./src/modules/application/admin/log/log.module.ts");
const employee_module_1 = __webpack_require__(/*! ./employee/employee.module */ "./src/modules/application/admin/employee/employee.module.ts");
let AdminModule = class AdminModule {
};
exports.AdminModule = AdminModule;
exports.AdminModule = AdminModule = __decorate([
    (0, common_1.Module)({
        imports: [
            organization_module_1.OrganizationModule,
            system_module_1.SystemModule,
            log_module_1.LogModule,
            employee_module_1.EmployeeModule,
        ],
        controllers: [],
        providers: [],
        exports: [organization_module_1.OrganizationModule, system_module_1.SystemModule, log_module_1.LogModule, employee_module_1.EmployeeModule],
    })
], AdminModule);


/***/ }),

/***/ "./src/modules/application/admin/employee/controllers/employee-fcm-token.controller.ts":
/*!*********************************************************************************************!*\
  !*** ./src/modules/application/admin/employee/controllers/employee-fcm-token.controller.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeFcmTokenController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const employee_fcm_token_application_service_1 = __webpack_require__(/*! ../services/employee-fcm-token-application.service */ "./src/modules/application/admin/employee/services/employee-fcm-token-application.service.ts");
const dto_1 = __webpack_require__(/*! ../dto */ "./src/modules/application/admin/employee/dto/index.ts");
let EmployeeFcmTokenController = class EmployeeFcmTokenController {
    constructor(employeeFcmTokenApplicationService) {
        this.employeeFcmTokenApplicationService = employeeFcmTokenApplicationService;
    }
    async findAllGroupedByEmployee(employeeId) {
        return await this.employeeFcmTokenApplicationService.ÏßÅÏõêÎ≥Ñ_Í∑∏Î£πÌïëÎêú_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
    }
    async findByFcmTokenId(fcmTokenId) {
        return await this.employeeFcmTokenApplicationService.FCM_ÌÜ†ÌÅ∞_Ï°∞Ìöå(fcmTokenId);
    }
    async findOne(id) {
        return await this.employeeFcmTokenApplicationService.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(id);
    }
    async removeFcmTokenEntity(fcmTokenId) {
        return await this.employeeFcmTokenApplicationService.FCM_ÌÜ†ÌÅ∞_ÏóîÌã∞Ìã∞_ÏÇ≠Ï†ú(fcmTokenId);
    }
    async remove(id) {
        return await this.employeeFcmTokenApplicationService.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id);
    }
    async removeAllByEmployee(employeeId) {
        return await this.employeeFcmTokenApplicationService.ÏßÅÏõê_Î™®Îì†_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId);
    }
};
exports.EmployeeFcmTokenController = EmployeeFcmTokenController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõêÎ≥Ñ FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ Î™©Î°ù Ï°∞Ìöå (Í∑∏Î£πÌïë)' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeFcmTokenGroupedListResponseDto }),
    (0, swagger_1.ApiQuery)({ name: 'employeeId', required: false, description: 'ÌäπÏ†ï ÏßÅÏõêÏùò FCM ÌÜ†ÌÅ∞ Ï°∞Ìöå' }),
    __param(0, (0, common_1.Query)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeFcmTokenController.prototype, "findAllGroupedByEmployee", null);
__decorate([
    (0, common_1.Get)('fcm-token/:fcmTokenId'),
    (0, swagger_1.ApiOperation)({ summary: 'FCM ÌÜ†ÌÅ∞ IDÎ°ú FCM ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.AdminFcmTokenResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'FCM ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'fcmTokenId', description: 'FCM ÌÜ†ÌÅ∞ ID' }),
    __param(0, (0, common_1.Param)('fcmTokenId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeFcmTokenController.prototype, "findByFcmTokenId", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeFcmTokenListResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], EmployeeFcmTokenController.prototype, "findOne", null);
__decorate([
    (0, common_1.Delete)('fcm-token/:fcmTokenId'),
    (0, swagger_1.ApiOperation)({ summary: 'FCM ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞ ÏÇ≠Ï†ú (Í¥ÄÍ≥Ñ Î®ºÏ†Ä ÏÇ≠Ï†ú ÌõÑ ÏóîÌã∞Ìã∞ ÏÇ≠Ï†ú)' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'FCM ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞ ÏÇ≠Ï†ú ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'FCM ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'fcmTokenId', description: 'FCM ÌÜ†ÌÅ∞ ID' }),
    __param(0, (0, common_1.Param)('fcmTokenId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], EmployeeFcmTokenController.prototype, "removeFcmTokenEntity", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Í¥ÄÍ≥Ñ ÏÇ≠Ï†ú ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], EmployeeFcmTokenController.prototype, "remove", null);
__decorate([
    (0, common_1.Delete)('employee/:employeeId/all'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõêÏùò Î™®Îì† FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ Î∞è Í≥†ÏïÑ ÌÜ†ÌÅ∞ ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Î™®Îì† Í¥ÄÍ≥Ñ Î∞è Í≥†ÏïÑ ÌÜ†ÌÅ∞ ÏÇ≠Ï†ú ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiParam)({ name: 'employeeId', description: 'ÏßÅÏõê ID' }),
    __param(0, (0, common_1.Param)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], EmployeeFcmTokenController.prototype, "removeAllByEmployee", null);
exports.EmployeeFcmTokenController = EmployeeFcmTokenController = __decorate([
    (0, swagger_1.ApiTags)('Admin - ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/employee-fcm-tokens'),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_fcm_token_application_service_1.EmployeeFcmTokenApplicationService !== "undefined" && employee_fcm_token_application_service_1.EmployeeFcmTokenApplicationService) === "function" ? _a : Object])
], EmployeeFcmTokenController);


/***/ }),

/***/ "./src/modules/application/admin/employee/controllers/employee-system-role.controller.ts":
/*!***********************************************************************************************!*\
  !*** ./src/modules/application/admin/employee/controllers/employee-system-role.controller.ts ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeSystemRoleController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const employee_system_role_application_service_1 = __webpack_require__(/*! ../services/employee-system-role-application.service */ "./src/modules/application/admin/employee/services/employee-system-role-application.service.ts");
const dto_1 = __webpack_require__(/*! ../dto */ "./src/modules/application/admin/employee/dto/index.ts");
let EmployeeSystemRoleController = class EmployeeSystemRoleController {
    constructor(employeeSystemRoleApplicationService) {
        this.employeeSystemRoleApplicationService = employeeSystemRoleApplicationService;
    }
    async findAllGroupedByEmployee(employeeId) {
        return await this.employeeSystemRoleApplicationService.ÏßÅÏõêÎ≥Ñ_Í∑∏Î£πÌïëÎêú_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId);
    }
    async findOne(id) {
        return await this.employeeSystemRoleApplicationService.ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏÉÅÏÑ∏_Ï°∞Ìöå(id);
    }
    async bulkUpdateEmployeeSystemRoles(dto) {
        return await this.employeeSystemRoleApplicationService.ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏùºÍ¥Ñ_ÏóÖÎç∞Ïù¥Ìä∏(dto);
    }
};
exports.EmployeeSystemRoleController = EmployeeSystemRoleController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõêÎ≥Ñ ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù Ï°∞Ìöå (Í∑∏Î£πÌïë)' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeSystemRoleGroupedListResponseDto }),
    (0, swagger_1.ApiQuery)({ name: 'employeeId', required: false, description: 'ÌäπÏ†ï ÏßÅÏõêÏùò ÏãúÏä§ÌÖú Ïó≠Ìï† Ï°∞Ìöå' }),
    __param(0, (0, common_1.Query)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeSystemRoleController.prototype, "findAllGroupedByEmployee", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeSystemRoleListResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeSystemRoleController.prototype, "findOne", null);
__decorate([
    (0, common_1.Put)('employee/bulk'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï† ÏùºÍ¥Ñ ÏóÖÎç∞Ïù¥Ìä∏ (Í∏∞Ï°¥ Ï†ÑÏ≤¥ ÏÇ≠Ï†ú ÌõÑ ÏÉàÎ°ú Ìï†Îãπ)' }),
    (0, swagger_1.ApiBody)({ type: dto_1.BulkUpdateEmployeeSystemRolesDto }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Ïó≠Ìï† ÏùºÍ¥Ñ ÏóÖÎç∞Ïù¥Ìä∏ ÏÑ±Í≥µ', type: dto_1.BulkUpdateEmployeeSystemRolesResultDto }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê ÎòêÎäî ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof dto_1.BulkUpdateEmployeeSystemRolesDto !== "undefined" && dto_1.BulkUpdateEmployeeSystemRolesDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], EmployeeSystemRoleController.prototype, "bulkUpdateEmployeeSystemRoles", null);
exports.EmployeeSystemRoleController = EmployeeSystemRoleController = __decorate([
    (0, swagger_1.ApiTags)('Admin - ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï† Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/employee-system-roles'),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_system_role_application_service_1.EmployeeSystemRoleApplicationService !== "undefined" && employee_system_role_application_service_1.EmployeeSystemRoleApplicationService) === "function" ? _a : Object])
], EmployeeSystemRoleController);


/***/ }),

/***/ "./src/modules/application/admin/employee/controllers/employee-token.controller.ts":
/*!*****************************************************************************************!*\
  !*** ./src/modules/application/admin/employee/controllers/employee-token.controller.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeTokenController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const employee_token_application_service_1 = __webpack_require__(/*! ../services/employee-token-application.service */ "./src/modules/application/admin/employee/services/employee-token-application.service.ts");
const dto_1 = __webpack_require__(/*! ../dto */ "./src/modules/application/admin/employee/dto/index.ts");
let EmployeeTokenController = class EmployeeTokenController {
    constructor(employeeTokenApplicationService) {
        this.employeeTokenApplicationService = employeeTokenApplicationService;
    }
    async findAllGroupedByEmployee(employeeId) {
        return await this.employeeTokenApplicationService.ÏßÅÏõêÎ≥Ñ_Í∑∏Î£πÌïëÎêú_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
    }
    async findByTokenId(tokenId) {
        return await this.employeeTokenApplicationService.ÌÜ†ÌÅ∞_Ï°∞Ìöå(tokenId);
    }
    async findOne(id) {
        return await this.employeeTokenApplicationService.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(id);
    }
    async removeTokenEntity(tokenId) {
        return await this.employeeTokenApplicationService.ÌÜ†ÌÅ∞_ÏóîÌã∞Ìã∞_ÏÇ≠Ï†ú(tokenId);
    }
    async remove(id) {
        return await this.employeeTokenApplicationService.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id);
    }
    async removeAllByEmployee(employeeId) {
        return await this.employeeTokenApplicationService.ÏßÅÏõêÏùò_Î™®Îì†_ÌÜ†ÌÅ∞_ÏÇ≠Ï†ú(employeeId);
    }
};
exports.EmployeeTokenController = EmployeeTokenController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõêÎ≥Ñ ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ Î™©Î°ù Ï°∞Ìöå (Í∑∏Î£πÌïë)' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeTokenGroupedListResponseDto }),
    (0, swagger_1.ApiQuery)({ name: 'employeeId', required: false, description: 'ÌäπÏ†ï ÏßÅÏõêÏùò ÌÜ†ÌÅ∞ Ï°∞Ìöå' }),
    __param(0, (0, common_1.Query)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeTokenController.prototype, "findAllGroupedByEmployee", null);
__decorate([
    (0, common_1.Get)('token/:tokenId'),
    (0, swagger_1.ApiOperation)({ summary: 'ÌÜ†ÌÅ∞ IDÎ°ú ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.TokenResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'tokenId', description: 'ÌÜ†ÌÅ∞ ID' }),
    __param(0, (0, common_1.Param)('tokenId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeTokenController.prototype, "findByTokenId", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeTokenListResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], EmployeeTokenController.prototype, "findOne", null);
__decorate([
    (0, common_1.Delete)('token/:tokenId'),
    (0, swagger_1.ApiOperation)({ summary: 'ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞ ÏÇ≠Ï†ú (Í¥ÄÍ≥Ñ Î®ºÏ†Ä ÏÇ≠Ï†ú ÌõÑ ÏóîÌã∞Ìã∞ ÏÇ≠Ï†ú)' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞ ÏÇ≠Ï†ú ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'tokenId', description: 'ÌÜ†ÌÅ∞ ID' }),
    __param(0, (0, common_1.Param)('tokenId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], EmployeeTokenController.prototype, "removeTokenEntity", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Í¥ÄÍ≥Ñ ÏÇ≠Ï†ú ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥Ñ ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], EmployeeTokenController.prototype, "remove", null);
__decorate([
    (0, common_1.Delete)('employee/:employeeId/all'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõêÏùò Î™®Îì† ÌÜ†ÌÅ∞ ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiParam)({ name: 'employeeId', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'ÌÜ†ÌÅ∞ ÏÇ≠Ï†ú ÏÑ±Í≥µ' }),
    __param(0, (0, common_1.Param)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], EmployeeTokenController.prototype, "removeAllByEmployee", null);
exports.EmployeeTokenController = EmployeeTokenController = __decorate([
    (0, swagger_1.ApiTags)('Admin - ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/employee-tokens'),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_token_application_service_1.EmployeeTokenApplicationService !== "undefined" && employee_token_application_service_1.EmployeeTokenApplicationService) === "function" ? _a : Object])
], EmployeeTokenController);


/***/ }),

/***/ "./src/modules/application/admin/employee/dto/employee-fcm-token.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/application/admin/employee/dto/employee-fcm-token.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminFcmTokenResponseDto = exports.EmployeeFcmTokenStatsDto = exports.EmployeeFcmTokenGroupedListResponseDto = exports.EmployeeFcmTokenGroupedDto = exports.EmployeeFcmTokenListResponseDto = exports.EmployeeFcmTokenTokenDto = exports.FcmTokenDeviceInfoDto = exports.EmployeeFcmTokenEmployeeDto = exports.UpdateEmployeeFcmTokenDto = exports.CreateEmployeeFcmTokenDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateEmployeeFcmTokenDto {
}
exports.CreateEmployeeFcmTokenDto = CreateEmployeeFcmTokenDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID', example: 'uuid-employee-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeFcmTokenDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ ID', example: 'uuid-fcm-token-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeFcmTokenDto.prototype, "fcmTokenId", void 0);
class UpdateEmployeeFcmTokenDto {
}
exports.UpdateEmployeeFcmTokenDto = UpdateEmployeeFcmTokenDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'FCM ÌÜ†ÌÅ∞ ID', example: 'uuid-fcm-token-id' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeFcmTokenDto.prototype, "fcmTokenId", void 0);
class EmployeeFcmTokenEmployeeDto {
}
exports.EmployeeFcmTokenEmployeeDto = EmployeeFcmTokenEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeFcmTokenEmployeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeFcmTokenEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeFcmTokenEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], EmployeeFcmTokenEmployeeDto.prototype, "email", void 0);
class FcmTokenDeviceInfoDto {
}
exports.FcmTokenDeviceInfoDto = FcmTokenDeviceInfoDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏Î™Ö' }),
    __metadata("design:type", String)
], FcmTokenDeviceInfoDto.prototype, "model", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'OS Î≤ÑÏ†Ñ' }),
    __metadata("design:type", String)
], FcmTokenDeviceInfoDto.prototype, "osVersion", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïï± Î≤ÑÏ†Ñ' }),
    __metadata("design:type", String)
], FcmTokenDeviceInfoDto.prototype, "appVersion", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÇ¨Ïö©Ïûê ÏóêÏù¥Ï†ÑÌä∏' }),
    __metadata("design:type", String)
], FcmTokenDeviceInfoDto.prototype, "userAgent", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌîåÎû´Ìèº' }),
    __metadata("design:type", String)
], FcmTokenDeviceInfoDto.prototype, "platform", void 0);
class EmployeeFcmTokenTokenDto {
}
exports.EmployeeFcmTokenTokenDto = EmployeeFcmTokenTokenDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeFcmTokenTokenDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ Í∞í' }),
    __metadata("design:type", String)
], EmployeeFcmTokenTokenDto.prototype, "fcmToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎîîÎ∞îÏù¥Ïä§ ÌÉÄÏûÖ' }),
    __metadata("design:type", String)
], EmployeeFcmTokenTokenDto.prototype, "deviceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ≥¥' }),
    __metadata("design:type", String)
], EmployeeFcmTokenTokenDto.prototype, "deviceInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], EmployeeFcmTokenTokenDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÍ≥Ñ ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeFcmTokenTokenDto.prototype, "relationCreatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÍ≥Ñ ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeFcmTokenTokenDto.prototype, "relationUpdatedAt", void 0);
class EmployeeFcmTokenListResponseDto {
}
exports.EmployeeFcmTokenListResponseDto = EmployeeFcmTokenListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÍ≥Ñ ID' }),
    __metadata("design:type", String)
], EmployeeFcmTokenListResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeFcmTokenListResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeFcmTokenListResponseDto.prototype, "fcmTokenId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], EmployeeFcmTokenListResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], EmployeeFcmTokenListResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏõê Ï†ïÎ≥¥', type: EmployeeFcmTokenEmployeeDto }),
    __metadata("design:type", EmployeeFcmTokenEmployeeDto)
], EmployeeFcmTokenListResponseDto.prototype, "employee", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'FCM ÌÜ†ÌÅ∞ Ï†ïÎ≥¥', type: EmployeeFcmTokenTokenDto }),
    __metadata("design:type", EmployeeFcmTokenTokenDto)
], EmployeeFcmTokenListResponseDto.prototype, "fcmToken", void 0);
class EmployeeFcmTokenGroupedDto {
}
exports.EmployeeFcmTokenGroupedDto = EmployeeFcmTokenGroupedDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeFcmTokenGroupedDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeFcmTokenGroupedDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeFcmTokenGroupedDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], EmployeeFcmTokenGroupedDto.prototype, "employeeEmail", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ Î™©Î°ù', type: [EmployeeFcmTokenTokenDto] }),
    __metadata("design:type", Array)
], EmployeeFcmTokenGroupedDto.prototype, "fcmTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenGroupedDto.prototype, "totalTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ± ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenGroupedDto.prototype, "activeTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏµúÏ¥à Í¥ÄÍ≥Ñ ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], EmployeeFcmTokenGroupedDto.prototype, "firstRelationCreatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏµúÍ∑º Í¥ÄÍ≥Ñ ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], EmployeeFcmTokenGroupedDto.prototype, "lastRelationUpdatedAt", void 0);
class EmployeeFcmTokenGroupedListResponseDto {
}
exports.EmployeeFcmTokenGroupedListResponseDto = EmployeeFcmTokenGroupedListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ≥Ñ FCM ÌÜ†ÌÅ∞ Î™©Î°ù', type: [EmployeeFcmTokenGroupedDto] }),
    __metadata("design:type", Array)
], EmployeeFcmTokenGroupedListResponseDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenGroupedListResponseDto.prototype, "totalEmployees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Í¥ÄÍ≥Ñ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenGroupedListResponseDto.prototype, "totalRelations", void 0);
class EmployeeFcmTokenStatsDto {
}
exports.EmployeeFcmTokenStatsDto = EmployeeFcmTokenStatsDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Í¥ÄÍ≥Ñ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenStatsDto.prototype, "totalRelations", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ± ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenStatsDto.prototype, "activeTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎπÑÌôúÏÑ± ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenStatsDto.prototype, "inactiveTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenStatsDto.prototype, "employeeCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeFcmTokenStatsDto.prototype, "fcmTokenCount", void 0);
class AdminFcmTokenResponseDto {
}
exports.AdminFcmTokenResponseDto = AdminFcmTokenResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], AdminFcmTokenResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ Í∞í' }),
    __metadata("design:type", String)
], AdminFcmTokenResponseDto.prototype, "fcmToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎîîÎ∞îÏù¥Ïä§ ÌÉÄÏûÖ' }),
    __metadata("design:type", String)
], AdminFcmTokenResponseDto.prototype, "deviceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ≥¥' }),
    __metadata("design:type", String)
], AdminFcmTokenResponseDto.prototype, "deviceInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], AdminFcmTokenResponseDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], AdminFcmTokenResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], AdminFcmTokenResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/admin/employee/dto/employee-system-role.dto.ts":
/*!********************************************************************************!*\
  !*** ./src/modules/application/admin/employee/dto/employee-system-role.dto.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BulkUpdateEmployeeSystemRolesResultDto = exports.BulkUpdateEmployeeSystemRolesDto = exports.EmployeeSystemRoleGroupedListResponseDto = exports.EmployeeSystemRoleGroupedDto = exports.EmployeeSystemRoleDetailDto = exports.EmployeeSystemRoleListResponseDto = exports.EmployeeSystemRoleRoleDto = exports.EmployeeSystemRoleSystemDto = exports.EmployeeSystemRoleEmployeeDto = exports.UpdateEmployeeSystemRoleDto = exports.CreateEmployeeSystemRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateEmployeeSystemRoleDto {
}
exports.CreateEmployeeSystemRoleDto = CreateEmployeeSystemRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID', example: 'uuid-employee-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeSystemRoleDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID', example: 'uuid-system-role-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeSystemRoleDto.prototype, "systemRoleId", void 0);
class UpdateEmployeeSystemRoleDto {
}
exports.UpdateEmployeeSystemRoleDto = UpdateEmployeeSystemRoleDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID', example: 'uuid-system-role-id' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeSystemRoleDto.prototype, "systemRoleId", void 0);
class EmployeeSystemRoleEmployeeDto {
}
exports.EmployeeSystemRoleEmployeeDto = EmployeeSystemRoleEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleEmployeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeSystemRoleEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeSystemRoleEmployeeDto.prototype, "employeeNumber", void 0);
class EmployeeSystemRoleSystemDto {
}
exports.EmployeeSystemRoleSystemDto = EmployeeSystemRoleSystemDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleSystemDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖúÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeSystemRoleSystemDto.prototype, "name", void 0);
class EmployeeSystemRoleRoleDto {
}
exports.EmployeeSystemRoleRoleDto = EmployeeSystemRoleRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleRoleDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï†Î™Ö' }),
    __metadata("design:type", String)
], EmployeeSystemRoleRoleDto.prototype, "roleName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï† ÏΩîÎìú' }),
    __metadata("design:type", String)
], EmployeeSystemRoleRoleDto.prototype, "roleCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÜåÏÜç ÏãúÏä§ÌÖú', type: EmployeeSystemRoleSystemDto }),
    __metadata("design:type", EmployeeSystemRoleSystemDto)
], EmployeeSystemRoleRoleDto.prototype, "system", void 0);
class EmployeeSystemRoleListResponseDto {
}
exports.EmployeeSystemRoleListResponseDto = EmployeeSystemRoleListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÍ≥Ñ ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleListResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleListResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleListResponseDto.prototype, "systemRoleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeSystemRoleListResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeSystemRoleListResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏõê Ï†ïÎ≥¥', type: EmployeeSystemRoleEmployeeDto }),
    __metadata("design:type", EmployeeSystemRoleEmployeeDto)
], EmployeeSystemRoleListResponseDto.prototype, "employee", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† Ï†ïÎ≥¥', type: EmployeeSystemRoleRoleDto }),
    __metadata("design:type", EmployeeSystemRoleRoleDto)
], EmployeeSystemRoleListResponseDto.prototype, "systemRole", void 0);
class EmployeeSystemRoleDetailDto {
}
exports.EmployeeSystemRoleDetailDto = EmployeeSystemRoleDetailDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleDetailDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï†Î™Ö' }),
    __metadata("design:type", String)
], EmployeeSystemRoleDetailDto.prototype, "roleName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï† ÏΩîÎìú' }),
    __metadata("design:type", String)
], EmployeeSystemRoleDetailDto.prototype, "roleCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÜåÏÜç ÏãúÏä§ÌÖúÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeSystemRoleDetailDto.prototype, "systemName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìï†ÎãπÏùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], EmployeeSystemRoleDetailDto.prototype, "assignedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], EmployeeSystemRoleDetailDto.prototype, "updatedAt", void 0);
class EmployeeSystemRoleGroupedDto {
}
exports.EmployeeSystemRoleGroupedDto = EmployeeSystemRoleGroupedDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeSystemRoleGroupedDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeSystemRoleGroupedDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeSystemRoleGroupedDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù', type: [EmployeeSystemRoleDetailDto] }),
    __metadata("design:type", Array)
], EmployeeSystemRoleGroupedDto.prototype, "systemRoles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Ïó≠Ìï† Ïàò' }),
    __metadata("design:type", Number)
], EmployeeSystemRoleGroupedDto.prototype, "totalRoles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏµúÏ¥à Ïó≠Ìï† Ìï†ÎãπÏùº' }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], EmployeeSystemRoleGroupedDto.prototype, "firstRoleAssignedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏµúÍ∑º Ïó≠Ìï† ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], EmployeeSystemRoleGroupedDto.prototype, "lastRoleUpdatedAt", void 0);
class EmployeeSystemRoleGroupedListResponseDto {
}
exports.EmployeeSystemRoleGroupedListResponseDto = EmployeeSystemRoleGroupedListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ≥Ñ ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù', type: [EmployeeSystemRoleGroupedDto] }),
    __metadata("design:type", Array)
], EmployeeSystemRoleGroupedListResponseDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], EmployeeSystemRoleGroupedListResponseDto.prototype, "totalEmployees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Í¥ÄÍ≥Ñ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeSystemRoleGroupedListResponseDto.prototype, "totalRelations", void 0);
class BulkUpdateEmployeeSystemRolesDto {
}
exports.BulkUpdateEmployeeSystemRolesDto = BulkUpdateEmployeeSystemRolesDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID', example: 'uuid-employee-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], BulkUpdateEmployeeSystemRolesDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID Î™©Î°ù', type: [String], example: ['uuid-1', 'uuid-2'] }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkUpdateEmployeeSystemRolesDto.prototype, "systemRoleIds", void 0);
class BulkUpdateEmployeeSystemRolesResultDto {
}
exports.BulkUpdateEmployeeSystemRolesResultDto = BulkUpdateEmployeeSystemRolesResultDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], BulkUpdateEmployeeSystemRolesResultDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ≠Ï†úÎêú Ïó≠Ìï† Ïàò' }),
    __metadata("design:type", Number)
], BulkUpdateEmployeeSystemRolesResultDto.prototype, "deletedCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï∂îÍ∞ÄÎêú Ïó≠Ìï† Ïàò' }),
    __metadata("design:type", Number)
], BulkUpdateEmployeeSystemRolesResultDto.prototype, "addedCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìï†ÎãπÎêú ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù', type: [EmployeeSystemRoleListResponseDto] }),
    __metadata("design:type", Array)
], BulkUpdateEmployeeSystemRolesResultDto.prototype, "systemRoles", void 0);


/***/ }),

/***/ "./src/modules/application/admin/employee/dto/employee-token.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/application/admin/employee/dto/employee-token.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TokenResponseDto = exports.EmployeeTokenGroupedListResponseDto = exports.EmployeeTokenGroupedDto = exports.EmployeeTokenDetailDto = exports.EmployeeTokenListResponseDto = exports.EmployeeTokenTokenDto = exports.EmployeeTokenEmployeeDto = exports.UpdateEmployeeTokenDto = exports.CreateEmployeeTokenDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateEmployeeTokenDto {
}
exports.CreateEmployeeTokenDto = CreateEmployeeTokenDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID', example: 'uuid-employee-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeTokenDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ID', example: 'uuid-token-id' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeTokenDto.prototype, "tokenId", void 0);
class UpdateEmployeeTokenDto {
}
exports.UpdateEmployeeTokenDto = UpdateEmployeeTokenDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌÜ†ÌÅ∞ ID', example: 'uuid-token-id' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeTokenDto.prototype, "tokenId", void 0);
class EmployeeTokenEmployeeDto {
}
exports.EmployeeTokenEmployeeDto = EmployeeTokenEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeTokenEmployeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeTokenEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeTokenEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], EmployeeTokenEmployeeDto.prototype, "email", void 0);
class EmployeeTokenTokenDto {
}
exports.EmployeeTokenTokenDto = EmployeeTokenTokenDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeTokenTokenDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], EmployeeTokenTokenDto.prototype, "accessToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ÎßåÎ£åÏùºÏãú' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeTokenTokenDto.prototype, "tokenExpiresAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï†ïÎ≥¥' }),
    __metadata("design:type", String)
], EmployeeTokenTokenDto.prototype, "clientInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], EmployeeTokenTokenDto.prototype, "isActive", void 0);
class EmployeeTokenListResponseDto {
}
exports.EmployeeTokenListResponseDto = EmployeeTokenListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÍ≥Ñ ID' }),
    __metadata("design:type", String)
], EmployeeTokenListResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeTokenListResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeTokenListResponseDto.prototype, "tokenId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏõê Ï†ïÎ≥¥', type: EmployeeTokenEmployeeDto }),
    __metadata("design:type", EmployeeTokenEmployeeDto)
], EmployeeTokenListResponseDto.prototype, "employee", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌÜ†ÌÅ∞ Ï†ïÎ≥¥', type: EmployeeTokenTokenDto }),
    __metadata("design:type", EmployeeTokenTokenDto)
], EmployeeTokenListResponseDto.prototype, "token", void 0);
class EmployeeTokenDetailDto {
}
exports.EmployeeTokenDetailDto = EmployeeTokenDetailDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeTokenDetailDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞ (ÎßàÏä§ÌÇπ)' }),
    __metadata("design:type", String)
], EmployeeTokenDetailDto.prototype, "accessTokenMasked", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ÎßåÎ£åÏùºÏãú' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeTokenDetailDto.prototype, "tokenExpiresAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï†ïÎ≥¥' }),
    __metadata("design:type", String)
], EmployeeTokenDetailDto.prototype, "clientInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], EmployeeTokenDetailDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], EmployeeTokenDetailDto.prototype, "tokenCreatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎßàÏßÄÎßâ Ï†ëÍ∑ºÏùºÏãú' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], EmployeeTokenDetailDto.prototype, "lastAccess", void 0);
class EmployeeTokenGroupedDto {
}
exports.EmployeeTokenGroupedDto = EmployeeTokenGroupedDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeTokenGroupedDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeTokenGroupedDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeTokenGroupedDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], EmployeeTokenGroupedDto.prototype, "employeeEmail", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ Î™©Î°ù', type: [EmployeeTokenDetailDto] }),
    __metadata("design:type", Array)
], EmployeeTokenGroupedDto.prototype, "tokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeTokenGroupedDto.prototype, "totalTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ± ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeTokenGroupedDto.prototype, "activeTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏµúÏ¥à ÌÜ†ÌÅ∞ ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], EmployeeTokenGroupedDto.prototype, "firstTokenCreatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏµúÍ∑º ÌÜ†ÌÅ∞ ÌôúÎèôÏùº' }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], EmployeeTokenGroupedDto.prototype, "lastTokenActivity", void 0);
class EmployeeTokenGroupedListResponseDto {
}
exports.EmployeeTokenGroupedListResponseDto = EmployeeTokenGroupedListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ≥Ñ ÌÜ†ÌÅ∞ Î™©Î°ù', type: [EmployeeTokenGroupedDto] }),
    __metadata("design:type", Array)
], EmployeeTokenGroupedListResponseDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], EmployeeTokenGroupedListResponseDto.prototype, "totalEmployees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Í¥ÄÍ≥Ñ Ïàò' }),
    __metadata("design:type", Number)
], EmployeeTokenGroupedListResponseDto.prototype, "totalRelations", void 0);
class TokenResponseDto {
}
exports.TokenResponseDto = TokenResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], TokenResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], TokenResponseDto.prototype, "accessToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÜ†ÌÅ∞ ÎßåÎ£åÏùºÏãú' }),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], TokenResponseDto.prototype, "tokenExpiresAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], TokenResponseDto.prototype, "refreshToken", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ ÎßåÎ£åÏùºÏãú' }),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], TokenResponseDto.prototype, "refreshTokenExpiresAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï†ïÎ≥¥' }),
    __metadata("design:type", String)
], TokenResponseDto.prototype, "clientInfo", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'IP Ï£ºÏÜå' }),
    __metadata("design:type", String)
], TokenResponseDto.prototype, "ipAddress", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÎßàÏßÄÎßâ Ï†ëÍ∑ºÏùºÏãú' }),
    __metadata("design:type", typeof (_j = typeof Date !== "undefined" && Date) === "function" ? _j : Object)
], TokenResponseDto.prototype, "lastAccess", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], TokenResponseDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_k = typeof Date !== "undefined" && Date) === "function" ? _k : Object)
], TokenResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùºÏãú' }),
    __metadata("design:type", typeof (_l = typeof Date !== "undefined" && Date) === "function" ? _l : Object)
], TokenResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/admin/employee/dto/index.ts":
/*!*************************************************************!*\
  !*** ./src/modules/application/admin/employee/dto/index.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./employee-system-role.dto */ "./src/modules/application/admin/employee/dto/employee-system-role.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employee-token.dto */ "./src/modules/application/admin/employee/dto/employee-token.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employee-fcm-token.dto */ "./src/modules/application/admin/employee/dto/employee-fcm-token.dto.ts"), exports);


/***/ }),

/***/ "./src/modules/application/admin/employee/employee.module.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/application/admin/employee/employee.module.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_system_role_controller_1 = __webpack_require__(/*! ./controllers/employee-system-role.controller */ "./src/modules/application/admin/employee/controllers/employee-system-role.controller.ts");
const employee_token_controller_1 = __webpack_require__(/*! ./controllers/employee-token.controller */ "./src/modules/application/admin/employee/controllers/employee-token.controller.ts");
const employee_fcm_token_controller_1 = __webpack_require__(/*! ./controllers/employee-fcm-token.controller */ "./src/modules/application/admin/employee/controllers/employee-fcm-token.controller.ts");
const employee_system_role_application_service_1 = __webpack_require__(/*! ./services/employee-system-role-application.service */ "./src/modules/application/admin/employee/services/employee-system-role-application.service.ts");
const employee_token_application_service_1 = __webpack_require__(/*! ./services/employee-token-application.service */ "./src/modules/application/admin/employee/services/employee-token-application.service.ts");
const employee_fcm_token_application_service_1 = __webpack_require__(/*! ./services/employee-fcm-token-application.service */ "./src/modules/application/admin/employee/services/employee-fcm-token-application.service.ts");
const employee_management_context_module_1 = __webpack_require__(/*! ../../../context/employee-management/employee-management-context.module */ "./src/modules/context/employee-management/employee-management-context.module.ts");
const fcm_token_module_1 = __webpack_require__(/*! ../../../domain/fcm-token/fcm-token.module */ "./src/modules/domain/fcm-token/fcm-token.module.ts");
const token_module_1 = __webpack_require__(/*! ../../../domain/token/token.module */ "./src/modules/domain/token/token.module.ts");
let EmployeeModule = class EmployeeModule {
};
exports.EmployeeModule = EmployeeModule;
exports.EmployeeModule = EmployeeModule = __decorate([
    (0, common_1.Module)({
        imports: [
            employee_management_context_module_1.EmployeeManagementContextModule,
            fcm_token_module_1.DomainFcmTokenModule,
            token_module_1.DomainTokenModule,
        ],
        controllers: [employee_system_role_controller_1.EmployeeSystemRoleController, employee_token_controller_1.EmployeeTokenController, employee_fcm_token_controller_1.EmployeeFcmTokenController],
        providers: [
            employee_system_role_application_service_1.EmployeeSystemRoleApplicationService,
            employee_token_application_service_1.EmployeeTokenApplicationService,
            employee_fcm_token_application_service_1.EmployeeFcmTokenApplicationService,
        ],
        exports: [
            employee_system_role_application_service_1.EmployeeSystemRoleApplicationService,
            employee_token_application_service_1.EmployeeTokenApplicationService,
            employee_fcm_token_application_service_1.EmployeeFcmTokenApplicationService,
        ],
    })
], EmployeeModule);


/***/ }),

/***/ "./src/modules/application/admin/employee/services/employee-fcm-token-application.service.ts":
/*!***************************************************************************************************!*\
  !*** ./src/modules/application/admin/employee/services/employee-fcm-token-application.service.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeFcmTokenApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_fcm_token_management_context_service_1 = __webpack_require__(/*! ../../../../context/employee-management/employee-fcm-token-management-context.service */ "./src/modules/context/employee-management/employee-fcm-token-management-context.service.ts");
const fcm_token_service_1 = __webpack_require__(/*! ../../../../domain/fcm-token/fcm-token.service */ "./src/modules/domain/fcm-token/fcm-token.service.ts");
let EmployeeFcmTokenApplicationService = class EmployeeFcmTokenApplicationService {
    constructor(employeeFcmTokenManagementContext, domainFcmTokenService) {
        this.employeeFcmTokenManagementContext = employeeFcmTokenManagementContext;
        this.domainFcmTokenService = domainFcmTokenService;
    }
    async Î™®Îì†_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå() {
        const relations = await this.employeeFcmTokenManagementContext.Î™®Îì†_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            fcmTokenId: relation.fcmTokenId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                    email: relation.employee.email,
                }
                : undefined,
            fcmToken: relation.fcmToken
                ? {
                    id: relation.fcmToken.id,
                    fcmToken: relation.fcmToken.fcmToken,
                    deviceType: relation.fcmToken.deviceType,
                    deviceInfo: relation.fcmToken.deviceInfo,
                    isActive: relation.fcmToken.isActive,
                    relationCreatedAt: relation.createdAt,
                    relationUpdatedAt: relation.updatedAt,
                }
                : undefined,
        }));
    }
    async ÏßÅÏõêÎ≥Ñ_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId) {
        const relations = await this.employeeFcmTokenManagementContext.ÏßÅÏõêÎ≥Ñ_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            fcmTokenId: relation.fcmTokenId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            fcmToken: relation.fcmToken
                ? {
                    id: relation.fcmToken.id,
                    fcmToken: relation.fcmToken.fcmToken,
                    deviceType: relation.fcmToken.deviceType,
                    deviceInfo: relation.fcmToken.deviceInfo,
                    isActive: relation.fcmToken.isActive,
                    relationCreatedAt: relation.createdAt,
                    relationUpdatedAt: relation.updatedAt,
                }
                : undefined,
        }));
    }
    async FCM_ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(fcmTokenId) {
        const relations = await this.employeeFcmTokenManagementContext.FCM_ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(fcmTokenId);
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            fcmTokenId: relation.fcmTokenId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                    email: relation.employee.email,
                }
                : undefined,
        }));
    }
    async ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(id) {
        const relation = await this.employeeFcmTokenManagementContext.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return {
            id: relation.id,
            employeeId: relation.employeeId,
            fcmTokenId: relation.fcmTokenId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                    email: relation.employee.email,
                }
                : undefined,
            fcmToken: relation.fcmToken
                ? {
                    id: relation.fcmToken.id,
                    fcmToken: relation.fcmToken.fcmToken,
                    deviceType: relation.fcmToken.deviceType,
                    deviceInfo: relation.fcmToken.deviceInfo,
                    isActive: relation.fcmToken.isActive,
                    relationCreatedAt: relation.createdAt,
                    relationUpdatedAt: relation.updatedAt,
                }
                : undefined,
        };
    }
    async ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±(dto) {
        const relation = await this.employeeFcmTokenManagementContext.ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(dto.employeeId, dto.fcmTokenId);
        return this.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(relation.id);
    }
    async ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏàòÏ†ï(id, dto) {
        const existingRelation = await this.employeeFcmTokenManagementContext.IDÎ°ú_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!existingRelation) {
            throw new common_1.NotFoundException('ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        if (dto.fcmTokenId && dto.fcmTokenId !== existingRelation.fcmTokenId) {
            await this.employeeFcmTokenManagementContext.ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(existingRelation.employeeId, existingRelation.fcmTokenId);
            const newRelation = await this.employeeFcmTokenManagementContext.ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(existingRelation.employeeId, dto.fcmTokenId);
            return this.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(newRelation.id);
        }
        return this.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(id);
    }
    async ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id) {
        const relation = await this.employeeFcmTokenManagementContext.IDÎ°ú_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.employeeFcmTokenManagementContext.ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(relation.employeeId, relation.fcmTokenId);
        return { message: 'ÏßÅÏõê FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.' };
    }
    async ÏßÅÏõê_Î™®Îì†_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId) {
        await this.employeeFcmTokenManagementContext.ÏßÅÏõêÏùò_Î™®Îì†_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId);
        const deletedTokensCount = await this.domainFcmTokenService.deleteOrphanTokens();
        return {
            message: 'ÏßÅÏõêÏùò Î™®Îì† FCM ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.',
            deletedTokensCount,
        };
    }
    async FCM_ÌÜ†ÌÅ∞_ÏÇ¨Ïö©Ïùº_ÏóÖÎç∞Ïù¥Ìä∏(employeeId, fcmTokenId) {
        const relation = await this.employeeFcmTokenManagementContext.FCM_ÌÜ†ÌÅ∞_ÏÇ¨Ïö©Ïùº_ÏóÖÎç∞Ïù¥Ìä∏(employeeId, fcmTokenId);
        return this.ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(relation.id);
    }
    async Ïò§ÎûòÎêú_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï†ïÎ¶¨(cutoffDays = 30) {
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - cutoffDays);
        const deletedCount = await this.employeeFcmTokenManagementContext.Ïò§ÎûòÎêú_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(cutoffDate);
        return { deletedCount };
    }
    async FCM_ÌÜ†ÌÅ∞_ÌÜµÍ≥Ñ_Ï°∞Ìöå() {
        const relations = await this.employeeFcmTokenManagementContext.Î™®Îì†_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        const employeeIds = new Set();
        const fcmTokenIds = new Set();
        let activeTokens = 0;
        let inactiveTokens = 0;
        relations.forEach((relation) => {
            employeeIds.add(relation.employeeId);
            fcmTokenIds.add(relation.fcmTokenId);
            if (relation.fcmToken?.isActive) {
                activeTokens++;
            }
            else {
                inactiveTokens++;
            }
        });
        return {
            totalRelations: relations.length,
            activeTokens,
            inactiveTokens,
            employeeCount: employeeIds.size,
            fcmTokenCount: fcmTokenIds.size,
        };
    }
    async ÏßÅÏõêÎ≥Ñ_Í∑∏Î£πÌïëÎêú_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId) {
        let relations;
        if (employeeId) {
            relations = await this.employeeFcmTokenManagementContext.ÏßÅÏõêÎ≥Ñ_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
        }
        else {
            relations = await this.employeeFcmTokenManagementContext.Î™®Îì†_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        }
        const employeeGroups = new Map();
        relations.forEach((relation) => {
            const employeeId = relation.employeeId;
            if (!employeeGroups.has(employeeId)) {
                employeeGroups.set(employeeId, {
                    employeeId: relation.employeeId,
                    employeeName: relation.employee?.name || '',
                    employeeNumber: relation.employee?.employeeNumber || '',
                    employeeEmail: relation.employee?.email || '',
                    fcmTokens: [],
                    totalTokens: 0,
                    activeTokens: 0,
                    firstRelationCreatedAt: relation.createdAt,
                    lastRelationUpdatedAt: relation.updatedAt,
                });
            }
            const group = employeeGroups.get(employeeId);
            if (relation.createdAt < group.firstRelationCreatedAt) {
                group.firstRelationCreatedAt = relation.createdAt;
            }
            if (relation.updatedAt > group.lastRelationUpdatedAt) {
                group.lastRelationUpdatedAt = relation.updatedAt;
            }
            if (relation.fcmToken) {
                const tokenDto = {
                    id: relation.fcmToken.id,
                    fcmToken: relation.fcmToken.fcmToken,
                    deviceType: relation.fcmToken.deviceType,
                    deviceInfo: relation.fcmToken.deviceInfo,
                    isActive: relation.fcmToken.isActive,
                    relationCreatedAt: relation.createdAt,
                    relationUpdatedAt: relation.updatedAt,
                };
                group.fcmTokens.push(tokenDto);
                group.totalTokens++;
                if (relation.fcmToken.isActive) {
                    group.activeTokens++;
                }
            }
        });
        const employees = Array.from(employeeGroups.values());
        return {
            employees,
            totalEmployees: employees.length,
            totalRelations: relations.length,
        };
    }
    async FCM_ÌÜ†ÌÅ∞_Ï°∞Ìöå(fcmTokenId) {
        const fcmToken = await this.domainFcmTokenService.findOne({
            where: { id: fcmTokenId },
        });
        if (!fcmToken) {
            throw new common_1.NotFoundException('FCM ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return {
            id: fcmToken.id,
            fcmToken: fcmToken.fcmToken,
            deviceType: fcmToken.deviceType,
            deviceInfo: fcmToken.deviceInfo,
            isActive: fcmToken.isActive,
            createdAt: fcmToken.createdAt,
            updatedAt: fcmToken.updatedAt,
        };
    }
    async FCM_ÌÜ†ÌÅ∞_ÏóîÌã∞Ìã∞_ÏÇ≠Ï†ú(fcmTokenId) {
        const fcmToken = await this.domainFcmTokenService.findOne({
            where: { id: fcmTokenId },
        });
        if (!fcmToken) {
            throw new common_1.NotFoundException('FCM ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const relations = await this.employeeFcmTokenManagementContext.FCM_ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(fcmTokenId);
        let deletedRelationsCount = 0;
        for (const relation of relations) {
            await this.employeeFcmTokenManagementContext.ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(relation.employeeId, relation.fcmTokenId);
            deletedRelationsCount++;
        }
        await this.domainFcmTokenService.delete(fcmTokenId);
        return {
            message: 'FCM ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.',
            deletedRelationsCount,
        };
    }
};
exports.EmployeeFcmTokenApplicationService = EmployeeFcmTokenApplicationService;
exports.EmployeeFcmTokenApplicationService = EmployeeFcmTokenApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_fcm_token_management_context_service_1.EmployeeFcmTokenManagementContextService !== "undefined" && employee_fcm_token_management_context_service_1.EmployeeFcmTokenManagementContextService) === "function" ? _a : Object, typeof (_b = typeof fcm_token_service_1.DomainFcmTokenService !== "undefined" && fcm_token_service_1.DomainFcmTokenService) === "function" ? _b : Object])
], EmployeeFcmTokenApplicationService);


/***/ }),

/***/ "./src/modules/application/admin/employee/services/employee-system-role-application.service.ts":
/*!*****************************************************************************************************!*\
  !*** ./src/modules/application/admin/employee/services/employee-system-role-application.service.ts ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeSystemRoleApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_system_role_management_context_service_1 = __webpack_require__(/*! ../../../../context/employee-management/employee-system-role-management-context.service */ "./src/modules/context/employee-management/employee-system-role-management-context.service.ts");
let EmployeeSystemRoleApplicationService = class EmployeeSystemRoleApplicationService {
    constructor(employeeSystemRoleManagementContext) {
        this.employeeSystemRoleManagementContext = employeeSystemRoleManagementContext;
    }
    async Î™®Îì†_ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå() {
        const relations = await this.employeeSystemRoleManagementContext.Î™®Îì†_ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            systemRoleId: relation.systemRoleId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                }
                : undefined,
            systemRole: relation.systemRole
                ? {
                    id: relation.systemRole.id,
                    roleName: relation.systemRole.roleName,
                    roleCode: relation.systemRole.roleCode,
                    system: {
                        id: relation.systemRole.system.id,
                        name: relation.systemRole.system.name,
                    },
                }
                : undefined,
        }));
    }
    async ÏßÅÏõêÎ≥Ñ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId) {
        const relations = await this.employeeSystemRoleManagementContext.ÏßÅÏõêÎ≥Ñ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId);
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            systemRoleId: relation.systemRoleId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            systemRole: relation.systemRole
                ? {
                    id: relation.systemRole.id,
                    roleName: relation.systemRole.roleName,
                    roleCode: relation.systemRole.roleCode,
                    system: {
                        id: relation.systemRole.system.id,
                        name: relation.systemRole.system.name,
                    },
                }
                : undefined,
        }));
    }
    async ÏãúÏä§ÌÖú_Ïó≠Ìï†Î≥Ñ_ÏßÅÏõê_Ï°∞Ìöå(systemRoleId) {
        const relations = await this.employeeSystemRoleManagementContext.ÏãúÏä§ÌÖú_Ïó≠Ìï†Î≥Ñ_ÏßÅÏõê_Ï°∞Ìöå(systemRoleId);
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            systemRoleId: relation.systemRoleId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                }
                : undefined,
        }));
    }
    async ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏÉÅÏÑ∏_Ï°∞Ìöå(id) {
        const relation = await this.employeeSystemRoleManagementContext.ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return {
            id: relation.id,
            employeeId: relation.employeeId,
            systemRoleId: relation.systemRoleId,
            createdAt: relation.createdAt,
            updatedAt: relation.updatedAt,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                }
                : undefined,
            systemRole: relation.systemRole
                ? {
                    id: relation.systemRole.id,
                    roleName: relation.systemRole.roleName,
                    roleCode: relation.systemRole.roleCode,
                    system: {
                        id: relation.systemRole.system.id,
                        name: relation.systemRole.system.name,
                    },
                }
                : undefined,
        };
    }
    async ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï†Îãπ(dto) {
        const relation = await this.employeeSystemRoleManagementContext.ÏßÅÏõêÏóêÍ≤å_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï†Îãπ(dto.employeeId, dto.systemRoleId);
        return this.ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏÉÅÏÑ∏_Ï°∞Ìöå(relation.id);
    }
    async ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(id) {
        const relation = await this.employeeSystemRoleManagementContext.IDÎ°ú_ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(id);
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.employeeSystemRoleManagementContext.ÏßÅÏõêÏùò_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(relation.employeeId, relation.systemRoleId);
        return { message: 'ÏßÅÏõê ÏãúÏä§ÌÖú Ïó≠Ìï†Ïù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ìï¥Ï†úÎêòÏóàÏäµÎãàÎã§.' };
    }
    async ÏßÅÏõê_Î™®Îì†_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(employeeId) {
        await this.employeeSystemRoleManagementContext.ÏßÅÏõêÏùò_Î™®Îì†_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(employeeId);
        return { message: 'ÏßÅÏõêÏùò Î™®Îì† ÏãúÏä§ÌÖú Ïó≠Ìï†Ïù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ìï¥Ï†úÎêòÏóàÏäµÎãàÎã§.' };
    }
    async ÏßÅÏõêÎ≥Ñ_Í∑∏Î£πÌïëÎêú_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId) {
        let relations;
        if (employeeId) {
            relations = await this.employeeSystemRoleManagementContext.ÏßÅÏõêÎ≥Ñ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId);
        }
        else {
            relations = await this.employeeSystemRoleManagementContext.Î™®Îì†_ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        }
        const employeeGroups = new Map();
        relations.forEach((relation) => {
            const employeeId = relation.employeeId;
            if (!employeeGroups.has(employeeId)) {
                employeeGroups.set(employeeId, {
                    employeeId: relation.employeeId,
                    employeeName: relation.employee?.name || '',
                    employeeNumber: relation.employee?.employeeNumber || '',
                    systemRoles: [],
                    totalRoles: 0,
                    firstRoleAssignedAt: relation.createdAt,
                    lastRoleUpdatedAt: relation.updatedAt,
                });
            }
            const group = employeeGroups.get(employeeId);
            if (relation.createdAt < group.firstRoleAssignedAt) {
                group.firstRoleAssignedAt = relation.createdAt;
            }
            if (relation.updatedAt > group.lastRoleUpdatedAt) {
                group.lastRoleUpdatedAt = relation.updatedAt;
            }
            if (relation.systemRole) {
                const roleDto = {
                    id: relation.systemRole.id,
                    roleName: relation.systemRole.roleName,
                    roleCode: relation.systemRole.roleCode,
                    systemName: relation.systemRole.system?.name || '',
                    assignedAt: relation.createdAt,
                    updatedAt: relation.updatedAt,
                };
                group.systemRoles.push(roleDto);
                group.totalRoles++;
            }
        });
        const employees = Array.from(employeeGroups.values());
        return {
            employees,
            totalEmployees: employees.length,
            totalRelations: relations.length,
        };
    }
    async ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏùºÍ¥Ñ_ÏóÖÎç∞Ïù¥Ìä∏(dto) {
        const result = await this.employeeSystemRoleManagementContext.ÏßÅÏõêÏùò_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏùºÍ¥Ñ_ÏóÖÎç∞Ïù¥Ìä∏(dto.employeeId, dto.systemRoleIds);
        return {
            employeeId: dto.employeeId,
            deletedCount: result.deletedCount,
            addedCount: result.addedCount,
            systemRoles: result.systemRoles.map((relation) => ({
                id: relation.id,
                employeeId: relation.employeeId,
                systemRoleId: relation.systemRoleId,
                createdAt: relation.createdAt,
                updatedAt: relation.updatedAt,
                employee: relation.employee
                    ? {
                        id: relation.employee.id,
                        name: relation.employee.name,
                        employeeNumber: relation.employee.employeeNumber,
                    }
                    : undefined,
                systemRole: relation.systemRole
                    ? {
                        id: relation.systemRole.id,
                        roleName: relation.systemRole.roleName,
                        roleCode: relation.systemRole.roleCode,
                        system: {
                            id: relation.systemRole.system.id,
                            name: relation.systemRole.system.name,
                        },
                    }
                    : undefined,
            })),
        };
    }
};
exports.EmployeeSystemRoleApplicationService = EmployeeSystemRoleApplicationService;
exports.EmployeeSystemRoleApplicationService = EmployeeSystemRoleApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_system_role_management_context_service_1.EmployeeSystemRoleManagementContextService !== "undefined" && employee_system_role_management_context_service_1.EmployeeSystemRoleManagementContextService) === "function" ? _a : Object])
], EmployeeSystemRoleApplicationService);


/***/ }),

/***/ "./src/modules/application/admin/employee/services/employee-token-application.service.ts":
/*!***********************************************************************************************!*\
  !*** ./src/modules/application/admin/employee/services/employee-token-application.service.ts ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeTokenApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_token_management_context_service_1 = __webpack_require__(/*! ../../../../context/employee-management/employee-token-management-context.service */ "./src/modules/context/employee-management/employee-token-management-context.service.ts");
const token_service_1 = __webpack_require__(/*! ../../../../domain/token/token.service */ "./src/modules/domain/token/token.service.ts");
let EmployeeTokenApplicationService = class EmployeeTokenApplicationService {
    constructor(employeeTokenManagementContext, domainTokenService) {
        this.employeeTokenManagementContext = employeeTokenManagementContext;
        this.domainTokenService = domainTokenService;
    }
    async Î™®Îì†_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå() {
        const relations = await this.employeeTokenManagementContext.Î™®Îì†_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            tokenId: relation.tokenId,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                    email: relation.employee.email,
                }
                : undefined,
            token: relation.token
                ? {
                    id: relation.token.id,
                    accessToken: relation.token.accessToken,
                    tokenExpiresAt: relation.token.tokenExpiresAt,
                    clientInfo: relation.token.clientInfo,
                    isActive: relation.token.isActive,
                }
                : undefined,
        }));
    }
    async ÏßÅÏõêÎ≥Ñ_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId) {
        const relations = await this.employeeTokenManagementContext.ÏßÅÏõêÎ≥Ñ_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            tokenId: relation.tokenId,
            token: relation.token
                ? {
                    id: relation.token.id,
                    accessToken: relation.token.accessToken,
                    tokenExpiresAt: relation.token.tokenExpiresAt,
                    clientInfo: relation.token.clientInfo,
                    isActive: relation.token.isActive,
                }
                : undefined,
        }));
    }
    async ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(tokenId) {
        const relations = await this.employeeTokenManagementContext.ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(tokenId);
        return relations.map((relation) => ({
            id: relation.id,
            employeeId: relation.employeeId,
            tokenId: relation.tokenId,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                    email: relation.employee.email,
                }
                : undefined,
        }));
    }
    async ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(id) {
        const relation = await this.employeeTokenManagementContext.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return {
            id: relation.id,
            employeeId: relation.employeeId,
            tokenId: relation.tokenId,
            employee: relation.employee
                ? {
                    id: relation.employee.id,
                    name: relation.employee.name,
                    employeeNumber: relation.employee.employeeNumber,
                    email: relation.employee.email,
                }
                : undefined,
            token: relation.token
                ? {
                    id: relation.token.id,
                    accessToken: relation.token.accessToken,
                    tokenExpiresAt: relation.token.tokenExpiresAt,
                    clientInfo: relation.token.clientInfo,
                    isActive: relation.token.isActive,
                }
                : undefined,
        };
    }
    async ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(dto) {
        const relation = await this.employeeTokenManagementContext.ÏßÅÏõêÍ≥º_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(dto.employeeId, dto.tokenId, {});
        return this.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(relation.id);
    }
    async ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏàòÏ†ï(id, dto) {
        const existingRelation = await this.employeeTokenManagementContext.IDÎ°ú_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!existingRelation) {
            throw new common_1.NotFoundException('ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        if (dto.tokenId) {
            await this.employeeTokenManagementContext.ÏßÅÏõêÍ≥º_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(existingRelation.employeeId, dto.tokenId, {});
            await this.employeeTokenManagementContext.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id);
            const newRelation = await this.employeeTokenManagementContext.ÏßÅÏõêÍ≥º_ÌÜ†ÌÅ∞Ïùò_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(existingRelation.employeeId, dto.tokenId);
            return this.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(newRelation.id);
        }
        return this.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉÅÏÑ∏_Ï°∞Ìöå(id);
    }
    async ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id) {
        const relation = await this.employeeTokenManagementContext.IDÎ°ú_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id);
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.employeeTokenManagementContext.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id);
        return { message: 'ÏßÅÏõê ÌÜ†ÌÅ∞ Í¥ÄÍ≥ÑÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.' };
    }
    async ÌÜ†ÌÅ∞_Í¥ÄÎ†®_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(tokenIds) {
        return await this.employeeTokenManagementContext.ÌÜ†ÌÅ∞_IDÎì§Î°ú_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(tokenIds);
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_ÌÜ†ÌÅ∞_ÏÇ≠Ï†ú(employeeId) {
        const existingTokens = await this.employeeTokenManagementContext.ÏßÅÏõêÎ≥Ñ_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
        const deletedCount = existingTokens.length;
        await this.employeeTokenManagementContext.ÏßÅÏõêÏùò_Î™®Îì†_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId);
        return { deletedCount };
    }
    async ÏßÅÏõêÎ≥Ñ_Í∑∏Î£πÌïëÎêú_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId) {
        let relations;
        if (employeeId) {
            relations = await this.employeeTokenManagementContext.ÏßÅÏõêÎ≥Ñ_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId);
        }
        else {
            relations = await this.employeeTokenManagementContext.Î™®Îì†_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå();
        }
        const employeeGroups = new Map();
        relations.forEach((relation) => {
            const employeeId = relation.employeeId;
            if (!employeeGroups.has(employeeId)) {
                const firstTokenCreatedAt = relation.token?.createdAt || new Date();
                const lastTokenActivity = relation.token?.lastAccess || relation.token?.updatedAt || new Date();
                employeeGroups.set(employeeId, {
                    employeeId: relation.employeeId,
                    employeeName: relation.employee?.name || '',
                    employeeNumber: relation.employee?.employeeNumber || '',
                    employeeEmail: relation.employee?.email || '',
                    tokens: [],
                    totalTokens: 0,
                    activeTokens: 0,
                    firstTokenCreatedAt,
                    lastTokenActivity,
                });
            }
            const group = employeeGroups.get(employeeId);
            if (relation.token?.createdAt && relation.token.createdAt < group.firstTokenCreatedAt) {
                group.firstTokenCreatedAt = relation.token.createdAt;
            }
            const tokenActivity = relation.token?.lastAccess || relation.token?.updatedAt;
            if (tokenActivity && tokenActivity > group.lastTokenActivity) {
                group.lastTokenActivity = tokenActivity;
            }
            if (relation.token) {
                const accessToken = relation.token.accessToken;
                const maskedToken = accessToken.length > 16
                    ? `${accessToken.substring(0, 8)}...${accessToken.substring(accessToken.length - 8)}`
                    : '********';
                const tokenDto = {
                    id: relation.token.id,
                    accessTokenMasked: maskedToken,
                    tokenExpiresAt: relation.token.tokenExpiresAt,
                    clientInfo: relation.token.clientInfo,
                    isActive: relation.token.isActive,
                    tokenCreatedAt: relation.token.createdAt,
                    lastAccess: relation.token.lastAccess,
                };
                group.tokens.push(tokenDto);
                group.totalTokens++;
                if (relation.token.isActive) {
                    group.activeTokens++;
                }
            }
        });
        const employees = Array.from(employeeGroups.values());
        return {
            employees,
            totalEmployees: employees.length,
            totalRelations: relations.length,
        };
    }
    async ÌÜ†ÌÅ∞_Ï°∞Ìöå(tokenId) {
        const token = await this.domainTokenService.findOne({
            where: { id: tokenId },
        });
        if (!token) {
            throw new common_1.NotFoundException('ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return {
            id: token.id,
            accessToken: token.accessToken,
            tokenExpiresAt: token.tokenExpiresAt,
            refreshToken: token.refreshToken,
            refreshTokenExpiresAt: token.refreshTokenExpiresAt,
            clientInfo: token.clientInfo,
            ipAddress: token.ipAddress,
            lastAccess: token.lastAccess,
            isActive: token.isActive,
            createdAt: token.createdAt,
            updatedAt: token.updatedAt,
        };
    }
    async ÌÜ†ÌÅ∞_ÏóîÌã∞Ìã∞_ÏÇ≠Ï†ú(tokenId) {
        const token = await this.domainTokenService.findOne({
            where: { id: tokenId },
        });
        if (!token) {
            throw new common_1.NotFoundException('ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const relations = await this.employeeTokenManagementContext.ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(tokenId);
        let deletedRelationsCount = 0;
        for (const relation of relations) {
            await this.employeeTokenManagementContext.ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(relation.id);
            deletedRelationsCount++;
        }
        await this.domainTokenService.delete(tokenId);
        return {
            message: 'ÌÜ†ÌÅ∞ ÏóîÌã∞Ìã∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.',
            deletedRelationsCount,
        };
    }
};
exports.EmployeeTokenApplicationService = EmployeeTokenApplicationService;
exports.EmployeeTokenApplicationService = EmployeeTokenApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_token_management_context_service_1.EmployeeTokenManagementContextService !== "undefined" && employee_token_management_context_service_1.EmployeeTokenManagementContextService) === "function" ? _a : Object, typeof (_b = typeof token_service_1.DomainTokenService !== "undefined" && token_service_1.DomainTokenService) === "function" ? _b : Object])
], EmployeeTokenApplicationService);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/create-log.dto.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/application/admin/log/dto/create-log.dto.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateLogDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateLogDto {
}
exports.CreateLogDto = CreateLogDto;
__decorate([
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateLogDto.prototype, "method", void 0);
__decorate([
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateLogDto.prototype, "url", void 0);
__decorate([
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Object)
], CreateLogDto.prototype, "params", void 0);
__decorate([
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Object)
], CreateLogDto.prototype, "query", void 0);
__decorate([
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Object)
], CreateLogDto.prototype, "body", void 0);
__decorate([
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateLogDto.prototype, "ip", void 0);
__decorate([
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateLogDto.prototype, "host", void 0);
__decorate([
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateLogDto.prototype, "userAgent", void 0);
__decorate([
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CreateLogDto.prototype, "system", void 0);
__decorate([
    (0, class_validator_1.IsDate)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], CreateLogDto.prototype, "requestTimestamp", void 0);
__decorate([
    (0, class_validator_1.IsDate)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], CreateLogDto.prototype, "responseTimestamp", void 0);
__decorate([
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], CreateLogDto.prototype, "responseTime", void 0);
__decorate([
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], CreateLogDto.prototype, "statusCode", void 0);
__decorate([
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Object)
], CreateLogDto.prototype, "response", void 0);
__decorate([
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Object)
], CreateLogDto.prototype, "error", void 0);
__decorate([
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], CreateLogDto.prototype, "isError", void 0);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/index.ts":
/*!********************************************************!*\
  !*** ./src/modules/application/admin/log/dto/index.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./create-log.dto */ "./src/modules/application/admin/log/dto/create-log.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./log-filter.dto */ "./src/modules/application/admin/log/dto/log-filter.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./log-response.dto */ "./src/modules/application/admin/log/dto/log-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./logs-response.dto */ "./src/modules/application/admin/log/dto/logs-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./time-statistics-response.dto */ "./src/modules/application/admin/log/dto/time-statistics-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./time-statistics-filter.dto */ "./src/modules/application/admin/log/dto/time-statistics-filter.dto.ts"), exports);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/log-filter.dto.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/application/admin/log/dto/log-filter.dto.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogFilterDto = exports.SortDirection = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
var SortDirection;
(function (SortDirection) {
    SortDirection["ASC"] = "ASC";
    SortDirection["DESC"] = "DESC";
})(SortDirection || (exports.SortDirection = SortDirection = {}));
class LogFilterDto {
    constructor() {
        this.page = 1;
        this.limit = 10;
        this.errorsOnly = false;
        this.sortBy = 'requestTimestamp';
        this.sortDirection = SortDirection.DESC;
    }
}
exports.LogFilterDto = LogFilterDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌéòÏù¥ÏßÄ Î≤àÌò∏', default: 1 }),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], LogFilterDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌéòÏù¥ÏßÄÎãπ Ìï≠Î™© Ïàò', default: 10 }),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], LogFilterDto.prototype, "limit", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏûë ÎÇ†Ïßú' }),
    (0, class_transformer_1.Type)(() => Date),
    (0, class_validator_1.IsDate)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], LogFilterDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï¢ÖÎ£å ÎÇ†Ïßú' }),
    (0, class_transformer_1.Type)(() => Date),
    (0, class_validator_1.IsDate)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], LogFilterDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'HTTP Î©îÏÑúÎìú' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "method", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'URL Í≤ΩÎ°ú' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "url", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'HTTP ÏÉÅÌÉú ÏΩîÎìú' }),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], LogFilterDto.prototype, "statusCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìò∏Ïä§Ìä∏' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "host", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'IP Ï£ºÏÜå' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "ip", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Íµ¨Î∂ÑÏûê' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "system", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏóêÎü¨Îßå Ï°∞Ìöå (ÏÉÅÌÉúÏΩîÎìú >= 400)', default: false }),
    (0, class_transformer_1.Type)(() => Boolean),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], LogFilterDto.prototype, "errorsOnly", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ï†ïÎ†¨ Í∏∞Ï§Ä',
        default: 'requestTimestamp',
        enum: ['requestTimestamp', 'method', 'url', 'statusCode', 'responseTime', 'ip', 'host'],
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "sortBy", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ï†ïÎ†¨ Î∞©Ìñ•',
        default: SortDirection.DESC,
        enum: SortDirection,
    }),
    (0, class_validator_1.IsEnum)(SortDirection),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LogFilterDto.prototype, "sortDirection", void 0);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/log-response.dto.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/application/admin/log/dto/log-response.dto.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class LogResponseDto {
}
exports.LogResponseDto = LogResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î°úÍ∑∏ ID' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏöîÏ≤≠ ÏãúÍ∞Ñ' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], LogResponseDto.prototype, "requestTimestamp", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏùëÎãµ ÏôÑÎ£å ÏãúÍ∞Ñ' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], LogResponseDto.prototype, "responseTimestamp", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'HTTP Î©îÏÑúÎìú' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "method", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'URL Í≤ΩÎ°ú' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "url", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏöîÏ≤≠ ÌååÎùºÎØ∏ÌÑ∞' }),
    __metadata("design:type", typeof (_c = typeof Record !== "undefined" && Record) === "function" ? _c : Object)
], LogResponseDto.prototype, "params", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞' }),
    __metadata("design:type", typeof (_d = typeof Record !== "undefined" && Record) === "function" ? _d : Object)
], LogResponseDto.prototype, "query", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏöîÏ≤≠ Î≥∏Î¨∏' }),
    __metadata("design:type", Object)
], LogResponseDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'HTTP ÏÉÅÌÉú ÏΩîÎìú' }),
    __metadata("design:type", Number)
], LogResponseDto.prototype, "statusCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏùëÎãµ ÏãúÍ∞Ñ (Î∞ÄÎ¶¨Ï¥à)' }),
    __metadata("design:type", Number)
], LogResponseDto.prototype, "responseTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏùëÎãµ Î≥∏Î¨∏' }),
    __metadata("design:type", Object)
], LogResponseDto.prototype, "response", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏóêÎü¨ Ï†ïÎ≥¥' }),
    __metadata("design:type", Object)
], LogResponseDto.prototype, "error", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'IP Ï£ºÏÜå' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "ip", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìò∏Ïä§Ìä∏' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "host", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê ÏóêÏù¥Ï†ÑÌä∏' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "userAgent", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Íµ¨Î∂ÑÏûê' }),
    __metadata("design:type", String)
], LogResponseDto.prototype, "system", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏóêÎü¨ Î∞úÏÉù Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], LogResponseDto.prototype, "isError", void 0);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/logs-response.dto.ts":
/*!********************************************************************!*\
  !*** ./src/modules/application/admin/log/dto/logs-response.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogsResponseDto = exports.TimeStatisticsDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const log_response_dto_1 = __webpack_require__(/*! ./log-response.dto */ "./src/modules/application/admin/log/dto/log-response.dto.ts");
class TimeStatisticsDto {
}
exports.TimeStatisticsDto = TimeStatisticsDto;
class LogsResponseDto {
}
exports.LogsResponseDto = LogsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î°úÍ∑∏ Î™©Î°ù', type: [log_response_dto_1.LogResponseDto] }),
    __metadata("design:type", Array)
], LogsResponseDto.prototype, "logs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Î°úÍ∑∏ Ïàò' }),
    __metadata("design:type", Number)
], LogsResponseDto.prototype, "total", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Î≤àÌò∏' }),
    __metadata("design:type", Number)
], LogsResponseDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌéòÏù¥ÏßÄÎãπ Ìï≠Î™© Ïàò' }),
    __metadata("design:type", Number)
], LogsResponseDto.prototype, "limit", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÌéòÏù¥ÏßÄ Ïàò' }),
    __metadata("design:type", Number)
], LogsResponseDto.prototype, "totalPages", void 0);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/time-statistics-filter.dto.ts":
/*!*****************************************************************************!*\
  !*** ./src/modules/application/admin/log/dto/time-statistics-filter.dto.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TimeStatisticsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class TimeStatisticsFilterDto {
    constructor() {
        this.timeUnit = '1m';
        this.errorsOnly = false;
    }
}
exports.TimeStatisticsFilterDto = TimeStatisticsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏûë ÎÇ†Ïßú', required: true }),
    (0, class_transformer_1.Type)(() => Date),
    (0, class_validator_1.IsDate)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], TimeStatisticsFilterDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¢ÖÎ£å ÎÇ†Ïßú', required: true }),
    (0, class_transformer_1.Type)(() => Date),
    (0, class_validator_1.IsDate)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], TimeStatisticsFilterDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏãúÍ∞Ñ ÌÜµÍ≥Ñ Îã®ÏúÑ (Ïòà: 10m, 2h, 1d)',
        default: '1m',
        example: '10m',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.Matches)(/^\d+[mhd]$/, {
        message: 'timeUnitÏùÄ Ïà´ÏûêÏôÄ Îã®ÏúÑ(m/h/d)Î•º Ìè¨Ìï®Ìïú ÌòïÏãùÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§. Ïòà: 10m, 2h, 1d',
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TimeStatisticsFilterDto.prototype, "timeUnit", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'HTTP Î©îÏÑúÎìú' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TimeStatisticsFilterDto.prototype, "method", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'URL Í≤ΩÎ°ú' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TimeStatisticsFilterDto.prototype, "url", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'HTTP ÏÉÅÌÉú ÏΩîÎìú' }),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], TimeStatisticsFilterDto.prototype, "statusCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìò∏Ïä§Ìä∏' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TimeStatisticsFilterDto.prototype, "host", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'IP Ï£ºÏÜå' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TimeStatisticsFilterDto.prototype, "ip", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Íµ¨Î∂ÑÏûê' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TimeStatisticsFilterDto.prototype, "system", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏóêÎü¨Îßå Ï°∞Ìöå (ÏÉÅÌÉúÏΩîÎìú >= 400)', default: false }),
    (0, class_transformer_1.Type)(() => Boolean),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], TimeStatisticsFilterDto.prototype, "errorsOnly", void 0);


/***/ }),

/***/ "./src/modules/application/admin/log/dto/time-statistics-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/modules/application/admin/log/dto/time-statistics-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TimeStatisticsResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const logs_response_dto_1 = __webpack_require__(/*! ./logs-response.dto */ "./src/modules/application/admin/log/dto/logs-response.dto.ts");
class TimeStatisticsResponseDto {
}
exports.TimeStatisticsResponseDto = TimeStatisticsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏãúÍ∞ÑÎ≥Ñ ÏùëÎãµ Ï¢ÖÎ•òÎ≥Ñ ÌÜµÍ≥Ñ',
        type: [logs_response_dto_1.TimeStatisticsDto],
        example: [{ '2025-11-04 09:00:00': { success: 10, fail: 5 } }],
    }),
    __metadata("design:type", Array)
], TimeStatisticsResponseDto.prototype, "timeStatistics", void 0);


/***/ }),

/***/ "./src/modules/application/admin/log/log-application.service.ts":
/*!**********************************************************************!*\
  !*** ./src/modules/application/admin/log/log-application.service.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const log_management_context_service_1 = __webpack_require__(/*! ../../../context/log-management/log-management-context.service */ "./src/modules/context/log-management/log-management-context.service.ts");
const dto_1 = __webpack_require__(/*! ./dto */ "./src/modules/application/admin/log/dto/index.ts");
let LogApplicationService = class LogApplicationService {
    constructor(Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§) {
        this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§ = Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§;
    }
    async Î°úÍ∑∏ÏÉùÏÑ±(createLogDto) {
        try {
            const log = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î°úÍ∑∏Î•º_ÏÉùÏÑ±ÌïúÎã§(createLogDto);
            return this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log);
        }
        catch (error) {
            throw new Error('Î°úÍ∑∏ ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async Ïó¨Îü¨Î°úÍ∑∏ÏÉùÏÑ±(createLogDtos) {
        try {
            const logs = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Ïó¨Îü¨_Î°úÍ∑∏Î•º_ÏÉùÏÑ±ÌïúÎã§(createLogDtos);
            return logs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log));
        }
        catch (error) {
            throw new Error('Ïó¨Îü¨ Î°úÍ∑∏ ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async Î°úÍ∑∏Î™©Î°ùÏ°∞Ìöå(page = 1, limit = 10) {
        try {
            const result = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î™®Îì†_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(page, limit);
            return {
                logs: result.logs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log)),
                total: result.total,
                page: result.page,
                limit: limit,
                totalPages: result.totalPages,
            };
        }
        catch (error) {
            throw new common_1.NotFoundException('Î°úÍ∑∏ Î™©Î°ù Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async Î°úÍ∑∏ÏÉÅÏÑ∏Ï°∞Ìöå(id) {
        try {
            const log = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î°úÍ∑∏Î•º_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(id);
            if (!log) {
                throw new common_1.NotFoundException('Ìï¥Îãπ Î°úÍ∑∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            return this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log);
        }
        catch (error) {
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.NotFoundException('Î°úÍ∑∏ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async Î°úÍ∑∏ÌïÑÌÑ∞ÎßÅÏ°∞Ìöå(filterDto) {
        try {
            const filterOptions = {
                page: filterDto.page,
                limit: filterDto.limit,
                startDate: filterDto.startDate,
                endDate: filterDto.endDate,
                method: filterDto.method,
                url: filterDto.url,
                statusCode: filterDto.statusCode,
                host: filterDto.host,
                ip: filterDto.ip,
                system: filterDto.system,
                errorsOnly: filterDto.errorsOnly,
                sortBy: filterDto.sortBy,
                sortDirection: filterDto.sortDirection,
            };
            const result = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î°úÍ∑∏Î•º_ÌïÑÌÑ∞ÎßÅÌïòÏó¨_Ï°∞ÌöåÌïúÎã§(filterOptions);
            return {
                logs: result.logs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log)),
                total: result.total,
                page: result.page,
                limit: filterDto.limit || 10,
                totalPages: result.totalPages,
            };
        }
        catch (error) {
            throw new common_1.NotFoundException('Î°úÍ∑∏ ÌïÑÌÑ∞ÎßÅ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÍ∞ÑÎ≥ÑÏùëÎãµÌÜµÍ≥ÑÏ°∞Ìöå(filterDto) {
        try {
            const filterOptions = {
                page: 1,
                limit: 100000,
                startDate: filterDto.startDate,
                endDate: filterDto.endDate,
                method: filterDto.method,
                url: filterDto.url,
                statusCode: filterDto.statusCode,
                host: filterDto.host,
                ip: filterDto.ip,
                system: filterDto.system,
                errorsOnly: filterDto.errorsOnly,
                sortBy: 'requestTimestamp',
                sortDirection: dto_1.SortDirection.ASC,
            };
            const result = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î°úÍ∑∏Î•º_ÌïÑÌÑ∞ÎßÅÌïòÏó¨_Ï°∞ÌöåÌïúÎã§(filterOptions);
            const timeUnit = filterDto.timeUnit || '1m';
            const timeStatistics = this.ÏãúÍ∞ÑÎ≥Ñ_ÏùëÎãµ_ÌÜµÍ≥Ñ_Í≥ÑÏÇ∞(result.allFilteredLogs || [], filterDto.startDate, filterDto.endDate, timeUnit);
            return {
                timeStatistics,
            };
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏãúÍ∞ÑÎ≥Ñ ÏùëÎãµ ÌÜµÍ≥Ñ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏóêÎü¨Î°úÍ∑∏Ï°∞Ìöå() {
        try {
            const errorLogs = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏóêÎü¨_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§();
            return errorLogs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log));
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏóêÎü¨ Î°úÍ∑∏ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÎ≥ÑÎ°úÍ∑∏Ï°∞Ìöå(system) {
        try {
            const systemLogs = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÎ≥Ñ_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(system);
            return systemLogs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log));
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖúÎ≥Ñ Î°úÍ∑∏ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÎäêÎ¶∞ÏöîÏ≤≠Ï°∞Ìöå(minResponseTime = 1000) {
        try {
            const slowLogs = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÎäêÎ¶∞_ÏöîÏ≤≠ÏùÑ_Ï°∞ÌöåÌïúÎã§(minResponseTime);
            return slowLogs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log));
        }
        catch (error) {
            throw new common_1.NotFoundException('ÎäêÎ¶∞ ÏöîÏ≤≠ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async IPÏ£ºÏÜåÎ≥ÑÎ°úÍ∑∏Ï°∞Ìöå(ip) {
        try {
            const ipLogs = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.IPÏ£ºÏÜåÎ≥Ñ_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(ip);
            return ipLogs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log));
        }
        catch (error) {
            throw new common_1.NotFoundException('IPÏ£ºÏÜåÎ≥Ñ Î°úÍ∑∏ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async Î°úÍ∑∏Ïù∏Î°úÍ∑∏Ï°∞Ìöå(days = 7) {
        try {
            const loginLogs = await this.Î°úÍ∑∏Í¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î°úÍ∑∏Ïù∏_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(days);
            return loginLogs.map((log) => this.Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log));
        }
        catch (error) {
            throw new common_1.NotFoundException('Î°úÍ∑∏Ïù∏ Î°úÍ∑∏ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    Î°úÍ∑∏_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(log) {
        return {
            id: log.id,
            requestTimestamp: log.requestTimestamp,
            responseTimestamp: log.responseTimestamp,
            method: log.method,
            url: log.url,
            params: log.params,
            query: log.query,
            body: log.body,
            statusCode: log.statusCode,
            responseTime: log.responseTime,
            response: log.response,
            error: log.error,
            ip: log.ip,
            host: log.host,
            userAgent: log.userAgent,
            system: log.system,
            isError: log.isError,
        };
    }
    ÏãúÍ∞ÑÎ≥Ñ_ÏùëÎãµ_ÌÜµÍ≥Ñ_Í≥ÑÏÇ∞(logs, startDate, endDate, timeUnit = '1m') {
        const timeMap = new Map();
        const validLogs = logs.filter((log) => log.requestTimestamp);
        let minTime;
        let maxTime;
        if (startDate && endDate) {
            minTime = new Date(startDate);
            maxTime = new Date(endDate);
        }
        else if (validLogs.length === 0) {
            return [];
        }
        else {
            const timestamps = validLogs.map((log) => log.requestTimestamp);
            minTime = new Date(Math.min(...timestamps.map((t) => t.getTime())));
            maxTime = new Date(Math.max(...timestamps.map((t) => t.getTime())));
        }
        const parsedTimeUnit = this.ÏãúÍ∞Ñ_Îã®ÏúÑ_ÌååÏã±(timeUnit);
        const allTimeKeys = this.Î™®Îì†_ÏãúÍ∞ÑÎåÄ_ÏÉùÏÑ±(minTime, maxTime, parsedTimeUnit);
        allTimeKeys.forEach((timeKey) => {
            timeMap.set(timeKey, { success: 0, fail: 0 });
        });
        validLogs.forEach((log) => {
            const normalizedDate = this.ÏãúÍ∞Ñ_Ï†ïÍ∑úÌôî(log.requestTimestamp, parsedTimeUnit);
            const timeKey = this.ÏãúÍ∞Ñ_ÌÇ§_ÏÉùÏÑ±(normalizedDate, parsedTimeUnit);
            const stats = timeMap.get(timeKey);
            if (stats) {
                if (this.ÏùëÎãµ_ÏÑ±Í≥µ_Ïó¨Î∂Ä(log)) {
                    stats.success++;
                }
                else {
                    stats.fail++;
                }
            }
        });
        return allTimeKeys.map((time) => {
            const stats = timeMap.get(time);
            return { [time]: stats };
        });
    }
    ÏãúÍ∞Ñ_Îã®ÏúÑ_ÌååÏã±(timeUnit) {
        const match = timeUnit.match(/^(\d+)([mhd])$/);
        if (!match) {
            throw new Error(`ÏûòÎ™ªÎêú ÏãúÍ∞Ñ Îã®ÏúÑ ÌòïÏãùÏûÖÎãàÎã§: ${timeUnit}`);
        }
        return {
            value: parseInt(match[1], 10),
            unit: match[2],
        };
    }
    ÏãúÍ∞Ñ_Ï†ïÍ∑úÌôî(date, parsedTimeUnit) {
        const normalized = new Date(date);
        if (parsedTimeUnit.unit === 'm') {
            normalized.setSeconds(0, 0);
            const normalizedMinutes = Math.floor(normalized.getMinutes() / parsedTimeUnit.value) * parsedTimeUnit.value;
            normalized.setMinutes(normalizedMinutes, 0);
        }
        else if (parsedTimeUnit.unit === 'h') {
            normalized.setMinutes(0, 0, 0);
            const normalizedHours = Math.floor(normalized.getHours() / parsedTimeUnit.value) * parsedTimeUnit.value;
            normalized.setHours(normalizedHours, 0, 0, 0);
        }
        else if (parsedTimeUnit.unit === 'd') {
            normalized.setHours(0, 0, 0, 0);
        }
        return normalized;
    }
    Î™®Îì†_ÏãúÍ∞ÑÎåÄ_ÏÉùÏÑ±(minTime, maxTime, parsedTimeUnit) {
        const timeKeys = [];
        const current = new Date(minTime);
        if (parsedTimeUnit.unit === 'm') {
            current.setSeconds(0, 0);
            const normalizedMinutes = Math.floor(current.getMinutes() / parsedTimeUnit.value) * parsedTimeUnit.value;
            current.setMinutes(normalizedMinutes, 0);
        }
        else if (parsedTimeUnit.unit === 'h') {
            current.setMinutes(0, 0, 0);
            const normalizedHours = Math.floor(current.getHours() / parsedTimeUnit.value) * parsedTimeUnit.value;
            current.setHours(normalizedHours, 0, 0, 0);
        }
        else if (parsedTimeUnit.unit === 'd') {
            current.setHours(0, 0, 0, 0);
        }
        const max = new Date(maxTime);
        if (parsedTimeUnit.unit === 'm') {
            max.setSeconds(0, 0);
        }
        else if (parsedTimeUnit.unit === 'h') {
            max.setMinutes(0, 0, 0);
        }
        else if (parsedTimeUnit.unit === 'd') {
            max.setHours(0, 0, 0, 0);
        }
        while (current <= max) {
            timeKeys.push(this.ÏãúÍ∞Ñ_ÌÇ§_ÏÉùÏÑ±(current, parsedTimeUnit));
            if (parsedTimeUnit.unit === 'm') {
                current.setMinutes(current.getMinutes() + parsedTimeUnit.value);
            }
            else if (parsedTimeUnit.unit === 'h') {
                current.setHours(current.getHours() + parsedTimeUnit.value);
            }
            else if (parsedTimeUnit.unit === 'd') {
                current.setDate(current.getDate() + parsedTimeUnit.value);
            }
        }
        return timeKeys;
    }
    ÏãúÍ∞Ñ_ÌÇ§_ÏÉùÏÑ±(date, parsedTimeUnit) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        if (parsedTimeUnit.unit === 'd') {
            return `${year}-${month}-${day}`;
        }
        else if (parsedTimeUnit.unit === 'h') {
            const hour = String(date.getHours()).padStart(2, '0');
            return `${year}-${month}-${day} ${hour}:00:00`;
        }
        else {
            const hour = String(date.getHours()).padStart(2, '0');
            const minute = String(date.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day} ${hour}:${minute}:00`;
        }
    }
    ÏùëÎãµ_ÏÑ±Í≥µ_Ïó¨Î∂Ä(log) {
        if (log.isError) {
            return false;
        }
        if (log.statusCode !== null && log.statusCode !== undefined) {
            if (log.statusCode >= 200 && log.statusCode < 300) {
                return true;
            }
            if (log.statusCode >= 300 && log.statusCode < 400) {
                return true;
            }
            return false;
        }
        return true;
    }
};
exports.LogApplicationService = LogApplicationService;
exports.LogApplicationService = LogApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof log_management_context_service_1.LogManagementContextService !== "undefined" && log_management_context_service_1.LogManagementContextService) === "function" ? _a : Object])
], LogApplicationService);


/***/ }),

/***/ "./src/modules/application/admin/log/log.controller.ts":
/*!*************************************************************!*\
  !*** ./src/modules/application/admin/log/log.controller.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const log_application_service_1 = __webpack_require__(/*! ./log-application.service */ "./src/modules/application/admin/log/log-application.service.ts");
const dto_1 = __webpack_require__(/*! ./dto */ "./src/modules/application/admin/log/dto/index.ts");
let LogController = class LogController {
    constructor(logApplicationService) {
        this.logApplicationService = logApplicationService;
    }
    async findAll(page = 1, limit = 10) {
        return await this.logApplicationService.Î°úÍ∑∏Î™©Î°ùÏ°∞Ìöå(+page, +limit);
    }
    async findOne(id) {
        return await this.logApplicationService.Î°úÍ∑∏ÏÉÅÏÑ∏Ï°∞Ìöå(id);
    }
    async filter(filterDto) {
        return await this.logApplicationService.Î°úÍ∑∏ÌïÑÌÑ∞ÎßÅÏ°∞Ìöå(filterDto);
    }
    async getTimeStatistics(filterDto) {
        return await this.logApplicationService.ÏãúÍ∞ÑÎ≥ÑÏùëÎãµÌÜµÍ≥ÑÏ°∞Ìöå(filterDto);
    }
};
exports.LogController = LogController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'Î°úÍ∑∏ Î™©Î°ù Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.LogsResponseDto }),
    (0, swagger_1.ApiQuery)({ name: 'page', required: false, description: 'ÌéòÏù¥ÏßÄ Î≤àÌò∏', type: Number }),
    (0, swagger_1.ApiQuery)({ name: 'limit', required: false, description: 'ÌéòÏù¥ÏßÄÎãπ Ìï≠Î™© Ïàò', type: Number }),
    __param(0, (0, common_1.Query)('page')),
    __param(1, (0, common_1.Query)('limit')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Object]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], LogController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'Î°úÍ∑∏ ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.LogResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Î°úÍ∑∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î°úÍ∑∏ ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], LogController.prototype, "findOne", null);
__decorate([
    (0, common_1.Post)('filter'),
    (0, swagger_1.ApiOperation)({ summary: 'Î°úÍ∑∏ ÌïÑÌÑ∞ÎßÅ' }),
    (0, swagger_1.ApiBody)({ type: dto_1.LogFilterDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.LogsResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof dto_1.LogFilterDto !== "undefined" && dto_1.LogFilterDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], LogController.prototype, "filter", null);
__decorate([
    (0, common_1.Post)('time-statistics'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÍ∞ÑÎ≥Ñ ÏùëÎãµ ÌÜµÍ≥Ñ Ï°∞Ìöå' }),
    (0, swagger_1.ApiBody)({ type: dto_1.TimeStatisticsFilterDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.TimeStatisticsResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof dto_1.TimeStatisticsFilterDto !== "undefined" && dto_1.TimeStatisticsFilterDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], LogController.prototype, "getTimeStatistics", null);
exports.LogController = LogController = __decorate([
    (0, swagger_1.ApiTags)('Admin - Î°úÍ∑∏ Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/logs'),
    __metadata("design:paramtypes", [typeof (_a = typeof log_application_service_1.LogApplicationService !== "undefined" && log_application_service_1.LogApplicationService) === "function" ? _a : Object])
], LogController);


/***/ }),

/***/ "./src/modules/application/admin/log/log.module.ts":
/*!*********************************************************!*\
  !*** ./src/modules/application/admin/log/log.module.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const log_controller_1 = __webpack_require__(/*! ./log.controller */ "./src/modules/application/admin/log/log.controller.ts");
const log_application_service_1 = __webpack_require__(/*! ./log-application.service */ "./src/modules/application/admin/log/log-application.service.ts");
const log_management_context_module_1 = __webpack_require__(/*! ../../../context/log-management/log-management-context.module */ "./src/modules/context/log-management/log-management-context.module.ts");
let LogModule = class LogModule {
};
exports.LogModule = LogModule;
exports.LogModule = LogModule = __decorate([
    (0, common_1.Module)({
        imports: [log_management_context_module_1.LogManagementContextModule],
        controllers: [log_controller_1.LogController],
        providers: [log_application_service_1.LogApplicationService],
        exports: [log_application_service_1.LogApplicationService],
    })
], LogModule);


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/department.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/department.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DepartmentHierarchyResponseDto = exports.DepartmentWithEmployeesDto = exports.DepartmentEmployeeInfoDto = exports.UpdateDepartmentActiveStatusRequestDto = exports.UpdateDepartmentParentRequestDto = exports.UpdateDepartmentOrderRequestDto = exports.DepartmentListResponseDto = exports.DepartmentResponseDto = exports.UpdateDepartmentRequestDto = exports.CreateDepartmentRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const department_entity_1 = __webpack_require__(/*! ../../../../domain/department/department.entity */ "./src/modules/domain/department/department.entity.ts");
class CreateDepartmentRequestDto {
}
exports.CreateDepartmentRequestDto = CreateDepartmentRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö', example: 'Í∞úÎ∞úÌåÄ' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentRequestDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú', example: 'DEV_TEAM' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentRequestDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Î∂ÄÏÑú Ïú†Ìòï',
        enum: department_entity_1.DepartmentType,
        example: department_entity_1.DepartmentType.DEPARTMENT,
    }),
    (0, class_validator_1.IsEnum)(department_entity_1.DepartmentType),
    __metadata("design:type", typeof (_a = typeof department_entity_1.DepartmentType !== "undefined" && department_entity_1.DepartmentType) === "function" ? _a : Object)
], CreateDepartmentRequestDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateDepartmentRequestDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú', example: 1 }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], CreateDepartmentRequestDto.prototype, "order", void 0);
class UpdateDepartmentRequestDto {
}
exports.UpdateDepartmentRequestDto = UpdateDepartmentRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑúÎ™Ö', example: 'Í∞úÎ∞úÌåÄ' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentRequestDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑú ÏΩîÎìú', example: 'DEV_TEAM' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentRequestDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Î∂ÄÏÑú Ïú†Ìòï',
        enum: department_entity_1.DepartmentType,
        example: department_entity_1.DepartmentType.DEPARTMENT,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(department_entity_1.DepartmentType),
    __metadata("design:type", typeof (_b = typeof department_entity_1.DepartmentType !== "undefined" && department_entity_1.DepartmentType) === "function" ? _b : Object)
], UpdateDepartmentRequestDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateDepartmentRequestDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú', example: 1 }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], UpdateDepartmentRequestDto.prototype, "order", void 0);
class DepartmentResponseDto {
}
exports.DepartmentResponseDto = DepartmentResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentResponseDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], DepartmentResponseDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ïú†Ìòï', enum: department_entity_1.DepartmentType }),
    __metadata("design:type", typeof (_c = typeof department_entity_1.DepartmentType !== "undefined" && department_entity_1.DepartmentType) === "function" ? _c : Object)
], DepartmentResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID', required: false }),
    __metadata("design:type", String)
], DepartmentResponseDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú' }),
    __metadata("design:type", Number)
], DepartmentResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], DepartmentResponseDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏòàÏô∏Ï≤òÎ¶¨ Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], DepartmentResponseDto.prototype, "isException", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌïòÏúÑ Î∂ÄÏÑú Î™©Î°ù', type: [DepartmentResponseDto], required: false }),
    __metadata("design:type", Array)
], DepartmentResponseDto.prototype, "childDepartments", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], DepartmentResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], DepartmentResponseDto.prototype, "updatedAt", void 0);
class DepartmentListResponseDto {
}
exports.DepartmentListResponseDto = DepartmentListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Î™©Î°ù', type: [DepartmentResponseDto] }),
    __metadata("design:type", Array)
], DepartmentListResponseDto.prototype, "departments", void 0);
class UpdateDepartmentOrderRequestDto {
}
exports.UpdateDepartmentOrderRequestDto = UpdateDepartmentOrderRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉàÎ°úÏö¥ Ï†ïÎ†¨ ÏàúÏÑú', example: 25 }),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], UpdateDepartmentOrderRequestDto.prototype, "newOrder", void 0);
class UpdateDepartmentParentRequestDto {
}
exports.UpdateDepartmentParentRequestDto = UpdateDepartmentParentRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉàÎ°úÏö¥ ÏÉÅÏúÑ Î∂ÄÏÑú ID', example: 'uuid' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateDepartmentParentRequestDto.prototype, "newParentDepartmentId", void 0);
class UpdateDepartmentActiveStatusRequestDto {
}
exports.UpdateDepartmentActiveStatusRequestDto = UpdateDepartmentActiveStatusRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', example: true }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateDepartmentActiveStatusRequestDto.prototype, "isActive", void 0);
class DepartmentEmployeeInfoDto {
}
exports.DepartmentEmployeeInfoDto = DepartmentEmployeeInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº', required: false }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÌôîÎ≤àÌò∏', required: false }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID', required: false }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö', required: false }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID', required: false }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "rankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏âÎ™Ö', required: false }),
    __metadata("design:type", String)
], DepartmentEmployeeInfoDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Îß§ÎãàÏ†Ä Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], DepartmentEmployeeInfoDto.prototype, "isManager", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î©îÌÉÄÎç∞Ïù¥ÌÑ∞', type: 'object', required: false }),
    __metadata("design:type", typeof (_f = typeof Record !== "undefined" && Record) === "function" ? _f : Object)
], DepartmentEmployeeInfoDto.prototype, "metadata", void 0);
class DepartmentWithEmployeesDto {
}
exports.DepartmentWithEmployeesDto = DepartmentWithEmployeesDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ïú†Ìòï', enum: department_entity_1.DepartmentType }),
    __metadata("design:type", typeof (_g = typeof department_entity_1.DepartmentType !== "undefined" && department_entity_1.DepartmentType) === "function" ? _g : Object)
], DepartmentWithEmployeesDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID', required: false }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú' }),
    __metadata("design:type", Number)
], DepartmentWithEmployeesDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], DepartmentWithEmployeesDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏòàÏô∏Ï≤òÎ¶¨ Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], DepartmentWithEmployeesDto.prototype, "isException", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î™©Î°ù', type: [DepartmentEmployeeInfoDto] }),
    __metadata("design:type", Array)
], DepartmentWithEmployeesDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌïòÏúÑ Î∂ÄÏÑú Î™©Î°ù', type: [DepartmentWithEmployeesDto], required: false }),
    __metadata("design:type", Array)
], DepartmentWithEmployeesDto.prototype, "childDepartments", void 0);
class DepartmentHierarchyResponseDto {
}
exports.DepartmentHierarchyResponseDto = DepartmentHierarchyResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞', type: [DepartmentWithEmployeesDto] }),
    __metadata("design:type", Array)
], DepartmentHierarchyResponseDto.prototype, "departments", void 0);


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/employee-assignment.dto.ts":
/*!***********************************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/employee-assignment.dto.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeAssignmentDetailResponseDto = exports.EmployeeAssignmentListResponseDto = exports.EmployeeAssignmentResponseDto = exports.UpdateManagerStatusRequestDto = exports.UpdateEmployeeAssignmentRequestDto = exports.AssignEmployeeRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class AssignEmployeeRequestDto {
}
exports.AssignEmployeeRequestDto = AssignEmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], AssignEmployeeRequestDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], AssignEmployeeRequestDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], AssignEmployeeRequestDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä', example: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], AssignEmployeeRequestDto.prototype, "isManager", void 0);
class UpdateEmployeeAssignmentRequestDto {
}
exports.UpdateEmployeeAssignmentRequestDto = UpdateEmployeeAssignmentRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑú ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeAssignmentRequestDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±Ö ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeAssignmentRequestDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä', example: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateEmployeeAssignmentRequestDto.prototype, "isManager", void 0);
class UpdateManagerStatusRequestDto {
}
exports.UpdateManagerStatusRequestDto = UpdateManagerStatusRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä', example: true }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateManagerStatusRequestDto.prototype, "isManager", void 0);
class EmployeeAssignmentResponseDto {
}
exports.EmployeeAssignmentResponseDto = EmployeeAssignmentResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∞∞Ïπò ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentResponseDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentResponseDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], EmployeeAssignmentResponseDto.prototype, "isManager", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeAssignmentResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeAssignmentResponseDto.prototype, "updatedAt", void 0);
class EmployeeAssignmentListResponseDto {
}
exports.EmployeeAssignmentListResponseDto = EmployeeAssignmentListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∞∞Ïπò Î™©Î°ù', type: [EmployeeAssignmentResponseDto] }),
    __metadata("design:type", Array)
], EmployeeAssignmentListResponseDto.prototype, "assignments", void 0);
class EmployeeAssignmentDetailResponseDto {
}
exports.EmployeeAssignmentDetailResponseDto = EmployeeAssignmentDetailResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∞∞Ïπò ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ≤àÌò∏' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID', required: false }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "rankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏âÎ™Ö', required: false }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ÏΩîÎìú', required: false }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailResponseDto.prototype, "rankCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], EmployeeAssignmentDetailResponseDto.prototype, "isManager", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], EmployeeAssignmentDetailResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], EmployeeAssignmentDetailResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/employee-rank-history.dto.ts":
/*!*************************************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/employee-rank-history.dto.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeRankHistoryResponseDto = exports.PromoteEmployeeRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class PromoteEmployeeRequestDto {
}
exports.PromoteEmployeeRequestDto = PromoteEmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉàÎ°úÏö¥ ÏßÅÍ∏â ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], PromoteEmployeeRequestDto.prototype, "rankId", void 0);
class EmployeeRankHistoryResponseDto {
}
exports.EmployeeRankHistoryResponseDto = EmployeeRankHistoryResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î†• ID' }),
    __metadata("design:type", String)
], EmployeeRankHistoryResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeRankHistoryResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID' }),
    __metadata("design:type", String)
], EmployeeRankHistoryResponseDto.prototype, "rankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeRankHistoryResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeRankHistoryResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/employee.dto.ts":
/*!************************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/employee.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BulkUpdateResultDto = exports.BulkUpdateStatusRequestDto = exports.BulkUpdateRankRequestDto = exports.BulkUpdatePositionRequestDto = exports.BulkUpdateTeamRequestDto = exports.BulkUpdateDepartmentRequestDto = exports.EmployeeDetailListResponseDto = exports.EmployeeDetailInfoDto = exports.NextEmployeeNumberResponseDto = exports.EmployeeListResponseDto = exports.AdminEmployeeResponseDto = exports.EmployeeAssignmentDetailDto = exports.UpdateEmployeeRequestDto = exports.CreateEmployeeRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const enums_1 = __webpack_require__(/*! ../../../../../../libs/common/enums */ "./libs/common/enums/index.ts");
const department_entity_1 = __webpack_require__(/*! ../../../../domain/department/department.entity */ "./src/modules/domain/department/department.entity.ts");
class CreateEmployeeRequestDto {
}
exports.CreateEmployeeRequestDto = CreateEmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à', example: '25001' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î¶Ñ', example: 'ÌôçÍ∏∏Îèô' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº', example: 'hong@company.com' }),
    (0, class_validator_1.IsEmail)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ÑÌôîÎ≤àÌò∏', example: '010-1234-5678' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉùÎÖÑÏõîÏùº', example: '1990-01-01' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÑ±Î≥Ñ',
        enum: enums_1.Gender,
        example: enums_1.Gender.Male,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(enums_1.Gender),
    __metadata("design:type", typeof (_a = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _a : Object)
], CreateEmployeeRequestDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº', example: '2023-01-01' }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌòÑÏû¨ ÏßÅÍ∏â ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "currentRankId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑú ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±Ö ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateEmployeeRequestDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä', default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateEmployeeRequestDto.prototype, "isManager", void 0);
class UpdateEmployeeRequestDto {
}
exports.UpdateEmployeeRequestDto = UpdateEmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÇ¨Î≤à', example: '25001' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïù¥Î¶Ñ', example: 'ÌôçÍ∏∏Îèô' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïù¥Î©îÏùº', example: 'hong@company.com' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEmail)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ÑÌôîÎ≤àÌò∏', example: '010-1234-5678' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉùÎÖÑÏõîÏùº', example: '1990-01-01' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÑ±Î≥Ñ',
        enum: enums_1.Gender,
        example: enums_1.Gender.Male,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(enums_1.Gender),
    __metadata("design:type", typeof (_b = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _b : Object)
], UpdateEmployeeRequestDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏûÖÏÇ¨Ïùº', example: '2023-01-01' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ïû¨ÏßÅ ÏÉÅÌÉú',
        enum: enums_1.EmployeeStatus,
        example: enums_1.EmployeeStatus.Active,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(enums_1.EmployeeStatus),
    __metadata("design:type", typeof (_c = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _c : Object)
], UpdateEmployeeRequestDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌòÑÏû¨ ÏßÅÍ∏â ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "currentRankId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìá¥ÏÇ¨Ïùº', example: '2024-12-31' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "terminationDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑú ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±Ö ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateEmployeeRequestDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä', default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateEmployeeRequestDto.prototype, "isManager", void 0);
class EmployeeAssignmentDetailDto {
}
exports.EmployeeAssignmentDetailDto = EmployeeAssignmentDetailDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∞∞Ïπò ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÌÉÄÏûÖ', enum: department_entity_1.DepartmentType }),
    __metadata("design:type", typeof (_d = typeof department_entity_1.DepartmentType !== "undefined" && department_entity_1.DepartmentType) === "function" ? _d : Object)
], EmployeeAssignmentDetailDto.prototype, "departmentType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú' }),
    __metadata("design:type", String)
], EmployeeAssignmentDetailDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], EmployeeAssignmentDetailDto.prototype, "isManager", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], EmployeeAssignmentDetailDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], EmployeeAssignmentDetailDto.prototype, "updatedAt", void 0);
class AdminEmployeeResponseDto {
}
exports.AdminEmployeeResponseDto = AdminEmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], AdminEmployeeResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], AdminEmployeeResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], AdminEmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], AdminEmployeeResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÌôîÎ≤àÌò∏', required: false }),
    __metadata("design:type", String)
], AdminEmployeeResponseDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÎÖÑÏõîÏùº', required: false }),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], AdminEmployeeResponseDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÑ±Î≥Ñ', enum: enums_1.Gender, required: false }),
    __metadata("design:type", typeof (_h = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _h : Object)
], AdminEmployeeResponseDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº' }),
    __metadata("design:type", typeof (_j = typeof Date !== "undefined" && Date) === "function" ? _j : Object)
], AdminEmployeeResponseDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïû¨ÏßÅ ÏÉÅÌÉú', enum: enums_1.EmployeeStatus }),
    __metadata("design:type", typeof (_k = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _k : Object)
], AdminEmployeeResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌòÑÏû¨ ÏßÅÍ∏â ID', required: false }),
    __metadata("design:type", String)
], AdminEmployeeResponseDto.prototype, "currentRankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìá¥ÏÇ¨Ïùº', required: false }),
    __metadata("design:type", typeof (_l = typeof Date !== "undefined" && Date) === "function" ? _l : Object)
], AdminEmployeeResponseDto.prototype, "terminationDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î©îÌÉÄÎç∞Ïù¥ÌÑ∞', type: 'object', required: false }),
    __metadata("design:type", typeof (_m = typeof Record !== "undefined" && Record) === "function" ? _m : Object)
], AdminEmployeeResponseDto.prototype, "metadata", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÑ§Ï†ï Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], AdminEmployeeResponseDto.prototype, "isInitialPasswordSet", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_o = typeof Date !== "undefined" && Date) === "function" ? _o : Object)
], AdminEmployeeResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_p = typeof Date !== "undefined" && Date) === "function" ? _p : Object)
], AdminEmployeeResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'DEPARTMENT ÌÉÄÏûÖ Î∞∞Ïπò Ï†ïÎ≥¥ (ÌïòÎÇò)',
        type: EmployeeAssignmentDetailDto,
    }),
    __metadata("design:type", EmployeeAssignmentDetailDto)
], AdminEmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'TEAM ÌÉÄÏûÖ Î∞∞Ïπò Ï†ïÎ≥¥ Î™©Î°ù (Ïó¨Îü¨ Í∞ú)',
        type: [EmployeeAssignmentDetailDto],
    }),
    __metadata("design:type", Array)
], AdminEmployeeResponseDto.prototype, "teams", void 0);
class EmployeeListResponseDto {
}
exports.EmployeeListResponseDto = EmployeeListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î™©Î°ù', type: [AdminEmployeeResponseDto] }),
    __metadata("design:type", Array)
], EmployeeListResponseDto.prototype, "employees", void 0);
class NextEmployeeNumberResponseDto {
}
exports.NextEmployeeNumberResponseDto = NextEmployeeNumberResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Îã§Ïùå ÏßÅÏõêÎ≤àÌò∏',
        example: '25001',
        examples: {
            '2025ÎÖÑ Ï≤´ ÏßÅÏõê': { value: '25001' },
            '2025ÎÖÑ Îã§ÏÑØÎ≤àÏß∏ ÏßÅÏõê': { value: '25005' },
            '2024ÎÖÑ ÎßàÏßÄÎßâ ÏßÅÏõê': { value: '24999' },
        },
    }),
    __metadata("design:type", String)
], NextEmployeeNumberResponseDto.prototype, "nextEmployeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í∏∞Ï§Ä Ïó∞ÎèÑ', example: 2025 }),
    __metadata("design:type", Number)
], NextEmployeeNumberResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìï¥Îãπ Ïó∞ÎèÑ ÏßÅÏõê Ïàò', example: 4 }),
    __metadata("design:type", Number)
], NextEmployeeNumberResponseDto.prototype, "currentCount", void 0);
class EmployeeDetailInfoDto {
}
exports.EmployeeDetailInfoDto = EmployeeDetailInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeDetailInfoDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeDetailInfoDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], EmployeeDetailInfoDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], EmployeeDetailInfoDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÌôîÎ≤àÌò∏', required: false }),
    __metadata("design:type", String)
], EmployeeDetailInfoDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÎÖÑÏõîÏùº', required: false }),
    __metadata("design:type", typeof (_q = typeof Date !== "undefined" && Date) === "function" ? _q : Object)
], EmployeeDetailInfoDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÑ±Î≥Ñ', enum: enums_1.Gender, required: false }),
    __metadata("design:type", typeof (_r = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _r : Object)
], EmployeeDetailInfoDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº' }),
    __metadata("design:type", typeof (_s = typeof Date !== "undefined" && Date) === "function" ? _s : Object)
], EmployeeDetailInfoDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïû¨ÏßÅ ÏÉÅÌÉú', enum: enums_1.EmployeeStatus }),
    __metadata("design:type", typeof (_t = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _t : Object)
], EmployeeDetailInfoDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌòÑÏû¨ ÏßÅÍ∏â ID', required: false }),
    __metadata("design:type", String)
], EmployeeDetailInfoDto.prototype, "currentRankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìá¥ÏÇ¨Ïùº', required: false }),
    __metadata("design:type", typeof (_u = typeof Date !== "undefined" && Date) === "function" ? _u : Object)
], EmployeeDetailInfoDto.prototype, "terminationDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î©îÌÉÄÎç∞Ïù¥ÌÑ∞', type: 'object', required: false }),
    __metadata("design:type", typeof (_v = typeof Record !== "undefined" && Record) === "function" ? _v : Object)
], EmployeeDetailInfoDto.prototype, "metadata", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÑ§Ï†ï Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], EmployeeDetailInfoDto.prototype, "isInitialPasswordSet", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_w = typeof Date !== "undefined" && Date) === "function" ? _w : Object)
], EmployeeDetailInfoDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_x = typeof Date !== "undefined" && Date) === "function" ? _x : Object)
], EmployeeDetailInfoDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ï†ïÎ≥¥ Î™©Î°ù', type: 'array', items: { type: 'object' }, required: false }),
    __metadata("design:type", Array)
], EmployeeDetailInfoDto.prototype, "departments", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â Ï†ïÎ≥¥', required: false }),
    __metadata("design:type", Object)
], EmployeeDetailInfoDto.prototype, "rank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù∏Ï¶ù ÌÜ†ÌÅ∞ Î™©Î°ù', type: 'array', items: { type: 'object' }, required: false }),
    __metadata("design:type", Array)
], EmployeeDetailInfoDto.prototype, "tokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ Î™©Î°ù', type: 'array', items: { type: 'object' }, required: false }),
    __metadata("design:type", Array)
], EmployeeDetailInfoDto.prototype, "fcmTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖúÎ≥Ñ Ïó≠Ìï† Î™©Î°ù', type: 'array', items: { type: 'object' }, required: false }),
    __metadata("design:type", Array)
], EmployeeDetailInfoDto.prototype, "systemRoles", void 0);
class EmployeeDetailListResponseDto {
}
exports.EmployeeDetailListResponseDto = EmployeeDetailListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ÏÉÅÏÑ∏ Î™©Î°ù', type: [EmployeeDetailInfoDto] }),
    __metadata("design:type", Array)
], EmployeeDetailListResponseDto.prototype, "employees", void 0);
class BulkUpdateDepartmentRequestDto {
}
exports.BulkUpdateDepartmentRequestDto = BulkUpdateDepartmentRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkUpdateDepartmentRequestDto.prototype, "employeeIds", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î≥ÄÍ≤ΩÌï† Î∂ÄÏÑú ID (DEPARTMENT ÌÉÄÏûÖÎßå ÌóàÏö©)' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], BulkUpdateDepartmentRequestDto.prototype, "departmentId", void 0);
class BulkUpdateTeamRequestDto {
}
exports.BulkUpdateTeamRequestDto = BulkUpdateTeamRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkUpdateTeamRequestDto.prototype, "employeeIds", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∞∞ÏπòÌï† ÌåÄ ID (TEAM ÌÉÄÏûÖÎßå ÌóàÏö©)' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], BulkUpdateTeamRequestDto.prototype, "teamId", void 0);
class BulkUpdatePositionRequestDto {
}
exports.BulkUpdatePositionRequestDto = BulkUpdatePositionRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkUpdatePositionRequestDto.prototype, "employeeIds", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î≥ÄÍ≤ΩÌï† ÏßÅÏ±Ö ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], BulkUpdatePositionRequestDto.prototype, "positionId", void 0);
class BulkUpdateRankRequestDto {
}
exports.BulkUpdateRankRequestDto = BulkUpdateRankRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkUpdateRankRequestDto.prototype, "employeeIds", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î≥ÄÍ≤ΩÌï† ÏßÅÍ∏â ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], BulkUpdateRankRequestDto.prototype, "rankId", void 0);
class BulkUpdateStatusRequestDto {
}
exports.BulkUpdateStatusRequestDto = BulkUpdateStatusRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkUpdateStatusRequestDto.prototype, "employeeIds", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î≥ÄÍ≤ΩÌï† Ïû¨ÏßÅÏÉÅÌÉú', enum: enums_1.EmployeeStatus }),
    (0, class_validator_1.IsEnum)(enums_1.EmployeeStatus),
    __metadata("design:type", typeof (_y = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _y : Object)
], BulkUpdateStatusRequestDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìá¥ÏÇ¨Ïùº (Ïû¨ÏßÅÏÉÅÌÉúÍ∞Ä Ìá¥ÏÇ¨Ïù∏ Í≤ΩÏö∞)', example: '2024-12-31' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], BulkUpdateStatusRequestDto.prototype, "terminationDate", void 0);
class BulkUpdateResultDto {
}
exports.BulkUpdateResultDto = BulkUpdateResultDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÑ±Í≥µÌïú ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], BulkUpdateResultDto.prototype, "successCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïã§Ìå®Ìïú ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], BulkUpdateResultDto.prototype, "failCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÑ±Í≥µÌïú ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    __metadata("design:type", Array)
], BulkUpdateResultDto.prototype, "successIds", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïã§Ìå®Ìïú ÏßÅÏõê ID Î™©Î°ù', type: [String] }),
    __metadata("design:type", Array)
], BulkUpdateResultDto.prototype, "failIds", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏóêÎü¨ Î©îÏãúÏßÄ Î™©Î°ù' }),
    __metadata("design:type", Array)
], BulkUpdateResultDto.prototype, "errors", void 0);


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/index.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/index.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeRankHistoryResponseDto = exports.PromoteEmployeeRequestDto = exports.EmployeeAssignmentDetailResponseDto = exports.EmployeeAssignmentListResponseDto = exports.EmployeeAssignmentResponseDto = exports.UpdateManagerStatusRequestDto = exports.UpdateEmployeeAssignmentRequestDto = exports.AssignEmployeeRequestDto = exports.RankResponseDto = exports.UpdateRankRequestDto = exports.CreateRankRequestDto = exports.PositionResponseDto = exports.UpdatePositionRequestDto = exports.CreatePositionRequestDto = exports.BulkUpdateResultDto = exports.BulkUpdateStatusRequestDto = exports.BulkUpdateRankRequestDto = exports.BulkUpdatePositionRequestDto = exports.BulkUpdateTeamRequestDto = exports.BulkUpdateDepartmentRequestDto = exports.EmployeeAssignmentDetailDto = exports.EmployeeDetailListResponseDto = exports.EmployeeDetailInfoDto = exports.NextEmployeeNumberResponseDto = exports.EmployeeListResponseDto = exports.AdminEmployeeResponseDto = exports.UpdateEmployeeRequestDto = exports.CreateEmployeeRequestDto = exports.DepartmentEmployeeInfoDto = exports.DepartmentWithEmployeesDto = exports.DepartmentHierarchyResponseDto = exports.UpdateDepartmentActiveStatusRequestDto = exports.UpdateDepartmentParentRequestDto = exports.UpdateDepartmentOrderRequestDto = exports.DepartmentListResponseDto = exports.DepartmentResponseDto = exports.UpdateDepartmentRequestDto = exports.CreateDepartmentRequestDto = void 0;
var department_dto_1 = __webpack_require__(/*! ./department.dto */ "./src/modules/application/admin/organization/dto/department.dto.ts");
Object.defineProperty(exports, "CreateDepartmentRequestDto", ({ enumerable: true, get: function () { return department_dto_1.CreateDepartmentRequestDto; } }));
Object.defineProperty(exports, "UpdateDepartmentRequestDto", ({ enumerable: true, get: function () { return department_dto_1.UpdateDepartmentRequestDto; } }));
Object.defineProperty(exports, "DepartmentResponseDto", ({ enumerable: true, get: function () { return department_dto_1.DepartmentResponseDto; } }));
Object.defineProperty(exports, "DepartmentListResponseDto", ({ enumerable: true, get: function () { return department_dto_1.DepartmentListResponseDto; } }));
Object.defineProperty(exports, "UpdateDepartmentOrderRequestDto", ({ enumerable: true, get: function () { return department_dto_1.UpdateDepartmentOrderRequestDto; } }));
Object.defineProperty(exports, "UpdateDepartmentParentRequestDto", ({ enumerable: true, get: function () { return department_dto_1.UpdateDepartmentParentRequestDto; } }));
Object.defineProperty(exports, "UpdateDepartmentActiveStatusRequestDto", ({ enumerable: true, get: function () { return department_dto_1.UpdateDepartmentActiveStatusRequestDto; } }));
Object.defineProperty(exports, "DepartmentHierarchyResponseDto", ({ enumerable: true, get: function () { return department_dto_1.DepartmentHierarchyResponseDto; } }));
Object.defineProperty(exports, "DepartmentWithEmployeesDto", ({ enumerable: true, get: function () { return department_dto_1.DepartmentWithEmployeesDto; } }));
Object.defineProperty(exports, "DepartmentEmployeeInfoDto", ({ enumerable: true, get: function () { return department_dto_1.DepartmentEmployeeInfoDto; } }));
var employee_dto_1 = __webpack_require__(/*! ./employee.dto */ "./src/modules/application/admin/organization/dto/employee.dto.ts");
Object.defineProperty(exports, "CreateEmployeeRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.CreateEmployeeRequestDto; } }));
Object.defineProperty(exports, "UpdateEmployeeRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.UpdateEmployeeRequestDto; } }));
Object.defineProperty(exports, "AdminEmployeeResponseDto", ({ enumerable: true, get: function () { return employee_dto_1.AdminEmployeeResponseDto; } }));
Object.defineProperty(exports, "EmployeeListResponseDto", ({ enumerable: true, get: function () { return employee_dto_1.EmployeeListResponseDto; } }));
Object.defineProperty(exports, "NextEmployeeNumberResponseDto", ({ enumerable: true, get: function () { return employee_dto_1.NextEmployeeNumberResponseDto; } }));
Object.defineProperty(exports, "EmployeeDetailInfoDto", ({ enumerable: true, get: function () { return employee_dto_1.EmployeeDetailInfoDto; } }));
Object.defineProperty(exports, "EmployeeDetailListResponseDto", ({ enumerable: true, get: function () { return employee_dto_1.EmployeeDetailListResponseDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentDetailDto", ({ enumerable: true, get: function () { return employee_dto_1.EmployeeAssignmentDetailDto; } }));
Object.defineProperty(exports, "BulkUpdateDepartmentRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.BulkUpdateDepartmentRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateTeamRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.BulkUpdateTeamRequestDto; } }));
Object.defineProperty(exports, "BulkUpdatePositionRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.BulkUpdatePositionRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateRankRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.BulkUpdateRankRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateStatusRequestDto", ({ enumerable: true, get: function () { return employee_dto_1.BulkUpdateStatusRequestDto; } }));
Object.defineProperty(exports, "BulkUpdateResultDto", ({ enumerable: true, get: function () { return employee_dto_1.BulkUpdateResultDto; } }));
var position_dto_1 = __webpack_require__(/*! ./position.dto */ "./src/modules/application/admin/organization/dto/position.dto.ts");
Object.defineProperty(exports, "CreatePositionRequestDto", ({ enumerable: true, get: function () { return position_dto_1.CreatePositionRequestDto; } }));
Object.defineProperty(exports, "UpdatePositionRequestDto", ({ enumerable: true, get: function () { return position_dto_1.UpdatePositionRequestDto; } }));
Object.defineProperty(exports, "PositionResponseDto", ({ enumerable: true, get: function () { return position_dto_1.PositionResponseDto; } }));
var rank_dto_1 = __webpack_require__(/*! ./rank.dto */ "./src/modules/application/admin/organization/dto/rank.dto.ts");
Object.defineProperty(exports, "CreateRankRequestDto", ({ enumerable: true, get: function () { return rank_dto_1.CreateRankRequestDto; } }));
Object.defineProperty(exports, "UpdateRankRequestDto", ({ enumerable: true, get: function () { return rank_dto_1.UpdateRankRequestDto; } }));
Object.defineProperty(exports, "RankResponseDto", ({ enumerable: true, get: function () { return rank_dto_1.RankResponseDto; } }));
var employee_assignment_dto_1 = __webpack_require__(/*! ./employee-assignment.dto */ "./src/modules/application/admin/organization/dto/employee-assignment.dto.ts");
Object.defineProperty(exports, "AssignEmployeeRequestDto", ({ enumerable: true, get: function () { return employee_assignment_dto_1.AssignEmployeeRequestDto; } }));
Object.defineProperty(exports, "UpdateEmployeeAssignmentRequestDto", ({ enumerable: true, get: function () { return employee_assignment_dto_1.UpdateEmployeeAssignmentRequestDto; } }));
Object.defineProperty(exports, "UpdateManagerStatusRequestDto", ({ enumerable: true, get: function () { return employee_assignment_dto_1.UpdateManagerStatusRequestDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentResponseDto", ({ enumerable: true, get: function () { return employee_assignment_dto_1.EmployeeAssignmentResponseDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentListResponseDto", ({ enumerable: true, get: function () { return employee_assignment_dto_1.EmployeeAssignmentListResponseDto; } }));
Object.defineProperty(exports, "EmployeeAssignmentDetailResponseDto", ({ enumerable: true, get: function () { return employee_assignment_dto_1.EmployeeAssignmentDetailResponseDto; } }));
var employee_rank_history_dto_1 = __webpack_require__(/*! ./employee-rank-history.dto */ "./src/modules/application/admin/organization/dto/employee-rank-history.dto.ts");
Object.defineProperty(exports, "PromoteEmployeeRequestDto", ({ enumerable: true, get: function () { return employee_rank_history_dto_1.PromoteEmployeeRequestDto; } }));
Object.defineProperty(exports, "EmployeeRankHistoryResponseDto", ({ enumerable: true, get: function () { return employee_rank_history_dto_1.EmployeeRankHistoryResponseDto; } }));


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/position.dto.ts":
/*!************************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/position.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PositionResponseDto = exports.UpdatePositionRequestDto = exports.CreatePositionRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreatePositionRequestDto {
}
exports.CreatePositionRequestDto = CreatePositionRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö', example: 'Î∂ÄÏÑúÏû•' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreatePositionRequestDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú', example: 'DEPT_HEAD' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreatePositionRequestDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÏ±Ö)', example: 1 }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.Min)(1, { message: 'ÏßÅÏ±Ö Î†àÎ≤®ÏùÄ 1 Ïù¥ÏÉÅÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.' }),
    __metadata("design:type", Number)
], CreatePositionRequestDto.prototype, "level", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨ Í∂åÌïú Ïó¨Î∂Ä', example: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreatePositionRequestDto.prototype, "hasManagementAuthority", void 0);
class UpdatePositionRequestDto {
}
exports.UpdatePositionRequestDto = UpdatePositionRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±ÖÎ™Ö', example: 'Î∂ÄÏÑúÏû•' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdatePositionRequestDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú', example: 'DEPT_HEAD' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdatePositionRequestDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±Ö Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÏ±Ö)', example: 1 }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.Min)(1, { message: 'ÏßÅÏ±Ö Î†àÎ≤®ÏùÄ 1 Ïù¥ÏÉÅÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.' }),
    __metadata("design:type", Number)
], UpdatePositionRequestDto.prototype, "level", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨ Í∂åÌïú Ïó¨Î∂Ä', example: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdatePositionRequestDto.prototype, "hasManagementAuthority", void 0);
class PositionResponseDto {
}
exports.PositionResponseDto = PositionResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], PositionResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], PositionResponseDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú' }),
    __metadata("design:type", String)
], PositionResponseDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÏ±Ö)' }),
    __metadata("design:type", Number)
], PositionResponseDto.prototype, "level", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨ Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], PositionResponseDto.prototype, "hasManagementAuthority", void 0);


/***/ }),

/***/ "./src/modules/application/admin/organization/dto/rank.dto.ts":
/*!********************************************************************!*\
  !*** ./src/modules/application/admin/organization/dto/rank.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RankResponseDto = exports.UpdateRankRequestDto = exports.CreateRankRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateRankRequestDto {
}
exports.CreateRankRequestDto = CreateRankRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏âÎ™Ö', example: 'Í≥ºÏû•' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateRankRequestDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ÏΩîÎìú', example: 'MANAGER' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateRankRequestDto.prototype, "rankCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÍ∏â)', example: 3 }),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], CreateRankRequestDto.prototype, "level", void 0);
class UpdateRankRequestDto {
}
exports.UpdateRankRequestDto = UpdateRankRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÍ∏âÎ™Ö', example: 'Í≥ºÏû•' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateRankRequestDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÍ∏â ÏΩîÎìú', example: 'MANAGER' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateRankRequestDto.prototype, "rankCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÍ∏â Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÍ∏â)', example: 3 }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], UpdateRankRequestDto.prototype, "level", void 0);
class RankResponseDto {
}
exports.RankResponseDto = RankResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID' }),
    __metadata("design:type", String)
], RankResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏âÎ™Ö' }),
    __metadata("design:type", String)
], RankResponseDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ÏΩîÎìú' }),
    __metadata("design:type", String)
], RankResponseDto.prototype, "rankCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÍ∏â)' }),
    __metadata("design:type", Number)
], RankResponseDto.prototype, "level", void 0);


/***/ }),

/***/ "./src/modules/application/admin/organization/organization-application.service.ts":
/*!****************************************************************************************!*\
  !*** ./src/modules/application/admin/organization/organization-application.service.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const organization_management_context_service_1 = __webpack_require__(/*! src/modules/context/organization-management/organization-management-context.service */ "./src/modules/context/organization-management/organization-management-context.service.ts");
const system_management_context_service_1 = __webpack_require__(/*! src/modules/context/system-management/system-management-context.service */ "./src/modules/context/system-management/system-management-context.service.ts");
const department_entity_1 = __webpack_require__(/*! src/modules/domain/department/department.entity */ "./src/modules/domain/department/department.entity.ts");
let OrganizationApplicationService = class OrganizationApplicationService {
    constructor(organizationContextService, systemManagementContextService) {
        this.organizationContextService = organizationContextService;
        this.systemManagementContextService = systemManagementContextService;
        this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (department) => ({
            id: department.id,
            departmentName: department.departmentName,
            departmentCode: department.departmentCode,
            type: department.type,
            parentDepartmentId: department.parentDepartmentId,
            order: department.order,
            isActive: department.isActive ?? true,
            isException: department.isException ?? false,
            childDepartments: department.childDepartments?.map(this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§),
            createdAt: department.createdAt,
            updatedAt: department.updatedAt,
        });
        this.ÏßÅÏõêÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (employee) => ({
            id: employee.id,
            employeeNumber: employee.employeeNumber,
            name: employee.name,
            email: employee.email,
            phoneNumber: employee.phoneNumber,
            dateOfBirth: employee.dateOfBirth,
            gender: employee.gender,
            hireDate: employee.hireDate,
            status: employee.status,
            currentRankId: employee.currentRankId,
            terminationDate: employee.terminationDate,
            metadata: employee.metadata,
            isInitialPasswordSet: employee.isInitialPasswordSet,
            createdAt: employee.createdAt,
            updatedAt: employee.updatedAt,
        });
        this.ÏßÅÏ±ÖÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (position) => ({
            id: position.id,
            positionTitle: position.positionTitle,
            positionCode: position.positionCode,
            level: position.level,
            hasManagementAuthority: position.hasManagementAuthority,
        });
        this.ÏßÅÍ∏âÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (rank) => ({
            id: rank.id,
            rankName: rank.rankName,
            rankCode: rank.rankCode,
            level: rank.level,
        });
        this.ÏßÅÏõêÎ∞∞ÏπòÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (assignment) => ({
            id: assignment.id,
            employeeId: assignment.employeeId,
            departmentId: assignment.departmentId,
            positionId: assignment.positionId,
            isManager: assignment.isManager,
            createdAt: assignment.createdAt,
            updatedAt: assignment.updatedAt,
        });
        this.ÏßÅÍ∏âÏù¥Î†•ÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (history) => ({
            id: history.id,
            employeeId: history.employeeId,
            rankId: history.rankId,
            createdAt: history.createdAt,
            updatedAt: history.updatedAt,
        });
        this.ÏßÅÏõêÎ∞∞ÏπòÏÉÅÏÑ∏Î•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (data) => ({
            id: data.assignment.id,
            employeeId: data.assignment.employeeId,
            employeeNumber: data.employee?.employeeNumber || '',
            employeeName: data.employee?.name || '',
            departmentId: data.assignment.departmentId,
            departmentName: data.department?.departmentName || '',
            departmentCode: data.department?.departmentCode || '',
            positionId: data.assignment.positionId,
            positionTitle: data.position?.positionTitle || '',
            positionCode: data.position?.positionCode || '',
            rankId: data.rank?.id,
            rankName: data.rank?.rankName,
            rankCode: data.rank?.rankCode,
            isManager: data.assignment.isManager,
            createdAt: data.assignment.createdAt,
            updatedAt: data.assignment.updatedAt,
        });
        this.ÏßÅÏõêÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§ = (employeeWithDetails) => ({
            id: employeeWithDetails.id,
            employeeNumber: employeeWithDetails.employeeNumber,
            name: employeeWithDetails.name,
            email: employeeWithDetails.email,
            phoneNumber: employeeWithDetails.phoneNumber,
            dateOfBirth: employeeWithDetails.dateOfBirth,
            gender: employeeWithDetails.gender,
            hireDate: employeeWithDetails.hireDate,
            status: employeeWithDetails.status,
            currentRankId: employeeWithDetails.currentRankId,
            terminationDate: employeeWithDetails.terminationDate,
            metadata: employeeWithDetails.metadata,
            isInitialPasswordSet: employeeWithDetails.isInitialPasswordSet,
            createdAt: employeeWithDetails.createdAt,
            updatedAt: employeeWithDetails.updatedAt,
            departments: employeeWithDetails.departments,
            rank: employeeWithDetails.rank,
            tokens: employeeWithDetails.tokens,
            fcmTokens: employeeWithDetails.fcmTokens,
            systemRoles: employeeWithDetails.systemRoles,
        });
    }
    async Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§() {
        const result = await this.organizationContextService.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(undefined, undefined, true, true, true, true);
        const departments = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏßÅÏõêÏ†ïÎ≥¥ÏôÄ_Ìï®Íªò_Î≥ÄÌôòÌïúÎã§(result.departments, result.employeesByDepartment, result.departmentDetails);
        return { departments: departments.filter((department) => department.parentDepartmentId === null) };
    }
    async Ìá¥ÏÇ¨ÏûêÎ∂ÄÏÑú_ÏßÅÏõêÎ™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        const terminatedDepartment = await this.organizationContextService.Î∂ÄÏÑú_ÏΩîÎìúÎ°ú_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§('Ìá¥ÏÇ¨Ïûê');
        if (!terminatedDepartment) {
            return { departments: [] };
        }
        const result = await this.organizationContextService.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(terminatedDepartment.id, undefined, true, true, true, true);
        const departments = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏßÅÏõêÏ†ïÎ≥¥ÏôÄ_Ìï®Íªò_Î≥ÄÌôòÌïúÎã§(result.departments, result.employeesByDepartment, result.departmentDetails);
        return { departments };
    }
    async Î∂ÄÏÑúÎ™©Î°ùÏ°∞Ìöå() {
        const departments = await this.organizationContextService.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_Ï°∞ÌöåÌïúÎã§(undefined, undefined, true, true);
        return {
            departments: departments.map(this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§),
        };
    }
    async Î∂ÄÏÑúÏÉÅÏÑ∏Ï°∞Ìöå(id) {
        const department = await this.organizationContextService.Î∂ÄÏÑú_IDÎ°ú_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§(id);
        return this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(department);
    }
    async Î∂ÄÏÑúÏÉùÏÑ±(createDepartmentDto) {
        const newDepartment = await this.organizationContextService.Î∂ÄÏÑúÎ•º_ÏÉùÏÑ±ÌïúÎã§({
            departmentName: createDepartmentDto.departmentName,
            departmentCode: createDepartmentDto.departmentCode,
            type: createDepartmentDto.type,
            parentDepartmentId: createDepartmentDto.parentDepartmentId,
            order: createDepartmentDto.order,
        });
        return this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(newDepartment);
    }
    async Î∂ÄÏÑúÏàòÏ†ï(id, updateDepartmentDto) {
        const updatedDepartment = await this.organizationContextService.Î∂ÄÏÑúÎ•º_ÏàòÏ†ïÌïúÎã§(id, updateDepartmentDto);
        return this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedDepartment);
    }
    async Î∂ÄÏÑúÏÇ≠Ï†ú(id) {
        await this.organizationContextService.Î∂ÄÏÑúÎ•º_ÏÇ≠Ï†úÌïúÎã§(id);
    }
    async Î∂ÄÏÑúÏàúÏÑúÎ≥ÄÍ≤Ω(id, updateOrderDto) {
        const updatedDepartment = await this.organizationContextService.Î∂ÄÏÑúÏàúÏÑúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(id, updateOrderDto.newOrder);
        return this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedDepartment);
    }
    async Î∂ÄÏÑúÏÉÅÏúÑÎ∂ÄÏÑúÎ≥ÄÍ≤Ω(id, updateParentDto) {
        const updatedDepartment = await this.organizationContextService.Î∂ÄÏÑúÎ•º_ÏàòÏ†ïÌïúÎã§(id, {
            parentDepartmentId: updateParentDto.newParentDepartmentId,
        });
        return this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedDepartment);
    }
    async Î∂ÄÏÑúÌôúÏÑ±ÌôîÏÉÅÌÉúÎ≥ÄÍ≤Ω(id, updateActiveStatusDto) {
        const updatedDepartment = await this.organizationContextService.Î∂ÄÏÑúÎ•º_ÏàòÏ†ïÌïúÎã§(id, {
            isActive: updateActiveStatusDto.isActive,
        });
        const allChildDepartments = await this.organizationContextService.Î∂ÄÏÑúÏùò_Î™®Îì†_ÌïòÏúÑÎ∂ÄÏÑúÎì§ÏùÑ_Ïû¨Í∑ÄÏ†ÅÏúºÎ°ú_Ï°∞ÌöåÌïúÎã§(id);
        if (updateActiveStatusDto.isActive === false && allChildDepartments.length > 0) {
            const childDepartmentIds = allChildDepartments.map((dept) => dept.id);
            await this.organizationContextService.Ïó¨Îü¨_Î∂ÄÏÑúÎ•º_ÏùºÍ¥Ñ_ÏàòÏ†ïÌïúÎã§(childDepartmentIds, {
                isActive: updateActiveStatusDto.isActive,
            });
        }
        return this.Î∂ÄÏÑúÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedDepartment);
    }
    async ÏßÅÏõêÎ™©Î°ùÏ°∞Ìöå() {
        const employees = await this.organizationContextService.Ï†ÑÏ≤¥_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§();
        return {
            employees: employees.map(this.ÏßÅÏõêÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§),
        };
    }
    async ÏßÅÏõêÏÉÅÏÑ∏Î™©Î°ùÏ°∞Ìöå(status) {
        const employeesWithDetails = await this.organizationContextService.Ï†ÑÏ≤¥_ÏßÅÏõêÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(status);
        return {
            employees: employeesWithDetails.map(this.ÏßÅÏõêÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§),
        };
    }
    async Îã§ÏùåÏßÅÏõêÎ≤àÌò∏Ï°∞Ìöå(year) {
        return await this.organizationContextService.Ïó∞ÎèÑÎ≥Ñ_Îã§ÏùåÏßÅÏõêÎ≤àÌò∏Î•º_Ï°∞ÌöåÌïúÎã§(year);
    }
    async ÏßÅÏõêÏÉÅÏÑ∏Ï°∞Ìöå(id) {
        const employee = await this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(id);
        const baseDto = this.ÏßÅÏõêÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(employee);
        const assignments = await this.organizationContextService.ÏßÅÏõêÏùò_Î™®Îì†_Î∞∞ÏπòÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(id);
        if (assignments.length > 0) {
            const departmentIds = [...new Set(assignments.map((a) => a.departmentId))];
            const positionIds = [...new Set(assignments.map((a) => a.positionId))];
            const [departments, positions] = await Promise.all([
                Promise.all(departmentIds.map((deptId) => this.organizationContextService.Î∂ÄÏÑú_IDÎ°ú_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§(deptId))),
                Promise.all(positionIds.map((posId) => this.organizationContextService.ÏßÅÏ±Ö_IDÎ°ú_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§(posId))),
            ]);
            const departmentMap = new Map(departments.map((dept) => [dept.id, dept]));
            const positionMap = new Map(positions.map((pos) => [pos.id, pos]));
            const departmentAssignment = assignments.find((assignment) => {
                const dept = departmentMap.get(assignment.departmentId);
                return dept?.type === department_entity_1.DepartmentType.DEPARTMENT;
            });
            const teamAssignments = assignments.filter((assignment) => {
                const dept = departmentMap.get(assignment.departmentId);
                return dept?.type === department_entity_1.DepartmentType.TEAM;
            });
            if (departmentAssignment) {
                const dept = departmentMap.get(departmentAssignment.departmentId);
                const pos = positionMap.get(departmentAssignment.positionId);
                if (dept && pos) {
                    baseDto.department = {
                        id: departmentAssignment.id,
                        departmentId: dept.id,
                        departmentName: dept.departmentName,
                        departmentCode: dept.departmentCode,
                        departmentType: dept.type,
                        positionId: pos.id,
                        positionTitle: pos.positionTitle,
                        positionCode: pos.positionCode,
                        isManager: departmentAssignment.isManager,
                        createdAt: departmentAssignment.createdAt,
                        updatedAt: departmentAssignment.updatedAt,
                    };
                }
            }
            if (teamAssignments.length > 0) {
                baseDto.teams = teamAssignments
                    .map((assignment) => {
                    const dept = departmentMap.get(assignment.departmentId);
                    const pos = positionMap.get(assignment.positionId);
                    if (dept && pos) {
                        return {
                            id: assignment.id,
                            departmentId: dept.id,
                            departmentName: dept.departmentName,
                            departmentCode: dept.departmentCode,
                            departmentType: dept.type,
                            positionId: pos.id,
                            positionTitle: pos.positionTitle,
                            positionCode: pos.positionCode,
                            isManager: assignment.isManager,
                            createdAt: assignment.createdAt,
                            updatedAt: assignment.updatedAt,
                        };
                    }
                    return null;
                })
                    .filter((team) => team !== null);
            }
        }
        return baseDto;
    }
    async ÏßÅÏõêÏÉùÏÑ±(createEmployeeDto) {
        const result = await this.organizationContextService.ÏßÅÏõêÏùÑ_ÏÉùÏÑ±ÌïúÎã§({
            employeeNumber: createEmployeeDto.employeeNumber,
            name: createEmployeeDto.name,
            email: createEmployeeDto.email,
            phoneNumber: createEmployeeDto.phoneNumber,
            dateOfBirth: createEmployeeDto.dateOfBirth ? new Date(createEmployeeDto.dateOfBirth) : undefined,
            gender: createEmployeeDto.gender,
            hireDate: new Date(createEmployeeDto.hireDate),
            currentRankId: createEmployeeDto.currentRankId,
            departmentId: createEmployeeDto.departmentId,
            positionId: createEmployeeDto.positionId,
            isManager: createEmployeeDto.isManager,
        });
        try {
            await this.systemManagementContextService.ÏßÅÏõêÏóêÍ≤å_Í∏∞Î≥∏Ïó≠Ìï†Îì§ÏùÑ_Ìï†ÎãπÌïúÎã§(result.employee.id);
        }
        catch (error) {
            console.error('ÏßÅÏõê ÏÉùÏÑ± ÌõÑ Í∏∞Î≥∏ Ïó≠Ìï† Ìï†Îãπ Ïã§Ìå®:', error);
        }
        return this.ÏßÅÏõêÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(result.employee);
    }
    async ÏßÅÏõêÏàòÏ†ï(id, updateEmployeeDto) {
        let employee;
        const hasOtherUpdates = updateEmployeeDto.employeeNumber !== undefined ||
            updateEmployeeDto.name !== undefined ||
            updateEmployeeDto.email !== undefined ||
            updateEmployeeDto.phoneNumber !== undefined ||
            updateEmployeeDto.dateOfBirth !== undefined ||
            updateEmployeeDto.gender !== undefined ||
            updateEmployeeDto.hireDate !== undefined ||
            updateEmployeeDto.currentRankId !== undefined ||
            updateEmployeeDto.departmentId !== undefined ||
            updateEmployeeDto.positionId !== undefined ||
            updateEmployeeDto.isManager !== undefined;
        if (hasOtherUpdates) {
            employee = await this.organizationContextService.ÏßÅÏõêÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(id, {
                employeeNumber: updateEmployeeDto.employeeNumber,
                name: updateEmployeeDto.name,
                email: updateEmployeeDto.email,
                phoneNumber: updateEmployeeDto.phoneNumber,
                dateOfBirth: updateEmployeeDto.dateOfBirth ? new Date(updateEmployeeDto.dateOfBirth) : undefined,
                gender: updateEmployeeDto.gender,
                hireDate: updateEmployeeDto.hireDate ? new Date(updateEmployeeDto.hireDate) : undefined,
                currentRankId: updateEmployeeDto.currentRankId,
                departmentId: updateEmployeeDto.departmentId,
                positionId: updateEmployeeDto.positionId,
                isManager: updateEmployeeDto.isManager,
            });
        }
        if (updateEmployeeDto.status !== undefined) {
            employee = await this.organizationContextService.ÏßÅÏõêÏû¨ÏßÅÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(id, updateEmployeeDto.status, updateEmployeeDto.terminationDate ? new Date(updateEmployeeDto.terminationDate) : undefined);
        }
        if (!employee) {
            employee = await this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(id);
        }
        return this.ÏßÅÏõêÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(employee);
    }
    async ÏßÅÏõêÏÇ≠Ï†ú(id) {
        await this.organizationContextService.ÏßÅÏõêÏùÑ_ÏÇ≠Ï†úÌïúÎã§(id);
    }
    async ÏßÅÏ±ÖÎ™©Î°ùÏ°∞Ìöå() {
        const positions = await this.organizationContextService.Î™®Îì†_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§();
        return positions.map(this.ÏßÅÏ±ÖÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§);
    }
    async ÏßÅÏ±ÖÏÉùÏÑ±(createPositionDto) {
        const newPosition = await this.organizationContextService.ÏßÅÏ±ÖÏùÑ_ÏÉùÏÑ±ÌïúÎã§(createPositionDto);
        return this.ÏßÅÏ±ÖÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(newPosition);
    }
    async ÏßÅÏ±ÖÏàòÏ†ï(id, updatePositionDto) {
        const updatedPosition = await this.organizationContextService.ÏßÅÏ±ÖÏùÑ_ÏàòÏ†ïÌïúÎã§(id, updatePositionDto);
        return this.ÏßÅÏ±ÖÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedPosition);
    }
    async ÏßÅÏ±ÖÏÇ≠Ï†ú(id) {
        await this.organizationContextService.ÏßÅÏ±ÖÏùÑ_ÏÇ≠Ï†úÌïúÎã§(id);
    }
    async ÏßÅÍ∏âÎ™©Î°ùÏ°∞Ìöå() {
        const ranks = await this.organizationContextService.Î™®Îì†_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§();
        return ranks.map(this.ÏßÅÍ∏âÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§);
    }
    async ÏßÅÍ∏âÏÉùÏÑ±(createRankDto) {
        const newRank = await this.organizationContextService.ÏßÅÍ∏âÏùÑ_ÏÉùÏÑ±ÌïúÎã§(createRankDto);
        return this.ÏßÅÍ∏âÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(newRank);
    }
    async ÏßÅÍ∏âÏàòÏ†ï(id, updateRankDto) {
        const updatedRank = await this.organizationContextService.ÏßÅÍ∏âÏùÑ_ÏàòÏ†ïÌïúÎã§(id, updateRankDto);
        return this.ÏßÅÍ∏âÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedRank);
    }
    async ÏßÅÍ∏âÏÇ≠Ï†ú(id) {
        await this.organizationContextService.ÏßÅÍ∏âÏùÑ_ÏÇ≠Ï†úÌïúÎã§(id);
    }
    async ÏßÅÏõêÎ∞∞Ïπò(assignEmployeeDto) {
        const assignment = await this.organizationContextService.ÏßÅÏõêÏùÑ_Î∂ÄÏÑúÏóê_Î∞∞ÏπòÌïúÎã§(assignEmployeeDto);
        return this.ÏßÅÏõêÎ∞∞ÏπòÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(assignment);
    }
    async ÏßÅÏõêÎ∞∞ÏπòÎ≥ÄÍ≤Ω(id, updateAssignmentDto) {
        const updatedAssignment = await this.organizationContextService.ÏßÅÏõêÎ∞∞ÏπòÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(id, updateAssignmentDto);
        return this.ÏßÅÏõêÎ∞∞ÏπòÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedAssignment);
    }
    async ÏßÅÏõêÎ∞∞ÏπòÌï¥Ï†ú(id) {
        await this.organizationContextService.ÏßÅÏõêÎ∞∞ÏπòÎ•º_Ìï¥Ï†úÌïúÎã§(id);
    }
    async ÏßÅÏõêÎ∞∞Ïπò_Í¥ÄÎ¶¨ÏûêÏÉÅÌÉúÎ≥ÄÍ≤Ω(id, updateManagerStatusDto) {
        const updatedAssignment = await this.organizationContextService.ÏßÅÏõêÎ∞∞Ïπò_Í¥ÄÎ¶¨ÏûêÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(id, updateManagerStatusDto.isManager);
        return this.ÏßÅÏõêÎ∞∞ÏπòÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(updatedAssignment);
    }
    async ÏßÅÏõêÎ∞∞ÏπòÌòÑÌô©Ï°∞Ìöå(employeeId) {
        const assignments = await this.organizationContextService.ÏßÅÏõêÏùò_Î™®Îì†_Î∞∞ÏπòÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(employeeId);
        return assignments.map(this.ÏßÅÏõêÎ∞∞ÏπòÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§);
    }
    async Ï†ÑÏ≤¥Î∞∞ÏπòÎ™©Î°ùÏ°∞Ìöå() {
        const assignmentsWithDetails = await this.organizationContextService.Ï†ÑÏ≤¥_Î∞∞ÏπòÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§();
        return assignmentsWithDetails.map(this.ÏßÅÏõêÎ∞∞ÏπòÏÉÅÏÑ∏Î•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§);
    }
    async ÏßÅÏõêÏßÅÍ∏âÎ≥ÄÍ≤Ω(employeeId, promoteDto) {
        const { rankHistory } = await this.organizationContextService.ÏßÅÏõêÏùò_ÏßÅÍ∏âÏùÑ_Î≥ÄÍ≤ΩÌïúÎã§(employeeId, promoteDto.rankId);
        return this.ÏßÅÍ∏âÏù¥Î†•ÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(rankHistory);
    }
    async ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•Ï°∞Ìöå(employeeId) {
        const histories = await this.organizationContextService.ÏßÅÏõêÏùò_ÏßÅÍ∏âÏù¥Î†•ÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId);
        return histories.map(this.ÏßÅÍ∏âÏù¥Î†•ÏùÑ_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§);
    }
    Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏßÅÏõêÏ†ïÎ≥¥ÏôÄ_Ìï®Íªò_Î≥ÄÌôòÌïúÎã§(departments, employeesByDepartment, departmentDetails) {
        const result = [];
        for (const department of departments) {
            const departmentEmployeeInfo = employeesByDepartment.get(department.id) || {
                employees: [],
                departmentPositions: new Map(),
            };
            const employees = [];
            for (const employee of departmentEmployeeInfo.employees) {
                const departmentPosition = departmentEmployeeInfo.departmentPositions.get(employee.id);
                const deptDetails = departmentDetails?.get(department.id);
                const employeeDetail = deptDetails?.find((d) => departmentEmployeeInfo.departmentPositions.has(employee.id) &&
                    d.department.id === department.id);
                employees.push({
                    id: employee.id,
                    employeeNumber: employee.employeeNumber,
                    name: employee.name,
                    email: employee.email,
                    phoneNumber: employee.phoneNumber,
                    positionId: departmentPosition?.positionId,
                    positionTitle: employeeDetail?.position?.positionTitle,
                    rankId: employee.currentRankId,
                    rankName: employeeDetail?.rank?.rankName,
                    isManager: departmentPosition?.isManager || false,
                    metadata: employee.metadata,
                });
            }
            const childDepartments = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏßÅÏõêÏ†ïÎ≥¥ÏôÄ_Ìï®Íªò_Î≥ÄÌôòÌïúÎã§(department.childDepartments || [], employeesByDepartment, departmentDetails);
            const departmentDto = {
                id: department.id,
                departmentName: department.departmentName,
                departmentCode: department.departmentCode,
                type: department.type,
                parentDepartmentId: department.parentDepartmentId,
                order: department.order,
                isActive: department.isActive ?? true,
                isException: department.isException ?? false,
                employees: employees.sort((a, b) => a.name.localeCompare(b.name)),
                childDepartments: childDepartments.length > 0 ? childDepartments.sort((a, b) => a.order - b.order) : undefined,
            };
            result.push(departmentDto);
        }
        return result.sort((a, b) => a.order - b.order);
    }
    async ÏßÅÏõêÎ∂ÄÏÑúÏùºÍ¥ÑÏàòÏ†ï(employeeIds, departmentId) {
        const result = await this.organizationContextService.ÏßÅÏõê_Î∂ÄÏÑú_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, departmentId);
        return result;
    }
    async ÏßÅÏõêÌåÄÏùºÍ¥ÑÎ∞∞Ïπò(employeeIds, teamId) {
        const result = await this.organizationContextService.ÏßÅÏõê_ÌåÄ_ÏùºÍ¥ÑÎ∞∞Ïπò(employeeIds, teamId);
        return result;
    }
    async ÏßÅÏõêÏßÅÏ±ÖÏùºÍ¥ÑÏàòÏ†ï(employeeIds, positionId) {
        const result = await this.organizationContextService.ÏßÅÏõê_ÏßÅÏ±Ö_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, positionId);
        return result;
    }
    async ÏßÅÏõêÏßÅÍ∏âÏùºÍ¥ÑÏàòÏ†ï(employeeIds, rankId) {
        const result = await this.organizationContextService.ÏßÅÏõê_ÏßÅÍ∏â_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, rankId);
        return result;
    }
    async ÏßÅÏõêÏû¨ÏßÅÏÉÅÌÉúÏùºÍ¥ÑÏàòÏ†ï(employeeIds, status, terminationDate) {
        const result = await this.organizationContextService.ÏßÅÏõê_Ïû¨ÏßÅÏÉÅÌÉú_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, status, terminationDate);
        return result;
    }
};
exports.OrganizationApplicationService = OrganizationApplicationService;
exports.OrganizationApplicationService = OrganizationApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof organization_management_context_service_1.OrganizationManagementContextService !== "undefined" && organization_management_context_service_1.OrganizationManagementContextService) === "function" ? _a : Object, typeof (_b = typeof system_management_context_service_1.SystemManagementContextService !== "undefined" && system_management_context_service_1.SystemManagementContextService) === "function" ? _b : Object])
], OrganizationApplicationService);


/***/ }),

/***/ "./src/modules/application/admin/organization/organization.controller.ts":
/*!*******************************************************************************!*\
  !*** ./src/modules/application/admin/organization/organization.controller.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const organization_application_service_1 = __webpack_require__(/*! ./organization-application.service */ "./src/modules/application/admin/organization/organization-application.service.ts");
const dto_1 = __webpack_require__(/*! ./dto */ "./src/modules/application/admin/organization/dto/index.ts");
const enums_1 = __webpack_require__(/*! ../../../../../libs/common/enums */ "./libs/common/enums/index.ts");
let OrganizationController = class OrganizationController {
    constructor(organizationApplicationService) {
        this.organizationApplicationService = organizationApplicationService;
    }
    async getDepartmentHierarchy() {
        return this.organizationApplicationService.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§();
    }
    async getTerminatedEmployees() {
        return this.organizationApplicationService.Ìá¥ÏÇ¨ÏûêÎ∂ÄÏÑú_ÏßÅÏõêÎ™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§();
    }
    async getDepartments() {
        return await this.organizationApplicationService.Î∂ÄÏÑúÎ™©Î°ùÏ°∞Ìöå();
    }
    async getDepartment(id) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÏÉÅÏÑ∏Ï°∞Ìöå(id);
    }
    async createDepartment(createDepartmentDto) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÏÉùÏÑ±(createDepartmentDto);
    }
    async updateDepartment(id, updateDepartmentDto) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÏàòÏ†ï(id, updateDepartmentDto);
    }
    async deleteDepartment(id) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÏÇ≠Ï†ú(id);
    }
    async updateDepartmentOrder(id, updateOrderDto) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÏàúÏÑúÎ≥ÄÍ≤Ω(id, updateOrderDto);
    }
    async updateDepartmentParent(id, updateParentDto) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÏÉÅÏúÑÎ∂ÄÏÑúÎ≥ÄÍ≤Ω(id, updateParentDto);
    }
    async updateDepartmentActiveStatus(id, updateActiveStatusDto) {
        return await this.organizationApplicationService.Î∂ÄÏÑúÌôúÏÑ±ÌôîÏÉÅÌÉúÎ≥ÄÍ≤Ω(id, updateActiveStatusDto);
    }
    async getEmployees(status) {
        return await this.organizationApplicationService.ÏßÅÏõêÏÉÅÏÑ∏Î™©Î°ùÏ°∞Ìöå(status);
    }
    async getNextEmployeeNumber(year) {
        const targetYear = year || new Date().getFullYear();
        return await this.organizationApplicationService.Îã§ÏùåÏßÅÏõêÎ≤àÌò∏Ï°∞Ìöå(targetYear);
    }
    async getEmployee(id) {
        return await this.organizationApplicationService.ÏßÅÏõêÏÉÅÏÑ∏Ï°∞Ìöå(id);
    }
    async createEmployee(createEmployeeDto) {
        return await this.organizationApplicationService.ÏßÅÏõêÏÉùÏÑ±(createEmployeeDto);
    }
    async updateEmployee(id, updateEmployeeDto) {
        return await this.organizationApplicationService.ÏßÅÏõêÏàòÏ†ï(id, updateEmployeeDto);
    }
    async bulkUpdateEmployeeDepartment(dto) {
        return await this.organizationApplicationService.ÏßÅÏõêÎ∂ÄÏÑúÏùºÍ¥ÑÏàòÏ†ï(dto.employeeIds, dto.departmentId);
    }
    async bulkUpdateEmployeeTeam(dto) {
        return await this.organizationApplicationService.ÏßÅÏõêÌåÄÏùºÍ¥ÑÎ∞∞Ïπò(dto.employeeIds, dto.teamId);
    }
    async bulkUpdateEmployeePosition(dto) {
        return await this.organizationApplicationService.ÏßÅÏõêÏßÅÏ±ÖÏùºÍ¥ÑÏàòÏ†ï(dto.employeeIds, dto.positionId);
    }
    async bulkUpdateEmployeeRank(dto) {
        return await this.organizationApplicationService.ÏßÅÏõêÏßÅÍ∏âÏùºÍ¥ÑÏàòÏ†ï(dto.employeeIds, dto.rankId);
    }
    async bulkUpdateEmployeeStatus(dto) {
        const terminationDate = dto.terminationDate ? new Date(dto.terminationDate) : undefined;
        return await this.organizationApplicationService.ÏßÅÏõêÏû¨ÏßÅÏÉÅÌÉúÏùºÍ¥ÑÏàòÏ†ï(dto.employeeIds, dto.status, terminationDate);
    }
    async deleteEmployee(id) {
        return await this.organizationApplicationService.ÏßÅÏõêÏÇ≠Ï†ú(id);
    }
    async getPositions() {
        return await this.organizationApplicationService.ÏßÅÏ±ÖÎ™©Î°ùÏ°∞Ìöå();
    }
    async createPosition(createPositionDto) {
        return await this.organizationApplicationService.ÏßÅÏ±ÖÏÉùÏÑ±(createPositionDto);
    }
    async updatePosition(id, updatePositionDto) {
        return await this.organizationApplicationService.ÏßÅÏ±ÖÏàòÏ†ï(id, updatePositionDto);
    }
    async deletePosition(id) {
        return await this.organizationApplicationService.ÏßÅÏ±ÖÏÇ≠Ï†ú(id);
    }
    async getRanks() {
        return await this.organizationApplicationService.ÏßÅÍ∏âÎ™©Î°ùÏ°∞Ìöå();
    }
    async createRank(createRankDto) {
        return await this.organizationApplicationService.ÏßÅÍ∏âÏÉùÏÑ±(createRankDto);
    }
    async updateRank(id, updateRankDto) {
        return await this.organizationApplicationService.ÏßÅÍ∏âÏàòÏ†ï(id, updateRankDto);
    }
    async deleteRank(id) {
        return await this.organizationApplicationService.ÏßÅÍ∏âÏÇ≠Ï†ú(id);
    }
    async getAllEmployeeAssignments() {
        return await this.organizationApplicationService.Ï†ÑÏ≤¥Î∞∞ÏπòÎ™©Î°ùÏ°∞Ìöå();
    }
    async assignEmployee(assignEmployeeDto) {
        return await this.organizationApplicationService.ÏßÅÏõêÎ∞∞Ïπò(assignEmployeeDto);
    }
    async updateEmployeeAssignment(id, updateAssignmentDto) {
        return await this.organizationApplicationService.ÏßÅÏõêÎ∞∞ÏπòÎ≥ÄÍ≤Ω(id, updateAssignmentDto);
    }
    async updateManagerStatus(id, updateManagerStatusDto) {
        return await this.organizationApplicationService.ÏßÅÏõêÎ∞∞Ïπò_Í¥ÄÎ¶¨ÏûêÏÉÅÌÉúÎ≥ÄÍ≤Ω(id, updateManagerStatusDto);
    }
    async removeEmployeeAssignment(id) {
        return await this.organizationApplicationService.ÏßÅÏõêÎ∞∞ÏπòÌï¥Ï†ú(id);
    }
    async getEmployeeAssignments(employeeId) {
        return await this.organizationApplicationService.ÏßÅÏõêÎ∞∞ÏπòÌòÑÌô©Ï°∞Ìöå(employeeId);
    }
    async promoteEmployee(employeeId, promoteDto) {
        return await this.organizationApplicationService.ÏßÅÏõêÏßÅÍ∏âÎ≥ÄÍ≤Ω(employeeId, promoteDto);
    }
    async getEmployeeRankHistory(employeeId) {
        return await this.organizationApplicationService.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•Ï°∞Ìöå(employeeId);
    }
};
exports.OrganizationController = OrganizationController;
__decorate([
    (0, common_1.Get)(''),
    (0, swagger_1.ApiOperation)({
        summary: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå',
        description: 'Î∂ÄÏÑúÏùò Í≥ÑÏ∏µÍµ¨Ï°∞Î•º Îî∞Îùº Í∞Å Î∂ÄÏÑúÏóê ÏÜçÌïú ÏßÅÏõêÎì§Ïùò Î™©Î°ùÏùÑ ÍπäÏù¥ÏôÄ Ìï®Íªò Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.DepartmentHierarchyResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞ Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏùå' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], OrganizationController.prototype, "getDepartmentHierarchy", null);
__decorate([
    (0, common_1.Get)('terminated-employees'),
    (0, swagger_1.ApiOperation)({
        summary: 'Ìá¥ÏÇ¨Ïûê Î∂ÄÏÑúÏôÄ Ìá¥ÏÇ¨Ïûê Î™©Î°ù Ï°∞Ìöå',
        description: 'Ìá¥ÏÇ¨Ïûê Î∂ÄÏÑúÏôÄ Í∑∏ ÏïÑÎûò Î∞∞ÏπòÎêú Î™®Îì† Ìá¥ÏÇ¨ÏûêÎì§Ïùò Î™©Î°ùÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Ìá¥ÏÇ¨Ïûê Î∂ÄÏÑúÏôÄ Ìá¥ÏÇ¨Ïûê Î™©Î°ù Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.DepartmentHierarchyResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Ìá¥ÏÇ¨Ïûê Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], OrganizationController.prototype, "getTerminatedEmployees", null);
__decorate([
    (0, common_1.Get)('departments'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú Î™©Î°ù Ï°∞Ìöå', description: 'Ï†ÑÏ≤¥ Î∂ÄÏÑú Î™©Î°ùÏùÑ Í≥ÑÏ∏µÍµ¨Ï°∞Î°ú Ï°∞ÌöåÌï©ÎãàÎã§.' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.DepartmentListResponseDto }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], OrganizationController.prototype, "getDepartments", null);
__decorate([
    (0, common_1.Get)('departments/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∂ÄÏÑú ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.DepartmentResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], OrganizationController.prototype, "getDepartment", null);
__decorate([
    (0, common_1.Post)('departments'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÏÉùÏÑ±' }),
    (0, swagger_1.ApiBody)({ type: dto_1.CreateDepartmentRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.DepartmentResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof dto_1.CreateDepartmentRequestDto !== "undefined" && dto_1.CreateDepartmentRequestDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], OrganizationController.prototype, "createDepartment", null);
__decorate([
    (0, common_1.Put)('departments/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÏàòÏ†ï' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∂ÄÏÑú ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateDepartmentRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.DepartmentResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof dto_1.UpdateDepartmentRequestDto !== "undefined" && dto_1.UpdateDepartmentRequestDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], OrganizationController.prototype, "updateDepartment", null);
__decorate([
    (0, common_1.Delete)('departments/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∂ÄÏÑú ID' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], OrganizationController.prototype, "deleteDepartment", null);
__decorate([
    (0, common_1.Patch)('departments/:id/order'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÏàúÏÑú Î≥ÄÍ≤Ω' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∂ÄÏÑú ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateDepartmentOrderRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.DepartmentResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_l = typeof dto_1.UpdateDepartmentOrderRequestDto !== "undefined" && dto_1.UpdateDepartmentOrderRequestDto) === "function" ? _l : Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], OrganizationController.prototype, "updateDepartmentOrder", null);
__decorate([
    (0, common_1.Patch)('departments/:id/parent'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÏÉÅÏúÑ Î∂ÄÏÑú Î≥ÄÍ≤Ω' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∂ÄÏÑú ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateDepartmentParentRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.DepartmentResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_o = typeof dto_1.UpdateDepartmentParentRequestDto !== "undefined" && dto_1.UpdateDepartmentParentRequestDto) === "function" ? _o : Object]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], OrganizationController.prototype, "updateDepartmentParent", null);
__decorate([
    (0, common_1.Patch)('departments/:id/active-status'),
    (0, swagger_1.ApiOperation)({ summary: 'Î∂ÄÏÑú ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∂ÄÏÑú ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateDepartmentActiveStatusRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.DepartmentResponseDto, description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_q = typeof dto_1.UpdateDepartmentActiveStatusRequestDto !== "undefined" && dto_1.UpdateDepartmentActiveStatusRequestDto) === "function" ? _q : Object]),
    __metadata("design:returntype", typeof (_r = typeof Promise !== "undefined" && Promise) === "function" ? _r : Object)
], OrganizationController.prototype, "updateDepartmentActiveStatus", null);
__decorate([
    (0, common_1.Get)('employees'),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏßÅÏõê ÏÉÅÏÑ∏ Î™©Î°ù Ï°∞Ìöå',
        description: 'ÏßÅÏõê Î™©Î°ùÏùÑ Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏â, ÌÜ†ÌÅ∞, FCMÌÜ†ÌÅ∞, ÏãúÏä§ÌÖú Ïó≠Ìï† Ï†ïÎ≥¥ÏôÄ Ìï®Íªò Ï°∞ÌöåÌï©ÎãàÎã§. Ïû¨ÏßÅÏÉÅÌÉúÎ°ú ÌïÑÌÑ∞ÎßÅÌï† Ïàò ÏûàÏäµÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'status',
        description: 'Ïû¨ÏßÅÏÉÅÌÉú (Ïû¨ÏßÅÏ§ë, Ìú¥ÏßÅ, Ìá¥ÏÇ¨)',
        enum: enums_1.EmployeeStatus,
        required: false,
    }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeDetailListResponseDto }),
    __param(0, (0, common_1.Query)('status')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_s = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _s : Object]),
    __metadata("design:returntype", typeof (_t = typeof Promise !== "undefined" && Promise) === "function" ? _t : Object)
], OrganizationController.prototype, "getEmployees", null);
__decorate([
    (0, common_1.Get)('employees/next-employee-number'),
    (0, swagger_1.ApiOperation)({
        summary: 'Îã§Ïùå ÏßÅÏõêÎ≤àÌò∏ Ï°∞Ìöå',
        description: 'Ìï¥Îãπ Ïó∞ÎèÑÏùò Îã§Ïùå ÏàúÎ≤à ÏßÅÏõêÎ≤àÌò∏Î•º Ï°∞ÌöåÌï©ÎãàÎã§. Ïó∞ÎèÑÎ•º ÏßÄÏ†ïÌïòÏßÄ ÏïäÏúºÎ©¥ ÌòÑÏû¨ Ïó∞ÎèÑ Í∏∞Ï§ÄÏúºÎ°ú Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        type: dto_1.NextEmployeeNumberResponseDto,
        description: 'Îã§Ïùå ÏßÅÏõêÎ≤àÌò∏ Ï†ïÎ≥¥ (ÌòïÏãù: YY + ÏàúÎ≤à 3ÏûêÎ¶¨, Ïòà: 25001)',
    }),
    (0, swagger_1.ApiQuery)({ name: 'year', description: 'Ïó∞ÎèÑ', required: false }),
    __param(0, (0, common_1.Query)('year')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Number]),
    __metadata("design:returntype", typeof (_u = typeof Promise !== "undefined" && Promise) === "function" ? _u : Object)
], OrganizationController.prototype, "getNextEmployeeNumber", null);
__decorate([
    (0, common_1.Get)('employees/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.AdminEmployeeResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_v = typeof Promise !== "undefined" && Promise) === "function" ? _v : Object)
], OrganizationController.prototype, "getEmployee", null);
__decorate([
    (0, common_1.Post)('employees'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏÉùÏÑ±' }),
    (0, swagger_1.ApiBody)({ type: dto_1.CreateEmployeeRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.AdminEmployeeResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_w = typeof dto_1.CreateEmployeeRequestDto !== "undefined" && dto_1.CreateEmployeeRequestDto) === "function" ? _w : Object]),
    __metadata("design:returntype", typeof (_x = typeof Promise !== "undefined" && Promise) === "function" ? _x : Object)
], OrganizationController.prototype, "createEmployee", null);
__decorate([
    (0, common_1.Put)('employees/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏàòÏ†ï' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateEmployeeRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.AdminEmployeeResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_y = typeof dto_1.UpdateEmployeeRequestDto !== "undefined" && dto_1.UpdateEmployeeRequestDto) === "function" ? _y : Object]),
    __metadata("design:returntype", typeof (_z = typeof Promise !== "undefined" && Promise) === "function" ? _z : Object)
], OrganizationController.prototype, "updateEmployee", null);
__decorate([
    (0, common_1.Patch)('employees/bulk/department'),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏßÅÏõê Î∂ÄÏÑú ÏùºÍ¥Ñ ÏàòÏ†ï',
        description: 'DEPARTMENT ÌÉÄÏûÖÏùò Î∂ÄÏÑúÏóêÎßå ÏùºÍ¥Ñ ÏàòÏ†ï Í∞ÄÎä•Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Î∂ÄÏÑú ÏùºÍ¥Ñ ÏàòÏ†ï ÏÑ±Í≥µ', type: dto_1.BulkUpdateResultDto }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ (DEPARTMENT ÌÉÄÏûÖÏù¥ ÏïÑÎãò)' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_0 = typeof dto_1.BulkUpdateDepartmentRequestDto !== "undefined" && dto_1.BulkUpdateDepartmentRequestDto) === "function" ? _0 : Object]),
    __metadata("design:returntype", typeof (_1 = typeof Promise !== "undefined" && Promise) === "function" ? _1 : Object)
], OrganizationController.prototype, "bulkUpdateEmployeeDepartment", null);
__decorate([
    (0, common_1.Patch)('employees/bulk/team'),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏßÅÏõê ÌåÄ ÏùºÍ¥Ñ Î∞∞Ïπò',
        description: 'TEAM ÌÉÄÏûÖÏùò Î∂ÄÏÑúÏóêÎßå ÏùºÍ¥Ñ Î∞∞Ïπò Í∞ÄÎä•Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiBody)({ type: dto_1.BulkUpdateTeamRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'ÌåÄ ÏùºÍ¥Ñ Î∞∞Ïπò ÏÑ±Í≥µ', type: dto_1.BulkUpdateResultDto }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ (TEAM ÌÉÄÏûÖÏù¥ ÏïÑÎãò)' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÌåÄÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_2 = typeof dto_1.BulkUpdateTeamRequestDto !== "undefined" && dto_1.BulkUpdateTeamRequestDto) === "function" ? _2 : Object]),
    __metadata("design:returntype", typeof (_3 = typeof Promise !== "undefined" && Promise) === "function" ? _3 : Object)
], OrganizationController.prototype, "bulkUpdateEmployeeTeam", null);
__decorate([
    (0, common_1.Patch)('employees/bulk/position'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏßÅÏ±Ö ÏùºÍ¥Ñ ÏàòÏ†ï' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'ÏßÅÏ±Ö ÏùºÍ¥Ñ ÏàòÏ†ï ÏÑ±Í≥µ', type: dto_1.BulkUpdateResultDto }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏ±ÖÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_4 = typeof dto_1.BulkUpdatePositionRequestDto !== "undefined" && dto_1.BulkUpdatePositionRequestDto) === "function" ? _4 : Object]),
    __metadata("design:returntype", typeof (_5 = typeof Promise !== "undefined" && Promise) === "function" ? _5 : Object)
], OrganizationController.prototype, "bulkUpdateEmployeePosition", null);
__decorate([
    (0, common_1.Patch)('employees/bulk/rank'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏßÅÍ∏â ÏùºÍ¥Ñ ÏàòÏ†ï' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'ÏßÅÍ∏â ÏùºÍ¥Ñ ÏàòÏ†ï ÏÑ±Í≥µ', type: dto_1.BulkUpdateResultDto }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÍ∏âÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_6 = typeof dto_1.BulkUpdateRankRequestDto !== "undefined" && dto_1.BulkUpdateRankRequestDto) === "function" ? _6 : Object]),
    __metadata("design:returntype", typeof (_7 = typeof Promise !== "undefined" && Promise) === "function" ? _7 : Object)
], OrganizationController.prototype, "bulkUpdateEmployeeRank", null);
__decorate([
    (0, common_1.Patch)('employees/bulk/status'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê Ïû¨ÏßÅÏÉÅÌÉú ÏùºÍ¥Ñ ÏàòÏ†ï' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Ïû¨ÏßÅÏÉÅÌÉú ÏùºÍ¥Ñ ÏàòÏ†ï ÏÑ±Í≥µ', type: dto_1.BulkUpdateResultDto }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_8 = typeof dto_1.BulkUpdateStatusRequestDto !== "undefined" && dto_1.BulkUpdateStatusRequestDto) === "function" ? _8 : Object]),
    __metadata("design:returntype", typeof (_9 = typeof Promise !== "undefined" && Promise) === "function" ? _9 : Object)
], OrganizationController.prototype, "bulkUpdateEmployeeStatus", null);
__decorate([
    (0, common_1.Delete)('employees/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_10 = typeof Promise !== "undefined" && Promise) === "function" ? _10 : Object)
], OrganizationController.prototype, "deleteEmployee", null);
__decorate([
    (0, common_1.Get)('positions'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏ±Ö Î™©Î°ù Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.PositionResponseDto] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_11 = typeof Promise !== "undefined" && Promise) === "function" ? _11 : Object)
], OrganizationController.prototype, "getPositions", null);
__decorate([
    (0, common_1.Post)('positions'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏ±Ö ÏÉùÏÑ±' }),
    (0, swagger_1.ApiBody)({ type: dto_1.CreatePositionRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.PositionResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_12 = typeof dto_1.CreatePositionRequestDto !== "undefined" && dto_1.CreatePositionRequestDto) === "function" ? _12 : Object]),
    __metadata("design:returntype", typeof (_13 = typeof Promise !== "undefined" && Promise) === "function" ? _13 : Object)
], OrganizationController.prototype, "createPosition", null);
__decorate([
    (0, common_1.Put)('positions/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏ±Ö ÏàòÏ†ï' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏ±Ö ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdatePositionRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.PositionResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_14 = typeof dto_1.UpdatePositionRequestDto !== "undefined" && dto_1.UpdatePositionRequestDto) === "function" ? _14 : Object]),
    __metadata("design:returntype", typeof (_15 = typeof Promise !== "undefined" && Promise) === "function" ? _15 : Object)
], OrganizationController.prototype, "updatePosition", null);
__decorate([
    (0, common_1.Delete)('positions/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏ±Ö ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏ±Ö ID' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_16 = typeof Promise !== "undefined" && Promise) === "function" ? _16 : Object)
], OrganizationController.prototype, "deletePosition", null);
__decorate([
    (0, common_1.Get)('ranks'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÍ∏â Î™©Î°ù Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.RankResponseDto] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_17 = typeof Promise !== "undefined" && Promise) === "function" ? _17 : Object)
], OrganizationController.prototype, "getRanks", null);
__decorate([
    (0, common_1.Post)('ranks'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÍ∏â ÏÉùÏÑ±' }),
    (0, swagger_1.ApiBody)({ type: dto_1.CreateRankRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.RankResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_18 = typeof dto_1.CreateRankRequestDto !== "undefined" && dto_1.CreateRankRequestDto) === "function" ? _18 : Object]),
    __metadata("design:returntype", typeof (_19 = typeof Promise !== "undefined" && Promise) === "function" ? _19 : Object)
], OrganizationController.prototype, "createRank", null);
__decorate([
    (0, common_1.Put)('ranks/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÍ∏â ÏàòÏ†ï' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÍ∏â ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateRankRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.RankResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_20 = typeof dto_1.UpdateRankRequestDto !== "undefined" && dto_1.UpdateRankRequestDto) === "function" ? _20 : Object]),
    __metadata("design:returntype", typeof (_21 = typeof Promise !== "undefined" && Promise) === "function" ? _21 : Object)
], OrganizationController.prototype, "updateRank", null);
__decorate([
    (0, common_1.Delete)('ranks/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÍ∏â ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÍ∏â ID' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_22 = typeof Promise !== "undefined" && Promise) === "function" ? _22 : Object)
], OrganizationController.prototype, "deleteRank", null);
__decorate([
    (0, common_1.Get)('employee-assignments'),
    (0, swagger_1.ApiOperation)({ summary: 'Ï†ÑÏ≤¥ ÏßÅÏõê Î∞∞Ïπò Î™©Î°ù Ï°∞Ìöå (ÏßÅÏõê/Î∂ÄÏÑú/ÏßÅÏ±Ö/ÏßÅÍ∏â Ï†ïÎ≥¥ Ìè¨Ìï®)' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.EmployeeAssignmentDetailResponseDto] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_23 = typeof Promise !== "undefined" && Promise) === "function" ? _23 : Object)
], OrganizationController.prototype, "getAllEmployeeAssignments", null);
__decorate([
    (0, common_1.Post)('employee-assignments'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê Î∂ÄÏÑú/ÏßÅÏ±Ö Î∞∞Ïπò' }),
    (0, swagger_1.ApiBody)({ type: dto_1.AssignEmployeeRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.EmployeeAssignmentResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_24 = typeof dto_1.AssignEmployeeRequestDto !== "undefined" && dto_1.AssignEmployeeRequestDto) === "function" ? _24 : Object]),
    __metadata("design:returntype", typeof (_25 = typeof Promise !== "undefined" && Promise) === "function" ? _25 : Object)
], OrganizationController.prototype, "assignEmployee", null);
__decorate([
    (0, common_1.Put)('employee-assignments/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê Î∂ÄÏÑú/ÏßÅÏ±Ö Î≥ÄÍ≤Ω' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∞∞Ïπò ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateEmployeeAssignmentRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeAssignmentResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_26 = typeof dto_1.UpdateEmployeeAssignmentRequestDto !== "undefined" && dto_1.UpdateEmployeeAssignmentRequestDto) === "function" ? _26 : Object]),
    __metadata("design:returntype", typeof (_27 = typeof Promise !== "undefined" && Promise) === "function" ? _27 : Object)
], OrganizationController.prototype, "updateEmployeeAssignment", null);
__decorate([
    (0, common_1.Patch)('employee-assignments/:id/manager-status'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê Î∞∞Ïπò Í¥ÄÎ¶¨Ïûê ÏÉÅÌÉú Î≥ÄÍ≤Ω' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∞∞Ïπò ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateManagerStatusRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.EmployeeAssignmentResponseDto, description: 'Í¥ÄÎ¶¨Ïûê ÏÉÅÌÉú Î≥ÄÍ≤Ω ÏÑ±Í≥µ' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Î∞∞Ïπò Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_28 = typeof dto_1.UpdateManagerStatusRequestDto !== "undefined" && dto_1.UpdateManagerStatusRequestDto) === "function" ? _28 : Object]),
    __metadata("design:returntype", typeof (_29 = typeof Promise !== "undefined" && Promise) === "function" ? _29 : Object)
], OrganizationController.prototype, "updateManagerStatus", null);
__decorate([
    (0, common_1.Delete)('employee-assignments/:id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê Î∂ÄÏÑú/ÏßÅÏ±Ö Ìï¥Ï†ú' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Î∞∞Ïπò ID' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_30 = typeof Promise !== "undefined" && Promise) === "function" ? _30 : Object)
], OrganizationController.prototype, "removeEmployeeAssignment", null);
__decorate([
    (0, common_1.Get)('employees/:id/assignments'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê Î∞∞Ïπò ÌòÑÌô© Ï°∞Ìöå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.EmployeeAssignmentResponseDto] }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_31 = typeof Promise !== "undefined" && Promise) === "function" ? _31 : Object)
], OrganizationController.prototype, "getEmployeeAssignments", null);
__decorate([
    (0, common_1.Post)('employees/:id/rank-promotion'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏßÅÍ∏â Î≥ÄÍ≤Ω' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiBody)({ type: dto_1.PromoteEmployeeRequestDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.EmployeeRankHistoryResponseDto }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_32 = typeof dto_1.PromoteEmployeeRequestDto !== "undefined" && dto_1.PromoteEmployeeRequestDto) === "function" ? _32 : Object]),
    __metadata("design:returntype", typeof (_33 = typeof Promise !== "undefined" && Promise) === "function" ? _33 : Object)
], OrganizationController.prototype, "promoteEmployee", null);
__decorate([
    (0, common_1.Get)('employees/:id/rank-history'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏßÅÏõê ÏßÅÍ∏â Ïù¥Î†• Ï°∞Ìöå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏßÅÏõê ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.EmployeeRankHistoryResponseDto] }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_34 = typeof Promise !== "undefined" && Promise) === "function" ? _34 : Object)
], OrganizationController.prototype, "getEmployeeRankHistory", null);
exports.OrganizationController = OrganizationController = __decorate([
    (0, swagger_1.ApiTags)('Admin - Ï°∞ÏßÅ Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/organizations'),
    __metadata("design:paramtypes", [typeof (_a = typeof organization_application_service_1.OrganizationApplicationService !== "undefined" && organization_application_service_1.OrganizationApplicationService) === "function" ? _a : Object])
], OrganizationController);


/***/ }),

/***/ "./src/modules/application/admin/organization/organization.module.ts":
/*!***************************************************************************!*\
  !*** ./src/modules/application/admin/organization/organization.module.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const organization_controller_1 = __webpack_require__(/*! ./organization.controller */ "./src/modules/application/admin/organization/organization.controller.ts");
const organization_application_service_1 = __webpack_require__(/*! ./organization-application.service */ "./src/modules/application/admin/organization/organization-application.service.ts");
const organization_management_context_module_1 = __webpack_require__(/*! ../../../context/organization-management/organization-management-context.module */ "./src/modules/context/organization-management/organization-management-context.module.ts");
const system_management_context_module_1 = __webpack_require__(/*! ../../../context/system-management/system-management-context.module */ "./src/modules/context/system-management/system-management-context.module.ts");
let OrganizationModule = class OrganizationModule {
};
exports.OrganizationModule = OrganizationModule;
exports.OrganizationModule = OrganizationModule = __decorate([
    (0, common_1.Module)({
        imports: [
            organization_management_context_module_1.OrganizationManagementContextModule,
            system_management_context_module_1.SystemManagementContextModule,
        ],
        controllers: [organization_controller_1.OrganizationController],
        providers: [organization_application_service_1.OrganizationApplicationService],
        exports: [organization_application_service_1.OrganizationApplicationService],
    })
], OrganizationModule);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/create-system-role.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/create-system-role.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateSystemRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateSystemRoleDto {
}
exports.CreateSystemRoleDto = CreateSystemRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CreateSystemRoleDto.prototype, "systemId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï† Ïù¥Î¶Ñ', example: 'Í¥ÄÎ¶¨Ïûê' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateSystemRoleDto.prototype, "roleName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï† ÏΩîÎìú', example: 'admin' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateSystemRoleDto.prototype, "roleCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïó≠Ìï† ÏÑ§Î™Ö', example: 'ÏãúÏä§ÌÖú Ï†ÑÏ≤¥ Í¥ÄÎ¶¨ Í∂åÌïú' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateSystemRoleDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Í∂åÌïú Î™©Î°ù',
        example: ['read', 'write', 'delete'],
        type: [String],
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateSystemRoleDto.prototype, "permissions", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú', example: 1 }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], CreateSystemRoleDto.prototype, "sortOrder", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', example: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateSystemRoleDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í∏∞Î≥∏ Ïó≠Ìï† Ïó¨Î∂Ä (ÏßÅÏõê ÏÉùÏÑ± Ïãú ÏûêÎèô Ìï†Îãπ)', example: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateSystemRoleDto.prototype, "isDefault", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/create-system.dto.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/create-system.dto.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateSystemDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateSystemDto {
}
exports.CreateSystemDto = CreateSystemDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïù¥Î¶Ñ', example: 'RMS' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateSystemDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú ÏÑ§Î™Ö', example: 'Î¶¨ÏÜåÏä§ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateSystemDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎèÑÎ©îÏù∏', example: 'rms.company.com' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateSystemDto.prototype, "domain", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÌóàÏö©Îêú Ïò§Î¶¨ÏßÑ Î™©Î°ù',
        example: ['https://rms.company.com', 'https://admin.company.com'],
        type: [String],
    }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.ArrayMinSize)(1),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateSystemDto.prototype, "allowedOrigin", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìó¨Ïä§Ï≤¥ÌÅ¨ URL', example: 'https://rms.company.com/health' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUrl)(),
    __metadata("design:type", String)
], CreateSystemDto.prototype, "healthCheckUrl", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', example: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateSystemDto.prototype, "isActive", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/index.ts":
/*!***********************************************************!*\
  !*** ./src/modules/application/admin/system/dto/index.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./create-system.dto */ "./src/modules/application/admin/system/dto/create-system.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./update-system.dto */ "./src/modules/application/admin/system/dto/update-system.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./update-system-status.dto */ "./src/modules/application/admin/system/dto/update-system-status.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./system-response.dto */ "./src/modules/application/admin/system/dto/system-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./create-system-role.dto */ "./src/modules/application/admin/system/dto/create-system-role.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./update-system-role.dto */ "./src/modules/application/admin/system/dto/update-system-role.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./system-role-response.dto */ "./src/modules/application/admin/system/dto/system-role-response.dto.ts"), exports);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/system-response.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/system-response.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const system_role_response_dto_1 = __webpack_require__(/*! ./system-role-response.dto */ "./src/modules/application/admin/system/dto/system-role-response.dto.ts");
class SystemResponseDto {
}
exports.SystemResponseDto = SystemResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ID' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "clientId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏãúÌÅ¨Î¶ø' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "clientSecret", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú ÏÑ§Î™Ö' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎèÑÎ©îÏù∏' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "domain", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌóàÏö©Îêú Ïò§Î¶¨ÏßÑ Î™©Î°ù', type: [String] }),
    __metadata("design:type", Array)
], SystemResponseDto.prototype, "allowedOrigin", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìó¨Ïä§Ï≤¥ÌÅ¨ URL' }),
    __metadata("design:type", String)
], SystemResponseDto.prototype, "healthCheckUrl", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], SystemResponseDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù', type: [system_role_response_dto_1.SystemRoleResponseDto] }),
    __metadata("design:type", Array)
], SystemResponseDto.prototype, "roles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], SystemResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùºÏãú' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], SystemResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/system-role-response.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/system-role-response.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemRoleResponseDto = exports.SystemInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class SystemInfoDto {
}
exports.SystemInfoDto = SystemInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], SystemInfoDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ID' }),
    __metadata("design:type", String)
], SystemInfoDto.prototype, "clientId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], SystemInfoDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú ÏÑ§Î™Ö' }),
    __metadata("design:type", String)
], SystemInfoDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎèÑÎ©îÏù∏' }),
    __metadata("design:type", String)
], SystemInfoDto.prototype, "domain", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌóàÏö©Îêú Ïò§Î¶¨ÏßÑ Î™©Î°ù', type: [String] }),
    __metadata("design:type", Array)
], SystemInfoDto.prototype, "allowedOrigin", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìó¨Ïä§Ï≤¥ÌÅ¨ URL' }),
    __metadata("design:type", String)
], SystemInfoDto.prototype, "healthCheckUrl", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], SystemInfoDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], SystemInfoDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùºÏãú' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], SystemInfoDto.prototype, "updatedAt", void 0);
class SystemRoleResponseDto {
}
exports.SystemRoleResponseDto = SystemRoleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Î°§ ID' }),
    __metadata("design:type", String)
], SystemRoleResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], SystemRoleResponseDto.prototype, "systemId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï† Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], SystemRoleResponseDto.prototype, "roleName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïó≠Ìï† ÏΩîÎìú' }),
    __metadata("design:type", String)
], SystemRoleResponseDto.prototype, "roleCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïó≠Ìï† ÏÑ§Î™Ö' }),
    __metadata("design:type", String)
], SystemRoleResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í∂åÌïú Î™©Î°ù', type: [String] }),
    __metadata("design:type", Array)
], SystemRoleResponseDto.prototype, "permissions", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú' }),
    __metadata("design:type", Number)
], SystemRoleResponseDto.prototype, "sortOrder", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], SystemRoleResponseDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í∏∞Î≥∏ Ïó≠Ìï† Ïó¨Î∂Ä (ÏßÅÏõê ÏÉùÏÑ± Ïãú ÏûêÎèô Ìï†Îãπ)' }),
    __metadata("design:type", Boolean)
], SystemRoleResponseDto.prototype, "isDefault", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], SystemRoleResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùºÏãú' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], SystemRoleResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Ï†ïÎ≥¥', type: SystemInfoDto }),
    __metadata("design:type", SystemInfoDto)
], SystemRoleResponseDto.prototype, "system", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/update-system-role.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/update-system-role.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateSystemRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateSystemRoleDto {
}
exports.UpdateSystemRoleDto = UpdateSystemRoleDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïó≠Ìï† Ïù¥Î¶Ñ', example: 'Í¥ÄÎ¶¨Ïûê' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateSystemRoleDto.prototype, "roleName", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïó≠Ìï† ÏΩîÎìú', example: 'admin' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateSystemRoleDto.prototype, "roleCode", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïó≠Ìï† ÏÑ§Î™Ö', example: 'ÏãúÏä§ÌÖú Ï†ÑÏ≤¥ Í¥ÄÎ¶¨ Í∂åÌïú' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateSystemRoleDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Í∂åÌïú Î™©Î°ù',
        example: ['read', 'write', 'delete'],
        type: [String],
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateSystemRoleDto.prototype, "permissions", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú', example: 1 }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], UpdateSystemRoleDto.prototype, "sortOrder", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', example: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateSystemRoleDto.prototype, "isActive", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í∏∞Î≥∏ Ïó≠Ìï† Ïó¨Î∂Ä (ÏßÅÏõê ÏÉùÏÑ± Ïãú ÏûêÎèô Ìï†Îãπ)', example: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateSystemRoleDto.prototype, "isDefault", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/update-system-status.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/update-system-status.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateSystemStatusDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateSystemStatusDto {
}
exports.UpdateSystemStatusDto = UpdateSystemStatusDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', example: true }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", Boolean)
], UpdateSystemStatusDto.prototype, "isActive", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/dto/update-system.dto.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/application/admin/system/dto/update-system.dto.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateSystemDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateSystemDto {
}
exports.UpdateSystemDto = UpdateSystemDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú Ïù¥Î¶Ñ', example: 'RMS' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateSystemDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏãúÏä§ÌÖú ÏÑ§Î™Ö', example: 'Î¶¨ÏÜåÏä§ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateSystemDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÎèÑÎ©îÏù∏', example: 'rms.company.com' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], UpdateSystemDto.prototype, "domain", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÌóàÏö©Îêú Ïò§Î¶¨ÏßÑ Î™©Î°ù',
        example: ['https://rms.company.com', 'https://admin.company.com'],
        type: [String],
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateSystemDto.prototype, "allowedOrigin", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ìó¨Ïä§Ï≤¥ÌÅ¨ URL', example: 'https://rms.company.com/health' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUrl)(),
    __metadata("design:type", String)
], UpdateSystemDto.prototype, "healthCheckUrl", void 0);


/***/ }),

/***/ "./src/modules/application/admin/system/system-application.service.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/application/admin/system/system-application.service.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_management_context_service_1 = __webpack_require__(/*! ../../../context/system-management/system-management-context.service */ "./src/modules/context/system-management/system-management-context.service.ts");
let SystemApplicationService = class SystemApplicationService {
    constructor(ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§) {
        this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§ = ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§;
    }
    async ÏãúÏä§ÌÖúÎ™©Î°ùÏ°∞Ìöå() {
        try {
            const systems = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î™®Îì†_ÏãúÏä§ÌÖúÏùÑ_Ï°∞ÌöåÌïúÎã§();
            return systems.map((system) => this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(system));
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Î™©Î°ù Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÍ≤ÄÏÉâ(query) {
        try {
            const systems = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùÑ_Í≤ÄÏÉâÌïúÎã§(query);
            return systems.map((system) => this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(system));
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Í≤ÄÏÉâÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÏÉÅÏÑ∏Ï°∞Ìöå(id) {
        try {
            const system = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùÑ_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(id);
            if (!system) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            return this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(system);
        }
        catch (error) {
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÏÉùÏÑ±(createDto) {
        try {
            const result = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùÑ_ÏÉùÏÑ±ÌïúÎã§({
                name: createDto.name,
                description: createDto.description,
                domain: createDto.domain,
                allowedOrigin: createDto.allowedOrigin,
                healthCheckUrl: createDto.healthCheckUrl,
                isActive: createDto.isActive,
            });
            const response = this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(result.system);
            response.clientSecret = result.originalSecret;
            return response;
        }
        catch (error) {
            if (error.message?.includes('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶Ñ')) {
                throw new common_1.ConflictException('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶ÑÏûÖÎãàÎã§.');
            }
            throw new common_1.ConflictException('ÏãúÏä§ÌÖú ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÏàòÏ†ï(id, updateDto) {
        try {
            const updatedSystem = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùÑ_ÏàòÏ†ïÌïúÎã§(id, {
                name: updateDto.name,
                description: updateDto.description,
                domain: updateDto.domain,
                allowedOrigin: updateDto.allowedOrigin,
                healthCheckUrl: updateDto.healthCheckUrl,
            });
            return this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(updatedSystem);
        }
        catch (error) {
            if (error.message?.includes('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶Ñ')) {
                throw new common_1.ConflictException('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶ÑÏûÖÎãàÎã§.');
            }
            if (error.message?.includes('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§')) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            throw new common_1.ConflictException('ÏãúÏä§ÌÖú ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÌôúÏÑ±ÏÉÅÌÉúÎ≥ÄÍ≤Ω(id, isActive) {
        try {
            const updatedSystem = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖú_ÌôúÏÑ±ÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(id, isActive);
            return this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(updatedSystem);
        }
        catch (error) {
            if (error.message?.includes('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§')) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú ÌôúÏÑ± ÏÉÅÌÉú Î≥ÄÍ≤ΩÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÏÇ≠Ï†ú(id) {
        try {
            await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùÑ_ÏÇ≠Ï†úÌïúÎã§(id);
        }
        catch (error) {
            if (error.message?.includes('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§')) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async APIÌÇ§_Ïû¨ÏÉùÏÑ±(id) {
        try {
            const result = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùò_APIÌÇ§Î•º_Ïû¨ÏÉùÏÑ±ÌïúÎã§(id);
            const response = this.ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(result.system);
            response.clientSecret = result.originalSecret;
            return response;
        }
        catch (error) {
            if (error.message?.includes('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§')) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            throw new common_1.NotFoundException('API ÌÇ§ Ïû¨ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÎ°§Î™©Î°ùÏ°∞Ìöå(systemId) {
        try {
            let systemRoles;
            if (systemId) {
                systemRoles = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏùò_Ïó≠Ìï†Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(systemId);
            }
            else {
                systemRoles = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î™®Îì†_ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_Ï°∞ÌöåÌïúÎã§();
            }
            return systemRoles.map((role) => this.ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(role));
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÎ°§ÏÉÅÏÑ∏Ï°∞Ìöå(id) {
        try {
            const systemRole = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(id);
            if (!systemRole) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖú Î°§ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            return this.ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(systemRole);
        }
        catch (error) {
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Ïó≠Ìï† Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÎ°§ÏÉùÏÑ±(createDto) {
        try {
            const savedRole = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_ÏÉùÏÑ±ÌïúÎã§({
                systemId: createDto.systemId,
                roleName: createDto.roleName,
                roleCode: createDto.roleCode,
                description: createDto.description,
                permissions: createDto.permissions,
                sortOrder: createDto.sortOrder,
                isDefault: createDto.isDefault,
            });
            return this.ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(savedRole);
        }
        catch (error) {
            if (error.message?.includes('Ïù¥ÎØ∏ Ìï†ÎãπÎêú Ïó≠Ìï†') || error.message?.includes('Ïù¥ÎØ∏ Ï°¥Ïû¨Ìï©ÎãàÎã§')) {
                throw new common_1.ConflictException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏóê Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Ïó≠Ìï† ÏΩîÎìúÏûÖÎãàÎã§.');
            }
            throw new common_1.ConflictException('ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÎ°§ÏàòÏ†ï(id, updateDto) {
        try {
            const updatedRole = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_ÏàòÏ†ïÌïúÎã§(id, {
                roleName: updateDto.roleName,
                roleCode: updateDto.roleCode,
                description: updateDto.description,
                permissions: updateDto.permissions,
                sortOrder: updateDto.sortOrder,
                isActive: updateDto.isActive,
                isDefault: updateDto.isDefault,
            });
            return this.ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(updatedRole);
        }
        catch (error) {
            if (error.message?.includes('Ïù¥ÎØ∏ Ï°¥Ïû¨Ìï©ÎãàÎã§')) {
                throw new common_1.ConflictException('Ìï¥Îãπ ÏãúÏä§ÌÖúÏóê Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Ïó≠Ìï† ÏΩîÎìúÏûÖÎãàÎã§.');
            }
            if (error.message?.includes('Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§')) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖú Î°§ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            throw new common_1.ConflictException('ÏãúÏä§ÌÖú Ïó≠Ìï† ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    async ÏãúÏä§ÌÖúÎ°§ÏÇ≠Ï†ú(id) {
        try {
            await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_ÎπÑÌôúÏÑ±ÌôîÌïúÎã§(id);
        }
        catch (error) {
            if (error.message?.includes('Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§')) {
                throw new common_1.NotFoundException('Ìï¥Îãπ ÏãúÏä§ÌÖú Î°§ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    ÏãúÏä§ÌÖú_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(system) {
        return {
            id: system.id,
            clientId: system.clientId,
            clientSecret: '***',
            name: system.name,
            description: system.description,
            domain: system.domain,
            allowedOrigin: system.allowedOrigin,
            healthCheckUrl: system.healthCheckUrl,
            isActive: system.isActive,
            roles: system.roles ? system.roles.map((role) => this.ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(role)) : [],
            createdAt: system.createdAt,
            updatedAt: system.updatedAt,
        };
    }
    async Í∏∞Î≥∏Ïó≠Ìï†Î™©Î°ùÏ°∞Ìöå() {
        try {
            const defaultRoles = await this.ÏãúÏä§ÌÖúÍ¥ÄÎ¶¨Ïª®ÌÖçÏä§Ìä∏ÏÑúÎπÑÏä§.Î™®Îì†_Í∏∞Î≥∏Ïó≠Ìï†ÏùÑ_Ï°∞ÌöåÌïúÎã§();
            return defaultRoles.map((role) => this.ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(role));
        }
        catch (error) {
            throw new common_1.NotFoundException('Í∏∞Î≥∏ Ïó≠Ìï† Î™©Î°ù Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
    }
    ÏãúÏä§ÌÖúÎ°§_ÏóîÌã∞Ìã∞Î•º_DTOÎ°ú_Î≥ÄÌôò(systemRole) {
        const dto = {
            id: systemRole.id,
            systemId: systemRole.systemId,
            roleName: systemRole.roleName,
            roleCode: systemRole.roleCode,
            description: systemRole.description,
            permissions: systemRole.permissions,
            sortOrder: systemRole.sortOrder,
            isActive: systemRole.isActive,
            isDefault: systemRole.isDefault,
            createdAt: systemRole.createdAt,
            updatedAt: systemRole.updatedAt,
        };
        if (systemRole.system) {
            dto.system = {
                id: systemRole.system.id,
                clientId: systemRole.system.clientId,
                name: systemRole.system.name,
                description: systemRole.system.description,
                domain: systemRole.system.domain,
                allowedOrigin: systemRole.system.allowedOrigin,
                healthCheckUrl: systemRole.system.healthCheckUrl,
                isActive: systemRole.system.isActive,
                createdAt: systemRole.system.createdAt,
                updatedAt: systemRole.system.updatedAt,
            };
        }
        return dto;
    }
};
exports.SystemApplicationService = SystemApplicationService;
exports.SystemApplicationService = SystemApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof system_management_context_service_1.SystemManagementContextService !== "undefined" && system_management_context_service_1.SystemManagementContextService) === "function" ? _a : Object])
], SystemApplicationService);


/***/ }),

/***/ "./src/modules/application/admin/system/system-role.controller.ts":
/*!************************************************************************!*\
  !*** ./src/modules/application/admin/system/system-role.controller.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemRoleController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const system_application_service_1 = __webpack_require__(/*! ./system-application.service */ "./src/modules/application/admin/system/system-application.service.ts");
const dto_1 = __webpack_require__(/*! ./dto */ "./src/modules/application/admin/system/dto/index.ts");
let SystemRoleController = class SystemRoleController {
    constructor(systemApplicationService) {
        this.systemApplicationService = systemApplicationService;
    }
    async getSystemRoles(systemId, defaultOnly) {
        if (defaultOnly === 'true') {
            return await this.systemApplicationService.Í∏∞Î≥∏Ïó≠Ìï†Î™©Î°ùÏ°∞Ìöå();
        }
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÎ°§Î™©Î°ùÏ°∞Ìöå(systemId);
    }
    async getSystemRole(id) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÎ°§ÏÉÅÏÑ∏Ï°∞Ìöå(id);
    }
    async createSystemRole(createSystemRoleDto) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÎ°§ÏÉùÏÑ±(createSystemRoleDto);
    }
    async updateSystemRole(id, updateSystemRoleDto) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÎ°§ÏàòÏ†ï(id, updateSystemRoleDto);
    }
    async deleteSystemRole(id) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÎ°§ÏÇ≠Ï†ú(id);
    }
};
exports.SystemRoleController = SystemRoleController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Ïó≠Ìï† Î™©Î°ù Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.SystemRoleResponseDto] }),
    (0, swagger_1.ApiQuery)({ name: 'systemId', required: false, description: 'ÏãúÏä§ÌÖú ID (ÌäπÏ†ï ÏãúÏä§ÌÖúÏùò Ïó≠Ìï†Îßå Ï°∞Ìöå)' }),
    (0, swagger_1.ApiQuery)({ name: 'defaultOnly', required: false, description: 'Í∏∞Î≥∏ Ïó≠Ìï†Îßå Ï°∞Ìöå (true/false)' }),
    __param(0, (0, common_1.Query)('systemId')),
    __param(1, (0, common_1.Query)('defaultOnly')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], SystemRoleController.prototype, "getSystemRoles", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.SystemRoleResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], SystemRoleController.prototype, "getSystemRole", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÉùÏÑ±' }),
    (0, swagger_1.ApiBody)({ type: dto_1.CreateSystemRoleDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.SystemRoleResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiResponse)({ status: 409, description: 'Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Ïó≠Ìï† ÏΩîÎìú' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof dto_1.CreateSystemRoleDto !== "undefined" && dto_1.CreateSystemRoleDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], SystemRoleController.prototype, "createSystemRole", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ÏàòÏ†ï' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateSystemRoleDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.SystemRoleResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiResponse)({ status: 409, description: 'Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Ïó≠Ìï† ÏΩîÎìú' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof dto_1.UpdateSystemRoleDto !== "undefined" && dto_1.UpdateSystemRoleDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], SystemRoleController.prototype, "updateSystemRole", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], SystemRoleController.prototype, "deleteSystemRole", null);
exports.SystemRoleController = SystemRoleController = __decorate([
    (0, swagger_1.ApiTags)('Admin - ÏãúÏä§ÌÖú Ïó≠Ìï† Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/system-roles'),
    __metadata("design:paramtypes", [typeof (_a = typeof system_application_service_1.SystemApplicationService !== "undefined" && system_application_service_1.SystemApplicationService) === "function" ? _a : Object])
], SystemRoleController);


/***/ }),

/***/ "./src/modules/application/admin/system/system.controller.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/application/admin/system/system.controller.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const system_application_service_1 = __webpack_require__(/*! ./system-application.service */ "./src/modules/application/admin/system/system-application.service.ts");
const dto_1 = __webpack_require__(/*! ./dto */ "./src/modules/application/admin/system/dto/index.ts");
let SystemController = class SystemController {
    constructor(systemApplicationService) {
        this.systemApplicationService = systemApplicationService;
    }
    async getSystems(search) {
        if (search) {
            return await this.systemApplicationService.ÏãúÏä§ÌÖúÍ≤ÄÏÉâ(search);
        }
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÎ™©Î°ùÏ°∞Ìöå();
    }
    async searchSystems(query) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÍ≤ÄÏÉâ(query);
    }
    async getSystem(id) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÏÉÅÏÑ∏Ï°∞Ìöå(id);
    }
    async createSystem(createSystemDto) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÏÉùÏÑ±(createSystemDto);
    }
    async updateSystem(id, updateSystemDto) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÏàòÏ†ï(id, updateSystemDto);
    }
    async updateSystemStatus(id, updateStatusDto) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÌôúÏÑ±ÏÉÅÌÉúÎ≥ÄÍ≤Ω(id, updateStatusDto.isActive);
    }
    async deleteSystem(id) {
        return await this.systemApplicationService.ÏãúÏä§ÌÖúÏÇ≠Ï†ú(id);
    }
    async regenerateApiKeys(id) {
        return await this.systemApplicationService.APIÌÇ§_Ïû¨ÏÉùÏÑ±(id);
    }
};
exports.SystemController = SystemController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Î™©Î°ù Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.SystemResponseDto] }),
    (0, swagger_1.ApiQuery)({ name: 'search', required: false, description: 'Í≤ÄÏÉâÏñ¥ (Ïù¥Î¶Ñ, ÏÑ§Î™Ö, ÎèÑÎ©îÏù∏)' }),
    __param(0, (0, common_1.Query)('search')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], SystemController.prototype, "getSystems", null);
__decorate([
    (0, common_1.Get)('search'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú Í≤ÄÏÉâ' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: [dto_1.SystemResponseDto] }),
    (0, swagger_1.ApiQuery)({ name: 'query', required: true, description: 'Í≤ÄÏÉâÏñ¥' }),
    __param(0, (0, common_1.Query)('query')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], SystemController.prototype, "searchSystems", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú ÏÉÅÏÑ∏ Ï°∞Ìöå' }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.SystemResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], SystemController.prototype, "getSystem", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏãúÏä§ÌÖú ÏÉùÏÑ±',
        description: 'ÏÉàÎ°úÏö¥ ÏãúÏä§ÌÖúÏùÑ Îì±Î°ùÌïòÍ≥† ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ID/ÏãúÌÅ¨Î¶øÏùÑ ÏûêÎèô ÏÉùÏÑ±Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiBody)({ type: dto_1.CreateSystemDto }),
    (0, swagger_1.ApiResponse)({ status: 201, type: dto_1.SystemResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 409, description: 'Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶Ñ' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof dto_1.CreateSystemDto !== "undefined" && dto_1.CreateSystemDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], SystemController.prototype, "createSystem", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú ÏàòÏ†ï' }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateSystemDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.SystemResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiResponse)({ status: 409, description: 'Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶Ñ' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú ID' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_g = typeof dto_1.UpdateSystemDto !== "undefined" && dto_1.UpdateSystemDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], SystemController.prototype, "updateSystem", null);
__decorate([
    (0, common_1.Patch)(':id/status'),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏãúÏä§ÌÖú ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω',
        description: 'ÏãúÏä§ÌÖúÏùò ÌôúÏÑ±Ìôî/ÎπÑÌôúÏÑ±Ìôî ÏÉÅÌÉúÎ•º Î≥ÄÍ≤ΩÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiBody)({ type: dto_1.UpdateSystemStatusDto }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.SystemResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú ID' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_j = typeof dto_1.UpdateSystemStatusDto !== "undefined" && dto_1.UpdateSystemStatusDto) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], SystemController.prototype, "updateSystemStatus", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, swagger_1.ApiOperation)({ summary: 'ÏãúÏä§ÌÖú ÏÇ≠Ï†ú' }),
    (0, swagger_1.ApiResponse)({ status: 200 }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], SystemController.prototype, "deleteSystem", null);
__decorate([
    (0, common_1.Post)(':id/regenerate-keys'),
    (0, swagger_1.ApiOperation)({
        summary: 'API ÌÇ§ Ïû¨ÏÉùÏÑ±',
        description: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏãúÌÅ¨Î¶øÏùÑ ÏÉàÎ°ú ÏÉùÏÑ±Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({ status: 200, type: dto_1.SystemResponseDto }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ÏãúÏä§ÌÖú ID' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], SystemController.prototype, "regenerateApiKeys", null);
exports.SystemController = SystemController = __decorate([
    (0, swagger_1.ApiTags)('Admin - ÏãúÏä§ÌÖú Í¥ÄÎ¶¨'),
    (0, common_1.Controller)('admin/systems'),
    __metadata("design:paramtypes", [typeof (_a = typeof system_application_service_1.SystemApplicationService !== "undefined" && system_application_service_1.SystemApplicationService) === "function" ? _a : Object])
], SystemController);


/***/ }),

/***/ "./src/modules/application/admin/system/system.module.ts":
/*!***************************************************************!*\
  !*** ./src/modules/application/admin/system/system.module.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_controller_1 = __webpack_require__(/*! ./system.controller */ "./src/modules/application/admin/system/system.controller.ts");
const system_role_controller_1 = __webpack_require__(/*! ./system-role.controller */ "./src/modules/application/admin/system/system-role.controller.ts");
const system_application_service_1 = __webpack_require__(/*! ./system-application.service */ "./src/modules/application/admin/system/system-application.service.ts");
const system_management_context_module_1 = __webpack_require__(/*! ../../../context/system-management/system-management-context.module */ "./src/modules/context/system-management/system-management-context.module.ts");
let SystemModule = class SystemModule {
};
exports.SystemModule = SystemModule;
exports.SystemModule = SystemModule = __decorate([
    (0, common_1.Module)({
        imports: [system_management_context_module_1.SystemManagementContextModule],
        controllers: [system_controller_1.SystemController, system_role_controller_1.SystemRoleController],
        providers: [system_application_service_1.SystemApplicationService],
        exports: [system_application_service_1.SystemApplicationService],
    })
], SystemModule);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/controllers/fcm-token-management-application.controller.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/controllers/fcm-token-management-application.controller.ts ***!
  \*****************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenManagementApplicationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const fcm_token_management_application_service_1 = __webpack_require__(/*! ../fcm-token-management-application.service */ "./src/modules/application/fcm-token-management/fcm-token-management-application.service.ts");
const dto_1 = __webpack_require__(/*! ../dto */ "./src/modules/application/fcm-token-management/dto/index.ts");
let FcmTokenManagementApplicationController = class FcmTokenManagementApplicationController {
    constructor(fcmTokenManagementApplicationService) {
        this.fcmTokenManagementApplicationService = fcmTokenManagementApplicationService;
    }
    async subscribeFcm(body) {
        return this.fcmTokenManagementApplicationService.FCMÌÜ†ÌÅ∞ÏùÑ_Íµ¨ÎèÖÌïúÎã§(body);
    }
    async getFcmToken(baseEmployeeIdentifierDto) {
        return this.fcmTokenManagementApplicationService.FCMÌÜ†ÌÅ∞ÏùÑ_Ï°∞ÌöåÌïúÎã§(baseEmployeeIdentifierDto);
    }
    async unsubscribeFcm(body) {
        return this.fcmTokenManagementApplicationService.FCMÌÜ†ÌÅ∞_Íµ¨ÎèÖÏùÑ_Ìï¥ÏßÄÌïúÎã§(body);
    }
    async getFcmTokens(employeeNumbers, employeeIds) {
        if (employeeIds) {
            const employeeIdsArray = employeeIds
                .split(',')
                .map((id) => id.trim())
                .filter((id) => id.length > 0);
            return this.fcmTokenManagementApplicationService.Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(employeeIdsArray);
        }
        if (employeeNumbers) {
            const employeeNumbersArray = employeeNumbers
                .split(',')
                .map((num) => num.trim())
                .filter((num) => num.length > 0);
            return this.fcmTokenManagementApplicationService.Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeNumbersArray);
        }
        throw new common_1.BadRequestException('employeeIds ÎòêÎäî employeeNumbers Ï§ë ÌïòÎÇòÎäî Î∞òÎìúÏãú Ï†úÍ≥µÎêòÏñ¥Ïïº Ìï©ÎãàÎã§.');
    }
    async removeFcmTokens(body) {
        return this.fcmTokenManagementApplicationService.Ïó¨Îü¨_ÏßÅÏõêÏùò_Ïó¨Îü¨_ÌÜ†ÌÅ∞ÏùÑ_ÏùºÍ¥ÑÏ†úÍ±∞ÌïúÎã§(body);
    }
};
exports.FcmTokenManagementApplicationController = FcmTokenManagementApplicationController;
__decorate([
    (0, common_1.Post)('subscribe'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'FCM ÌÜ†ÌÅ∞ Íµ¨ÎèÖ',
        description: 'ÏÇ¨Ïö©ÏûêÏùò FCM ÌÜ†ÌÅ∞ÏùÑ Îì±Î°ùÌïòÍ±∞ÎÇò ÏóÖÎç∞Ïù¥Ìä∏Ìï©ÎãàÎã§. ' +
            'employeeIdÏôÄ employeeNumberÍ∞Ä Îëò Îã§ Ï†úÍ≥µÎêú Í≤ΩÏö∞ Ï†ïÌï©ÏÑ±ÏùÑ Ï≤¥ÌÅ¨Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'FCM ÌÜ†ÌÅ∞ Íµ¨ÎèÖ ÏÑ±Í≥µ',
        type: dto_1.FcmSubscribeResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù ÎòêÎäî employeeIdÏôÄ employeeNumber Ï†ïÌï©ÏÑ± Ïò§Î•ò' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof dto_1.FcmSubscribeRequestDto !== "undefined" && dto_1.FcmSubscribeRequestDto) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], FcmTokenManagementApplicationController.prototype, "subscribeFcm", null);
__decorate([
    (0, common_1.Get)('token'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'FCM ÌÜ†ÌÅ∞ Ï°∞Ìöå',
        description: 'employeeId ÎòêÎäî employeeNumberÎ°ú ÏßÅÏõêÏùò Î™®Îì† FCM ÌÜ†ÌÅ∞ÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§. ' +
            'Îëò Îã§ Ï†úÍ≥µÎêú Í≤ΩÏö∞ Í∞ôÏùÄ ÏßÅÏõêÏùÑ Í∞ÄÎ¶¨ÌÇ§ÎäîÏßÄ Ï†ïÌï©ÏÑ±ÏùÑ Ï≤¥ÌÅ¨Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeId',
        description: 'ÏßÅÏõê ID (UUID)',
        required: false,
        type: String,
        example: '123e4567-e89b-12d3-a456-426614174000',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeNumber',
        description: 'ÏßÅÏõê Î≤àÌò∏',
        required: false,
        type: String,
        example: '25001',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'FCM ÌÜ†ÌÅ∞ Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.FcmTokensResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù ÎòêÎäî employeeIdÏôÄ employeeNumber Ï†ïÌï©ÏÑ± Ïò§Î•ò' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof dto_1.BaseEmployeeIdentifierDto !== "undefined" && dto_1.BaseEmployeeIdentifierDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], FcmTokenManagementApplicationController.prototype, "getFcmToken", null);
__decorate([
    (0, common_1.Post)('unsubscribe'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'FCM ÌÜ†ÌÅ∞ Íµ¨ÎèÖ Ìï¥ÏßÄ',
        description: 'employeeId ÎòêÎäî employeeNumberÎ°ú FCM ÌÜ†ÌÅ∞ Íµ¨ÎèÖÏùÑ Ìï¥ÏßÄÌï©ÎãàÎã§. ' + 'Îëò Îã§ Ï†úÍ≥µÎêú Í≤ΩÏö∞ Ï†ïÌï©ÏÑ±ÏùÑ Ï≤¥ÌÅ¨Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'FCM ÌÜ†ÌÅ∞ Íµ¨ÎèÖ Ìï¥ÏßÄ ÏÑ±Í≥µ',
        type: Boolean,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù ÎòêÎäî employeeIdÏôÄ employeeNumber Ï†ïÌï©ÏÑ± Ïò§Î•ò' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof dto_1.FcmUnsubscribeRequestDto !== "undefined" && dto_1.FcmUnsubscribeRequestDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], FcmTokenManagementApplicationController.prototype, "unsubscribeFcm", null);
__decorate([
    (0, common_1.Get)('tokens'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Ïó¨Îü¨ ÏßÅÏõêÏùò FCM ÌÜ†ÌÅ∞ Ï°∞Ìöå (ÏïåÎ¶ºÏÑúÎ≤ÑÏö©)',
        description: 'ÏïåÎ¶ºÏÑúÎ≤ÑÏóêÏÑú ÏÇ¨Ïö©Ìï† Ïó¨Îü¨ ÏßÅÏõêÏùò FCM ÌÜ†ÌÅ∞ÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§. employeeIds ÎòêÎäî employeeNumbers Ï§ë ÌïòÎÇòÎ•º Ï†úÍ≥µÌï¥Ïïº Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeNumbers',
        description: 'ÏßÅÏõêÎ≤àÌò∏ Î∞∞Ïó¥ (ÏâºÌëúÎ°ú Íµ¨Î∂Ñ)',
        required: false,
        type: String,
        example: '25001,25002,25003',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeIds',
        description: 'ÏßÅÏõê ID Î∞∞Ïó¥ (ÏâºÌëúÎ°ú Íµ¨Î∂Ñ, UUID)',
        required: false,
        type: String,
        example: '123e4567-e89b-12d3-a456-426614174000,123e4567-e89b-12d3-a456-426614174001',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'FCM ÌÜ†ÌÅ∞ Î™©Î°ù Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.MultipleFcmTokensResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Query)('employeeNumbers')),
    __param(1, (0, common_1.Query)('employeeIds')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], FcmTokenManagementApplicationController.prototype, "getFcmTokens", null);
__decorate([
    (0, common_1.Delete)('tokens'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Ïó¨Îü¨ ÏßÅÏõêÏùò Ïó¨Îü¨ FCM ÌÜ†ÌÅ∞ ÏùºÍ¥Ñ Ï†úÍ±∞',
        description: 'ÏßÅÏõêÎ≥Ñ ÌÜ†ÌÅ∞ Ï†ïÎ≥¥ Î∞∞Ïó¥ÏùÑ Î∞õÏïÑÏÑú Í∞Å ÏßÅÏõêÏùò ÌÜ†ÌÅ∞Îì§ÏùÑ ÏùºÍ¥Ñ Ï†úÍ±∞Ìï©ÎãàÎã§. ' +
            'Í∞Å ÏßÅÏõê Ï†ïÎ≥¥ÏôÄ ÌÜ†ÌÅ∞ Ï†ïÎ≥¥Í∞Ä Î™®Îëê Ï°¥Ïû¨ÌïòÍ≥† Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÏñ¥Ïïº Ìï©ÎãàÎã§. ' +
            'Ïó∞Í≤∞ Í¥ÄÍ≥ÑÎ•º ÏÇ≠Ï†úÌïú ÌõÑ, Îã§Î•∏ ÏßÅÏõêÏù¥ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäî Í≤ΩÏö∞ ÌÜ†ÌÅ∞ÎèÑ Ìï®Íªò ÏÇ≠Ï†úÌï©ÎãàÎã§. ' +
            'ÏùºÎ∂Ä ÏÇ≠Ï†úÍ∞Ä Ïã§Ìå®Ìï¥ÎèÑ ÎÇòÎ®∏ÏßÄÎäî Í≥ÑÏÜç Ï≤òÎ¶¨ÎêòÎ©∞, Í∞Å Í≤∞Í≥ºÎ•º Î∞òÌôòÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'FCM ÌÜ†ÌÅ∞ ÏùºÍ¥Ñ Ï†úÍ±∞ ÏôÑÎ£å (ÏÑ±Í≥µ/Ïã§Ìå® Í≤∞Í≥º Ìè¨Ìï®)',
        type: dto_1.FcmRemoveTokenResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof dto_1.FcmRemoveTokenRequestDto !== "undefined" && dto_1.FcmRemoveTokenRequestDto) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], FcmTokenManagementApplicationController.prototype, "removeFcmTokens", null);
exports.FcmTokenManagementApplicationController = FcmTokenManagementApplicationController = __decorate([
    (0, swagger_1.ApiTags)('Client - FCM ÌÜ†ÌÅ∞ Í¥ÄÎ¶¨ API'),
    (0, common_1.Controller)('fcm'),
    __metadata("design:paramtypes", [typeof (_a = typeof fcm_token_management_application_service_1.FcmTokenManagementApplicationService !== "undefined" && fcm_token_management_application_service_1.FcmTokenManagementApplicationService) === "function" ? _a : Object])
], FcmTokenManagementApplicationController);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/base-employee-identifier.dto.ts":
/*!******************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/base-employee-identifier.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseEmployeeIdentifierDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class BaseEmployeeIdentifierDto {
}
exports.BaseEmployeeIdentifierDto = BaseEmployeeIdentifierDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏßÅÏõê ID (UUID). employeeNumberÏôÄ Ìï®Íªò Ï†úÍ≥µÎêòÎ©¥ Ï†ïÌï©ÏÑ±ÏùÑ Ï≤¥ÌÅ¨Ìï©ÎãàÎã§.',
        example: '123e4567-e89b-12d3-a456-426614174000',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)('4', { message: 'employeeIdÎäî Ïú†Ìö®Ìïú UUID ÌòïÏãùÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.' }),
    (0, class_validator_1.ValidateIf)((obj) => !obj.employeeNumber || obj.employeeId),
    __metadata("design:type", String)
], BaseEmployeeIdentifierDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏßÅÏõê Î≤àÌò∏. employeeIdÏôÄ Ìï®Íªò Ï†úÍ≥µÎêòÎ©¥ Í∞ôÏùÄ ÏßÅÏõêÏùÑ Í∞ÄÎ¶¨ÌÇ§ÎäîÏßÄ Í≤ÄÏ¶ùÌï©ÎãàÎã§.',
        example: '25001',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.ValidateIf)((obj) => !obj.employeeId || obj.employeeNumber),
    __metadata("design:type", String)
], BaseEmployeeIdentifierDto.prototype, "employeeNumber", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-remove-token-request.dto.ts":
/*!******************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-remove-token-request.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmRemoveTokenRequestDto = exports.EmployeeFcmTokensDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class EmployeeFcmTokensDto {
}
exports.EmployeeFcmTokensDto = EmployeeFcmTokensDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõê Î≤àÌò∏',
        example: '25001',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], EmployeeFcmTokensDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìï¥Îãπ ÏßÅÏõêÏùò FCM ÌÜ†ÌÅ∞ Í∞í Î∞∞Ïó¥',
        example: ['fcm_token_example_12345...', 'fcm_token_example_67890...'],
        type: [String],
    }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.ArrayMinSize)(1, { message: 'ÏµúÏÜå ÌïòÎÇò Ïù¥ÏÉÅÏùò FCM ÌÜ†ÌÅ∞Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.' }),
    (0, class_validator_1.IsString)({ each: true }),
    (0, class_validator_1.IsNotEmpty)({ each: true }),
    __metadata("design:type", Array)
], EmployeeFcmTokensDto.prototype, "fcmTokens", void 0);
class FcmRemoveTokenRequestDto {
}
exports.FcmRemoveTokenRequestDto = FcmRemoveTokenRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõêÎ≥Ñ ÌÜ†ÌÅ∞ Ï†ïÎ≥¥ Î∞∞Ïó¥',
        example: [
            {
                employeeNumber: '25001',
                fcmTokens: ['fcm_token_example_12345...', 'fcm_token_example_67890...'],
            },
            {
                employeeNumber: '25002',
                fcmTokens: ['fcm_token_example_11111...'],
            },
        ],
        type: [EmployeeFcmTokensDto],
    }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.ArrayMinSize)(1, { message: 'ÏµúÏÜå ÌïòÎÇò Ïù¥ÏÉÅÏùò ÏßÅÏõê Ï†ïÎ≥¥Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.' }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => EmployeeFcmTokensDto),
    __metadata("design:type", Array)
], FcmRemoveTokenRequestDto.prototype, "employees", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-remove-token-response.dto.ts":
/*!*******************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-remove-token-response.dto.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmRemoveTokenResponseDto = exports.FcmTokenRemoveResultDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FcmTokenRemoveResultDto {
}
exports.FcmTokenRemoveResultDto = FcmTokenRemoveResultDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î≤àÌò∏' }),
    __metadata("design:type", String)
], FcmTokenRemoveResultDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞ Í∞í' }),
    __metadata("design:type", String)
], FcmTokenRemoveResultDto.prototype, "fcmToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ≠Ï†ú ÏÑ±Í≥µ Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], FcmTokenRemoveResultDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏóêÎü¨ Î©îÏãúÏßÄ (Ïã§Ìå®Ìïú Í≤ΩÏö∞)', required: false }),
    __metadata("design:type", String)
], FcmTokenRemoveResultDto.prototype, "error", void 0);
class FcmRemoveTokenResponseDto {
}
exports.FcmRemoveTokenResponseDto = FcmRemoveTokenResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Í∞Å ÏßÅÏõê-ÌÜ†ÌÅ∞ Ï°∞Ìï©Î≥Ñ ÏÇ≠Ï†ú Í≤∞Í≥º',
        type: [FcmTokenRemoveResultDto],
    }),
    __metadata("design:type", Array)
], FcmRemoveTokenResponseDto.prototype, "results", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ ÏÇ≠Ï†ú ÏãúÎèÑ ÌöüÏàò' }),
    __metadata("design:type", Number)
], FcmRemoveTokenResponseDto.prototype, "totalAttempts", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÑ±Í≥µÌïú ÏÇ≠Ï†ú ÌöüÏàò' }),
    __metadata("design:type", Number)
], FcmRemoveTokenResponseDto.prototype, "successCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïã§Ìå®Ìïú ÏÇ≠Ï†ú ÌöüÏàò' }),
    __metadata("design:type", Number)
], FcmRemoveTokenResponseDto.prototype, "failCount", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-subscribe-request.dto.ts":
/*!***************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-subscribe-request.dto.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmSubscribeRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const base_employee_identifier_dto_1 = __webpack_require__(/*! ./base-employee-identifier.dto */ "./src/modules/application/fcm-token-management/dto/base-employee-identifier.dto.ts");
class FcmSubscribeRequestDto extends base_employee_identifier_dto_1.BaseEmployeeIdentifierDto {
}
exports.FcmSubscribeRequestDto = FcmSubscribeRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'FCM ÌÜ†ÌÅ∞',
        example: 'eGb1fxhAPTM6F-XYvVQFNu:APA91bEniVqcKgVLvVeS5Z5FZ5Z5Z5Z5Z5Z5Z5Z5Z5Z',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], FcmSubscribeRequestDto.prototype, "fcmToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÎîîÎ∞îÏù¥Ïä§ ÌÉÄÏûÖ',
        example: 'lsms-prod, portal-prod',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], FcmSubscribeRequestDto.prototype, "deviceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ≥¥',
        example: 'desktop, mobile',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], FcmSubscribeRequestDto.prototype, "deviceInfo", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-subscribe-response.dto.ts":
/*!****************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-subscribe-response.dto.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmSubscribeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FcmSubscribeResponseDto {
}
exports.FcmSubscribeResponseDto = FcmSubscribeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Îì±Î°ùÎêú FCM ÌÜ†ÌÅ∞',
        example: 'eGb1fxhAPTM6F-XYvVQFNu:APA91bEniVqcKgVLvVeS5Z5FZ5Z5Z5Z5Z5Z5Z5Z5Z5Z',
    }),
    __metadata("design:type", String)
], FcmSubscribeResponseDto.prototype, "fcmToken", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-token-request.dto.ts":
/*!***********************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-token-request.dto.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenRequestDto = void 0;
const base_employee_identifier_dto_1 = __webpack_require__(/*! ./base-employee-identifier.dto */ "./src/modules/application/fcm-token-management/dto/base-employee-identifier.dto.ts");
class FcmTokenRequestDto extends base_employee_identifier_dto_1.BaseEmployeeIdentifierDto {
}
exports.FcmTokenRequestDto = FcmTokenRequestDto;


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-token-response.dto.ts":
/*!************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-token-response.dto.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FcmTokenResponseDto {
}
exports.FcmTokenResponseDto = FcmTokenResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõê ID',
        example: 'emp123',
    }),
    __metadata("design:type", String)
], FcmTokenResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏÇ¨Î≤à',
        example: 'E2023001',
    }),
    __metadata("design:type", String)
], FcmTokenResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'FCM ÌÜ†ÌÅ∞ (ÏóÜÏúºÎ©¥ null)',
        example: 'eGb1fxhAPTM6F-XYvVQFNu:APA91bEniVqcKgVLvVeS5Z5FZ5Z5Z5Z5Z5Z5Z5Z5Z5Z',
    }),
    __metadata("design:type", String)
], FcmTokenResponseDto.prototype, "fcmToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÌÜ†ÌÅ∞ ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÍ∞Ñ',
        example: '2024-01-01T00:00:00.000Z',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], FcmTokenResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-tokens-response.dto.ts":
/*!*************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-tokens-response.dto.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokensResponseDto = exports.FcmTokenDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FcmTokenDto {
}
exports.FcmTokenDto = FcmTokenDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'FCM ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], FcmTokenDto.prototype, "fcmToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÎîîÎ∞îÏù¥Ïä§ ÌÉÄÏûÖ (Ïòà: android, ios, pc, web)',
        type: String,
        example: 'pc',
    }),
    __metadata("design:type", String)
], FcmTokenDto.prototype, "deviceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], FcmTokenDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], FcmTokenDto.prototype, "updatedAt", void 0);
class FcmTokensResponseDto {
}
exports.FcmTokensResponseDto = FcmTokensResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], FcmTokensResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î≤àÌò∏' }),
    __metadata("design:type", String)
], FcmTokensResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'FCM ÌÜ†ÌÅ∞ Î™©Î°ù',
        type: [FcmTokenDto],
    }),
    __metadata("design:type", Array)
], FcmTokensResponseDto.prototype, "tokens", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-unsubscribe-request.dto.ts":
/*!*****************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-unsubscribe-request.dto.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmUnsubscribeRequestDto = void 0;
const base_employee_identifier_dto_1 = __webpack_require__(/*! ./base-employee-identifier.dto */ "./src/modules/application/fcm-token-management/dto/base-employee-identifier.dto.ts");
class FcmUnsubscribeRequestDto extends base_employee_identifier_dto_1.BaseEmployeeIdentifierDto {
}
exports.FcmUnsubscribeRequestDto = FcmUnsubscribeRequestDto;


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/fcm-unsubscribe-response.dto.ts":
/*!******************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/fcm-unsubscribe-response.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmUnsubscribeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FcmUnsubscribeResponseDto {
}
exports.FcmUnsubscribeResponseDto = FcmUnsubscribeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Íµ¨ÎèÖ Ìï¥ÏßÄ ÏÑ±Í≥µ Ïó¨Î∂Ä',
        example: true,
    }),
    __metadata("design:type", Boolean)
], FcmUnsubscribeResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏùëÎãµ Î©îÏãúÏßÄ',
        example: 'FCM ÌÜ†ÌÅ∞ Íµ¨ÎèÖÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ìï¥ÏßÄÎêòÏóàÏäµÎãàÎã§.',
    }),
    __metadata("design:type", String)
], FcmUnsubscribeResponseDto.prototype, "message", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/index.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/index.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./base-employee-identifier.dto */ "./src/modules/application/fcm-token-management/dto/base-employee-identifier.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-subscribe-request.dto */ "./src/modules/application/fcm-token-management/dto/fcm-subscribe-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-subscribe-response.dto */ "./src/modules/application/fcm-token-management/dto/fcm-subscribe-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-token-request.dto */ "./src/modules/application/fcm-token-management/dto/fcm-token-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-token-response.dto */ "./src/modules/application/fcm-token-management/dto/fcm-token-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-tokens-response.dto */ "./src/modules/application/fcm-token-management/dto/fcm-tokens-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./multiple-fcm-tokens-response.dto */ "./src/modules/application/fcm-token-management/dto/multiple-fcm-tokens-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-unsubscribe-request.dto */ "./src/modules/application/fcm-token-management/dto/fcm-unsubscribe-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-unsubscribe-response.dto */ "./src/modules/application/fcm-token-management/dto/fcm-unsubscribe-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-remove-token-request.dto */ "./src/modules/application/fcm-token-management/dto/fcm-remove-token-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./fcm-remove-token-response.dto */ "./src/modules/application/fcm-token-management/dto/fcm-remove-token-response.dto.ts"), exports);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/dto/multiple-fcm-tokens-response.dto.ts":
/*!**********************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/dto/multiple-fcm-tokens-response.dto.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MultipleFcmTokensResponseDto = exports.FlatFcmTokenDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const fcm_tokens_response_dto_1 = __webpack_require__(/*! ./fcm-tokens-response.dto */ "./src/modules/application/fcm-token-management/dto/fcm-tokens-response.dto.ts");
class FlatFcmTokenDto extends fcm_tokens_response_dto_1.FcmTokenDto {
}
exports.FlatFcmTokenDto = FlatFcmTokenDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], FlatFcmTokenDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î≤àÌò∏' }),
    __metadata("design:type", String)
], FlatFcmTokenDto.prototype, "employeeNumber", void 0);
class MultipleFcmTokensResponseDto {
}
exports.MultipleFcmTokensResponseDto = MultipleFcmTokensResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõêÎ≥ÑÎ°ú Í∑∏Î£πÌïëÎêú ÌÜ†ÌÅ∞ Ï†ïÎ≥¥',
        type: [fcm_tokens_response_dto_1.FcmTokensResponseDto],
    }),
    __metadata("design:type", Array)
], MultipleFcmTokensResponseDto.prototype, "byEmployee", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Î™®Îì† ÌÜ†ÌÅ∞Ïùò flatÌïú Î∞∞Ïó¥',
        type: [FlatFcmTokenDto],
    }),
    __metadata("design:type", Array)
], MultipleFcmTokensResponseDto.prototype, "allTokens", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥ù ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], MultipleFcmTokensResponseDto.prototype, "totalEmployees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥ù ÌÜ†ÌÅ∞ Ïàò' }),
    __metadata("design:type", Number)
], MultipleFcmTokensResponseDto.prototype, "totalTokens", void 0);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/fcm-token-management-application.module.ts":
/*!*************************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/fcm-token-management-application.module.ts ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenManagementApplicationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const fcm_token_management_application_service_1 = __webpack_require__(/*! ./fcm-token-management-application.service */ "./src/modules/application/fcm-token-management/fcm-token-management-application.service.ts");
const fcm_token_management_application_controller_1 = __webpack_require__(/*! ./controllers/fcm-token-management-application.controller */ "./src/modules/application/fcm-token-management/controllers/fcm-token-management-application.controller.ts");
const organization_management_context_module_1 = __webpack_require__(/*! ../../context/organization-management/organization-management-context.module */ "./src/modules/context/organization-management/organization-management-context.module.ts");
const fcm_token_management_context_module_1 = __webpack_require__(/*! ../../context/fcm-token-management/fcm-token-management-context.module */ "./src/modules/context/fcm-token-management/fcm-token-management-context.module.ts");
let FcmTokenManagementApplicationModule = class FcmTokenManagementApplicationModule {
};
exports.FcmTokenManagementApplicationModule = FcmTokenManagementApplicationModule;
exports.FcmTokenManagementApplicationModule = FcmTokenManagementApplicationModule = __decorate([
    (0, common_1.Module)({
        imports: [organization_management_context_module_1.OrganizationManagementContextModule, fcm_token_management_context_module_1.FcmTokenManagementContextModule],
        controllers: [fcm_token_management_application_controller_1.FcmTokenManagementApplicationController],
        providers: [fcm_token_management_application_service_1.FcmTokenManagementApplicationService],
        exports: [fcm_token_management_application_service_1.FcmTokenManagementApplicationService],
    })
], FcmTokenManagementApplicationModule);


/***/ }),

/***/ "./src/modules/application/fcm-token-management/fcm-token-management-application.service.ts":
/*!**************************************************************************************************!*\
  !*** ./src/modules/application/fcm-token-management/fcm-token-management-application.service.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenManagementApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const fcm_token_management_context_service_1 = __webpack_require__(/*! ../../context/fcm-token-management/fcm-token-management-context.service */ "./src/modules/context/fcm-token-management/fcm-token-management-context.service.ts");
const organization_management_context_service_1 = __webpack_require__(/*! src/modules/context/organization-management/organization-management-context.service */ "./src/modules/context/organization-management/organization-management-context.service.ts");
let FcmTokenManagementApplicationService = class FcmTokenManagementApplicationService {
    constructor(organizationContextService, fcmTokenManagementContextService) {
        this.organizationContextService = organizationContextService;
        this.fcmTokenManagementContextService = fcmTokenManagementContextService;
    }
    async getEmployeeFromIdentifier(dto) {
        if (!dto.employeeId && !dto.employeeNumber) {
            throw new common_1.BadRequestException('employeeId ÎòêÎäî employeeNumber Ï§ë ÌïòÎÇòÎäî Î∞òÎìúÏãú Ï†úÍ≥µÎêòÏñ¥Ïïº Ìï©ÎãàÎã§.');
        }
        try {
            if (dto.employeeId && dto.employeeNumber) {
                return await this.validateAndGetEmployeeWithBothIdentifiers(dto.employeeId, dto.employeeNumber);
            }
            return await this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(dto.employeeId || dto.employeeNumber);
        }
        catch (error) {
            if (error instanceof common_1.BadRequestException) {
                throw error;
            }
            throw new common_1.NotFoundException('ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        throw new common_1.BadRequestException('Ïú†Ìö®Ìïú ÏßÅÏõê ÏãùÎ≥ÑÏûêÍ∞Ä Ï†úÍ≥µÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
    }
    async validateAndGetEmployeeWithBothIdentifiers(employeeId, employeeNumber) {
        const [employeeById, employeeByNumber] = await Promise.all([
            this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId, false).catch(() => null),
            this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeNumber, false).catch(() => null),
        ]);
        if (!employeeById && !employeeByNumber) {
            throw new common_1.NotFoundException('Ï†úÍ≥µÎêú employeeIdÏôÄ employeeNumberÎ°ú ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        if (!employeeById) {
            throw new common_1.NotFoundException(`employeeId '${employeeId}'Î°ú ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`);
        }
        if (!employeeByNumber) {
            throw new common_1.NotFoundException(`employeeNumber '${employeeNumber}'Î°ú ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`);
        }
        if (employeeById.id !== employeeByNumber.id) {
            throw new common_1.BadRequestException(`employeeId '${employeeId}'ÏôÄ employeeNumber '${employeeNumber}'Í∞Ä ÏÑúÎ°ú Îã§Î•∏ ÏßÅÏõêÏùÑ Í∞ÄÎ¶¨ÌÇµÎãàÎã§. ` +
                `employeeIdÎäî '${employeeById.employeeNumber}' ÏßÅÏõêÏùÑ, ` +
                `employeeNumberÎäî '${employeeByNumber.id}' ÏßÅÏõêÏùÑ Í∞ÄÎ¶¨ÌÇµÎãàÎã§.`);
        }
        return employeeById;
    }
    async FCMÌÜ†ÌÅ∞ÏùÑ_Íµ¨ÎèÖÌïúÎã§(requestDto) {
        const { fcmToken, deviceType, deviceInfo } = requestDto;
        const employee = await this.getEmployeeFromIdentifier(requestDto);
        console.log('employee', employee);
        await this.fcmTokenManagementContextService.FCMÌÜ†ÌÅ∞ÏùÑ_ÏßÅÏõêÏóêÍ≤å_Îì±Î°ùÌïúÎã§(employee.id, fcmToken, deviceType, deviceInfo);
        console.log('fcmToken', fcmToken);
        console.log('deviceType', deviceType);
        console.log('deviceInfo', deviceInfo);
        return {
            fcmToken: fcmToken,
        };
    }
    async FCMÌÜ†ÌÅ∞ÏùÑ_Ï°∞ÌöåÌïúÎã§(requestDto) {
        const employee = await this.getEmployeeFromIdentifier(requestDto);
        if (!employee) {
            throw new common_1.NotFoundException('ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const employeeFcmTokens = await this.fcmTokenManagementContextService.ÏßÅÏõêÏùò_ÌôúÏÑ±_FCMÌÜ†ÌÅ∞_Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employee.id);
        const tokens = employeeFcmTokens.map((employeeFcmToken) => ({
            fcmToken: employeeFcmToken.fcmToken,
            deviceType: employeeFcmToken.deviceType,
            createdAt: employeeFcmToken.createdAt,
            updatedAt: employeeFcmToken.updatedAt,
        }));
        return {
            employeeId: employee.id,
            employeeNumber: employee.employeeNumber,
            tokens: tokens,
        };
    }
    async FCMÌÜ†ÌÅ∞_Íµ¨ÎèÖÏùÑ_Ìï¥ÏßÄÌïúÎã§(requestDto) {
        const employee = await this.getEmployeeFromIdentifier(requestDto);
        await this.fcmTokenManagementContextService.ÏßÅÏõêÏùò_Î™®Îì†_FCMÌÜ†ÌÅ∞ÏùÑ_Ï†úÍ±∞ÌïúÎã§(employee.id);
        return true;
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeNumbers) {
        return this.Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_ÌÜµÌï©_Ï°∞ÌöåÌïúÎã§(employeeNumbers, 'number');
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(employeeIds) {
        return this.Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_ÌÜµÌï©_Ï°∞ÌöåÌïúÎã§(employeeIds, 'id');
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùò_FCMÌÜ†ÌÅ∞ÏùÑ_ÌÜµÌï©_Ï°∞ÌöåÌïúÎã§(identifiers, type) {
        const byEmployee = [];
        const allTokens = [];
        for (const identifier of identifiers) {
            try {
                const employee = await this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(identifier);
                const employeeFcmTokens = await this.fcmTokenManagementContextService.ÏßÅÏõêÏùò_ÌôúÏÑ±_FCMÌÜ†ÌÅ∞_Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employee.id);
                if (employeeFcmTokens.length > 0) {
                    const tokens = employeeFcmTokens.map((employeeFcmToken) => ({
                        fcmToken: employeeFcmToken.fcmToken,
                        deviceType: employeeFcmToken.deviceType,
                        createdAt: employeeFcmToken.createdAt,
                        updatedAt: employeeFcmToken.updatedAt,
                    }));
                    byEmployee.push({
                        employeeId: employee.id,
                        employeeNumber: employee.employeeNumber,
                        tokens: tokens,
                    });
                    const flatTokens = employeeFcmTokens.map((employeeFcmToken) => ({
                        employeeId: employee.id,
                        employeeNumber: employee.employeeNumber,
                        fcmToken: employeeFcmToken.fcmToken,
                        deviceType: employeeFcmToken.deviceType,
                        createdAt: employeeFcmToken.createdAt,
                        updatedAt: employeeFcmToken.updatedAt,
                    }));
                    allTokens.push(...flatTokens);
                }
            }
            catch (error) {
                console.warn(`${type} ${identifier} Ï°∞Ìöå Ïã§Ìå®:`, error);
            }
        }
        return {
            byEmployee: byEmployee,
            allTokens: allTokens,
            totalEmployees: byEmployee.length,
            totalTokens: allTokens.length,
        };
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùò_Ïó¨Îü¨_ÌÜ†ÌÅ∞ÏùÑ_ÏùºÍ¥ÑÏ†úÍ±∞ÌïúÎã§(requestDto) {
        const { employees } = requestDto;
        const results = await this.fcmTokenManagementContextService.Ïó¨Îü¨_ÏßÅÏõêÏùò_Ïó¨Îü¨_ÌÜ†ÌÅ∞ÏùÑ_ÏùºÍ¥ÑÏ†úÍ±∞ÌïúÎã§(employees);
        const successCount = results.filter((r) => r.success).length;
        const failCount = results.filter((r) => !r.success).length;
        return {
            results: results.map((r) => ({
                employeeNumber: r.employeeNumber,
                fcmToken: r.fcmToken,
                success: r.success,
                error: r.error,
            })),
            totalAttempts: results.length,
            successCount,
            failCount,
        };
    }
};
exports.FcmTokenManagementApplicationService = FcmTokenManagementApplicationService;
exports.FcmTokenManagementApplicationService = FcmTokenManagementApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof organization_management_context_service_1.OrganizationManagementContextService !== "undefined" && organization_management_context_service_1.OrganizationManagementContextService) === "function" ? _a : Object, typeof (_b = typeof fcm_token_management_context_service_1.FcmTokenManagementContextService !== "undefined" && fcm_token_management_context_service_1.FcmTokenManagementContextService) === "function" ? _b : Object])
], FcmTokenManagementApplicationService);


/***/ }),

/***/ "./src/modules/application/organization-information/controllers/organization-information-application.controller.ts":
/*!*************************************************************************************************************************!*\
  !*** ./src/modules/application/organization-information/controllers/organization-information-application.controller.ts ***!
  \*************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationInformationApplicationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const organization_information_application_service_1 = __webpack_require__(/*! ../organization-information-application.service */ "./src/modules/application/organization-information/organization-information-application.service.ts");
const dto_1 = __webpack_require__(/*! ../dto */ "./src/modules/application/organization-information/dto/index.ts");
const user_decorator_1 = __webpack_require__(/*! ../../../../../libs/common/decorators/user.decorator */ "./libs/common/decorators/user.decorator.ts");
const public_decorator_1 = __webpack_require__(/*! ../../../../../libs/common/decorators/public.decorator */ "./libs/common/decorators/public.decorator.ts");
let OrganizationInformationApplicationController = class OrganizationInformationApplicationController {
    constructor(organizationInformationApplicationService) {
        this.organizationInformationApplicationService = organizationInformationApplicationService;
    }
    async getEmployee(user, employeeId, employeeNumber, withDetail) {
        console.log('Ïù∏Ï¶ùÎêú ÏÇ¨Ïö©Ïûê:', user);
        const requestDto = {
            employeeId,
            employeeNumber,
            withDetail,
        };
        return this.organizationInformationApplicationService.ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(requestDto);
    }
    async getEmployees(user, identifiers, withDetail, includeTerminated) {
        const identifiersArray = identifiers
            ? identifiers
                .split(',')
                .map((id) => id.trim())
                .filter((id) => id.length > 0)
            : undefined;
        const requestDto = {
            identifiers: identifiersArray,
            withDetail: withDetail || false,
            includeTerminated: includeTerminated || false,
        };
        return this.organizationInformationApplicationService.Ïó¨Îü¨_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(requestDto);
    }
    async getDepartmentHierarchy(user, rootDepartmentId, maxDepth, withEmployeeDetail, includeTerminated, includeEmptyDepartments, includeInactiveDepartments) {
        console.log('Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞ Ï°∞Ìöå - Ïù∏Ï¶ùÎêú ÏÇ¨Ïö©Ïûê:', user);
        const requestDto = {
            rootDepartmentId,
            maxDepth: maxDepth ? Number(maxDepth) : undefined,
            withEmployeeDetail: withEmployeeDetail === true || String(withEmployeeDetail) === 'true',
            includeTerminated: includeTerminated === true || String(includeTerminated) === 'true',
            includeEmptyDepartments: includeEmptyDepartments !== false && String(includeEmptyDepartments) !== 'false',
            includeInactiveDepartments: includeInactiveDepartments === true || String(includeInactiveDepartments) === 'true',
        };
        return this.organizationInformationApplicationService.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(requestDto);
    }
    async Ï±ÑÏö©ÌîÑÎ°úÏÑ∏Ïä§Ïóê_Ìï©Í≤©Ìïú_ÏßÅÏõêÏùÑ_ÏÉùÏÑ±ÌïúÎã§(hireEmployeeDto) {
        return await this.organizationInformationApplicationService.ÏßÅÏõêÏùÑ_Ï±ÑÏö©ÌïúÎã§(hireEmployeeDto);
    }
    async ÏàòÏäµÍ∏∞Í∞Ñ_ÌèâÍ∞Ä_Î∂àÌï©Í≤©ÏúºÎ°ú_ÏßÅÏõêÏùÑ_Ìá¥ÏÇ¨Ï≤òÎ¶¨ÌïúÎã§(terminateEmployeeDto) {
        return await this.organizationInformationApplicationService.ÏßÅÏõêÏùÑ_Ìá¥ÏÇ¨Ï≤òÎ¶¨ÌïúÎã§(terminateEmployeeDto);
    }
    async exportAllOrganizationData(includeInactiveDepartments) {
        console.log('[Export All Data] Ï†ÑÏ≤¥ Ï°∞ÏßÅ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå ÏãúÏûë');
        const result = await this.organizationInformationApplicationService.Ï†ÑÏ≤¥_Ï°∞ÏßÅ_Îç∞Ïù¥ÌÑ∞Î•º_Ï°∞ÌöåÌïúÎã§(includeInactiveDepartments === true || String(includeInactiveDepartments) === 'true');
        console.log('[Export All Data] Ï°∞Ìöå ÏôÑÎ£å:', {
            departments: result.totalCounts.departments,
            employees: result.totalCounts.employees,
            positions: result.totalCounts.positions,
            ranks: result.totalCounts.ranks,
            employeeDepartmentPositions: result.totalCounts.employeeDepartmentPositions,
        });
        return result;
    }
    async getEmployeesManagers(user) {
        console.log('ÏßÅÏõê Í¥ÄÎ¶¨Ïûê ÎùºÏù∏ Ï°∞Ìöå - Ïù∏Ï¶ùÎêú ÏÇ¨Ïö©Ïûê:', user);
        const includeTerminatedFlag = false;
        return this.organizationInformationApplicationService.Ï†ÑÏ≤¥_ÏßÅÏõêÏùò_Í¥ÄÎ¶¨Ïûê_ÎùºÏù∏ÏùÑ_Ï°∞ÌöåÌïúÎã§(includeTerminatedFlag);
    }
};
exports.OrganizationInformationApplicationController = OrganizationInformationApplicationController;
__decorate([
    (0, common_1.Get)('employee'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå',
        description: 'ÏßÅÏõê ID ÎòêÎäî ÏÇ¨Î≤àÏúºÎ°ú ÏßÅÏõêÏùò Í∏∞Î≥∏ Ï†ïÎ≥¥ÏôÄ Ï°∞ÏßÅ Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeId',
        description: 'ÏßÅÏõê ID',
        required: false,
        type: String,
        example: 'emp123',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeNumber',
        description: 'ÏÇ¨Î≤à',
        required: false,
        type: String,
        example: 'E2023001',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'withDetail',
        description: 'ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä (Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏âÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥)',
        required: false,
        type: Boolean,
        example: true,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.EmployeeResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù (ÏßÅÏõê ID ÎòêÎäî ÏÇ¨Î≤à Ï§ë ÌïòÎÇòÎäî ÌïÑÏàò)' }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Ìï¥Îãπ ÏßÅÏõêÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('employeeId')),
    __param(2, (0, common_1.Query)('employeeNumber')),
    __param(3, (0, common_1.Query)('withDetail')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof user_decorator_1.AuthenticatedUser !== "undefined" && user_decorator_1.AuthenticatedUser) === "function" ? _b : Object, String, String, Boolean]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], OrganizationInformationApplicationController.prototype, "getEmployee", null);
__decorate([
    (0, common_1.Get)('employees'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Ïó¨Îü¨ ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå',
        description: 'ÏßÅÏõê ID Î∞∞Ïó¥ ÎòêÎäî ÏÇ¨Î≤à Î∞∞Ïó¥Î°ú Ïó¨Îü¨ ÏßÅÏõêÏùò Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï©ÎãàÎã§. Î∞∞Ïó¥Ïù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥ Ï†ÑÏ≤¥ ÏßÅÏõêÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'identifiers',
        description: 'ÏßÅÏõê ÏãùÎ≥ÑÏûê Î∞∞Ïó¥ (ÏßÅÏõê ID ÎòêÎäî ÏÇ¨Î≤à, ÏâºÌëúÎ°ú Íµ¨Î∂Ñ)',
        required: false,
        type: String,
        example: 'emp123,E2023001,emp456,E2023002',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'withDetail',
        description: 'ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä (Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏âÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥)',
        required: false,
        type: Boolean,
        example: false,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'includeTerminated',
        description: 'Ìá¥ÏÇ¨Ìïú ÏßÅÏõê Ìè¨Ìï® Ïó¨Î∂Ä',
        required: false,
        type: Boolean,
        example: false,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÏßÅÏõê Î™©Î°ù Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.EmployeesResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏùå' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('identifiers')),
    __param(2, (0, common_1.Query)('withDetail')),
    __param(3, (0, common_1.Query)('includeTerminated')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof user_decorator_1.AuthenticatedUser !== "undefined" && user_decorator_1.AuthenticatedUser) === "function" ? _d : Object, String, Boolean, Boolean]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], OrganizationInformationApplicationController.prototype, "getEmployees", null);
__decorate([
    (0, common_1.Get)('departments/hierarchy'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå',
        description: 'Î∂ÄÏÑúÏùò Í≥ÑÏ∏µÍµ¨Ï°∞Î•º Îî∞Îùº Í∞Å Î∂ÄÏÑúÏóê ÏÜçÌïú ÏßÅÏõêÎì§Ïùò Î™©Î°ùÏùÑ ÍπäÏù¥ÏôÄ Ìï®Íªò Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'rootDepartmentId',
        description: 'Ï°∞ÌöåÌï† ÏµúÏÉÅÏúÑ Î∂ÄÏÑú ID (ÏßÄÏ†ïÌïòÏßÄ ÏïäÏúºÎ©¥ Ï†ÑÏ≤¥ Ï°∞ÏßÅÎèÑ Ï°∞Ìöå)',
        required: false,
        type: String,
        example: 'dept-uuid-123',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'maxDepth',
        description: 'ÏµúÎåÄ Ï°∞Ìöå ÍπäÏù¥ (Í∏∞Î≥∏Í∞í: Î¨¥Ï†úÌïú)',
        required: false,
        type: Number,
        example: 3,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'withEmployeeDetail',
        description: 'ÏßÅÏõê ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä (Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏â Ï†ïÎ≥¥)',
        required: false,
        type: Boolean,
        example: true,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'includeTerminated',
        description: 'Ìá¥ÏÇ¨Ìïú ÏßÅÏõê Ìè¨Ìï® Ïó¨Î∂Ä',
        required: false,
        type: Boolean,
        example: false,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'includeEmptyDepartments',
        description: 'Îπà Î∂ÄÏÑú Ìè¨Ìï® Ïó¨Î∂Ä (ÏßÅÏõêÏù¥ ÏóÜÎäî Î∂ÄÏÑúÎèÑ Ìè¨Ìï®)',
        required: false,
        type: Boolean,
        example: true,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'includeInactiveDepartments',
        description: 'ÎπÑÌôúÏÑ±ÌôîÎêú Î∂ÄÏÑú Ìè¨Ìï® Ïó¨Î∂Ä',
        required: false,
        type: Boolean,
        example: false,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ ÏßÅÏõê Ï†ïÎ≥¥ Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.DepartmentHierarchyResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞ Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏùå' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('rootDepartmentId')),
    __param(2, (0, common_1.Query)('maxDepth')),
    __param(3, (0, common_1.Query)('withEmployeeDetail')),
    __param(4, (0, common_1.Query)('includeTerminated')),
    __param(5, (0, common_1.Query)('includeEmptyDepartments')),
    __param(6, (0, common_1.Query)('includeInactiveDepartments')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof user_decorator_1.AuthenticatedUser !== "undefined" && user_decorator_1.AuthenticatedUser) === "function" ? _f : Object, String, Number, Boolean, Boolean, Boolean, Boolean]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], OrganizationInformationApplicationController.prototype, "getDepartmentHierarchy", null);
__decorate([
    (0, common_1.Post)('employee/hire'),
    (0, common_1.HttpCode)(common_1.HttpStatus.CREATED),
    (0, swagger_1.ApiOperation)({
        summary: 'Ï±ÑÏö© ÌîÑÎ°úÏÑ∏Ïä§ ÏôÑÎ£å ÌõÑ - ÏßÅÏõê Ï±ÑÏö©',
        description: 'ÏÉàÎ°úÏö¥ ÏßÅÏõêÏùÑ ÏÉùÏÑ±Ìï©ÎãàÎã§. Í≤ÄÏ¶ù Í∑úÏπô 4Îã®Í≥ÑÏóê Îî∞Îùº ÏôÑÏ†ÑÌïú Í≤ÄÏ¶ùÏùÑ ÏàòÌñâÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiBody)({
        type: dto_1.HireEmployeeRequestDto,
        description: 'ÏÉùÏÑ±Ìï† ÏßÅÏõê Ï†ïÎ≥¥',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.CREATED,
        description: 'ÏßÅÏõêÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§.',
        type: dto_1.HireEmployeeResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'ÏûÖÎ†• Îç∞Ïù¥ÌÑ∞Í∞Ä Ïú†Ìö®ÌïòÏßÄ ÏïäÍ±∞ÎÇò ÎπÑÏ¶àÎãàÏä§ Í∑úÏπôÏùÑ ÏúÑÎ∞òÌñàÏäµÎãàÎã§.',
        schema: {
            type: 'object',
            properties: {
                statusCode: { type: 'number', example: 400 },
                message: { type: 'string', example: 'Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏÇ¨Î≤àÏûÖÎãàÎã§: 25001' },
                error: { type: 'string', example: 'Bad Request' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Ï∞∏Ï°∞ÌïòÎäî ÏßÅÍ∏â, Î∂ÄÏÑú, ÏßÅÏ±ÖÏù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏäµÎãàÎã§.',
        schema: {
            type: 'object',
            properties: {
                statusCode: { type: 'number', example: 404 },
                message: { type: 'string', example: 'Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÍ∏âÏûÖÎãàÎã§: rank-uuid' },
                error: { type: 'string', example: 'Not Found' },
            },
        },
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof dto_1.HireEmployeeRequestDto !== "undefined" && dto_1.HireEmployeeRequestDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], OrganizationInformationApplicationController.prototype, "\uCC44\uC6A9\uD504\uB85C\uC138\uC2A4\uC5D0_\uD569\uACA9\uD55C_\uC9C1\uC6D0\uC744_\uC0DD\uC131\uD55C\uB2E4", null);
__decorate([
    (0, common_1.Post)('employee/terminate'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏàòÏäµÌèâÍ∞Ä ÌõÑ - ÏßÅÏõê Ìá¥ÏÇ¨Ï≤òÎ¶¨',
        description: 'ÏàòÏäµÍ∏∞Í∞Ñ ÌèâÍ∞Ä ÌõÑ Î∂àÌï©Í≤© Ïãú ÏßÅÏõêÏùÑ Ìá¥ÏÇ¨Ï≤òÎ¶¨Ìï©ÎãàÎã§. 3Í∞úÏõî ÏàòÏäµÍ∏∞Í∞ÑÏù¥ ÏßÄÎÇú ÌõÑÏóêÎßå Í∞ÄÎä•Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiBody)({
        type: dto_1.TerminateEmployeeRequestDto,
        description: 'Ìá¥ÏÇ¨Ï≤òÎ¶¨Ìï† ÏßÅÏõê Ï†ïÎ≥¥',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.OK,
        description: 'ÏßÅÏõêÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ìá¥ÏÇ¨Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§.',
        type: dto_1.TerminateEmployeeResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'ÏûÖÎ†• Îç∞Ïù¥ÌÑ∞Í∞Ä Ïú†Ìö®ÌïòÏßÄ ÏïäÍ±∞ÎÇò ÎπÑÏ¶àÎãàÏä§ Í∑úÏπôÏùÑ ÏúÑÎ∞òÌñàÏäµÎãàÎã§.',
        schema: {
            type: 'object',
            properties: {
                statusCode: { type: 'number', example: 400 },
                message: { type: 'string', example: 'ÏàòÏäµÍ∏∞Í∞Ñ(3Í∞úÏõî)Ïù¥ ÏßÄÎÇòÏßÄ ÏïäÏïòÏäµÎãàÎã§. ÏµúÏÜå Ìá¥ÏÇ¨Ïùº: 2025-04-01' },
                error: { type: 'string', example: 'Bad Request' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Ìï¥Îãπ ÏßÅÏõêÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.',
        schema: {
            type: 'object',
            properties: {
                statusCode: { type: 'number', example: 404 },
                message: { type: 'string', example: 'ÏßÅÏõêÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§: 25001' },
                error: { type: 'string', example: 'Not Found' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.CONFLICT,
        description: 'Ïù¥ÎØ∏ Ìá¥ÏÇ¨Ï≤òÎ¶¨Îêú ÏßÅÏõêÏûÖÎãàÎã§.',
        schema: {
            type: 'object',
            properties: {
                statusCode: { type: 'number', example: 409 },
                message: { type: 'string', example: 'Ïù¥ÎØ∏ Ìá¥ÏÇ¨Ï≤òÎ¶¨Îêú ÏßÅÏõêÏûÖÎãàÎã§: ÌôçÍ∏∏Îèô(25001)' },
                error: { type: 'string', example: 'Conflict' },
            },
        },
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_k = typeof dto_1.TerminateEmployeeRequestDto !== "undefined" && dto_1.TerminateEmployeeRequestDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], OrganizationInformationApplicationController.prototype, "\uC218\uC2B5\uAE30\uAC04_\uD3C9\uAC00_\uBD88\uD569\uACA9\uC73C\uB85C_\uC9C1\uC6D0\uC744_\uD1F4\uC0AC\uCC98\uB9AC\uD55C\uB2E4", null);
__decorate([
    (0, common_1.Get)('export/all'),
    (0, public_decorator_1.Public)(),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Ï†ÑÏ≤¥ Ï°∞ÏßÅ Îç∞Ïù¥ÌÑ∞ Export (ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖòÏö©)',
        description: '5Í∞ú ÌÖåÏù¥Î∏î(departments, employees, positions, ranks, employee_department_positions)Ïùò Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞Î•º ID Í∞íÏùÑ Ìè¨Ìï®ÌïòÏó¨ Í∑∏ÎåÄÎ°ú Ï°∞ÌöåÌï©ÎãàÎã§. ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò Î™©Ï†ÅÏúºÎ°ú ÏÇ¨Ïö©Îê©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'includeInactiveDepartments',
        description: 'ÎπÑÌôúÏÑ±ÌôîÎêú Î∂ÄÏÑú Ìè¨Ìï® Ïó¨Î∂Ä',
        required: false,
        type: Boolean,
        example: false,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Ï†ÑÏ≤¥ Ï°∞ÏßÅ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.ExportAllDataResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå Ïã§Ìå®',
        schema: {
            type: 'object',
            properties: {
                statusCode: { type: 'number', example: 404 },
                message: { type: 'string', example: 'Ï°∞ÏßÅ Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏäµÎãàÎã§.' },
                error: { type: 'string', example: 'Not Found' },
            },
        },
    }),
    __param(0, (0, common_1.Query)('includeInactiveDepartments')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Boolean]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], OrganizationInformationApplicationController.prototype, "exportAllOrganizationData", null);
__decorate([
    (0, common_1.Get)('employees/managers'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Ï†ÑÏ≤¥ ÏßÅÏõêÏùò Î∂ÄÏÑú ÏßÅÏÜç ÎùºÏù∏ Í¥ÄÎ¶¨Ïûê Ï†ïÎ≥¥ Ï°∞Ìöå',
        description: 'Ï†ÑÏ≤¥ ÏßÅÏõêÏùÑ Ï°∞ÌöåÌïòÏó¨ Í∞Å ÏßÅÏõêÏùò ÏÜåÏÜç Î∂ÄÏÑúÎ∂ÄÌÑ∞ ÏµúÏÉÅÏúÑ Î∂ÄÏÑúÍπåÏßÄ Ïò¨ÎùºÍ∞ÄÎ©¥ÏÑú isManager=trueÏù∏ Í¥ÄÎ¶¨Ïûê Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÏßÅÏõêÎ≥Ñ Í¥ÄÎ¶¨Ïûê ÎùºÏù∏ Ï†ïÎ≥¥ Ï°∞Ìöå ÏÑ±Í≥µ',
        type: dto_1.EmployeesManagersResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Í¥ÄÎ¶¨Ïûê ÎùºÏù∏ Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏùå' }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof user_decorator_1.AuthenticatedUser !== "undefined" && user_decorator_1.AuthenticatedUser) === "function" ? _o : Object]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], OrganizationInformationApplicationController.prototype, "getEmployeesManagers", null);
exports.OrganizationInformationApplicationController = OrganizationInformationApplicationController = __decorate([
    (0, swagger_1.ApiTags)('Client - Ï°∞ÏßÅ Ï†ïÎ≥¥ API'),
    (0, common_1.Controller)('organization'),
    __metadata("design:paramtypes", [typeof (_a = typeof organization_information_application_service_1.OrganizationInformationApplicationService !== "undefined" && organization_information_application_service_1.OrganizationInformationApplicationService) === "function" ? _a : Object])
], OrganizationInformationApplicationController);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/department-hierarchy-request.dto.ts":
/*!**************************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/department-hierarchy-request.dto.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DepartmentHierarchyRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class DepartmentHierarchyRequestDto {
}
exports.DepartmentHierarchyRequestDto = DepartmentHierarchyRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ï°∞ÌöåÌï† ÏµúÏÉÅÏúÑ Î∂ÄÏÑú ID (ÏßÄÏ†ïÌïòÏßÄ ÏïäÏúºÎ©¥ Ï†ÑÏ≤¥ Ï°∞ÏßÅÎèÑ Ï°∞Ìöå)',
        example: 'dept-uuid-123',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], DepartmentHierarchyRequestDto.prototype, "rootDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏµúÎåÄ Ï°∞Ìöå ÍπäÏù¥ (Í∏∞Î≥∏Í∞í: Î¨¥Ï†úÌïú)',
        example: 3,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => parseInt(value)),
    __metadata("design:type", Number)
], DepartmentHierarchyRequestDto.prototype, "maxDepth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏßÅÏõê ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä (Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏â Ï†ïÎ≥¥)',
        example: true,
        default: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], DepartmentHierarchyRequestDto.prototype, "withEmployeeDetail", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ìá¥ÏÇ¨Ìïú ÏßÅÏõê Ìè¨Ìï® Ïó¨Î∂Ä',
        example: false,
        default: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], DepartmentHierarchyRequestDto.prototype, "includeTerminated", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Îπà Î∂ÄÏÑú Ìè¨Ìï® Ïó¨Î∂Ä (ÏßÅÏõêÏù¥ ÏóÜÎäî Î∂ÄÏÑúÎèÑ Ìè¨Ìï®)',
        example: true,
        default: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], DepartmentHierarchyRequestDto.prototype, "includeEmptyDepartments", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÎπÑÌôúÏÑ±ÌôîÎêú Î∂ÄÏÑú Ìè¨Ìï® Ïó¨Î∂Ä',
        example: false,
        default: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], DepartmentHierarchyRequestDto.prototype, "includeInactiveDepartments", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/department-hierarchy-response.dto.ts":
/*!***************************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/department-hierarchy-response.dto.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DepartmentHierarchyResponseDto = exports.DepartmentWithEmployeesDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const entities_1 = __webpack_require__(/*! ../../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const employee_response_dto_1 = __webpack_require__(/*! ./employee-response.dto */ "./src/modules/application/organization-information/dto/employee-response.dto.ts");
class DepartmentWithEmployeesDto {
}
exports.DepartmentWithEmployeesDto = DepartmentWithEmployeesDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ïú†Ìòï', enum: entities_1.DepartmentType }),
    __metadata("design:type", typeof (_a = typeof entities_1.DepartmentType !== "undefined" && entities_1.DepartmentType) === "function" ? _a : Object)
], DepartmentWithEmployeesDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentWithEmployeesDto.prototype, "parentDepartmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú' }),
    __metadata("design:type", Number)
], DepartmentWithEmployeesDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÍπäÏù¥ (Î£®Ìä∏ Î∂ÄÏÑúÎäî 0)' }),
    __metadata("design:type", Number)
], DepartmentWithEmployeesDto.prototype, "depth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìï¥Îãπ Î∂ÄÏÑú ÏÜåÏÜç ÏßÅÏõê Î™©Î°ù',
        type: [employee_response_dto_1.EmployeeResponseDto],
    }),
    __metadata("design:type", Array)
], DepartmentWithEmployeesDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìï¥Îãπ Î∂ÄÏÑú ÏßÅÏõê Ïàò',
    }),
    __metadata("design:type", Number)
], DepartmentWithEmployeesDto.prototype, "employeeCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÌïòÏúÑ Î∂ÄÏÑú Î™©Î°ù',
        type: [DepartmentWithEmployeesDto],
    }),
    __metadata("design:type", Array)
], DepartmentWithEmployeesDto.prototype, "childDepartments", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÌïòÏúÑ Î∂ÄÏÑú Ïàò',
    }),
    __metadata("design:type", Number)
], DepartmentWithEmployeesDto.prototype, "childDepartmentCount", void 0);
class DepartmentHierarchyResponseDto {
}
exports.DepartmentHierarchyResponseDto = DepartmentHierarchyResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞',
        type: [DepartmentWithEmployeesDto],
    }),
    __metadata("design:type", Array)
], DepartmentHierarchyResponseDto.prototype, "departments", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ï¥ù Î∂ÄÏÑú Ïàò',
    }),
    __metadata("design:type", Number)
], DepartmentHierarchyResponseDto.prototype, "totalDepartments", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ï¥ù ÏßÅÏõê Ïàò',
    }),
    __metadata("design:type", Number)
], DepartmentHierarchyResponseDto.prototype, "totalEmployees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏµúÎåÄ ÍπäÏù¥',
    }),
    __metadata("design:type", Number)
], DepartmentHierarchyResponseDto.prototype, "maxDepth", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employee-assignment.dto.ts":
/*!*****************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employee-assignment.dto.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeAssignmentDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeeAssignmentDto {
}
exports.EmployeeAssignmentDto = EmployeeAssignmentDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∞∞Ïπò ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], EmployeeAssignmentDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], EmployeeAssignmentDto.prototype, "isManager", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", String)
], EmployeeAssignmentDto.prototype, "createdAt", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employee-managers-response.dto.ts":
/*!************************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employee-managers-response.dto.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeesManagersResponseDto = exports.EmployeeManagersDto = exports.EmployeeDepartmentManagersDto = exports.DepartmentManagerDto = exports.ManagerInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const entities_1 = __webpack_require__(/*! ../../../../../libs/database/entities */ "./libs/database/entities/index.ts");
class ManagerInfoDto {
}
exports.ManagerInfoDto = ManagerInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], ManagerInfoDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], ManagerInfoDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], ManagerInfoDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Í¥ÄÎ¶¨Ïûê Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], ManagerInfoDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], ManagerInfoDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], ManagerInfoDto.prototype, "positionTitle", void 0);
class DepartmentManagerDto {
}
exports.DepartmentManagerDto = DepartmentManagerDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentManagerDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentManagerDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], DepartmentManagerDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ïú†Ìòï', enum: entities_1.DepartmentType }),
    __metadata("design:type", typeof (_a = typeof entities_1.DepartmentType !== "undefined" && entities_1.DepartmentType) === "function" ? _a : Object)
], DepartmentManagerDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentManagerDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Í≥ÑÏ∏µ ÍπäÏù¥ (ÏµúÏÉÅÏúÑ Î∂ÄÏÑúÍ∞Ä 0)', example: 0 }),
    __metadata("design:type", Number)
], DepartmentManagerDto.prototype, "depth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìï¥Îãπ Î∂ÄÏÑúÏùò Í¥ÄÎ¶¨Ïûê Î™©Î°ù', type: [ManagerInfoDto] }),
    __metadata("design:type", Array)
], DepartmentManagerDto.prototype, "managers", void 0);
class EmployeeDepartmentManagersDto {
}
exports.EmployeeDepartmentManagersDto = EmployeeDepartmentManagersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], EmployeeDepartmentManagersDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], EmployeeDepartmentManagersDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìï¥Îãπ Î∂ÄÏÑúÏùò ÏßÅÏÜç ÎùºÏù∏ Í¥ÄÎ¶¨Ïûê Ï†ïÎ≥¥ (ÏÜåÏÜç Î∂ÄÏÑúÎ∂ÄÌÑ∞ ÏµúÏÉÅÏúÑ Î∂ÄÏÑúÍπåÏßÄ)',
        type: [DepartmentManagerDto],
    }),
    __metadata("design:type", Array)
], EmployeeDepartmentManagersDto.prototype, "managerLine", void 0);
class EmployeeManagersDto {
}
exports.EmployeeManagersDto = EmployeeManagersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeManagersDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], EmployeeManagersDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeManagersDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõêÏù¥ ÏÜåÏÜçÎêú Î™®Îì† Î∂ÄÏÑúÏùò Í¥ÄÎ¶¨Ïûê ÎùºÏù∏ Ï†ïÎ≥¥',
        type: [EmployeeDepartmentManagersDto],
    }),
    __metadata("design:type", Array)
], EmployeeManagersDto.prototype, "departments", void 0);
class EmployeesManagersResponseDto {
}
exports.EmployeesManagersResponseDto = EmployeesManagersResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõêÎ≥Ñ Í¥ÄÎ¶¨Ïûê Ï†ïÎ≥¥ Î™©Î°ù', type: [EmployeeManagersDto] }),
    __metadata("design:type", Array)
], EmployeesManagersResponseDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥ù ÏßÅÏõê Ïàò' }),
    __metadata("design:type", Number)
], EmployeesManagersResponseDto.prototype, "total", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employee-rank-history.dto.ts":
/*!*******************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employee-rank-history.dto.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeRankHistoryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeeRankHistoryDto {
}
exports.EmployeeRankHistoryDto = EmployeeRankHistoryDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î†• ID' }),
    __metadata("design:type", String)
], EmployeeRankHistoryDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeRankHistoryDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID' }),
    __metadata("design:type", String)
], EmployeeRankHistoryDto.prototype, "rankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", String)
], EmployeeRankHistoryDto.prototype, "createdAt", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employee-request.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employee-request.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeeRequestDto {
}
exports.EmployeeRequestDto = EmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏßÅÏõê IDÎ°ú Ï°∞Ìöå',
        example: 'emp123',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], EmployeeRequestDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÇ¨Î≤àÏúºÎ°ú Ï°∞Ìöå',
        example: 'E2023001',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], EmployeeRequestDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä (Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏âÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥)',
        example: true,
        type: Boolean,
    }),
    (0, class_transformer_1.Transform)(({ value }) => {
        if (value === 'true')
            return true;
        if (value === 'false')
            return false;
        return value;
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], EmployeeRequestDto.prototype, "withDetail", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employee-response.dto.ts":
/*!***************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employee-response.dto.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeResponseDto = exports.RankDetailDto = exports.PositionDetailDto = exports.DepartmentDetailDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const entities_1 = __webpack_require__(/*! ../../../../../libs/database/entities */ "./libs/database/entities/index.ts");
class DepartmentDetailDto {
}
exports.DepartmentDetailDto = DepartmentDetailDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentDetailDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentDetailDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], DepartmentDetailDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ïú†Ìòï', enum: entities_1.DepartmentType }),
    __metadata("design:type", typeof (_a = typeof entities_1.DepartmentType !== "undefined" && entities_1.DepartmentType) === "function" ? _a : Object)
], DepartmentDetailDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], DepartmentDetailDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], DepartmentDetailDto.prototype, "parentDepartmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú' }),
    __metadata("design:type", Number)
], DepartmentDetailDto.prototype, "order", void 0);
class PositionDetailDto {
}
exports.PositionDetailDto = PositionDetailDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], PositionDetailDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], PositionDetailDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú' }),
    __metadata("design:type", String)
], PositionDetailDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö Î†àÎ≤®' }),
    __metadata("design:type", Number)
], PositionDetailDto.prototype, "level", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨ Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], PositionDetailDto.prototype, "hasManagementAuthority", void 0);
class RankDetailDto {
}
exports.RankDetailDto = RankDetailDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID' }),
    __metadata("design:type", String)
], RankDetailDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏âÎ™Ö' }),
    __metadata("design:type", String)
], RankDetailDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ÏΩîÎìú' }),
    __metadata("design:type", String)
], RankDetailDto.prototype, "rankCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â Î†àÎ≤®' }),
    __metadata("design:type", Number)
], RankDetailDto.prototype, "level", void 0);
class EmployeeResponseDto {
}
exports.EmployeeResponseDto = EmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ÑÌôîÎ≤àÌò∏' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉùÎÖÑÏõîÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeResponseDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÑ±Î≥Ñ' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], EmployeeResponseDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ÏÉÅÌÉú' }),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑú ÏÉÅÏÑ∏ Ï†ïÎ≥¥ (withDetail=trueÏùº ÎïåÎßå Ìè¨Ìï®)', type: DepartmentDetailDto }),
    __metadata("design:type", DepartmentDetailDto)
], EmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±Ö ÏÉÅÏÑ∏ Ï†ïÎ≥¥ (withDetail=trueÏùº ÎïåÎßå Ìè¨Ìï®)', type: PositionDetailDto }),
    __metadata("design:type", PositionDetailDto)
], EmployeeResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÍ∏â ÏÉÅÏÑ∏ Ï†ïÎ≥¥ (withDetail=trueÏùº ÎïåÎßå Ìè¨Ìï®)', type: RankDetailDto }),
    __metadata("design:type", RankDetailDto)
], EmployeeResponseDto.prototype, "rank", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employees-request.dto.ts":
/*!***************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employees-request.dto.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeesRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeesRequestDto {
    constructor() {
        this.withDetail = false;
        this.includeTerminated = false;
    }
}
exports.EmployeesRequestDto = EmployeesRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏßÅÏõê ÏãùÎ≥ÑÏûê Î∞∞Ïó¥ (ÏßÅÏõê ID ÎòêÎäî ÏÇ¨Î≤à, ÎπÑÏñ¥ÏûàÏúºÎ©¥ Ï†ÑÏ≤¥ ÏßÅÏõê Ï°∞Ìöå)',
        example: ['emp123', 'E2023001', 'emp456', 'E2023002'],
        type: [String],
    }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => String),
    __metadata("design:type", Array)
], EmployeesRequestDto.prototype, "identifiers", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä (Î∂ÄÏÑú, ÏßÅÏ±Ö, ÏßÅÍ∏âÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥)',
        example: false,
        type: Boolean,
        default: false,
    }),
    (0, class_transformer_1.Transform)(({ value }) => {
        if (value === 'true')
            return true;
        if (value === 'false')
            return false;
        return value;
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], EmployeesRequestDto.prototype, "withDetail", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ìá¥ÏÇ¨Ìïú ÏßÅÏõê Ìè¨Ìï® Ïó¨Î∂Ä',
        example: false,
        type: Boolean,
        default: false,
    }),
    (0, class_transformer_1.Transform)(({ value }) => {
        if (value === 'true')
            return true;
        if (value === 'false')
            return false;
        return value;
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], EmployeesRequestDto.prototype, "includeTerminated", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/employees-response.dto.ts":
/*!****************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/employees-response.dto.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeesResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const employee_response_dto_1 = __webpack_require__(/*! ./employee-response.dto */ "./src/modules/application/organization-information/dto/employee-response.dto.ts");
class EmployeesResponseDto {
}
exports.EmployeesResponseDto = EmployeesResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõê Î™©Î°ù',
        type: [employee_response_dto_1.EmployeeResponseDto],
    }),
    __metadata("design:type", Array)
], EmployeesResponseDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ï¥ù ÏßÅÏõê Ïàò',
    }),
    __metadata("design:type", Number)
], EmployeesResponseDto.prototype, "total", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/export-all-data.dto.ts":
/*!*************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/export-all-data.dto.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExportAllDataResponseDto = exports.ExportEmployeeDepartmentPositionDto = exports.ExportRankDto = exports.ExportPositionDto = exports.ExportEmployeeDto = exports.ExportDepartmentDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ExportDepartmentDto {
}
exports.ExportDepartmentDto = ExportDepartmentDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], ExportDepartmentDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], ExportDepartmentDto.prototype, "departmentName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], ExportDepartmentDto.prototype, "departmentCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Ïú†Ìòï' }),
    __metadata("design:type", String)
], ExportDepartmentDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID', required: false }),
    __metadata("design:type", String)
], ExportDepartmentDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ïÎ†¨ ÏàúÏÑú' }),
    __metadata("design:type", Number)
], ExportDepartmentDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ExportDepartmentDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ExportDepartmentDto.prototype, "updatedAt", void 0);
class ExportEmployeeDto {
}
exports.ExportEmployeeDto = ExportEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î©îÏùº', required: false }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÎπÑÎ∞ÄÎ≤àÌò∏', required: false }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "password", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÌôîÎ≤àÌò∏', required: false }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÎÖÑÏõîÏùº', required: false }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ExportEmployeeDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÑ±Î≥Ñ', required: false }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], ExportEmployeeDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïû¨ÏßÅ ÏÉÅÌÉú' }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÌòÑÏû¨ ÏßÅÍ∏â ID', required: false }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "currentRankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìá¥ÏÇ¨Ïùº', required: false }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], ExportEmployeeDto.prototype, "terminationDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ìá¥ÏÇ¨ ÏÇ¨Ïú†', required: false }),
    __metadata("design:type", String)
], ExportEmployeeDto.prototype, "terminationReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÑ§Ï†ï Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], ExportEmployeeDto.prototype, "isInitialPasswordSet", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], ExportEmployeeDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], ExportEmployeeDto.prototype, "updatedAt", void 0);
class ExportPositionDto {
}
exports.ExportPositionDto = ExportPositionDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], ExportPositionDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], ExportPositionDto.prototype, "positionTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ÏΩîÎìú' }),
    __metadata("design:type", String)
], ExportPositionDto.prototype, "positionCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö Î†àÎ≤®' }),
    __metadata("design:type", Number)
], ExportPositionDto.prototype, "level", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨ Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], ExportPositionDto.prototype, "hasManagementAuthority", void 0);
class ExportRankDto {
}
exports.ExportRankDto = ExportRankDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ID' }),
    __metadata("design:type", String)
], ExportRankDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏âÎ™Ö' }),
    __metadata("design:type", String)
], ExportRankDto.prototype, "rankName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â ÏΩîÎìú' }),
    __metadata("design:type", String)
], ExportRankDto.prototype, "rankCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â Î†àÎ≤®' }),
    __metadata("design:type", Number)
], ExportRankDto.prototype, "level", void 0);
class ExportEmployeeDepartmentPositionDto {
}
exports.ExportEmployeeDepartmentPositionDto = ExportEmployeeDepartmentPositionDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ID' }),
    __metadata("design:type", String)
], ExportEmployeeDepartmentPositionDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], ExportEmployeeDepartmentPositionDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú ID' }),
    __metadata("design:type", String)
], ExportEmployeeDepartmentPositionDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö ID' }),
    __metadata("design:type", String)
], ExportEmployeeDepartmentPositionDto.prototype, "positionId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], ExportEmployeeDepartmentPositionDto.prototype, "isManager", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], ExportEmployeeDepartmentPositionDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_j = typeof Date !== "undefined" && Date) === "function" ? _j : Object)
], ExportEmployeeDepartmentPositionDto.prototype, "updatedAt", void 0);
class ExportAllDataResponseDto {
}
exports.ExportAllDataResponseDto = ExportAllDataResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î∂ÄÏÑú Î™©Î°ù', type: [ExportDepartmentDto] }),
    __metadata("design:type", Array)
], ExportAllDataResponseDto.prototype, "departments", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î™©Î°ù', type: [ExportEmployeeDto] }),
    __metadata("design:type", Array)
], ExportAllDataResponseDto.prototype, "employees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏ±Ö Î™©Î°ù', type: [ExportPositionDto] }),
    __metadata("design:type", Array)
], ExportAllDataResponseDto.prototype, "positions", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÍ∏â Î™©Î°ù', type: [ExportRankDto] }),
    __metadata("design:type", Array)
], ExportAllDataResponseDto.prototype, "ranks", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê-Î∂ÄÏÑú-ÏßÅÏ±Ö Îß§Ìïë Î™©Î°ù', type: [ExportEmployeeDepartmentPositionDto] }),
    __metadata("design:type", Array)
], ExportAllDataResponseDto.prototype, "employeeDepartmentPositions", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ Í∞úÏàò' }),
    __metadata("design:type", Object)
], ExportAllDataResponseDto.prototype, "totalCounts", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï°∞Ìöå ÏãúÍ∞Å' }),
    __metadata("design:type", typeof (_k = typeof Date !== "undefined" && Date) === "function" ? _k : Object)
], ExportAllDataResponseDto.prototype, "exportedAt", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/hire-employee.dto.ts":
/*!***********************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/hire-employee.dto.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HireEmployeeResponseDto = exports.HireEmployeeRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const enums_1 = __webpack_require__(/*! ../../../../../libs/common/enums */ "./libs/common/enums/index.ts");
const hired_employee_dto_1 = __webpack_require__(/*! ./hired-employee.dto */ "./src/modules/application/organization-information/dto/hired-employee.dto.ts");
const employee_response_dto_1 = __webpack_require__(/*! ./employee-response.dto */ "./src/modules/application/organization-information/dto/employee-response.dto.ts");
class HireEmployeeRequestDto {
}
exports.HireEmployeeRequestDto = HireEmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÌïúÍ∏ÄÏù¥Î¶Ñ',
        example: 'ÌôçÍ∏∏Îèô',
        minLength: 1,
        maxLength: 50,
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "koreanName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏòÅÏñ¥Ïù¥Î¶Ñ',
        example: 'Gildong',
        minLength: 1,
        maxLength: 50,
    }),
    (0, class_transformer_1.Transform)(({ value }) => (typeof value === 'string' ? value.toLowerCase() : value)),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "englishFirstName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏòÅÏñ¥ÏÑ±',
        example: 'Hong',
        minLength: 1,
        maxLength: 50,
    }),
    (0, class_transformer_1.Transform)(({ value }) => (typeof value === 'string' ? value.toLowerCase() : value)),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "englishLastName", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÇ¨Î≤à', example: '25001' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏûÖÏÇ¨Ïùº (YYYY-MM-DD)',
        example: '2025-01-01',
        type: 'string',
        format: 'date',
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Î∂ÄÏÑú ID',
        example: 'dept-uuid',
        format: 'uuid',
    }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "departmentId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÍ∏â ID',
        example: 'rank-uuid',
        format: 'uuid',
    }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "rankId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ï†ÑÌôîÎ≤àÌò∏',
        example: '010-1234-5678',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÉùÎÖÑÏõîÏùº (YYYY-MM-DD)',
        example: '1990-01-01',
        type: 'string',
        format: 'date',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], HireEmployeeRequestDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÑ±Î≥Ñ',
        enum: enums_1.Gender,
        example: enums_1.Gender.Male,
    }),
    (0, class_validator_1.IsEnum)(enums_1.Gender),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _a : Object)
], HireEmployeeRequestDto.prototype, "gender", void 0);
class HireEmployeeResponseDto {
}
exports.HireEmployeeResponseDto = HireEmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏÉùÏÑ±Îêú ÏßÅÏõê Ï†ïÎ≥¥',
        type: hired_employee_dto_1.HiredEmployeeDto,
    }),
    __metadata("design:type", typeof (_b = typeof hired_employee_dto_1.HiredEmployeeDto !== "undefined" && hired_employee_dto_1.HiredEmployeeDto) === "function" ? _b : Object)
], HireEmployeeResponseDto.prototype, "employee", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Î∂ÄÏÑú Ï†ïÎ≥¥ (Î∂ÄÏÑúIDÍ∞Ä Ï†úÍ≥µÎêú Í≤ΩÏö∞)',
        type: employee_response_dto_1.DepartmentDetailDto,
    }),
    __metadata("design:type", typeof (_c = typeof employee_response_dto_1.DepartmentDetailDto !== "undefined" && employee_response_dto_1.DepartmentDetailDto) === "function" ? _c : Object)
], HireEmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏßÅÍ∏â Ï†ïÎ≥¥ (ÏßÅÍ∏âIDÍ∞Ä Ï†úÍ≥µÎêú Í≤ΩÏö∞)',
        type: employee_response_dto_1.RankDetailDto,
    }),
    __metadata("design:type", typeof (_d = typeof employee_response_dto_1.RankDetailDto !== "undefined" && employee_response_dto_1.RankDetailDto) === "function" ? _d : Object)
], HireEmployeeResponseDto.prototype, "rank", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/hired-employee.dto.ts":
/*!************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/hired-employee.dto.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HiredEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const enums_1 = __webpack_require__(/*! ../../../../../libs/common/enums */ "./libs/common/enums/index.ts");
class HiredEmployeeDto {
}
exports.HiredEmployeeDto = HiredEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ÑÌôîÎ≤àÌò∏' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉùÎÖÑÏõîÏùº' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÑ±Î≥Ñ', enum: enums_1.Gender }),
    __metadata("design:type", typeof (_a = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _a : Object)
], HiredEmployeeDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ÏÉÅÌÉú', enum: enums_1.EmployeeStatus }),
    __metadata("design:type", typeof (_b = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _b : Object)
], HiredEmployeeDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÌòÑÏû¨ ÏßÅÍ∏â ID' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "currentRankId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÑ§Ï†ï Ïó¨Î∂Ä' }),
    __metadata("design:type", Boolean)
], HiredEmployeeDto.prototype, "isInitialPasswordSet", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", String)
], HiredEmployeeDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/index.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/index.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./employee-request.dto */ "./src/modules/application/organization-information/dto/employee-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employee-response.dto */ "./src/modules/application/organization-information/dto/employee-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employees-request.dto */ "./src/modules/application/organization-information/dto/employees-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employees-response.dto */ "./src/modules/application/organization-information/dto/employees-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./department-hierarchy-request.dto */ "./src/modules/application/organization-information/dto/department-hierarchy-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./department-hierarchy-response.dto */ "./src/modules/application/organization-information/dto/department-hierarchy-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./hire-employee.dto */ "./src/modules/application/organization-information/dto/hire-employee.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./hired-employee.dto */ "./src/modules/application/organization-information/dto/hired-employee.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employee-assignment.dto */ "./src/modules/application/organization-information/dto/employee-assignment.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employee-rank-history.dto */ "./src/modules/application/organization-information/dto/employee-rank-history.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./terminate-employee.dto */ "./src/modules/application/organization-information/dto/terminate-employee.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./export-all-data.dto */ "./src/modules/application/organization-information/dto/export-all-data.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./employee-managers-response.dto */ "./src/modules/application/organization-information/dto/employee-managers-response.dto.ts"), exports);


/***/ }),

/***/ "./src/modules/application/organization-information/dto/terminate-employee.dto.ts":
/*!****************************************************************************************!*\
  !*** ./src/modules/application/organization-information/dto/terminate-employee.dto.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TerminateEmployeeResponseDto = exports.TerminateEmployeeRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class TerminateEmployeeRequestDto {
}
exports.TerminateEmployeeRequestDto = TerminateEmployeeRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏßÅÏõê ID ÎòêÎäî ÏÇ¨Î≤à',
        example: 'emp-uuid-123',
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], TerminateEmployeeRequestDto.prototype, "employeeIdentifier", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìá¥ÏÇ¨Ïùº (YYYY-MM-DD)',
        example: '2025-04-01',
        type: 'string',
        format: 'date',
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], TerminateEmployeeRequestDto.prototype, "terminationDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ìá¥ÏÇ¨ ÏÇ¨Ïú†',
        example: 'ÏàòÏäµÍ∏∞Í∞Ñ ÌèâÍ∞Ä Î∂àÌï©Í≤©',
        maxLength: 500,
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TerminateEmployeeRequestDto.prototype, "terminationReason", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ìá¥ÏÇ¨ Ï≤òÎ¶¨Ïûê ID',
        example: 'hr-uuid-123',
    }),
    (0, class_validator_1.IsUUID)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], TerminateEmployeeRequestDto.prototype, "processedBy", void 0);
class TerminateEmployeeResponseDto {
}
exports.TerminateEmployeeResponseDto = TerminateEmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìá¥ÏÇ¨Ï≤òÎ¶¨ ÏÑ±Í≥µ Ïó¨Î∂Ä',
        example: true,
    }),
    __metadata("design:type", Boolean)
], TerminateEmployeeResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ìá¥ÏÇ¨Ï≤òÎ¶¨Îêú ÏßÅÏõê Ï†ïÎ≥¥',
    }),
    __metadata("design:type", Object)
], TerminateEmployeeResponseDto.prototype, "employee", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'Ï≤òÎ¶¨ Í≤∞Í≥º Î©îÏãúÏßÄ',
        example: 'ÏßÅÏõêÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ìá¥ÏÇ¨Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§.',
    }),
    __metadata("design:type", String)
], TerminateEmployeeResponseDto.prototype, "message", void 0);


/***/ }),

/***/ "./src/modules/application/organization-information/organization-information-application.module.ts":
/*!*********************************************************************************************************!*\
  !*** ./src/modules/application/organization-information/organization-information-application.module.ts ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationInformationApplicationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const organization_information_application_service_1 = __webpack_require__(/*! ./organization-information-application.service */ "./src/modules/application/organization-information/organization-information-application.service.ts");
const organization_information_application_controller_1 = __webpack_require__(/*! ./controllers/organization-information-application.controller */ "./src/modules/application/organization-information/controllers/organization-information-application.controller.ts");
const organization_management_context_module_1 = __webpack_require__(/*! ../../context/organization-management/organization-management-context.module */ "./src/modules/context/organization-management/organization-management-context.module.ts");
const authorization_context_module_1 = __webpack_require__(/*! ../../context/authorization/authorization-context.module */ "./src/modules/context/authorization/authorization-context.module.ts");
const jwt_config_1 = __webpack_require__(/*! ../../../../libs/configs/jwt.config */ "./libs/configs/jwt.config.ts");
let OrganizationInformationApplicationModule = class OrganizationInformationApplicationModule {
};
exports.OrganizationInformationApplicationModule = OrganizationInformationApplicationModule;
exports.OrganizationInformationApplicationModule = OrganizationInformationApplicationModule = __decorate([
    (0, common_1.Module)({
        imports: [
            organization_management_context_module_1.OrganizationManagementContextModule,
            authorization_context_module_1.AuthorizationContextModule,
            passport_1.PassportModule,
            jwt_1.JwtModule.registerAsync({
                useFactory: jwt_config_1.jwtConfig,
                inject: [config_1.ConfigService],
            }),
        ],
        controllers: [organization_information_application_controller_1.OrganizationInformationApplicationController],
        providers: [organization_information_application_service_1.OrganizationInformationApplicationService],
        exports: [organization_information_application_service_1.OrganizationInformationApplicationService],
    })
], OrganizationInformationApplicationModule);


/***/ }),

/***/ "./src/modules/application/organization-information/organization-information-application.service.ts":
/*!**********************************************************************************************************!*\
  !*** ./src/modules/application/organization-information/organization-information-application.service.ts ***!
  \**********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationInformationApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const organization_management_context_service_1 = __webpack_require__(/*! ../../context/organization-management/organization-management-context.service */ "./src/modules/context/organization-management/organization-management-context.service.ts");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const enums_1 = __webpack_require__(/*! libs/common/enums */ "./libs/common/enums/index.ts");
let OrganizationInformationApplicationService = class OrganizationInformationApplicationService {
    constructor(organizationContextService) {
        this.organizationContextService = organizationContextService;
    }
    async ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(requestDto) {
        const { employeeId, employeeNumber, withDetail } = requestDto;
        if (!employeeId && !employeeNumber) {
            throw new common_1.BadRequestException('ÏßÅÏõê ID ÎòêÎäî ÏÇ¨Î≤à Ï§ë ÌïòÎÇòÎäî Î∞òÎìúÏãú ÌïÑÏöîÌï©ÎãàÎã§.');
        }
        const employee = await this.organizationContextService.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId || employeeNumber);
        if (!employee) {
            throw new common_1.NotFoundException('ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        let response = {
            id: employee.id,
            name: employee.name,
            email: employee.email,
            employeeNumber: employee.employeeNumber,
            phoneNumber: employee.phoneNumber,
            dateOfBirth: employee.dateOfBirth,
            gender: employee.gender,
            hireDate: employee.hireDate,
            status: employee.status,
        };
        if (withDetail) {
            const details = await this.organizationContextService.ÏßÅÏõêÏùò_Î∂ÄÏÑú_ÏßÅÏ±Ö_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§(employee);
            response.department = this.Î∂ÄÏÑú_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(details.department);
            response.position = this.ÏßÅÏ±Ö_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(details.position);
            response.rank = this.ÏßÅÍ∏â_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(details.rank);
        }
        return response;
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(requestDto) {
        const { identifiers, withDetail = false, includeTerminated = false } = requestDto;
        let employees = [];
        try {
            if (identifiers && identifiers.length > 0) {
                employees = await this.organizationContextService.Ïó¨Îü¨_ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(identifiers, includeTerminated);
            }
            else {
                employees = await this.organizationContextService.Ï†ÑÏ≤¥_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(includeTerminated);
            }
        }
        catch (error) {
            throw new common_1.NotFoundException('ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const employeeResponses = [];
        let detailsMap;
        if (withDetail && employees.length > 0) {
            try {
                detailsMap = await this.organizationContextService.Ïó¨Îü¨_ÏßÅÏõêÏùò_Î∂ÄÏÑú_ÏßÅÏ±Ö_ÏßÅÍ∏âÏùÑ_ÏùºÍ¥ÑÏ°∞ÌöåÌïúÎã§(employees);
            }
            catch (error) {
            }
        }
        for (const employee of employees) {
            const response = {
                id: employee.id,
                name: employee.name,
                email: employee.email,
                employeeNumber: employee.employeeNumber,
                phoneNumber: employee.phoneNumber,
                dateOfBirth: employee.dateOfBirth,
                gender: employee.gender,
                hireDate: employee.hireDate,
                status: employee.status,
            };
            if (withDetail && detailsMap) {
                const details = detailsMap.get(employee.id);
                if (details) {
                    response.department = this.Î∂ÄÏÑú_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(details.department);
                    response.position = this.ÏßÅÏ±Ö_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(details.position);
                    response.rank = this.ÏßÅÍ∏â_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(details.rank);
                }
            }
            employeeResponses.push(response);
        }
        return {
            employees: employeeResponses,
            total: employeeResponses.length,
        };
    }
    Î∂ÄÏÑú_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(department) {
        if (!department)
            return undefined;
        return {
            id: department.id,
            departmentName: department.departmentName,
            departmentCode: department.departmentCode,
            type: department.type,
            parentDepartmentId: department.parentDepartmentId,
            parentDepartmentName: department.parentDepartment?.departmentName,
            order: department.order,
        };
    }
    ÏßÅÏ±Ö_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(position) {
        if (!position)
            return undefined;
        return {
            id: position.id,
            positionTitle: position.positionTitle,
            positionCode: position.positionCode,
            level: position.level,
            hasManagementAuthority: position.hasManagementAuthority,
        };
    }
    ÏßÅÍ∏â_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(rank) {
        if (!rank)
            return undefined;
        return {
            id: rank.id,
            rankName: rank.rankName,
            rankCode: rank.rankCode,
            level: rank.level,
        };
    }
    async Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(requestDto) {
        const { rootDepartmentId, maxDepth, withEmployeeDetail = false, includeTerminated = false, includeEmptyDepartments = true, includeInactiveDepartments = false, } = requestDto;
        try {
            const result = await this.organizationContextService.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(rootDepartmentId, maxDepth, withEmployeeDetail, includeTerminated, includeEmptyDepartments, includeInactiveDepartments);
            const departmentHierarchy = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏùëÎãµ_DTOÎ°ú_Î≥ÄÌôòÌïúÎã§(result.departments, result.employeesByDepartment, result.departmentDetails, withEmployeeDetail);
            const { totalDepartments, totalEmployees, maxDepthCalculated } = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞_ÌÜµÍ≥ÑÎ•º_Í≥ÑÏÇ∞ÌïúÎã§(departmentHierarchy);
            return {
                departments: departmentHierarchy.filter((department) => department.parentDepartmentId === null),
                totalDepartments,
                totalEmployees,
                maxDepth: maxDepthCalculated,
            };
        }
        catch (error) {
            console.error('Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞ Ï†ïÎ≥¥ Ï°∞Ìöå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
            throw new common_1.NotFoundException('Î∂ÄÏÑú Í≥ÑÏ∏µÍµ¨Ï°∞ Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
    }
    Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏùëÎãµ_DTOÎ°ú_Î≥ÄÌôòÌïúÎã§(departments, employeesByDepartment, departmentDetails, withEmployeeDetail = false, currentDepth = 0) {
        const result = [];
        for (const department of departments) {
            if (!department.isActive || department.isException)
                continue;
            const departmentEmployeeInfo = employeesByDepartment.get(department.id) || {
                employees: [],
                departmentPositions: new Map(),
            };
            const employees = [];
            for (const employee of departmentEmployeeInfo.employees) {
                const employeeResponse = {
                    id: employee.id,
                    name: employee.name,
                    email: employee.email,
                    employeeNumber: employee.employeeNumber,
                    phoneNumber: employee.phoneNumber,
                    dateOfBirth: employee.dateOfBirth,
                    gender: employee.gender,
                    hireDate: employee.hireDate,
                    status: employee.status,
                };
                if (withEmployeeDetail && departmentDetails) {
                    const deptDetails = departmentDetails.get(department.id);
                    if (deptDetails) {
                        const employeeDetail = deptDetails.find((d) => {
                            const deptPositions = departmentEmployeeInfo.departmentPositions;
                            return deptPositions.has(employee.id) && d.department.id === department.id;
                        });
                        if (employeeDetail) {
                            employeeResponse.department = this.Î∂ÄÏÑú_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(employeeDetail.department);
                            employeeResponse.position = this.ÏßÅÏ±Ö_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(employeeDetail.position);
                            employeeResponse.rank = this.ÏßÅÍ∏â_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(employeeDetail.rank);
                        }
                    }
                }
                employees.push(employeeResponse);
            }
            const childDepartments = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_ÏùëÎãµ_DTOÎ°ú_Î≥ÄÌôòÌïúÎã§(department.childDepartments || [], employeesByDepartment, departmentDetails, withEmployeeDetail, currentDepth + 1);
            const departmentDto = {
                id: department.id,
                departmentName: department.departmentName,
                departmentCode: department.departmentCode,
                type: department.type,
                parentDepartmentId: department.parentDepartmentId,
                parentDepartmentName: department.parentDepartment?.departmentName,
                order: department.order,
                depth: currentDepth,
                employees: employees.sort((a, b) => a.name.localeCompare(b.name)),
                employeeCount: employees.length,
                childDepartments: childDepartments.sort((a, b) => a.order - b.order),
                childDepartmentCount: childDepartments.length,
            };
            result.push(departmentDto);
        }
        return result.sort((a, b) => a.order - b.order);
    }
    Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞_ÌÜµÍ≥ÑÎ•º_Í≥ÑÏÇ∞ÌïúÎã§(departments) {
        let totalDepartments = 0;
        let totalEmployees = 0;
        let maxDepthCalculated = 0;
        const visitedDepartmentIds = new Set();
        const calculateStats = (depts) => {
            for (const dept of depts) {
                if (visitedDepartmentIds.has(dept.id)) {
                    continue;
                }
                visitedDepartmentIds.add(dept.id);
                totalDepartments++;
                if (dept.type !== entities_1.DepartmentType.TEAM) {
                    totalEmployees += dept.employeeCount;
                }
                maxDepthCalculated = Math.max(maxDepthCalculated, dept.depth);
                if (dept.childDepartments && dept.childDepartments.length > 0) {
                    calculateStats(dept.childDepartments);
                }
            }
        };
        calculateStats(departments);
        return {
            totalDepartments,
            totalEmployees,
            maxDepthCalculated,
        };
    }
    async ÏßÅÏõêÏùÑ_Ï±ÑÏö©ÌïúÎã§(hireEmployeeDto) {
        try {
            const hireDate = new Date(hireEmployeeDto.hireDate);
            const dateOfBirth = hireEmployeeDto.dateOfBirth ? new Date(hireEmployeeDto.dateOfBirth) : undefined;
            const lowestPosition = await this.organizationContextService.Í∞ÄÏû•_ÎÇÆÏùÄ_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§();
            const positionId = lowestPosition.id;
            const result = await this.organizationContextService.ÏßÅÏõêÏùÑ_ÏÉùÏÑ±ÌïúÎã§({
                employeeNumber: hireEmployeeDto.employeeNumber,
                name: hireEmployeeDto.koreanName,
                englishLastName: hireEmployeeDto.englishLastName,
                englishFirstName: hireEmployeeDto.englishFirstName,
                phoneNumber: hireEmployeeDto.phoneNumber,
                dateOfBirth,
                gender: hireEmployeeDto.gender,
                hireDate,
                status: enums_1.EmployeeStatus.Active,
                currentRankId: hireEmployeeDto.rankId,
                departmentId: hireEmployeeDto.departmentId,
                positionId: positionId,
            });
            return this.ÏßÅÏõêÏÉùÏÑ±Í≤∞Í≥ºÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(result);
        }
        catch (error) {
            this.ÏóêÎü¨Î•º_HTTPÏùëÎãµÏúºÎ°ú_Îß§ÌïëÌïúÎã§(error);
        }
    }
    ÏßÅÏõêÏÉùÏÑ±Í≤∞Í≥ºÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(result) {
        const employee = {
            id: result.employee.id,
            employeeNumber: result.employee.employeeNumber,
            name: result.employee.name,
            email: result.employee.email,
            phoneNumber: result.employee.phoneNumber,
            dateOfBirth: result.employee.dateOfBirth?.toISOString().split('T')[0],
            gender: result.employee.gender,
            hireDate: result.employee.hireDate.toISOString().split('T')[0],
            status: result.employee.status,
            currentRankId: result.employee.currentRankId,
            isInitialPasswordSet: result.employee.isInitialPasswordSet,
            createdAt: result.employee.createdAt,
            updatedAt: result.employee.updatedAt,
        };
        const response = {
            employee,
        };
        if (result.department) {
            response.department = this.Î∂ÄÏÑú_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(result.department);
        }
        if (result.rank) {
            response.rank = this.ÏßÅÍ∏â_Ï†ïÎ≥¥Î•º_Îß§ÌïëÌïúÎã§(result.rank);
        }
        return response;
    }
    async ÏßÅÏõêÏùÑ_Ìá¥ÏÇ¨Ï≤òÎ¶¨ÌïúÎã§(terminateDto) {
        try {
            const terminationDate = new Date(terminateDto.terminationDate);
            const result = await this.organizationContextService.ÏßÅÏõêÏùÑ_Ìá¥ÏÇ¨Ï≤òÎ¶¨ÌïúÎã§({
                employeeIdentifier: terminateDto.employeeIdentifier,
                terminationDate,
                terminationReason: terminateDto.terminationReason,
                processedBy: terminateDto.processedBy,
            });
            return this.Ìá¥ÏÇ¨Ï≤òÎ¶¨Í≤∞Í≥ºÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(result);
        }
        catch (error) {
            if (error instanceof Error) {
                throw new common_1.BadRequestException(error.message);
            }
            throw new common_1.BadRequestException('ÏßÅÏõê Ìá¥ÏÇ¨Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
        }
    }
    Ìá¥ÏÇ¨Ï≤òÎ¶¨Í≤∞Í≥ºÎ•º_ÏùëÎãµDTOÎ°ú_Î≥ÄÌôòÌïúÎã§(result) {
        return {
            success: true,
            employee: {
                id: result.employee.id,
                employeeNumber: result.employee.employeeNumber,
                name: result.employee.name,
                status: result.employee.status,
                terminationDate: result.employee.terminationDate?.toISOString().split('T')[0] || '',
                terminationReason: result.employee.terminationReason,
                updatedAt: result.employee.updatedAt.toISOString(),
            },
            message: result.message,
        };
    }
    async Ï†ÑÏ≤¥_Ï°∞ÏßÅ_Îç∞Ïù¥ÌÑ∞Î•º_Ï°∞ÌöåÌïúÎã§(includeInactiveDepartments = false) {
        try {
            const [departments, employees, positions, ranks, employeeDepartmentPositions] = await Promise.all([
                this.organizationContextService.Î™®Îì†_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§(),
                this.organizationContextService.Î™®Îì†_ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(),
                this.organizationContextService.Î™®Îì†_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§(),
                this.organizationContextService.Î™®Îì†_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§(),
                this.organizationContextService.Î™®Îì†_ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÎß§ÌïëÏùÑ_Ï°∞ÌöåÌïúÎã§(),
            ]);
            return {
                departments: departments
                    .filter((dept) => {
                    if (dept.isException)
                        return false;
                    return includeInactiveDepartments ? true : dept.isActive;
                })
                    .map((dept) => ({
                    id: dept.id,
                    departmentName: dept.departmentName,
                    departmentCode: dept.departmentCode,
                    type: dept.type,
                    parentDepartmentId: dept.parentDepartmentId,
                    order: dept.order,
                    createdAt: dept.createdAt,
                    updatedAt: dept.updatedAt,
                })),
                employees: employees.map((emp) => ({
                    id: emp.id,
                    employeeNumber: emp.employeeNumber,
                    name: emp.name,
                    email: emp.email,
                    password: emp.password,
                    phoneNumber: emp.phoneNumber,
                    dateOfBirth: emp.dateOfBirth,
                    gender: emp.gender,
                    hireDate: emp.hireDate,
                    status: emp.status,
                    currentRankId: emp.currentRankId,
                    terminationDate: emp.terminationDate,
                    terminationReason: emp.terminationReason,
                    isInitialPasswordSet: emp.isInitialPasswordSet,
                    createdAt: emp.createdAt,
                    updatedAt: emp.updatedAt,
                })),
                positions: positions.map((pos) => ({
                    id: pos.id,
                    positionTitle: pos.positionTitle,
                    positionCode: pos.positionCode,
                    level: pos.level,
                    hasManagementAuthority: pos.hasManagementAuthority,
                })),
                ranks: ranks.map((rank) => ({
                    id: rank.id,
                    rankName: rank.rankName,
                    rankCode: rank.rankCode,
                    level: rank.level,
                })),
                employeeDepartmentPositions: employeeDepartmentPositions.map((edp) => ({
                    id: edp.id,
                    employeeId: edp.employeeId,
                    departmentId: edp.departmentId,
                    positionId: edp.positionId,
                    isManager: edp.isManager,
                    createdAt: edp.createdAt,
                    updatedAt: edp.updatedAt,
                })),
                totalCounts: {
                    departments: departments.length,
                    employees: employees.length,
                    positions: positions.length,
                    ranks: ranks.length,
                    employeeDepartmentPositions: employeeDepartmentPositions.length,
                },
                exportedAt: new Date(),
            };
        }
        catch (error) {
            console.error('Ï†ÑÏ≤¥ Ï°∞ÏßÅ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
            throw new common_1.NotFoundException('Ï°∞ÏßÅ Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
    }
    ÏóêÎü¨Î•º_HTTPÏùëÎãµÏúºÎ°ú_Îß§ÌïëÌïúÎã§(error) {
        if (error.statusCode) {
            if (error.statusCode === 422) {
                throw new common_1.BadRequestException(error.message);
            }
            else if (error.statusCode === 409) {
                throw new common_1.BadRequestException(error.message);
            }
            else if (error.statusCode === 404) {
                throw new common_1.NotFoundException(error.message);
            }
        }
        throw new common_1.BadRequestException('ÏßÅÏõê ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
    }
    async Ï†ÑÏ≤¥_ÏßÅÏõêÏùò_Í¥ÄÎ¶¨Ïûê_ÎùºÏù∏ÏùÑ_Ï°∞ÌöåÌïúÎã§(includeTerminated = false) {
        try {
            const result = await this.organizationContextService.Ï†ÑÏ≤¥_ÏßÅÏõêÏùò_Í¥ÄÎ¶¨Ïûê_ÎùºÏù∏ÏùÑ_Ï°∞ÌöåÌïúÎã§(includeTerminated);
            const employees = result.map((item) => ({
                employeeId: item.employeeId,
                name: item.name,
                employeeNumber: item.employeeNumber,
                departments: item.departments.map((dept) => ({
                    departmentId: dept.departmentId,
                    departmentName: dept.departmentName,
                    managerLine: dept.managerLine.map((line) => ({
                        departmentId: line.departmentId,
                        departmentName: line.departmentName,
                        departmentCode: line.departmentCode,
                        type: line.type,
                        parentDepartmentId: line.parentDepartmentId,
                        depth: line.depth,
                        managers: line.managers.map((manager) => ({
                            employeeId: manager.employeeId,
                            name: manager.name,
                            employeeNumber: manager.employeeNumber,
                            email: manager.email,
                            positionId: manager.positionId,
                            positionTitle: manager.positionTitle,
                        })),
                    })),
                })),
            }));
            return {
                employees,
                total: employees.length,
            };
        }
        catch (error) {
            console.error('Ï†ÑÏ≤¥ ÏßÅÏõêÏùò Í¥ÄÎ¶¨Ïûê ÎùºÏù∏ Ï°∞Ìöå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
            throw new common_1.NotFoundException('ÏßÅÏõêÏùò Í¥ÄÎ¶¨Ïûê ÎùºÏù∏ Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
    }
};
exports.OrganizationInformationApplicationService = OrganizationInformationApplicationService;
exports.OrganizationInformationApplicationService = OrganizationInformationApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof organization_management_context_service_1.OrganizationManagementContextService !== "undefined" && organization_management_context_service_1.OrganizationManagementContextService) === "function" ? _a : Object])
], OrganizationInformationApplicationService);


/***/ }),

/***/ "./src/modules/application/single-sign-on/controllers/sso-application.controller.ts":
/*!******************************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/controllers/sso-application.controller.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SsoApplicationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const sso_application_service_1 = __webpack_require__(/*! ../sso-application.service */ "./src/modules/application/single-sign-on/sso-application.service.ts");
const dto_1 = __webpack_require__(/*! ../dto */ "./src/modules/application/single-sign-on/dto/index.ts");
let SsoApplicationController = class SsoApplicationController {
    constructor(ssoApplicationService) {
        this.ssoApplicationService = ssoApplicationService;
    }
    async authenticateSystem(authHeader) {
        return this.ssoApplicationService.authenticateSystem(authHeader);
    }
    async login(body) {
        const result = await this.ssoApplicationService.login(body);
        return result;
    }
    async verifyToken(authHeader) {
        return this.ssoApplicationService.verifyToken(authHeader);
    }
    async changePassword(authHeader, body) {
        return this.ssoApplicationService.changePassword(authHeader, body);
    }
    async checkPassword(authHeader, body) {
        return this.ssoApplicationService.checkPassword(authHeader, body);
    }
    async cleanUpExpiredTokens() {
        return this.ssoApplicationService.ÎßåÎ£åÎêú_ÌÜ†ÌÅ∞ÏùÑ_Ï†ïÎ¶¨ÌïúÎã§();
    }
};
exports.SsoApplicationController = SsoApplicationController;
__decorate([
    (0, common_1.Post)('system'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiBasicAuth)(),
    (0, swagger_1.ApiOperation)({
        summary: 'ÏãúÏä§ÌÖú Ïù∏Ï¶ù',
        description: 'SDKÍ∞Ä Basic AuthÎ°ú ÏãúÏä§ÌÖúÏùÑ Ïù∏Ï¶ùÌïòÍ≥† Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞ÏùÑ Î∞úÍ∏âÎ∞õÏäµÎãàÎã§.',
    }),
    (0, swagger_1.ApiHeader)({
        name: 'Authorization',
        description: 'Basic Auth Ìó§Îçî, ÌòïÏãù: Basic base64(clientId:clientSecret)',
        required: true,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÏãúÏä§ÌÖú Ïù∏Ï¶ù ÏÑ±Í≥µ',
        type: dto_1.SystemAuthResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ù Ïã§Ìå®' }),
    __param(0, (0, common_1.Headers)('authorization')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], SsoApplicationController.prototype, "authenticateSystem", null);
__decorate([
    (0, common_1.Post)('login'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'Î°úÍ∑∏Ïù∏ Î∞è ÌÜ†ÌÅ∞ Î∞úÍ∏â',
        description: 'Ïô∏Î∂Ä ÏãúÏä§ÌÖúÏù¥ Basic AuthÎ°ú Ïù∏Ï¶ùÌïú ÌõÑ, ÏÇ¨Ïö©Ïûê Ïù¥Î©îÏùº/ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Í≤ÄÏ¶ùÌïòÍ≥† Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞ÏùÑ Î∞úÍ∏âÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiBody)({ type: dto_1.LoginRequestDto }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ Î∞è ÌÜ†ÌÅ∞ Î∞úÍ∏â ÏÑ±Í≥µ',
        type: dto_1.LoginResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù' }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'ÏãúÏä§ÌÖú Ïù∏Ï¶ù Ïã§Ìå® ÎòêÎäî ÏÇ¨Ïö©Ïûê Î°úÍ∑∏Ïù∏ Ïã§Ìå®' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'ÏÇ¨Ïö©Ïûê ÎòêÎäî ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏùå' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof dto_1.LoginRequestDto !== "undefined" && dto_1.LoginRequestDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], SsoApplicationController.prototype, "login", null);
__decorate([
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Post)('verify'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({ summary: 'ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù' }),
    (0, swagger_1.ApiHeader)({
        name: 'Authorization',
        description: 'Bearer ÌÜ†ÌÅ∞, ÌòïÏãù: Bearer {access_token}',
        required: false,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù ÏÑ±Í≥µ',
        type: dto_1.TokenVerifyResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÌÜ†ÌÅ∞' }),
    __param(0, (0, common_1.Headers)('Authorization')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], SsoApplicationController.prototype, "verifyToken", null);
__decorate([
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Post)('change-password'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω',
        description: 'ÏÇ¨Ïö©ÏûêÏùò ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Î≥ÄÍ≤ΩÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiHeader)({
        name: 'Authorization',
        description: 'Bearer ÌÜ†ÌÅ∞, ÌòïÏãù: Bearer {access_token}',
        required: true,
    }),
    (0, swagger_1.ApiBody)({ type: dto_1.ChangePasswordRequestDto }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω ÏÑ±Í≥µ',
        type: dto_1.ChangePasswordResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù' }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ù Ïã§Ìå®' }),
    __param(0, (0, common_1.Headers)('Authorization')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof dto_1.ChangePasswordRequestDto !== "undefined" && dto_1.ChangePasswordRequestDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], SsoApplicationController.prototype, "changePassword", null);
__decorate([
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Post)('check-password'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏',
        description: 'ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÎäîÏßÄ ÌôïÏù∏Ìï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiHeader)({
        name: 'Authorization',
        description: 'Bearer ÌÜ†ÌÅ∞, ÌòïÏãù: Bearer {access_token}',
        required: true,
    }),
    (0, swagger_1.ApiBody)({ type: dto_1.CheckPasswordRequestDto }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏ ÏÑ±Í≥µ',
        type: dto_1.CheckPasswordResponseDto,
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'ÏûòÎ™ªÎêú ÏöîÏ≤≠ ÌòïÏãù' }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Ïù∏Ï¶ù Ïã§Ìå®' }),
    __param(0, (0, common_1.Headers)('Authorization')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof dto_1.CheckPasswordRequestDto !== "undefined" && dto_1.CheckPasswordRequestDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], SsoApplicationController.prototype, "checkPassword", null);
__decorate([
    (0, common_1.Get)('cron/clean-up/token'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    (0, swagger_1.ApiOperation)({
        summary: 'ÎßåÎ£åÎêú ÌÜ†ÌÅ∞ Ï†ïÎ¶¨ Î∞∞ÏπòÏûëÏóÖ',
        description: 'ÎßåÎ£åÎêú ÌÜ†ÌÅ∞Îì§ÏùÑ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ÏóêÏÑú ÏÇ≠Ï†úÌïòÎäî Î∞∞ÏπòÏûëÏóÖÏùÑ Ïã§ÌñâÌï©ÎãàÎã§.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Î∞∞ÏπòÏûëÏóÖ Ïã§Ìñâ ÏÑ±Í≥µ',
        schema: {
            type: 'object',
            properties: {
                deletedCount: {
                    type: 'number',
                    description: 'ÏÇ≠Ï†úÎêú ÌÜ†ÌÅ∞ Í∞úÏàò',
                },
                message: {
                    type: 'string',
                    description: 'Ïã§Ìñâ Í≤∞Í≥º Î©îÏãúÏßÄ',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 500, description: 'ÏÑúÎ≤Ñ ÎÇ¥Î∂Ä Ïò§Î•ò' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], SsoApplicationController.prototype, "cleanUpExpiredTokens", null);
exports.SsoApplicationController = SsoApplicationController = __decorate([
    (0, swagger_1.ApiTags)('Client - Ïù∏Ï¶ù API'),
    (0, common_1.Controller)('auth'),
    __metadata("design:paramtypes", [typeof (_a = typeof sso_application_service_1.SsoApplicationService !== "undefined" && sso_application_service_1.SsoApplicationService) === "function" ? _a : Object])
], SsoApplicationController);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/change-password.dto.ts":
/*!***************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/change-password.dto.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangePasswordResponseDto = exports.ChangePasswordRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ChangePasswordRequestDto {
}
exports.ChangePasswordRequestDto = ChangePasswordRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏',
        minLength: 8,
        example: 'newPassword123',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.MinLength)(8, { message: 'ÎπÑÎ∞ÄÎ≤àÌò∏Îäî ÏµúÏÜå 8Ïûê Ïù¥ÏÉÅÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.' }),
    __metadata("design:type", String)
], ChangePasswordRequestDto.prototype, "newPassword", void 0);
class ChangePasswordResponseDto {
}
exports.ChangePasswordResponseDto = ChangePasswordResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§.',
        description: 'ÏùëÎãµ Î©îÏãúÏßÄ',
    }),
    __metadata("design:type", String)
], ChangePasswordResponseDto.prototype, "message", void 0);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/check-password.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/check-password.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckPasswordResponseDto = exports.CheckPasswordRequestDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CheckPasswordRequestDto {
}
exports.CheckPasswordRequestDto = CheckPasswordRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏',
        example: 'currentPassword123',
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckPasswordRequestDto.prototype, "currentPassword", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Ïù¥Î©îÏùº (ÏÑ†ÌÉùÏÇ¨Ìï≠)',
        example: 'user@example.com',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEmail)(),
    __metadata("design:type", String)
], CheckPasswordRequestDto.prototype, "email", void 0);
class CheckPasswordResponseDto {
}
exports.CheckPasswordResponseDto = CheckPasswordResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
        description: 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÏùºÏπò Ïó¨Î∂Ä',
    }),
    __metadata("design:type", Boolean)
], CheckPasswordResponseDto.prototype, "isValid", void 0);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/index.ts":
/*!*************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/index.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./login-request.dto */ "./src/modules/application/single-sign-on/dto/login-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./login-response.dto */ "./src/modules/application/single-sign-on/dto/login-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./token-verify-response.dto */ "./src/modules/application/single-sign-on/dto/token-verify-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./change-password.dto */ "./src/modules/application/single-sign-on/dto/change-password.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./check-password.dto */ "./src/modules/application/single-sign-on/dto/check-password.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./system-auth.dto */ "./src/modules/application/single-sign-on/dto/system-auth.dto.ts"), exports);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/login-request.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/login-request.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoginRequestDto = exports.GrantType = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
var GrantType;
(function (GrantType) {
    GrantType["PASSWORD"] = "password";
    GrantType["REFRESH_TOKEN"] = "refresh_token";
})(GrantType || (exports.GrantType = GrantType = {}));
class LoginRequestDto {
}
exports.LoginRequestDto = LoginRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        enum: GrantType,
        description: 'password: ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ù Î∞©Ïãù, refresh_token: Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ Î∞©Ïãù',
        example: GrantType.PASSWORD,
    }),
    (0, class_validator_1.IsEnum)(GrantType),
    __metadata("design:type", String)
], LoginRequestDto.prototype, "grant_type", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÇ¨Ïö©Ïûê Ïù¥Î©îÏùº (grant_typeÏù¥ passwordÏù∏ Í≤ΩÏö∞ÏóêÎßå ÌïÑÏöî)',
        example: 'admin@lumir.space',
    }),
    (0, class_validator_1.ValidateIf)((obj) => obj.grant_type === GrantType.PASSWORD),
    (0, class_validator_1.IsEmail)({}, { message: 'Ïú†Ìö®Ìïú Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.' }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LoginRequestDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'ÏÇ¨Ïö©Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ (grant_typeÏù¥ passwordÏù∏ Í≤ΩÏö∞ÏóêÎßå ÌïÑÏöî)',
        example: '00000',
    }),
    (0, class_validator_1.ValidateIf)((obj) => obj.grant_type === GrantType.PASSWORD),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LoginRequestDto.prototype, "password", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ (grant_typeÏù¥ refresh_tokenÏù∏ Í≤ΩÏö∞ÏóêÎßå ÌïÑÏöî)',
    }),
    (0, class_validator_1.ValidateIf)((obj) => obj.grant_type === GrantType.REFRESH_TOKEN),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], LoginRequestDto.prototype, "refresh_token", void 0);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/login-response.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/login-response.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoginResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class LoginResponseDto {
}
exports.LoginResponseDto = LoginResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'Bearer', description: 'ÌÜ†ÌÅ∞ ÌÉÄÏûÖ' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "tokenType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "accessToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 86400, description: 'Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞ ÎßåÎ£å ÏãúÍ∞Ñ(Ï¥à)' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], LoginResponseDto.prototype, "expiresAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "refreshToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 2592000, description: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ ÎßåÎ£å ÏãúÍ∞Ñ(Ï¥à)' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], LoginResponseDto.prototype, "refreshTokenExpiresAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê ID' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î≤àÌò∏' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Ï†ÑÌôîÎ≤àÌò∏' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "phoneNumber", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÉùÎÖÑÏõîÏùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], LoginResponseDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏÑ±Î≥Ñ' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏûÖÏÇ¨Ïùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], LoginResponseDto.prototype, "hireDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê ÏÉÅÌÉú' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÏ±ÖÎ™Ö' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'ÏßÅÍ∏âÎ™Ö' }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "rank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: 'ÏãúÏä§ÌÖúÎ≥Ñ Ïó≠Ìï† Î™©Î°ù',
        type: 'object',
        example: { rms: ['resourceManager'], lrim: ['interviewee'] },
    }),
    __metadata("design:type", typeof (_e = typeof Record !== "undefined" && Record) === "function" ? _e : Object)
], LoginResponseDto.prototype, "systemRoles", void 0);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/system-auth.dto.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/system-auth.dto.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemAuthResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class SystemAuthResponseDto {
}
exports.SystemAuthResponseDto = SystemAuthResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], SystemAuthResponseDto.prototype, "systemId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏãúÏä§ÌÖú Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], SystemAuthResponseDto.prototype, "systemName", void 0);


/***/ }),

/***/ "./src/modules/application/single-sign-on/dto/token-verify-response.dto.ts":
/*!*********************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/dto/token-verify-response.dto.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TokenVerifyResponseDto = exports.UserInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UserInfoDto {
}
exports.UserInfoDto = UserInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê ID' }),
    __metadata("design:type", String)
], UserInfoDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], UserInfoDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏÇ¨Ïö©Ïûê Ïù¥Î©îÏùº' }),
    __metadata("design:type", String)
], UserInfoDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'ÏßÅÏõê Î≤àÌò∏' }),
    __metadata("design:type", String)
], UserInfoDto.prototype, "employee_number", void 0);
class TokenVerifyResponseDto {
}
exports.TokenVerifyResponseDto = TokenVerifyResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: true, description: 'ÌÜ†ÌÅ∞ Ïú†Ìö®ÏÑ±' }),
    __metadata("design:type", Boolean)
], TokenVerifyResponseDto.prototype, "valid", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: UserInfoDto, description: 'ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥' }),
    __metadata("design:type", UserInfoDto)
], TokenVerifyResponseDto.prototype, "user_info", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 86400, description: 'ÌÜ†ÌÅ∞ ÎßåÎ£åÍπåÏßÄ ÎÇ®ÏùÄ ÏãúÍ∞Ñ(Ï¥à)' }),
    __metadata("design:type", Number)
], TokenVerifyResponseDto.prototype, "expires_in", void 0);


/***/ }),

/***/ "./src/modules/application/single-sign-on/sso-application.module.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/sso-application.module.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SsoApplicationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const sso_application_service_1 = __webpack_require__(/*! ./sso-application.service */ "./src/modules/application/single-sign-on/sso-application.service.ts");
const sso_application_controller_1 = __webpack_require__(/*! ./controllers/sso-application.controller */ "./src/modules/application/single-sign-on/controllers/sso-application.controller.ts");
const authorization_context_module_1 = __webpack_require__(/*! ../../context/authorization/authorization-context.module */ "./src/modules/context/authorization/authorization-context.module.ts");
const system_management_context_module_1 = __webpack_require__(/*! ../../context/system-management/system-management-context.module */ "./src/modules/context/system-management/system-management-context.module.ts");
const organization_management_context_module_1 = __webpack_require__(/*! ../../context/organization-management/organization-management-context.module */ "./src/modules/context/organization-management/organization-management-context.module.ts");
let SsoApplicationModule = class SsoApplicationModule {
};
exports.SsoApplicationModule = SsoApplicationModule;
exports.SsoApplicationModule = SsoApplicationModule = __decorate([
    (0, common_1.Module)({
        imports: [authorization_context_module_1.AuthorizationContextModule, system_management_context_module_1.SystemManagementContextModule, organization_management_context_module_1.OrganizationManagementContextModule],
        controllers: [sso_application_controller_1.SsoApplicationController],
        providers: [sso_application_service_1.SsoApplicationService],
        exports: [sso_application_service_1.SsoApplicationService],
    })
], SsoApplicationModule);


/***/ }),

/***/ "./src/modules/application/single-sign-on/sso-application.service.ts":
/*!***************************************************************************!*\
  !*** ./src/modules/application/single-sign-on/sso-application.service.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SsoApplicationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const authorization_context_service_1 = __webpack_require__(/*! ../../context/authorization/authorization-context.service */ "./src/modules/context/authorization/authorization-context.service.ts");
const system_management_context_service_1 = __webpack_require__(/*! ../../context/system-management/system-management-context.service */ "./src/modules/context/system-management/system-management-context.service.ts");
const organization_management_context_service_1 = __webpack_require__(/*! ../../context/organization-management/organization-management-context.service */ "./src/modules/context/organization-management/organization-management-context.service.ts");
let SsoApplicationService = class SsoApplicationService {
    constructor(authorizationContextService, systemManagementContextService, organizationContextService) {
        this.authorizationContextService = authorizationContextService;
        this.systemManagementContextService = systemManagementContextService;
        this.organizationContextService = organizationContextService;
    }
    async login(body, authHeader) {
        const { grant_type, email, password, refresh_token } = body;
        let employee;
        switch (grant_type) {
            case 'password':
                employee = await this.authorizationContextService.Î°úÍ∑∏Ïù∏Ï†ïÎ≥¥Î•º_Í≤ÄÏ¶ùÌïúÎã§(email, password);
                break;
            case 'refresh_token':
                employee = await this.authorizationContextService.Î¶¨ÌîÑÎ†àÏãúÌÜ†ÌÅ∞ÏùÑ_Í≤ÄÏ¶ùÌïúÎã§(refresh_token);
                break;
            default:
                throw new common_1.BadRequestException('ÏßÄÏõêÌïòÏßÄ ÏïäÎäî grant_typeÏûÖÎãàÎã§.');
        }
        const { department, position, rank } = await this.organizationContextService.ÏßÅÏõêÏùò_Î∂ÄÏÑú_ÏßÅÏ±Ö_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§(employee);
        const employeeSystemRoles = await this.systemManagementContextService.ÏßÅÏõêÏùò_ÏãúÏä§ÌÖúÏó≠Ìï†Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employee.id);
        const systemRolesMap = {};
        for (const employeeSystemRole of employeeSystemRoles) {
            if (employeeSystemRole.systemRole && employeeSystemRole.systemRole.system) {
                const systemCode = employeeSystemRole.systemRole.system.name;
                const roleCode = employeeSystemRole.systemRole.roleCode;
                if (!systemRolesMap[systemCode]) {
                    systemRolesMap[systemCode] = [];
                }
                systemRolesMap[systemCode].push(roleCode);
            }
        }
        const token = await this.authorizationContextService.ÌÜ†ÌÅ∞Ï†ïÎ≥¥Î•º_ÏÉùÏÑ±ÌïúÎã§(employee);
        console.log('token', token);
        return {
            tokenType: 'Bearer',
            accessToken: token.accessToken,
            expiresAt: token.tokenExpiresAt,
            refreshToken: token.refreshToken,
            refreshTokenExpiresAt: token.refreshTokenExpiresAt,
            id: employee.id,
            name: employee.name,
            email: employee.email,
            employeeNumber: employee.employeeNumber,
            phoneNumber: employee.phoneNumber,
            dateOfBirth: employee.dateOfBirth,
            gender: employee.gender,
            hireDate: employee.hireDate,
            status: employee.status,
            department: department?.departmentName || '',
            position: position?.positionTitle || '',
            rank: rank?.rankName || '',
            systemRoles: systemRolesMap,
        };
    }
    async verifyToken(authHeader) {
        const result = this.BEARER_Ìó§Îçî_ÌååÏã±ÌïòÍ∏∞(authHeader);
        if (!result) {
            throw new common_1.UnauthorizedException('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Ïù∏Ï¶ùÏ†ïÎ≥¥ÏûÖÎãàÎã§.');
        }
        const { accessToken } = result;
        console.log('accessToken', accessToken);
        const { employee, token } = await this.authorizationContextService.ÏóëÏÑ∏Ïä§ÌÜ†ÌÅ∞ÏùÑ_Í≤ÄÏ¶ùÌïúÎã§(accessToken);
        return {
            valid: true,
            user_info: {
                id: employee.id,
                name: employee.name,
                email: employee.email,
                employee_number: employee.employeeNumber,
            },
            expires_in: this.ÎßåÎ£åÏãúÍ∞ÑÏùÑ_Ï¥à_Îã®ÏúÑÎ°ú_Í≥ÑÏÇ∞ÌïòÍ∏∞(token.tokenExpiresAt),
        };
    }
    async changePassword(authHeader, body) {
        const result = this.BEARER_Ìó§Îçî_ÌååÏã±ÌïòÍ∏∞(authHeader);
        if (!result) {
            throw new common_1.UnauthorizedException('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Ïù∏Ï¶ùÏ†ïÎ≥¥ÏûÖÎãàÎã§.');
        }
        const { accessToken } = result;
        const { employee } = await this.authorizationContextService.ÏóëÏÑ∏Ïä§ÌÜ†ÌÅ∞ÏùÑ_Í≤ÄÏ¶ùÌïúÎã§(accessToken);
        const { newPassword } = body;
        await this.authorizationContextService.ÎπÑÎ∞ÄÎ≤àÌò∏Î•º_Î≥ÄÍ≤ΩÌïúÎã§(employee, newPassword);
        return {
            message: 'ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§.',
        };
    }
    async checkPassword(authHeader, body) {
        const result = this.BEARER_Ìó§Îçî_ÌååÏã±ÌïòÍ∏∞(authHeader);
        if (!result) {
            throw new common_1.UnauthorizedException('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Ïù∏Ï¶ùÏ†ïÎ≥¥ÏûÖÎãàÎã§.');
        }
        const { accessToken } = result;
        const { employee } = await this.authorizationContextService.ÏóëÏÑ∏Ïä§ÌÜ†ÌÅ∞ÏùÑ_Í≤ÄÏ¶ùÌïúÎã§(accessToken);
        const { currentPassword } = body;
        const isPasswordValid = await this.authorizationContextService.ÎπÑÎ∞ÄÎ≤àÌò∏Î•º_Í≤ÄÏ¶ùÌïúÎã§(employee, currentPassword);
        return {
            isValid: isPasswordValid,
        };
    }
    async authenticateSystem(authHeader) {
        const result = this.BASIC_Ìó§Îçî_ÌååÏã±ÌïòÍ∏∞(authHeader);
        if (!result) {
            throw new common_1.UnauthorizedException('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Ïù∏Ï¶ùÏ†ïÎ≥¥ÏûÖÎãàÎã§. Basic Auth Ìó§ÎçîÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§.');
        }
        const { clientId, clientSecret } = result;
        const system = await this.authorizationContextService.ÏãúÏä§ÌÖúÏùÑ_Ïù∏Ï¶ùÌïúÎã§(clientId, clientSecret);
        return {
            systemId: system.id,
            systemName: system.name,
        };
    }
    BASIC_Ìó§Îçî_ÌååÏã±ÌïòÍ∏∞(authHeader) {
        try {
            if (!authHeader || !authHeader.startsWith('Basic ')) {
                return null;
            }
            const base64Credentials = authHeader.split(' ')[1];
            const credentials = Buffer.from(base64Credentials, 'base64').toString('utf-8');
            const [clientId, clientSecret] = credentials.split(':');
            if (!clientId || !clientSecret) {
                return null;
            }
            return { clientId, clientSecret };
        }
        catch (error) {
            console.error('Basic Auth Ìó§Îçî ÌååÏã± Ï§ë Ïò§Î•ò:', error);
            return null;
        }
    }
    BEARER_Ìó§Îçî_ÌååÏã±ÌïòÍ∏∞(authHeader) {
        if (!authHeader || !authHeader.startsWith('Bearer ')) {
            return null;
        }
        const accessToken = authHeader.split(' ')[1];
        return { accessToken };
    }
    ÎßåÎ£åÏãúÍ∞ÑÏùÑ_Ï¥à_Îã®ÏúÑÎ°ú_Í≥ÑÏÇ∞ÌïòÍ∏∞(expiresAt) {
        const now = new Date();
        const diffMs = expiresAt.getTime() - now.getTime();
        return Math.floor(diffMs / 1000);
    }
    async ÎßåÎ£åÎêú_ÌÜ†ÌÅ∞ÏùÑ_Ï†ïÎ¶¨ÌïúÎã§() {
        return await this.authorizationContextService.ÎßåÎ£åÎêú_ÌÜ†ÌÅ∞ÏùÑ_Ï†ïÎ¶¨ÌïúÎã§();
    }
};
exports.SsoApplicationService = SsoApplicationService;
exports.SsoApplicationService = SsoApplicationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof authorization_context_service_1.AuthorizationContextService !== "undefined" && authorization_context_service_1.AuthorizationContextService) === "function" ? _a : Object, typeof (_b = typeof system_management_context_service_1.SystemManagementContextService !== "undefined" && system_management_context_service_1.SystemManagementContextService) === "function" ? _b : Object, typeof (_c = typeof organization_management_context_service_1.OrganizationManagementContextService !== "undefined" && organization_management_context_service_1.OrganizationManagementContextService) === "function" ? _c : Object])
], SsoApplicationService);


/***/ }),

/***/ "./src/modules/context/authorization/authorization-context.module.ts":
/*!***************************************************************************!*\
  !*** ./src/modules/context/authorization/authorization-context.module.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthorizationContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const authorization_context_service_1 = __webpack_require__(/*! ./authorization-context.service */ "./src/modules/context/authorization/authorization-context.service.ts");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const employee_module_1 = __webpack_require__(/*! ../../domain/employee/employee.module */ "./src/modules/domain/employee/employee.module.ts");
const token_module_1 = __webpack_require__(/*! ../../domain/token/token.module */ "./src/modules/domain/token/token.module.ts");
const system_module_1 = __webpack_require__(/*! ../../domain/system/system.module */ "./src/modules/domain/system/system.module.ts");
const employee_token_module_1 = __webpack_require__(/*! ../../domain/employee-token/employee-token.module */ "./src/modules/domain/employee-token/employee-token.module.ts");
let AuthorizationContextModule = class AuthorizationContextModule {
};
exports.AuthorizationContextModule = AuthorizationContextModule;
exports.AuthorizationContextModule = AuthorizationContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            jwt_1.JwtModule.register({}),
            config_1.ConfigModule,
            employee_module_1.DomainEmployeeModule,
            token_module_1.DomainTokenModule,
            system_module_1.DomainSystemModule,
            employee_token_module_1.DomainEmployeeTokenModule,
        ],
        providers: [authorization_context_service_1.AuthorizationContextService],
        exports: [authorization_context_service_1.AuthorizationContextService],
    })
], AuthorizationContextModule);


/***/ }),

/***/ "./src/modules/context/authorization/authorization-context.service.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/context/authorization/authorization-context.service.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthorizationContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! ../../domain/employee/employee.service */ "./src/modules/domain/employee/employee.service.ts");
const token_service_1 = __webpack_require__(/*! ../../domain/token/token.service */ "./src/modules/domain/token/token.service.ts");
const system_service_1 = __webpack_require__(/*! ../../domain/system/system.service */ "./src/modules/domain/system/system.service.ts");
const employee_token_service_1 = __webpack_require__(/*! ../../domain/employee-token/employee-token.service */ "./src/modules/domain/employee-token/employee-token.service.ts");
let AuthorizationContextService = class AuthorizationContextService {
    constructor(ÏßÅÏõêÏÑúÎπÑÏä§, ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§, ÏãúÏä§ÌÖúÏÑúÎπÑÏä§, ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§) {
        this.ÏßÅÏõêÏÑúÎπÑÏä§ = ÏßÅÏõêÏÑúÎπÑÏä§;
        this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§ = ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§;
        this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§ = ÏãúÏä§ÌÖúÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§ = ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§;
    }
    async ÏãúÏä§ÌÖúÏùÑ_Ïù∏Ï¶ùÌïúÎã§(clientId, clientSecret) {
        const system = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findByClientId(clientId);
        if (!system) {
            throw new common_1.UnauthorizedException('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ IDÏûÖÎãàÎã§.');
        }
        if (!system.isActive) {
            throw new common_1.UnauthorizedException({ message: 'ÎπÑÌôúÏÑ±ÌôîÎêú ÏãúÏä§ÌÖúÏûÖÎãàÎã§.', system: system.name });
        }
        const isVerified = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.verifyClientSecret(clientSecret, system);
        if (!isVerified) {
            throw new common_1.UnauthorizedException('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏãúÌÅ¨Î¶øÏûÖÎãàÎã§.');
        }
        return system;
    }
    async Î°úÍ∑∏Ïù∏Ï†ïÎ≥¥Î•º_Í≤ÄÏ¶ùÌïúÎã§(email, password) {
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmail(email);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.');
        }
        if (employee.status === 'Ìá¥ÏÇ¨') {
            throw new common_1.UnauthorizedException('Ìá¥ÏÇ¨Ìïú ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.');
        }
        const isPasswordValid = await this.ÏßÅÏõêÏÑúÎπÑÏä§.verifyPassword(password, employee);
        if (!isPasswordValid) {
            throw new common_1.UnauthorizedException('ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
        }
        return employee;
    }
    async ÏóëÏÑ∏Ïä§ÌÜ†ÌÅ∞ÏùÑ_Í≤ÄÏ¶ùÌïúÎã§(accessToken) {
        const token = await this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByAccessToken(accessToken);
        if (new Date() > token.tokenExpiresAt) {
            throw new common_1.UnauthorizedException('ÎßåÎ£åÎêú ÌÜ†ÌÅ∞ÏûÖÎãàÎã§.');
        }
        const payload = this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.verifyJwtToken(accessToken);
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeId(payload.sub);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.');
        }
        return { employee, token };
    }
    async Î¶¨ÌîÑÎ†àÏãúÌÜ†ÌÅ∞ÏùÑ_Í≤ÄÏ¶ùÌïúÎã§(refresh_token) {
        const token = await this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByRefreshToken(refresh_token);
        if (new Date() > token.refreshTokenExpiresAt) {
            throw new common_1.UnauthorizedException('ÎßåÎ£åÎêú Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ÏûÖÎãàÎã§.');
        }
        const payload = this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.verifyJwtToken(refresh_token);
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeId(payload.sub);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.');
        }
        return employee;
    }
    async ÌÜ†ÌÅ∞Ï†ïÎ≥¥Î•º_ÏÉùÏÑ±ÌïúÎã§(employee) {
        const expiresInDays = 1;
        const refreshExpiresInDays = 30;
        const payload = {
            sub: employee.id,
            employeeNumber: employee.employeeNumber,
            type: 'access',
        };
        const accessToken = this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.generateJwtToken(payload, '1d');
        const refreshPayload = {
            ...payload,
            type: 'refresh',
        };
        const refreshToken = this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.generateJwtToken(refreshPayload, `${refreshExpiresInDays}d`);
        const now = new Date();
        const tokenExpiresAt = new Date(now.getTime() + expiresInDays * 24 * 60 * 60 * 1000);
        const refreshTokenExpiresAt = new Date(now.getTime() + refreshExpiresInDays * 24 * 60 * 60 * 1000);
        const token = await this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.save({
            accessToken,
            refreshToken,
            tokenExpiresAt,
            refreshTokenExpiresAt,
        });
        await this.ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.save({
            employeeId: employee.id,
            tokenId: token.id,
        });
        return token;
    }
    async ÎπÑÎ∞ÄÎ≤àÌò∏Î•º_Î≥ÄÍ≤ΩÌïúÎã§(employee, newPassword) {
        const hashedPassword = this.ÏßÅÏõêÏÑúÎπÑÏä§.hashPassword(newPassword);
        await this.ÏßÅÏõêÏÑúÎπÑÏä§.updatePassword(employee.id, hashedPassword);
    }
    async ÎπÑÎ∞ÄÎ≤àÌò∏Î•º_Í≤ÄÏ¶ùÌïúÎã§(employee, password) {
        return await this.ÏßÅÏõêÏÑúÎπÑÏä§.verifyPassword(password, employee);
    }
    async ÎßåÎ£åÎêú_ÌÜ†ÌÅ∞ÏùÑ_Ï†ïÎ¶¨ÌïúÎã§() {
        const expiredTokens = await this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findExpiredTokens();
        if (expiredTokens.length === 0) {
            return {
                deletedCount: 0,
                message: 'ÏÇ≠Ï†úÌï† ÎßåÎ£åÎêú ÌÜ†ÌÅ∞Ïù¥ ÏóÜÏäµÎãàÎã§.',
            };
        }
        const tokenIds = expiredTokens.map((token) => token.id);
        await this.ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.deleteByTokenIds(tokenIds);
        const result = await this.ÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.deleteExpiredTokens();
        return {
            deletedCount: result.deletedCount,
            message: `ÎßåÎ£åÎêú ÌÜ†ÌÅ∞ ${result.deletedCount}Í∞úÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.`,
        };
    }
};
exports.AuthorizationContextService = AuthorizationContextService;
exports.AuthorizationContextService = AuthorizationContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object, typeof (_b = typeof token_service_1.DomainTokenService !== "undefined" && token_service_1.DomainTokenService) === "function" ? _b : Object, typeof (_c = typeof system_service_1.DomainSystemService !== "undefined" && system_service_1.DomainSystemService) === "function" ? _c : Object, typeof (_d = typeof employee_token_service_1.DomainEmployeeTokenService !== "undefined" && employee_token_service_1.DomainEmployeeTokenService) === "function" ? _d : Object])
], AuthorizationContextService);


/***/ }),

/***/ "./src/modules/context/employee-management/employee-fcm-token-management-context.service.ts":
/*!**************************************************************************************************!*\
  !*** ./src/modules/context/employee-management/employee-fcm-token-management-context.service.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeFcmTokenManagementContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_fcm_token_service_1 = __webpack_require__(/*! ../../domain/employee-fcm-token/employee-fcm-token.service */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.service.ts");
let EmployeeFcmTokenManagementContextService = class EmployeeFcmTokenManagementContextService {
    constructor(employeeFcmTokenService) {
        this.employeeFcmTokenService = employeeFcmTokenService;
    }
    async Î™®Îì†_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå() {
        return this.employeeFcmTokenService.findAll({
            relations: ['employee', 'fcmToken'],
        });
    }
    async ÏßÅÏõêÎ≥Ñ_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId) {
        return this.employeeFcmTokenService.findByEmployeeId(employeeId);
    }
    async FCM_ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(fcmTokenId) {
        return this.employeeFcmTokenService.findByFcmTokenId(fcmTokenId);
    }
    async ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id) {
        return this.employeeFcmTokenService.findOne({
            where: { id },
            relations: ['employee', 'fcmToken'],
        });
    }
    async IDÎ°ú_ÏßÅÏõê_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id) {
        return this.employeeFcmTokenService.findOne({
            where: { id },
        });
    }
    async ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(employeeId, fcmTokenId) {
        return this.employeeFcmTokenService.createOrUpdateRelation(employeeId, fcmTokenId);
    }
    async ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId, fcmTokenId) {
        return this.employeeFcmTokenService.deleteRelation(employeeId, fcmTokenId);
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId) {
        return this.employeeFcmTokenService.deleteAllByEmployeeId(employeeId);
    }
    async FCM_ÌÜ†ÌÅ∞_ÏÇ¨Ïö©Ïùº_ÏóÖÎç∞Ïù¥Ìä∏(employeeId, fcmTokenId) {
        return this.employeeFcmTokenService.updateUsage(employeeId, fcmTokenId);
    }
    async ÏßÅÏõêÍ≥º_FCM_ÌÜ†ÌÅ∞Ïùò_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId, fcmTokenId) {
        return this.employeeFcmTokenService.findOne({
            where: { employeeId, fcmTokenId },
        });
    }
    async FCM_ÌÜ†ÌÅ∞ÏùÑ_Í∞ÄÏßÑ_ÏßÅÏõê_Ïàò_Ï°∞Ìöå(fcmTokenId) {
        return this.employeeFcmTokenService.countEmployeesByFcmToken(fcmTokenId);
    }
    async ÏßÅÏõêÏùò_FCM_ÌÜ†ÌÅ∞_Ïàò_Ï°∞Ìöå(employeeId) {
        return this.employeeFcmTokenService.countFcmTokensByEmployee(employeeId);
    }
    async Ïò§ÎûòÎêú_FCM_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(cutoffDate) {
        return this.employeeFcmTokenService.deleteOldTokens(cutoffDate);
    }
    async FCM_ÌÜ†ÌÅ∞_ÏÇ¨Ïö©Ïùº_ÏóÖÎç∞Ïù¥Ìä∏_by_ÌÜ†ÌÅ∞ID(fcmTokenId) {
        return this.employeeFcmTokenService.updateTokenUsage(fcmTokenId);
    }
    async FCM_ÌÜ†ÌÅ∞Í≥º_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°¥Ïû¨_Ïó¨Î∂Ä_ÌôïÏù∏(employeeId, fcmTokenId) {
        const relation = await this.employeeFcmTokenService.findOne({
            where: { employeeId, fcmTokenId },
        });
        return !!relation;
    }
};
exports.EmployeeFcmTokenManagementContextService = EmployeeFcmTokenManagementContextService;
exports.EmployeeFcmTokenManagementContextService = EmployeeFcmTokenManagementContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_fcm_token_service_1.DomainEmployeeFcmTokenService !== "undefined" && employee_fcm_token_service_1.DomainEmployeeFcmTokenService) === "function" ? _a : Object])
], EmployeeFcmTokenManagementContextService);


/***/ }),

/***/ "./src/modules/context/employee-management/employee-management-context.module.ts":
/*!***************************************************************************************!*\
  !*** ./src/modules/context/employee-management/employee-management-context.module.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeManagementContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_system_role_management_context_service_1 = __webpack_require__(/*! ./employee-system-role-management-context.service */ "./src/modules/context/employee-management/employee-system-role-management-context.service.ts");
const employee_token_management_context_service_1 = __webpack_require__(/*! ./employee-token-management-context.service */ "./src/modules/context/employee-management/employee-token-management-context.service.ts");
const employee_fcm_token_management_context_service_1 = __webpack_require__(/*! ./employee-fcm-token-management-context.service */ "./src/modules/context/employee-management/employee-fcm-token-management-context.service.ts");
const employee_system_role_module_1 = __webpack_require__(/*! ../../domain/employee-system-role/employee-system-role.module */ "./src/modules/domain/employee-system-role/employee-system-role.module.ts");
const employee_token_module_1 = __webpack_require__(/*! ../../domain/employee-token/employee-token.module */ "./src/modules/domain/employee-token/employee-token.module.ts");
const employee_fcm_token_module_1 = __webpack_require__(/*! ../../domain/employee-fcm-token/employee-fcm-token.module */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.module.ts");
let EmployeeManagementContextModule = class EmployeeManagementContextModule {
};
exports.EmployeeManagementContextModule = EmployeeManagementContextModule;
exports.EmployeeManagementContextModule = EmployeeManagementContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            employee_system_role_module_1.DomainEmployeeSystemRoleModule,
            employee_token_module_1.DomainEmployeeTokenModule,
            employee_fcm_token_module_1.DomainEmployeeFcmTokenModule,
        ],
        providers: [
            employee_system_role_management_context_service_1.EmployeeSystemRoleManagementContextService,
            employee_token_management_context_service_1.EmployeeTokenManagementContextService,
            employee_fcm_token_management_context_service_1.EmployeeFcmTokenManagementContextService,
        ],
        exports: [
            employee_system_role_management_context_service_1.EmployeeSystemRoleManagementContextService,
            employee_token_management_context_service_1.EmployeeTokenManagementContextService,
            employee_fcm_token_management_context_service_1.EmployeeFcmTokenManagementContextService,
        ],
    })
], EmployeeManagementContextModule);


/***/ }),

/***/ "./src/modules/context/employee-management/employee-system-role-management-context.service.ts":
/*!****************************************************************************************************!*\
  !*** ./src/modules/context/employee-management/employee-system-role-management-context.service.ts ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeSystemRoleManagementContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_system_role_service_1 = __webpack_require__(/*! ../../domain/employee-system-role/employee-system-role.service */ "./src/modules/domain/employee-system-role/employee-system-role.service.ts");
let EmployeeSystemRoleManagementContextService = class EmployeeSystemRoleManagementContextService {
    constructor(employeeSystemRoleService) {
        this.employeeSystemRoleService = employeeSystemRoleService;
    }
    async Î™®Îì†_ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Í¥ÄÍ≥Ñ_Ï°∞Ìöå() {
        return this.employeeSystemRoleService.findAll({
            relations: ['employee', 'systemRole', 'systemRole.system'],
        });
    }
    async ÏßÅÏõêÎ≥Ñ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId) {
        return this.employeeSystemRoleService.findByEmployeeId(employeeId);
    }
    async ÏãúÏä§ÌÖú_Ïó≠Ìï†Î≥Ñ_ÏßÅÏõê_Ï°∞Ìöå(systemRoleId) {
        return this.employeeSystemRoleService.findBySystemRoleId(systemRoleId);
    }
    async ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id) {
        return this.employeeSystemRoleService.findOne({
            where: { id },
            relations: ['employee', 'systemRole', 'systemRole.system'],
        });
    }
    async ÏßÅÏõêÏóêÍ≤å_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï†Îãπ(employeeId, systemRoleId) {
        return this.employeeSystemRoleService.assignRole(employeeId, systemRoleId);
    }
    async ÏßÅÏõêÏùò_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(employeeId, systemRoleId) {
        return this.employeeSystemRoleService.unassignRole(employeeId, systemRoleId);
    }
    async IDÎ°ú_ÏßÅÏõê_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(id) {
        return this.employeeSystemRoleService.findOne({
            where: { id },
        });
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(employeeId) {
        return this.employeeSystemRoleService.unassignAllRolesByEmployeeId(employeeId);
    }
    async ÏãúÏä§ÌÖú_Ïó≠Ìï†Ïùò_Î™®Îì†_Ìï†Îãπ_Ìï¥Ï†ú(systemRoleId) {
        return this.employeeSystemRoleService.unassignAllRolesBySystemRoleId(systemRoleId);
    }
    async ÏßÅÏõêÏùò_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Î≥¥Ïú†_Ïó¨Î∂Ä_ÌôïÏù∏(employeeId, systemRoleId) {
        const relation = await this.employeeSystemRoleService.findByEmployeeIdAndSystemRoleId(employeeId, systemRoleId);
        return !!relation;
    }
    async ÏãúÏä§ÌÖú_Ïó≠Ìï†Ïóê_Ìï†ÎãπÎêú_ÏßÅÏõê_ID_Î™©Î°ù_Ï°∞Ìöå(systemRoleId) {
        return this.employeeSystemRoleService.getEmployeeIdsBySystemRoleId(systemRoleId);
    }
    async ÏßÅÏõêÏù¥_Ìï†ÎãπÎ∞õÏùÄ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ID_Î™©Î°ù_Ï°∞Ìöå(employeeId) {
        return this.employeeSystemRoleService.getSystemRoleIdsByEmployeeId(employeeId);
    }
    async ÏßÅÏõêÏùò_ÏãúÏä§ÌÖú_Ïó≠Ìï†_ÏùºÍ¥Ñ_ÏóÖÎç∞Ïù¥Ìä∏(employeeId, systemRoleIds) {
        const existingRoles = await this.ÏßÅÏõêÎ≥Ñ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId);
        const deletedCount = existingRoles.length;
        await this.ÏßÅÏõêÏùò_Î™®Îì†_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï¥Ï†ú(employeeId);
        const addedRoles = [];
        for (const systemRoleId of systemRoleIds) {
            const role = await this.ÏßÅÏõêÏóêÍ≤å_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ìï†Îãπ(employeeId, systemRoleId);
            addedRoles.push(role);
        }
        const systemRoles = await this.ÏßÅÏõêÎ≥Ñ_ÏãúÏä§ÌÖú_Ïó≠Ìï†_Ï°∞Ìöå(employeeId);
        return {
            deletedCount,
            addedCount: addedRoles.length,
            systemRoles,
        };
    }
};
exports.EmployeeSystemRoleManagementContextService = EmployeeSystemRoleManagementContextService;
exports.EmployeeSystemRoleManagementContextService = EmployeeSystemRoleManagementContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_system_role_service_1.DomainEmployeeSystemRoleService !== "undefined" && employee_system_role_service_1.DomainEmployeeSystemRoleService) === "function" ? _a : Object])
], EmployeeSystemRoleManagementContextService);


/***/ }),

/***/ "./src/modules/context/employee-management/employee-token-management-context.service.ts":
/*!**********************************************************************************************!*\
  !*** ./src/modules/context/employee-management/employee-token-management-context.service.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeTokenManagementContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_token_service_1 = __webpack_require__(/*! ../../domain/employee-token/employee-token.service */ "./src/modules/domain/employee-token/employee-token.service.ts");
let EmployeeTokenManagementContextService = class EmployeeTokenManagementContextService {
    constructor(employeeTokenService) {
        this.employeeTokenService = employeeTokenService;
    }
    async Î™®Îì†_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå() {
        return this.employeeTokenService.findAll({
            relations: ['employee', 'token'],
        });
    }
    async ÏßÅÏõêÎ≥Ñ_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId) {
        return this.employeeTokenService.findByEmployeeId(employeeId);
    }
    async ÌÜ†ÌÅ∞Î≥Ñ_ÏßÅÏõê_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(tokenId) {
        return this.employeeTokenService.findByTokenId(tokenId);
    }
    async ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id) {
        return this.employeeTokenService.findOne({
            where: { id },
            relations: ['employee', 'token'],
        });
    }
    async IDÎ°ú_ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(id) {
        return this.employeeTokenService.findOne({
            where: { id },
        });
    }
    async ÏßÅÏõêÍ≥º_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÉùÏÑ±_ÎòêÎäî_ÏóÖÎç∞Ïù¥Ìä∏(employeeId, tokenId, relationData = {}) {
        return this.employeeTokenService.createOrUpdateRelation(employeeId, tokenId, relationData);
    }
    async ÏßÅÏõê_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(id) {
        return this.employeeTokenService.delete(id);
    }
    async ÌÜ†ÌÅ∞_IDÎì§Î°ú_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(tokenIds) {
        return this.employeeTokenService.deleteByTokenIds(tokenIds);
    }
    async ÏßÅÏõêÍ≥º_ÌÜ†ÌÅ∞Ïùò_Í¥ÄÍ≥Ñ_Ï°∞Ìöå(employeeId, tokenId) {
        return this.employeeTokenService.findOne({
            where: { employeeId, tokenId },
        });
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_ÌÜ†ÌÅ∞_Í¥ÄÍ≥Ñ_ÏÇ≠Ï†ú(employeeId) {
        const relations = await this.employeeTokenService.findByEmployeeId(employeeId);
        for (const relation of relations) {
            await this.employeeTokenService.delete(relation.id);
        }
    }
};
exports.EmployeeTokenManagementContextService = EmployeeTokenManagementContextService;
exports.EmployeeTokenManagementContextService = EmployeeTokenManagementContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_token_service_1.DomainEmployeeTokenService !== "undefined" && employee_token_service_1.DomainEmployeeTokenService) === "function" ? _a : Object])
], EmployeeTokenManagementContextService);


/***/ }),

/***/ "./src/modules/context/fcm-token-management/fcm-token-management-context.module.ts":
/*!*****************************************************************************************!*\
  !*** ./src/modules/context/fcm-token-management/fcm-token-management-context.module.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenManagementContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const fcm_token_management_context_service_1 = __webpack_require__(/*! ./fcm-token-management-context.service */ "./src/modules/context/fcm-token-management/fcm-token-management-context.service.ts");
const employee_module_1 = __webpack_require__(/*! ../../domain/employee/employee.module */ "./src/modules/domain/employee/employee.module.ts");
const fcm_token_module_1 = __webpack_require__(/*! ../../domain/fcm-token/fcm-token.module */ "./src/modules/domain/fcm-token/fcm-token.module.ts");
const employee_fcm_token_module_1 = __webpack_require__(/*! ../../domain/employee-fcm-token/employee-fcm-token.module */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.module.ts");
let FcmTokenManagementContextModule = class FcmTokenManagementContextModule {
};
exports.FcmTokenManagementContextModule = FcmTokenManagementContextModule;
exports.FcmTokenManagementContextModule = FcmTokenManagementContextModule = __decorate([
    (0, common_1.Module)({
        imports: [employee_module_1.DomainEmployeeModule, fcm_token_module_1.DomainFcmTokenModule, employee_fcm_token_module_1.DomainEmployeeFcmTokenModule],
        providers: [fcm_token_management_context_service_1.FcmTokenManagementContextService],
        exports: [fcm_token_management_context_service_1.FcmTokenManagementContextService],
    })
], FcmTokenManagementContextModule);


/***/ }),

/***/ "./src/modules/context/fcm-token-management/fcm-token-management-context.service.ts":
/*!******************************************************************************************!*\
  !*** ./src/modules/context/fcm-token-management/fcm-token-management-context.service.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmTokenManagementContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! ../../domain/employee/employee.service */ "./src/modules/domain/employee/employee.service.ts");
const fcm_token_service_1 = __webpack_require__(/*! ../../domain/fcm-token/fcm-token.service */ "./src/modules/domain/fcm-token/fcm-token.service.ts");
const employee_fcm_token_service_1 = __webpack_require__(/*! ../../domain/employee-fcm-token/employee-fcm-token.service */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.service.ts");
let FcmTokenManagementContextService = class FcmTokenManagementContextService {
    constructor(ÏßÅÏõêÏÑúÎπÑÏä§, FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§, ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§) {
        this.ÏßÅÏõêÏÑúÎπÑÏä§ = ÏßÅÏõêÏÑúÎπÑÏä§;
        this.FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§ = FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§;
        this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§ = ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§;
    }
    async FCMÌÜ†ÌÅ∞ÏùÑ_ÏßÅÏõêÏóêÍ≤å_Îì±Î°ùÌïúÎã§(employeeId, fcmToken, deviceType, deviceInfo) {
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÏõêÏûÖÎãàÎã§.');
        }
        const fcmTokenEntity = await this.FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.createOrFindByEmployeeAndDevice(employeeId, fcmToken, deviceType, deviceInfo);
        const relation = await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.createOrUpdateRelation(employeeId, fcmTokenEntity.id);
        return relation;
    }
    async FCMÌÜ†ÌÅ∞ÏùÑ_ÏßÅÏõêÏúºÎ°úÎ∂ÄÌÑ∞_Ìï¥Ï†úÌïúÎã§(employeeId, fcmToken) {
        const fcmTokenEntity = await this.FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByFcmToken(fcmToken);
        if (!fcmTokenEntity) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî FCM ÌÜ†ÌÅ∞ÏûÖÎãàÎã§.');
        }
        await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.deleteRelation(employeeId, fcmTokenEntity.id);
    }
    async ÏßÅÏõêÏùò_ÌôúÏÑ±_FCMÌÜ†ÌÅ∞_Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId) {
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÏõêÏûÖÎãàÎã§.');
        }
        const relations = await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
        return relations.map((relation) => relation.fcmToken).filter((token) => token);
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_FCMÌÜ†ÌÅ∞ÏùÑ_Ï†úÍ±∞ÌïúÎã§(employeeId) {
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÏõêÏûÖÎãàÎã§.');
        }
        await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.deleteAllByEmployeeId(employeeId);
    }
    async ÏßÅÏõêÎ≤àÌò∏ÏôÄ_ÌÜ†ÌÅ∞ÏúºÎ°ú_FCMÌÜ†ÌÅ∞ÏùÑ_Ï†úÍ±∞ÌïúÎã§(employeeNumber, fcmToken) {
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeNumber(employeeNumber);
        if (!employee) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÏõêÏûÖÎãàÎã§.');
        }
        const fcmTokenEntity = await this.FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByFcmToken(fcmToken);
        if (!fcmTokenEntity) {
            throw new common_1.NotFoundException('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî FCM ÌÜ†ÌÅ∞ÏûÖÎãàÎã§.');
        }
        const relation = await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findRelation(employee.id, fcmTokenEntity.id);
        if (!relation) {
            throw new common_1.BadRequestException('Ìï¥Îãπ ÏßÅÏõêÍ≥º FCM ÌÜ†ÌÅ∞Ïù¥ Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÏßÄ ÏïäÏäµÎãàÎã§.');
        }
        await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.deleteRelation(employee.id, fcmTokenEntity.id);
        const otherRelations = await this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByFcmTokenId(fcmTokenEntity.id);
        if (otherRelations.length === 0) {
            await this.FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.delete(fcmTokenEntity.id);
        }
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùò_Ïó¨Îü¨_ÌÜ†ÌÅ∞ÏùÑ_ÏùºÍ¥ÑÏ†úÍ±∞ÌïúÎã§(employees) {
        const results = [];
        for (const employee of employees) {
            const { employeeNumber, fcmTokens } = employee;
            for (const fcmToken of fcmTokens) {
                try {
                    await this.ÏßÅÏõêÎ≤àÌò∏ÏôÄ_ÌÜ†ÌÅ∞ÏúºÎ°ú_FCMÌÜ†ÌÅ∞ÏùÑ_Ï†úÍ±∞ÌïúÎã§(employeeNumber, fcmToken);
                    results.push({
                        employeeNumber,
                        fcmToken,
                        success: true,
                    });
                }
                catch (error) {
                    results.push({
                        employeeNumber,
                        fcmToken,
                        success: false,
                        error: error.message || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò',
                    });
                }
            }
        }
        return results;
    }
    async Ïó∞Í≤∞ÎêòÏßÄ_ÏïäÏùÄ_Í≥†ÏïÑ_FCMÌÜ†ÌÅ∞ÏùÑ_ÏÇ≠Ï†úÌïúÎã§() {
        return await this.FCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.deleteOrphanTokens();
    }
};
exports.FcmTokenManagementContextService = FcmTokenManagementContextService;
exports.FcmTokenManagementContextService = FcmTokenManagementContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object, typeof (_b = typeof fcm_token_service_1.DomainFcmTokenService !== "undefined" && fcm_token_service_1.DomainFcmTokenService) === "function" ? _b : Object, typeof (_c = typeof employee_fcm_token_service_1.DomainEmployeeFcmTokenService !== "undefined" && employee_fcm_token_service_1.DomainEmployeeFcmTokenService) === "function" ? _c : Object])
], FcmTokenManagementContextService);


/***/ }),

/***/ "./src/modules/context/log-management/log-management-context.module.ts":
/*!*****************************************************************************!*\
  !*** ./src/modules/context/log-management/log-management-context.module.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogManagementContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const log_management_context_service_1 = __webpack_require__(/*! ./log-management-context.service */ "./src/modules/context/log-management/log-management-context.service.ts");
const log_module_1 = __webpack_require__(/*! ../../domain/log/log.module */ "./src/modules/domain/log/log.module.ts");
let LogManagementContextModule = class LogManagementContextModule {
};
exports.LogManagementContextModule = LogManagementContextModule;
exports.LogManagementContextModule = LogManagementContextModule = __decorate([
    (0, common_1.Module)({
        imports: [log_module_1.DomainLogModule],
        providers: [log_management_context_service_1.LogManagementContextService],
        exports: [log_management_context_service_1.LogManagementContextService],
    })
], LogManagementContextModule);


/***/ }),

/***/ "./src/modules/context/log-management/log-management-context.service.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/context/log-management/log-management-context.service.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var LogManagementContextService_1;
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogManagementContextService = exports.SortDirection = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const log_service_1 = __webpack_require__(/*! ../../domain/log/log.service */ "./src/modules/domain/log/log.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
var SortDirection;
(function (SortDirection) {
    SortDirection["ASC"] = "ASC";
    SortDirection["DESC"] = "DESC";
})(SortDirection || (exports.SortDirection = SortDirection = {}));
let LogManagementContextService = LogManagementContextService_1 = class LogManagementContextService {
    constructor(Î°úÍ∑∏ÏÑúÎπÑÏä§) {
        this.Î°úÍ∑∏ÏÑúÎπÑÏä§ = Î°úÍ∑∏ÏÑúÎπÑÏä§;
        this.logger = new common_1.Logger(LogManagementContextService_1.name);
    }
    async Î™®Îì†_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(page = 1, limit = 10) {
        const options = {
            order: { requestTimestamp: 'DESC' },
            skip: (page - 1) * limit,
            take: limit,
        };
        const logs = await this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findAll(options);
        const allLogs = await this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findAll();
        const total = allLogs.length;
        return {
            logs,
            total,
            page,
            totalPages: Math.ceil(total / limit),
        };
    }
    async Î°úÍ∑∏Î•º_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(id) {
        return this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findOne({ where: { id } });
    }
    async Î°úÍ∑∏Î•º_ÌïÑÌÑ∞ÎßÅÌïòÏó¨_Ï°∞ÌöåÌïúÎã§(filterOptions) {
        const { page = 1, limit = 100, startDate, endDate, method, url, statusCode, host, ip, system, errorsOnly, sortBy = 'requestTimestamp', sortDirection = SortDirection.DESC, } = filterOptions;
        const where = {};
        if (startDate && endDate) {
            where.requestTimestamp = (0, typeorm_1.Between)(startDate, endDate);
        }
        else if (startDate) {
            where.requestTimestamp = (0, typeorm_1.MoreThanOrEqual)(startDate);
        }
        else if (endDate) {
            where.requestTimestamp = (0, typeorm_1.LessThanOrEqual)(endDate);
        }
        if (url) {
            where.url = (0, typeorm_1.ILike)(`%${url}%`);
        }
        if (host) {
            where.host = (0, typeorm_1.ILike)(`%${host}%`);
        }
        if (ip) {
            where.ip = (0, typeorm_1.ILike)(`%${ip}%`);
        }
        if (method) {
            where.method = method;
        }
        if (statusCode) {
            where.statusCode = statusCode;
        }
        if (errorsOnly) {
            where.isError = true;
        }
        if (system) {
            where.system = (0, typeorm_1.ILike)(`%${system}%`);
        }
        const order = {};
        order[sortBy] = sortDirection;
        const options = {
            where,
            order,
            skip: (page - 1) * limit,
            take: limit,
        };
        const logs = await this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findAll(options);
        const allFilteredLogs = await this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findAll({ where });
        const total = allFilteredLogs.length;
        return {
            logs,
            total,
            page,
            totalPages: Math.ceil(total / limit),
            allFilteredLogs,
        };
    }
    async ÏóêÎü¨_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§() {
        return this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findErrorLogs();
    }
    async ÏãúÏä§ÌÖúÎ≥Ñ_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(system) {
        return this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findBySystem(system);
    }
    async ÎäêÎ¶∞_ÏöîÏ≤≠ÏùÑ_Ï°∞ÌöåÌïúÎã§(minResponseTime = 1000) {
        return this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findSlowRequests(minResponseTime);
    }
    async IPÏ£ºÏÜåÎ≥Ñ_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(ip) {
        return this.Î°úÍ∑∏ÏÑúÎπÑÏä§.findByIpAddress(ip);
    }
    async Î°úÍ∑∏Ïù∏_Î°úÍ∑∏Î•º_Ï°∞ÌöåÌïúÎã§(days = 7) {
        const fromDate = new Date();
        fromDate.setDate(fromDate.getDate() - days);
        const { logs } = await this.Î°úÍ∑∏Î•º_ÌïÑÌÑ∞ÎßÅÌïòÏó¨_Ï°∞ÌöåÌïúÎã§({
            startDate: fromDate,
            url: '/auth/login',
            limit: 1000,
        });
        return logs;
    }
    async Î°úÍ∑∏Î•º_ÏÉùÏÑ±ÌïúÎã§(logData) {
        if (logData.url.includes('login') && logData.body.grant_type === 'password') {
            logData.body.password = '********';
        }
        return this.Î°úÍ∑∏ÏÑúÎπÑÏä§.save(logData);
    }
    async Ïó¨Îü¨_Î°úÍ∑∏Î•º_ÏÉùÏÑ±ÌïúÎã§(logsData) {
        const logs = [];
        for (const logData of logsData) {
            const log = await this.Î°úÍ∑∏ÏÑúÎπÑÏä§.save(logData);
            logs.push(log);
        }
        return logs;
    }
};
exports.LogManagementContextService = LogManagementContextService;
exports.LogManagementContextService = LogManagementContextService = LogManagementContextService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof log_service_1.DomainLogService !== "undefined" && log_service_1.DomainLogService) === "function" ? _a : Object])
], LogManagementContextService);


/***/ }),

/***/ "./src/modules/context/organization-management/organization-management-context.module.ts":
/*!***********************************************************************************************!*\
  !*** ./src/modules/context/organization-management/organization-management-context.module.ts ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationManagementContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const organization_management_context_service_1 = __webpack_require__(/*! ./organization-management-context.service */ "./src/modules/context/organization-management/organization-management-context.service.ts");
const employee_module_1 = __webpack_require__(/*! ../../domain/employee/employee.module */ "./src/modules/domain/employee/employee.module.ts");
const department_module_1 = __webpack_require__(/*! ../../domain/department/department.module */ "./src/modules/domain/department/department.module.ts");
const position_module_1 = __webpack_require__(/*! ../../domain/position/position.module */ "./src/modules/domain/position/position.module.ts");
const rank_module_1 = __webpack_require__(/*! ../../domain/rank/rank.module */ "./src/modules/domain/rank/rank.module.ts");
const employee_department_position_module_1 = __webpack_require__(/*! ../../domain/employee-department-position/employee-department-position.module */ "./src/modules/domain/employee-department-position/employee-department-position.module.ts");
const employee_rank_history_module_1 = __webpack_require__(/*! ../../domain/employee-rank-history/employee-rank-history.module */ "./src/modules/domain/employee-rank-history/employee-rank-history.module.ts");
const employee_token_module_1 = __webpack_require__(/*! ../../domain/employee-token/employee-token.module */ "./src/modules/domain/employee-token/employee-token.module.ts");
const employee_fcm_token_module_1 = __webpack_require__(/*! ../../domain/employee-fcm-token/employee-fcm-token.module */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.module.ts");
const employee_system_role_module_1 = __webpack_require__(/*! ../../domain/employee-system-role/employee-system-role.module */ "./src/modules/domain/employee-system-role/employee-system-role.module.ts");
let OrganizationManagementContextModule = class OrganizationManagementContextModule {
};
exports.OrganizationManagementContextModule = OrganizationManagementContextModule;
exports.OrganizationManagementContextModule = OrganizationManagementContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            employee_module_1.DomainEmployeeModule,
            department_module_1.DomainDepartmentModule,
            position_module_1.DomainPositionModule,
            rank_module_1.DomainRankModule,
            employee_department_position_module_1.DomainEmployeeDepartmentPositionModule,
            employee_rank_history_module_1.DomainEmployeeRankHistoryModule,
            employee_token_module_1.DomainEmployeeTokenModule,
            employee_fcm_token_module_1.DomainEmployeeFcmTokenModule,
            employee_system_role_module_1.DomainEmployeeSystemRoleModule,
        ],
        providers: [organization_management_context_service_1.OrganizationManagementContextService],
        exports: [organization_management_context_service_1.OrganizationManagementContextService],
    })
], OrganizationManagementContextModule);


/***/ }),

/***/ "./src/modules/context/organization-management/organization-management-context.service.ts":
/*!************************************************************************************************!*\
  !*** ./src/modules/context/organization-management/organization-management-context.service.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OrganizationManagementContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! ../../domain/employee/employee.service */ "./src/modules/domain/employee/employee.service.ts");
const employee_repository_1 = __webpack_require__(/*! ../../domain/employee/employee.repository */ "./src/modules/domain/employee/employee.repository.ts");
const department_service_1 = __webpack_require__(/*! ../../domain/department/department.service */ "./src/modules/domain/department/department.service.ts");
const department_repository_1 = __webpack_require__(/*! ../../domain/department/department.repository */ "./src/modules/domain/department/department.repository.ts");
const position_service_1 = __webpack_require__(/*! ../../domain/position/position.service */ "./src/modules/domain/position/position.service.ts");
const rank_service_1 = __webpack_require__(/*! ../../domain/rank/rank.service */ "./src/modules/domain/rank/rank.service.ts");
const employee_department_position_service_1 = __webpack_require__(/*! ../../domain/employee-department-position/employee-department-position.service */ "./src/modules/domain/employee-department-position/employee-department-position.service.ts");
const employee_rank_history_service_1 = __webpack_require__(/*! ../../domain/employee-rank-history/employee-rank-history.service */ "./src/modules/domain/employee-rank-history/employee-rank-history.service.ts");
const employee_validation_service_1 = __webpack_require__(/*! ../../domain/employee/employee-validation.service */ "./src/modules/domain/employee/employee-validation.service.ts");
const employee_token_service_1 = __webpack_require__(/*! ../../domain/employee-token/employee-token.service */ "./src/modules/domain/employee-token/employee-token.service.ts");
const employee_fcm_token_service_1 = __webpack_require__(/*! ../../domain/employee-fcm-token/employee-fcm-token.service */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.service.ts");
const employee_system_role_service_1 = __webpack_require__(/*! ../../domain/employee-system-role/employee-system-role.service */ "./src/modules/domain/employee-system-role/employee-system-role.service.ts");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const employee_errors_1 = __webpack_require__(/*! ../../domain/employee/employee.errors */ "./src/modules/domain/employee/employee.errors.ts");
const enums_1 = __webpack_require__(/*! ../../../../libs/common/enums */ "./libs/common/enums/index.ts");
const department_entity_1 = __webpack_require__(/*! ../../domain/department/department.entity */ "./src/modules/domain/department/department.entity.ts");
let OrganizationManagementContextService = class OrganizationManagementContextService {
    constructor(ÏßÅÏõêÏÑúÎπÑÏä§, ÏßÅÏõêÎ†àÌè¨ÏßÄÌÜ†Î¶¨, Î∂ÄÏÑúÏÑúÎπÑÏä§, Î∂ÄÏÑúÎ†àÌè¨ÏßÄÌÜ†Î¶¨, ÏßÅÏ±ÖÏÑúÎπÑÏä§, ÏßÅÍ∏âÏÑúÎπÑÏä§, ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§, ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§, ÏßÅÏõêÍ≤ÄÏ¶ùÏÑúÎπÑÏä§, ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§, ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§, ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§) {
        this.ÏßÅÏõêÏÑúÎπÑÏä§ = ÏßÅÏõêÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÎ†àÌè¨ÏßÄÌÜ†Î¶¨ = ÏßÅÏõêÎ†àÌè¨ÏßÄÌÜ†Î¶¨;
        this.Î∂ÄÏÑúÏÑúÎπÑÏä§ = Î∂ÄÏÑúÏÑúÎπÑÏä§;
        this.Î∂ÄÏÑúÎ†àÌè¨ÏßÄÌÜ†Î¶¨ = Î∂ÄÏÑúÎ†àÌè¨ÏßÄÌÜ†Î¶¨;
        this.ÏßÅÏ±ÖÏÑúÎπÑÏä§ = ÏßÅÏ±ÖÏÑúÎπÑÏä§;
        this.ÏßÅÍ∏âÏÑúÎπÑÏä§ = ÏßÅÍ∏âÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§ = ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§ = ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÍ≤ÄÏ¶ùÏÑúÎπÑÏä§ = ÏßÅÏõêÍ≤ÄÏ¶ùÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§ = ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§;
        this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§ = ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§ = ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§;
    }
    async ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(identifier, throwOnNotFound = true) {
        try {
            const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(identifier);
            if (isUUID) {
                return await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeId(identifier);
            }
            else {
                return await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeNumber(identifier);
            }
        }
        catch (error) {
            if (throwOnNotFound) {
                throw new Error(`ÏßÅÏõêÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§: ${identifier}`);
            }
            return null;
        }
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(identifiers, includeTerminated = false) {
        if (identifiers.length === 0) {
            return [];
        }
        const isFirstIdUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(identifiers[0]);
        if (isFirstIdUUID) {
            return await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeIds(identifiers, includeTerminated);
        }
        else {
            return await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeNumbers(identifiers, includeTerminated);
        }
    }
    async Î∂ÄÏÑú_IDÎ°ú_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§(departmentId) {
        return this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(departmentId);
    }
    async Î∂ÄÏÑú_ÏΩîÎìúÎ°ú_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§(departmentCode) {
        return this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByCode(departmentCode);
    }
    async Î™®Îì†_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§() {
        const departments = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findAll();
        const terminatedDepartment = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByCode('Ìá¥ÏÇ¨Ïûê');
        return [...departments, terminatedDepartment];
    }
    async Î™®Îì†_ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        return this.ÏßÅÏõêÏÑúÎπÑÏä§.findAll();
    }
    async Î™®Îì†_ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÎß§ÌïëÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        return this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAll();
    }
    async Ï†ÑÏ≤¥_ÏßÅÏõêÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(status) {
        let employees;
        if (status) {
            employees = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByStatus(status);
        }
        else {
            employees = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findAll();
        }
        if (employees.length === 0) {
            return [];
        }
        const employeeIds = employees.map((emp) => emp.id);
        const [allAssignments, allEmployeeTokens, allEmployeeFcmTokens, allEmployeeSystemRoles] = await Promise.all([
            this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeIds(employeeIds),
            this.ÏßÅÏõêÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByEmployeeIds(employeeIds),
            this.ÏßÅÏõêFCMÌÜ†ÌÅ∞ÏÑúÎπÑÏä§.findByEmployeeIds(employeeIds),
            this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findByEmployeeIds(employeeIds),
        ]);
        const departmentIds = [...new Set(allAssignments.map((a) => a.departmentId))];
        const positionIds = [...new Set(allAssignments.map((a) => a.positionId))];
        const rankIds = [...new Set(employees.map((e) => e.currentRankId).filter((id) => id))];
        const [departments, positions, ranks] = await Promise.all([
            departmentIds.length > 0 ? this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByIds(departmentIds) : Promise.resolve([]),
            positionIds.length > 0 ? this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findByIds(positionIds) : Promise.resolve([]),
            rankIds.length > 0 ? this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findByIds(rankIds) : Promise.resolve([]),
        ]);
        const departmentMap = new Map(departments.map((d) => [d.id, d]));
        const positionMap = new Map(positions.map((p) => [p.id, p]));
        const rankMap = new Map(ranks.map((r) => [r.id, r]));
        const assignmentsByEmployee = new Map();
        const tokensByEmployee = new Map();
        const fcmTokensByEmployee = new Map();
        const systemRolesByEmployee = new Map();
        allAssignments.forEach((assignment) => {
            if (!assignmentsByEmployee.has(assignment.employeeId)) {
                assignmentsByEmployee.set(assignment.employeeId, []);
            }
            assignmentsByEmployee.get(assignment.employeeId).push(assignment);
        });
        allEmployeeTokens.forEach((token) => {
            if (!tokensByEmployee.has(token.employeeId)) {
                tokensByEmployee.set(token.employeeId, []);
            }
            tokensByEmployee.get(token.employeeId).push(token);
        });
        allEmployeeFcmTokens.forEach((fcmToken) => {
            if (!fcmTokensByEmployee.has(fcmToken.employeeId)) {
                fcmTokensByEmployee.set(fcmToken.employeeId, []);
            }
            fcmTokensByEmployee.get(fcmToken.employeeId).push(fcmToken);
        });
        allEmployeeSystemRoles.forEach((systemRole) => {
            if (!systemRolesByEmployee.has(systemRole.employeeId)) {
                systemRolesByEmployee.set(systemRole.employeeId, []);
            }
            systemRolesByEmployee.get(systemRole.employeeId).push(systemRole);
        });
        const employeesWithDetails = employees.map((employee) => {
            const assignments = assignmentsByEmployee.get(employee.id) || [];
            const departmentsInfo = assignments.map((assignment) => {
                const department = departmentMap.get(assignment.departmentId);
                const position = positionMap.get(assignment.positionId);
                return {
                    assignmentId: assignment.id,
                    departmentId: department?.id || '',
                    departmentName: department?.departmentName || '',
                    departmentType: department?.type || '',
                    positionId: position?.id || '',
                    positionTitle: position?.positionTitle || '',
                    isManager: assignment.isManager,
                };
            });
            let rankInfo = null;
            if (employee.currentRankId) {
                const rankEntity = rankMap.get(employee.currentRankId);
                if (rankEntity) {
                    rankInfo = {
                        rankId: rankEntity.id,
                        rankName: rankEntity.rankName,
                        rankCode: rankEntity.rankCode,
                        level: rankEntity.level,
                    };
                }
            }
            const employeeTokensList = tokensByEmployee.get(employee.id) || [];
            const tokensInfo = employeeTokensList.map((et) => ({
                tokenId: et.tokenId,
                accessToken: et.token?.accessToken || '',
                tokenExpiresAt: et.token?.tokenExpiresAt || new Date(),
            }));
            const employeeFcmTokensList = fcmTokensByEmployee.get(employee.id) || [];
            const fcmTokensInfo = employeeFcmTokensList.map((eft) => ({
                fcmTokenId: eft.fcmTokenId,
                fcmToken: eft.fcmToken?.fcmToken || '',
                deviceType: eft.fcmToken?.deviceType || '',
            }));
            const employeeSystemRolesList = systemRolesByEmployee.get(employee.id) || [];
            const systemRolesInfo = employeeSystemRolesList.map((esr) => ({
                systemRoleId: esr.systemRoleId,
                systemId: esr.systemRole?.systemId || '',
                systemName: esr.systemRole?.system?.name || '',
                roleName: esr.systemRole?.roleName || '',
                roleCode: esr.systemRole?.roleCode || '',
            }));
            return {
                ...employee,
                departments: departmentsInfo,
                rank: rankInfo,
                tokens: tokensInfo,
                fcmTokens: fcmTokensInfo,
                systemRoles: systemRolesInfo,
            };
        });
        return employeesWithDetails;
    }
    async Î™®Îì†_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        return this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllPositions();
    }
    async ÏßÅÏ±Ö_IDÎ°ú_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§(positionId) {
        return this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(positionId);
    }
    async Í∞ÄÏû•_ÎÇÆÏùÄ_ÏßÅÏ±ÖÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        const position = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findLowestPosition();
        if (!position) {
            throw new common_1.NotFoundException('ÏßÅÏ±ÖÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return position;
    }
    async Î™®Îì†_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        return this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findAllRanks();
    }
    async ÏßÅÍ∏â_IDÎ°ú_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§(rankId) {
        return this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findById(rankId);
    }
    async Î∞∞Ïπò_IDÎ°ú_Î∞∞ÏπòÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(assignmentId) {
        return this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(assignmentId);
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_Î∞∞ÏπòÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(employeeId) {
        return this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
    }
    async Ï†ÑÏ≤¥_Î∞∞ÏπòÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§() {
        return this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllAssignments();
    }
    async Ï†ÑÏ≤¥_Î∞∞ÏπòÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§() {
        const assignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllAssignments();
        const employeeIds = [...new Set(assignments.map((a) => a.employeeId))];
        const departmentIds = [...new Set(assignments.map((a) => a.departmentId))];
        const positionIds = [...new Set(assignments.map((a) => a.positionId))];
        const [employees, departments, positions] = await Promise.all([
            this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeIds(employeeIds, true),
            this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByIds(departmentIds),
            this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findByIds(positionIds),
        ]);
        const rankIds = [...new Set(employees.filter((e) => e.currentRankId).map((e) => e.currentRankId))];
        const ranks = rankIds.length > 0 ? await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findByIds(rankIds) : [];
        const employeeMap = new Map(employees.map((e) => [e.id, e]));
        const departmentMap = new Map(departments.map((d) => [d.id, d]));
        const positionMap = new Map(positions.map((p) => [p.id, p]));
        const rankMap = new Map(ranks.map((r) => [r.id, r]));
        return assignments.map((assignment) => {
            const employee = employeeMap.get(assignment.employeeId);
            const department = departmentMap.get(assignment.departmentId);
            const position = positionMap.get(assignment.positionId);
            const rank = employee?.currentRankId ? rankMap.get(employee.currentRankId) : undefined;
            return {
                assignment,
                employee,
                department,
                position,
                rank,
            };
        });
    }
    async ÏßÅÏõêÏùò_ÏßÅÍ∏âÏù¥Î†•ÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId) {
        return this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
    }
    async ÏßÅÏõêÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(employeeId, ÏàòÏ†ïÏ†ïÎ≥¥) {
        const employeeBasicInfo = {
            employeeNumber: ÏàòÏ†ïÏ†ïÎ≥¥.employeeNumber,
            name: ÏàòÏ†ïÏ†ïÎ≥¥.name,
            email: ÏàòÏ†ïÏ†ïÎ≥¥.email,
            phoneNumber: ÏàòÏ†ïÏ†ïÎ≥¥.phoneNumber,
            dateOfBirth: ÏàòÏ†ïÏ†ïÎ≥¥.dateOfBirth,
            gender: ÏàòÏ†ïÏ†ïÎ≥¥.gender,
            hireDate: ÏàòÏ†ïÏ†ïÎ≥¥.hireDate,
            status: ÏàòÏ†ïÏ†ïÎ≥¥.status,
            currentRankId: ÏàòÏ†ïÏ†ïÎ≥¥.currentRankId,
            terminationDate: ÏàòÏ†ïÏ†ïÎ≥¥.terminationDate,
        };
        Object.keys(employeeBasicInfo).forEach((key) => {
            if (employeeBasicInfo[key] === undefined) {
                delete employeeBasicInfo[key];
            }
        });
        const updatedEmployee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.updateEmployee(employeeId, employeeBasicInfo);
        const hasDepartmentId = ÏàòÏ†ïÏ†ïÎ≥¥.departmentId !== undefined;
        const hasPositionId = ÏàòÏ†ïÏ†ïÎ≥¥.positionId !== undefined;
        if (hasDepartmentId || hasPositionId) {
            const existingAssignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
            if (existingAssignments.length > 0) {
                const departmentAssignments = [];
                for (const assignment of existingAssignments) {
                    const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(assignment.departmentId);
                    if (department.type === department_entity_1.DepartmentType.DEPARTMENT) {
                        departmentAssignments.push({ assignment, department });
                    }
                }
                if (departmentAssignments.length > 0) {
                    const { assignment: currentAssignment } = departmentAssignments[0];
                    const newDepartmentId = hasDepartmentId ? ÏàòÏ†ïÏ†ïÎ≥¥.departmentId : currentAssignment.departmentId;
                    const newPositionId = hasPositionId ? ÏàòÏ†ïÏ†ïÎ≥¥.positionId : currentAssignment.positionId;
                    const newIsManager = ÏàòÏ†ïÏ†ïÎ≥¥.isManager !== undefined ? ÏàòÏ†ïÏ†ïÎ≥¥.isManager : currentAssignment.isManager;
                    await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(newDepartmentId);
                    await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(newPositionId);
                    await this.ÏßÅÏõêÎ∞∞ÏπòÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(currentAssignment.id, {
                        departmentId: newDepartmentId,
                        positionId: newPositionId,
                        isManager: newIsManager,
                    });
                }
                else if (hasDepartmentId && hasPositionId) {
                    await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(ÏàòÏ†ïÏ†ïÎ≥¥.departmentId);
                    await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(ÏàòÏ†ïÏ†ïÎ≥¥.positionId);
                    await this.ÏßÅÏõêÏùÑ_Î∂ÄÏÑúÏóê_Î∞∞ÏπòÌïúÎã§({
                        employeeId,
                        departmentId: ÏàòÏ†ïÏ†ïÎ≥¥.departmentId,
                        positionId: ÏàòÏ†ïÏ†ïÎ≥¥.positionId,
                        isManager: ÏàòÏ†ïÏ†ïÎ≥¥.isManager,
                    });
                }
            }
            else if (hasDepartmentId && hasPositionId) {
                await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(ÏàòÏ†ïÏ†ïÎ≥¥.departmentId);
                await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(ÏàòÏ†ïÏ†ïÎ≥¥.positionId);
                await this.ÏßÅÏõêÏùÑ_Î∂ÄÏÑúÏóê_Î∞∞ÏπòÌïúÎã§({
                    employeeId,
                    departmentId: ÏàòÏ†ïÏ†ïÎ≥¥.departmentId,
                    positionId: ÏàòÏ†ïÏ†ïÎ≥¥.positionId,
                    isManager: ÏàòÏ†ïÏ†ïÎ≥¥.isManager,
                });
            }
        }
        return updatedEmployee;
    }
    async ÏßÅÏõêÏû¨ÏßÅÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(employeeId, status, terminationDate, terminationReason) {
        if (status === enums_1.EmployeeStatus.Terminated) {
            const result = await this.ÏßÅÏõêÏùÑ_Ìá¥ÏÇ¨Ï≤òÎ¶¨ÌïúÎã§({
                employeeIdentifier: employeeId,
                terminationDate: terminationDate || new Date(),
                terminationReason,
            });
            return result.employee;
        }
        return await this.ÏßÅÏõêÎ†àÌè¨ÏßÄÌÜ†Î¶¨.manager.transaction(async (transactionalEntityManager) => {
            const employee = await transactionalEntityManager.findOne(entities_1.Employee, {
                where: { id: employeeId },
            });
            if (!employee) {
                throw new common_1.NotFoundException('ÏßÅÏõêÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            const metadata = employee.metadata || {};
            const previousDepartment = metadata?.termination?.previousDepartment;
            const previousPosition = metadata?.termination?.previousPosition;
            const previousIsManager = metadata?.termination?.previousIsManager ?? false;
            if (previousDepartment && previousDepartment.id) {
                const currentAssignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
                let departmentAssignment = null;
                for (const assignment of currentAssignments) {
                    const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(assignment.departmentId);
                    if (department.type === department_entity_1.DepartmentType.DEPARTMENT) {
                        departmentAssignment = assignment;
                        break;
                    }
                }
                const previousDept = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(previousDepartment.id);
                if (!previousDept) {
                    throw new common_1.NotFoundException('Ïù¥Ï†Ñ Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                }
                let positionToUse = null;
                if (previousPosition && previousPosition.id) {
                    positionToUse = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(previousPosition.id);
                }
                if (!positionToUse) {
                    const defaultPosition = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAll();
                    const firstPosition = defaultPosition.length > 0 ? defaultPosition[0] : null;
                    if (!firstPosition) {
                        throw new common_1.NotFoundException('Í∏∞Î≥∏ ÏßÅÏ±ÖÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                    }
                    positionToUse = firstPosition;
                }
                if (departmentAssignment) {
                    await transactionalEntityManager.update(entities_1.EmployeeDepartmentPosition, { id: departmentAssignment.id }, {
                        departmentId: previousDepartment.id,
                        positionId: positionToUse.id,
                        isManager: previousIsManager,
                    });
                }
                else {
                    await transactionalEntityManager.save(entities_1.EmployeeDepartmentPosition, {
                        employeeId,
                        departmentId: previousDepartment.id,
                        positionId: positionToUse.id,
                        isManager: previousIsManager,
                    });
                }
                const updatedMetadata = { ...metadata };
                delete updatedMetadata.termination;
                const updateData = {
                    status,
                    terminationDate: null,
                    terminationReason: null,
                    metadata: Object.keys(updatedMetadata).length > 0 ? updatedMetadata : null,
                };
                await transactionalEntityManager.update(entities_1.Employee, { id: employeeId }, updateData);
            }
            else {
                const updateData = {
                    status,
                    terminationDate: null,
                    terminationReason: null,
                };
                await transactionalEntityManager.update(entities_1.Employee, { id: employeeId }, updateData);
            }
            const updatedEmployee = await transactionalEntityManager.findOne(entities_1.Employee, {
                where: { id: employeeId },
            });
            if (!updatedEmployee) {
                throw new common_1.NotFoundException('ÏóÖÎç∞Ïù¥Ìä∏Îêú ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            return updatedEmployee;
        });
    }
    async Ïó∞ÎèÑÎ≥Ñ_Îã§ÏùåÏßÅÏõêÎ≤àÌò∏Î•º_Ï°∞ÌöåÌïúÎã§(year) {
        const yearSuffix = year.toString().slice(-2);
        const employees = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByEmployeeNumberPattern(yearSuffix);
        const sequences = employees
            .map((employee) => employee.employeeNumber)
            .filter((employeeNumber) => employeeNumber.length === 5 && employeeNumber.startsWith(yearSuffix))
            .map((employeeNumber) => parseInt(employeeNumber.slice(2)))
            .filter((sequence) => !isNaN(sequence));
        const maxSequence = sequences.length > 0 ? Math.max(...sequences) : 0;
        const nextSequence = maxSequence + 1;
        const nextEmployeeNumber = `${yearSuffix}${nextSequence.toString().padStart(3, '0')}`;
        return {
            nextEmployeeNumber,
            year,
            currentCount: sequences.length,
        };
    }
    async ÏßÅÏõêÏùÑ_ÏÇ≠Ï†úÌïúÎã§(employeeId) {
        const assignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
        for (const assignment of assignments) {
            await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.deleteAssignment(assignment.id);
        }
        const rankHistories = await this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
        for (const history of rankHistories) {
            await this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.deleteHistory(history.id);
        }
        await this.ÏßÅÏõêÏÑúÎπÑÏä§.deleteEmployee(employeeId);
    }
    async ÏßÅÏõê_Î∂ÄÏÑú_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, departmentId) {
        const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(departmentId);
        if (department.type !== department_entity_1.DepartmentType.DEPARTMENT) {
            throw new common_1.BadRequestException(`Î∂ÄÏÑú ÌÉÄÏûÖÏù¥ DEPARTMENTÍ∞Ä ÏïÑÎãôÎãàÎã§. ÌòÑÏû¨ ÌÉÄÏûÖ: ${department.type}`);
        }
        const successIds = [];
        const failIds = [];
        const errors = [];
        for (const employeeId of employeeIds) {
            let employee = null;
            try {
                employee = await this.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId);
                const existingAssignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
                let departmentAssignment = null;
                for (const assignment of existingAssignments) {
                    const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(assignment.departmentId);
                    if (department.type === department_entity_1.DepartmentType.DEPARTMENT) {
                        departmentAssignment = assignment;
                        break;
                    }
                }
                if (departmentAssignment) {
                    await this.ÏßÅÏõêÎ∞∞ÏπòÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(departmentAssignment.id, {
                        departmentId: departmentId,
                        positionId: departmentAssignment.positionId,
                        isManager: departmentAssignment.isManager,
                    });
                }
                else {
                    throw new Error('DEPARTMENT ÌÉÄÏûÖÏùò Í∏∞Ï°¥ Î∞∞ÏπòÍ∞Ä ÏóÜÏäµÎãàÎã§.');
                }
                successIds.push(employeeId);
            }
            catch (error) {
                failIds.push(employeeId);
                errors.push({
                    employeeId,
                    name: employee?.name,
                    message: error.message || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò',
                });
            }
        }
        return {
            successCount: successIds.length,
            failCount: failIds.length,
            successIds,
            failIds,
            errors,
        };
    }
    async ÏßÅÏõê_ÌåÄ_ÏùºÍ¥ÑÎ∞∞Ïπò(employeeIds, teamId) {
        const team = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(teamId);
        if (team.type !== department_entity_1.DepartmentType.TEAM) {
            throw new common_1.BadRequestException(`Î∂ÄÏÑú ÌÉÄÏûÖÏù¥ TEAMÏù¥ ÏïÑÎãôÎãàÎã§. ÌòÑÏû¨ ÌÉÄÏûÖ: ${team.type}`);
        }
        const allPositions = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllPositions();
        if (allPositions.length === 0) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖúÏóê ÏßÅÏ±ÖÏù¥ ÏóÜÏäµÎãàÎã§.');
        }
        const sortedPositions = [...allPositions].sort((a, b) => b.level - a.level);
        const defaultPositionId = sortedPositions[0].id;
        const successIds = [];
        const failIds = [];
        const errors = [];
        for (const employeeId of employeeIds) {
            let employee = null;
            try {
                employee = await this.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId);
                const existingAssignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
                let teamAssignment = null;
                for (const assignment of existingAssignments) {
                    const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(assignment.departmentId);
                    if (department.type === department_entity_1.DepartmentType.TEAM && department.id === teamId) {
                        teamAssignment = assignment;
                        break;
                    }
                }
                if (teamAssignment) {
                    successIds.push(employeeId);
                }
                else {
                    await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.createAssignment({
                        employeeId: employee.id,
                        departmentId: teamId,
                        positionId: defaultPositionId,
                        isManager: false,
                    });
                    successIds.push(employeeId);
                }
            }
            catch (error) {
                failIds.push(employeeId);
                errors.push({
                    employeeId,
                    name: employee?.name,
                    message: error.message || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò',
                });
            }
        }
        return {
            successCount: successIds.length,
            failCount: failIds.length,
            successIds,
            failIds,
            errors,
        };
    }
    async ÏßÅÏõê_ÏßÅÏ±Ö_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, positionId) {
        await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(positionId);
        const successIds = [];
        const failIds = [];
        const errors = [];
        for (const employeeId of employeeIds) {
            let employee = null;
            try {
                employee = await this.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId);
                const existingAssignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
                let departmentAssignment = null;
                for (const assignment of existingAssignments) {
                    const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(assignment.departmentId);
                    if (department.type === department_entity_1.DepartmentType.DEPARTMENT) {
                        departmentAssignment = assignment;
                        break;
                    }
                }
                if (departmentAssignment) {
                    await this.ÏßÅÏõêÎ∞∞ÏπòÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(departmentAssignment.id, {
                        departmentId: departmentAssignment.departmentId,
                        positionId: positionId,
                        isManager: departmentAssignment.isManager,
                    });
                }
                else {
                    throw new Error('DEPARTMENT ÌÉÄÏûÖÏùò Í∏∞Ï°¥ Î∞∞ÏπòÍ∞Ä ÏóÜÏäµÎãàÎã§.');
                }
                successIds.push(employeeId);
            }
            catch (error) {
                failIds.push(employeeId);
                errors.push({
                    employeeId,
                    name: employee?.name,
                    message: error.message || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò',
                });
            }
        }
        return {
            successCount: successIds.length,
            failCount: failIds.length,
            successIds,
            failIds,
            errors,
        };
    }
    async ÏßÅÏõê_ÏßÅÍ∏â_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, rankId) {
        await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findById(rankId);
        const successIds = [];
        const failIds = [];
        const errors = [];
        for (const employeeId of employeeIds) {
            let employee = null;
            try {
                employee = await this.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId);
                await this.ÏßÅÏõêÏùò_ÏßÅÍ∏âÏùÑ_Î≥ÄÍ≤ΩÌïúÎã§(employeeId, rankId);
                successIds.push(employeeId);
            }
            catch (error) {
                failIds.push(employeeId);
                errors.push({
                    employeeId,
                    name: employee?.name,
                    message: error.message || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò',
                });
            }
        }
        return {
            successCount: successIds.length,
            failCount: failIds.length,
            successIds,
            failIds,
            errors,
        };
    }
    async ÏßÅÏõê_Ïû¨ÏßÅÏÉÅÌÉú_ÏùºÍ¥ÑÏàòÏ†ï(employeeIds, status, terminationDate) {
        const successIds = [];
        const failIds = [];
        const errors = [];
        for (const employeeId of employeeIds) {
            let employee = null;
            try {
                employee = await this.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId);
                await this.ÏßÅÏõêÏû¨ÏßÅÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(employeeId, status, terminationDate);
                successIds.push(employeeId);
            }
            catch (error) {
                failIds.push(employeeId);
                errors.push({
                    employeeId,
                    name: employee?.name,
                    message: error.message || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò',
                });
            }
        }
        return {
            successCount: successIds.length,
            failCount: failIds.length,
            successIds,
            failIds,
            errors,
        };
    }
    async ÏßÅÏõêÏùò_Î∂ÄÏÑú_ÏßÅÏ±Ö_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§(employee) {
        const Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥ = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findByEmployeeId(employee.id);
        const department = Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥?.departmentId
            ? await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥.departmentId)
            : null;
        const position = Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥?.positionId ? await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥.positionId) : null;
        const rank = employee.currentRankId ? await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findById(employee.currentRankId) : null;
        return { department, position, rank };
    }
    async Ï†ÑÏ≤¥_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(includeTerminated = false) {
        return this.ÏßÅÏõêÏÑúÎπÑÏä§.findAllEmployees(includeTerminated);
    }
    async Ïó¨Îü¨_ÏßÅÏõêÏùò_Î∂ÄÏÑú_ÏßÅÏ±Ö_ÏßÅÍ∏âÏùÑ_ÏùºÍ¥ÑÏ°∞ÌöåÌïúÎã§(employees) {
        const employeeIds = employees.map((emp) => emp.id);
        const resultMap = new Map();
        const Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥Îì§ = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeIds(employeeIds);
        const departmentIds = [...new Set(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥Îì§.map((info) => info.departmentId))];
        const positionIds = [...new Set(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥Îì§.map((info) => info.positionId))];
        const rankIds = [...new Set(employees.map((emp) => emp.currentRankId).filter((id) => id))];
        const [departments, positions, ranks] = await Promise.all([
            this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByIdsWithParent(departmentIds),
            this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findByIds(positionIds),
            this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findByIds(rankIds),
        ]);
        const departmentMap = new Map(departments.filter((dept) => dept.type === department_entity_1.DepartmentType.DEPARTMENT).map((dept) => [dept.id, dept]));
        const positionMap = new Map(positions.map((pos) => [pos.id, pos]));
        const rankMap = new Map(ranks.map((rank) => [rank.id, rank]));
        const Î∂ÄÏÑúÏßÅÏ±ÖMap = new Map(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥Îì§.map((info) => [info.employeeId, info]));
        for (const employee of employees) {
            const Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥ = Î∂ÄÏÑúÏßÅÏ±ÖMap.get(employee.id);
            if (Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥) {
                const department = departmentMap.get(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥.departmentId);
                const position = positionMap.get(Î∂ÄÏÑúÏßÅÏ±ÖÏ†ïÎ≥¥.positionId);
                const rank = rankMap.get(employee.currentRankId);
                resultMap.set(employee.id, {
                    department,
                    position,
                    rank,
                });
            }
        }
        return resultMap;
    }
    async Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_Ï°∞ÌöåÌïúÎã§(rootDepartmentId, maxDepth, includeEmptyDepartments = true, includeInactiveDepartments = false) {
        let rootDepartments;
        if (rootDepartmentId) {
            const rootDept = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByIdWithParent(rootDepartmentId);
            rootDepartments = [rootDept];
        }
        else {
            rootDepartments = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findRootDepartments();
        }
        const allDepartments = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findAllDepartmentsWithChildren();
        const departmentMap = new Map(allDepartments.map((dept) => [dept.id, dept]));
        const result = [];
        for (const rootDept of rootDepartments) {
            const hierarchyDept = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_Íµ¨Ï∂ïÌïúÎã§(rootDept, departmentMap, 0, maxDepth, includeEmptyDepartments, includeInactiveDepartments);
            if (hierarchyDept) {
                result.push(hierarchyDept);
            }
        }
        return result;
    }
    Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_Íµ¨Ï∂ïÌïúÎã§(department, departmentMap, currentDepth, maxDepth, includeEmptyDepartments = true, includeInactiveDepartments = false) {
        if (!includeInactiveDepartments && department.isActive === false) {
            return null;
        }
        if (maxDepth !== undefined && currentDepth >= maxDepth) {
            return department;
        }
        const childDepartments = [];
        const allChildren = Array.from(departmentMap.values()).filter((dept) => dept.parentDepartmentId === department.id);
        for (const childDept of allChildren) {
            const childHierarchy = this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_Íµ¨Ï∂ïÌïúÎã§(childDept, departmentMap, currentDepth + 1, maxDepth, includeEmptyDepartments, includeInactiveDepartments);
            if (childHierarchy) {
                childDepartments.push(childHierarchy);
            }
        }
        department.childDepartments = childDepartments.sort((a, b) => a.order - b.order);
        return department;
    }
    async Î∂ÄÏÑúÏùò_Î™®Îì†_ÌïòÏúÑÎ∂ÄÏÑúÎì§ÏùÑ_Ïû¨Í∑ÄÏ†ÅÏúºÎ°ú_Ï°∞ÌöåÌïúÎã§(departmentId) {
        const allDepartments = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findAllDepartmentsWithChildren();
        const departmentMap = new Map(allDepartments.map((dept) => [dept.id, dept]));
        const childDepartments = [];
        this.Î™®Îì†_ÌïòÏúÑÎ∂ÄÏÑúÎ•º_Ïû¨Í∑ÄÏ†ÅÏúºÎ°ú_ÏàòÏßëÌïúÎã§(departmentId, departmentMap, childDepartments);
        return childDepartments;
    }
    Î™®Îì†_ÌïòÏúÑÎ∂ÄÏÑúÎ•º_Ïû¨Í∑ÄÏ†ÅÏúºÎ°ú_ÏàòÏßëÌïúÎã§(parentDepartmentId, departmentMap, result) {
        const directChildren = Array.from(departmentMap.values()).filter((dept) => dept.parentDepartmentId === parentDepartmentId);
        for (const child of directChildren) {
            result.push(child);
            this.Î™®Îì†_ÌïòÏúÑÎ∂ÄÏÑúÎ•º_Ïû¨Í∑ÄÏ†ÅÏúºÎ°ú_ÏàòÏßëÌïúÎã§(child.id, departmentMap, result);
        }
    }
    async Ïó¨Îü¨_Î∂ÄÏÑúÎ•º_ÏùºÍ¥Ñ_ÏàòÏ†ïÌïúÎã§(departmentIds, updateData) {
        await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.bulkUpdate(departmentIds, updateData);
    }
    async Î∂ÄÏÑúÎ≥Ñ_ÏßÅÏõê_Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(departmentIds, includeTerminated = false, withDetail = false) {
        if (departmentIds.length === 0) {
            return new Map();
        }
        const [allEmployeeDeptPositions, allEmployees] = await Promise.all([
            this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findByDepartmentIds(departmentIds),
            this.Ï†ÑÏ≤¥_ÌôúÏÑ±_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(includeTerminated),
        ]);
        const employeeMap = new Map(allEmployees.map((emp) => [emp.id, emp]));
        const departmentEmployeesMap = new Map();
        for (const departmentId of departmentIds) {
            departmentEmployeesMap.set(departmentId, {
                employees: [],
                departmentPositions: new Map(),
            });
        }
        for (const edp of allEmployeeDeptPositions) {
            const employee = employeeMap.get(edp.employeeId);
            if (employee && departmentIds.includes(edp.departmentId)) {
                const deptInfo = departmentEmployeesMap.get(edp.departmentId);
                deptInfo.employees.push(employee);
                deptInfo.departmentPositions.set(edp.employeeId, {
                    positionId: edp.positionId,
                    isManager: edp.isManager,
                    createdAt: edp.createdAt,
                });
            }
        }
        return departmentEmployeesMap;
    }
    async Ï†ÑÏ≤¥_ÌôúÏÑ±_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(includeTerminated = false) {
        return this.ÏßÅÏõêÏÑúÎπÑÏä§.findAllEmployees(includeTerminated);
    }
    async Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î≥Ñ_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(rootDepartmentId, maxDepth, withEmployeeDetail = false, includeTerminated = false, includeEmptyDepartments = true, includeInactiveDepartments = false) {
        const [departments] = await Promise.all([
            this.Î∂ÄÏÑú_Í≥ÑÏ∏µÍµ¨Ï°∞Î•º_Ï°∞ÌöåÌïúÎã§(rootDepartmentId, maxDepth, includeEmptyDepartments, includeInactiveDepartments),
        ]);
        const allDepartmentIds = this.Î™®Îì†_Î∂ÄÏÑú_IDÎ•º_ÏàòÏßëÌïúÎã§(departments);
        if (allDepartmentIds.length === 0) {
            return {
                departments,
                employeesByDepartment: new Map(),
                departmentDetails: undefined,
            };
        }
        const [employeesByDepartment, departmentDetails] = await Promise.all([
            this.Î∂ÄÏÑúÎ≥Ñ_ÏßÅÏõê_Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(allDepartmentIds, includeTerminated, withEmployeeDetail),
            withEmployeeDetail
                ? this.ÏßÅÏõê_ÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_Î≥ëÎ†¨Ï°∞ÌöåÌïúÎã§(allDepartmentIds, includeTerminated)
                : Promise.resolve(undefined),
        ]);
        return {
            departments,
            employeesByDepartment,
            departmentDetails,
        };
    }
    async ÏßÅÏõê_ÏÉÅÏÑ∏Ï†ïÎ≥¥Î•º_Î≥ëÎ†¨Ï°∞ÌöåÌïúÎã§(departmentIds, includeTerminated = false) {
        try {
            const [employeeDeptPositions, departments, positions, ranks, employees] = await Promise.all([
                this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findByDepartmentIds(departmentIds),
                this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByIds(departmentIds),
                this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllPositions(),
                this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findAllRanks(),
                this.ÏßÅÏõêÏÑúÎπÑÏä§.findAllEmployees(includeTerminated),
            ]);
            const departmentMap = new Map(departments.map((dept) => [dept.id, dept]));
            const positionMap = new Map(positions.map((pos) => [pos.id, pos]));
            const rankMap = new Map(ranks.map((rank) => [rank.id, rank]));
            const employeeMap = new Map(employees.map((emp) => [emp.id, emp]));
            const departmentDetails = new Map();
            for (const edp of employeeDeptPositions) {
                const employee = employeeMap.get(edp.employeeId);
                const department = departmentMap.get(edp.departmentId);
                const position = positionMap.get(edp.positionId);
                if (employee && department && position) {
                    const rank = rankMap.get(employee.currentRankId);
                    if (rank) {
                        if (!departmentDetails.has(edp.departmentId)) {
                            departmentDetails.set(edp.departmentId, []);
                        }
                        departmentDetails.get(edp.departmentId).push({
                            department,
                            position,
                            rank,
                        });
                    }
                }
            }
            return departmentDetails;
        }
        catch (error) {
            console.error('ÏßÅÏõê ÏÉÅÏÑ∏Ï†ïÎ≥¥ Ï°∞Ìöå Ï§ë Ïò§Î•ò:', error);
            return undefined;
        }
    }
    Î™®Îì†_Î∂ÄÏÑú_IDÎ•º_ÏàòÏßëÌïúÎã§(departments) {
        const departmentIds = [];
        const collectIds = (depts) => {
            for (const dept of depts) {
                departmentIds.push(dept.id);
                if (dept.childDepartments && dept.childDepartments.length > 0) {
                    collectIds(dept.childDepartments);
                }
            }
        };
        collectIds(departments);
        return departmentIds;
    }
    async ÏßÅÏõêÏÉùÏÑ±_Ï†ÑÏ≤òÎ¶¨Î•º_ÏàòÌñâÌïúÎã§(name, englishLastName, englishFirstName) {
        const employeeNumber = await this.ÏßÅÏõêÏÑúÎπÑÏä§.generateNextEmployeeNumber();
        const uniqueName = await this.ÏßÅÏõêÏÑúÎπÑÏä§.generateUniqueEmployeeName(name);
        let email;
        if (englishLastName && englishFirstName) {
            email = await this.Í≥†Ïú†Ìïú_Ïù¥Î©îÏùºÏùÑ_ÏÉùÏÑ±ÌïúÎã§(englishLastName, englishFirstName);
        }
        return {
            employeeNumber,
            name: uniqueName,
            email,
        };
    }
    async Í≥†Ïú†Ìïú_Ïù¥Î©îÏùºÏùÑ_ÏÉùÏÑ±ÌïúÎã§(englishLastName, englishFirstName) {
        const baseEmail = `${englishLastName}.${englishFirstName}@lumir.space`;
        const isDuplicate = await this.ÏßÅÏõêÏÑúÎπÑÏä§.isEmailDuplicate(baseEmail);
        if (!isDuplicate) {
            return baseEmail;
        }
        let counter = 1;
        let email = `${englishLastName}.${englishFirstName}${counter}@lumir.space`;
        while (await this.ÏßÅÏõêÏÑúÎπÑÏä§.isEmailDuplicate(email)) {
            counter++;
            email = `${englishLastName}.${englishFirstName}${counter}@lumir.space`;
        }
        return email;
    }
    async ÏßÅÏõêÏÉùÏÑ±_Ïª®ÌÖçÏä§Ìä∏_Í≤ÄÏ¶ùÏùÑ_ÏàòÌñâÌïúÎã§(data) {
        this.ÏßÅÏõêÍ≤ÄÏ¶ùÏÑúÎπÑÏä§.validateEmployeeCreation({
            employeeNumber: data.employeeNumber,
            email: data.email,
        });
        const [isDuplicateEmployeeNumber, isDuplicateEmail, rankExists, departmentExists, positionExists] = await Promise.all([
            this.ÏßÅÏõêÏÑúÎπÑÏä§.isEmployeeNumberDuplicate(data.employeeNumber),
            data.email ? this.ÏßÅÏõêÏÑúÎπÑÏä§.isEmailDuplicate(data.email) : Promise.resolve(false),
            data.currentRankId ? this.ÏßÅÍ∏âÏÑúÎπÑÏä§.exists(data.currentRankId) : Promise.resolve(true),
            data.departmentId ? this.Î∂ÄÏÑúÏÑúÎπÑÏä§.exists(data.departmentId) : Promise.resolve(true),
            data.positionId ? this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.exists(data.positionId) : Promise.resolve(true),
        ]);
        if (isDuplicateEmployeeNumber) {
            throw new employee_errors_1.DuplicateEmployeeNumberError(data.employeeNumber);
        }
        if (isDuplicateEmail) {
            throw new employee_errors_1.DuplicateEmailError(data.email);
        }
        if (data.currentRankId && !rankExists) {
            throw new employee_errors_1.RankNotFoundError(data.currentRankId);
        }
        if (data.departmentId && !departmentExists) {
            throw new employee_errors_1.DepartmentNotFoundError(data.departmentId);
        }
        if (data.positionId && !positionExists) {
            throw new employee_errors_1.PositionNotFoundError(data.positionId);
        }
    }
    async ÏßÅÏõêÏùÑ_ÏÉùÏÑ±ÌïúÎã§(data) {
        const { employeeNumber, name, email: generatedEmail, } = await this.ÏßÅÏõêÏÉùÏÑ±_Ï†ÑÏ≤òÎ¶¨Î•º_ÏàòÌñâÌïúÎã§(data.name, data.englishLastName, data.englishFirstName);
        const email = generatedEmail || data.email;
        await this.ÏßÅÏõêÏÉùÏÑ±_Ïª®ÌÖçÏä§Ìä∏_Í≤ÄÏ¶ùÏùÑ_ÏàòÌñâÌïúÎã§({
            employeeNumber: data.employeeNumber,
            email: email,
            currentRankId: data.currentRankId,
            departmentId: data.departmentId,
            positionId: data.positionId,
        });
        const employee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.createEmployee({
            employeeNumber: data.employeeNumber,
            name: name,
            email: email,
            phoneNumber: data.phoneNumber,
            dateOfBirth: data.dateOfBirth,
            gender: data.gender,
            hireDate: data.hireDate,
            status: data.status || enums_1.EmployeeStatus.Active,
            currentRankId: data.currentRankId,
        });
        const shouldCreateAssignment = data.departmentId && data.positionId;
        if (shouldCreateAssignment) {
            await this.ÏßÅÏõêÏùÑ_Î∂ÄÏÑúÏóê_Î∞∞ÏπòÌïúÎã§({
                employeeId: employee.id,
                departmentId: data.departmentId,
                positionId: data.positionId,
                isManager: data.isManager,
            });
        }
        if (data.currentRankId) {
            await this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.createHistory({
                employeeId: employee.id,
                rankId: data.currentRankId,
            });
        }
        let department;
        let rank;
        if (data.departmentId) {
            department = await this.Î∂ÄÏÑú_IDÎ°ú_Î∂ÄÏÑúÎ•º_Ï°∞ÌöåÌïúÎã§(data.departmentId);
        }
        if (data.currentRankId) {
            rank = await this.ÏßÅÍ∏â_IDÎ°ú_ÏßÅÍ∏âÏùÑ_Ï°∞ÌöåÌïúÎã§(data.currentRankId);
        }
        return { employee, department, rank };
    }
    async ÏßÅÏõêÏùÑ_Ìá¥ÏÇ¨Ï≤òÎ¶¨ÌïúÎã§(data) {
        return await this.ÏßÅÏõêÎ†àÌè¨ÏßÄÌÜ†Î¶¨.manager.transaction(async (transactionalEntityManager) => {
            const employee = await this.ÏßÅÏõêÏùÑ_Ï°∞ÌöåÌïúÎã§(data.employeeIdentifier);
            this.Ìá¥ÏÇ¨Ï≤òÎ¶¨_Í≤ÄÏ¶ùÏùÑ_ÏàòÌñâÌïúÎã§(employee, data.terminationDate);
            const employeeId = employee.id;
            const terminatedDepartment = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findByCode('Ìá¥ÏÇ¨Ïûê');
            if (!terminatedDepartment) {
                throw new common_1.NotFoundException('Ìá¥ÏÇ¨Ïûê Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            const currentAssignments = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeId(employeeId);
            let currentDepartment = null;
            let currentPosition = null;
            let currentIsManager = false;
            let departmentAssignment = null;
            for (const assignment of currentAssignments) {
                const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(assignment.departmentId);
                if (department.type === department_entity_1.DepartmentType.DEPARTMENT) {
                    currentDepartment = department;
                    departmentAssignment = assignment;
                    currentPosition = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(assignment.positionId);
                    currentIsManager = assignment.isManager;
                    break;
                }
            }
            const metadata = {
                termination: {
                    previousDepartment: currentDepartment
                        ? {
                            id: currentDepartment.id,
                            name: currentDepartment.departmentName,
                            code: currentDepartment.departmentCode,
                        }
                        : null,
                    previousPosition: currentPosition
                        ? {
                            id: currentPosition.id,
                            title: currentPosition.positionTitle,
                            code: currentPosition.positionCode,
                        }
                        : null,
                    previousIsManager: currentIsManager,
                },
            };
            await transactionalEntityManager.update(entities_1.Employee, { id: employeeId }, {
                status: enums_1.EmployeeStatus.Terminated,
                terminationDate: data.terminationDate,
                terminationReason: data.terminationReason,
                metadata,
            });
            if (!currentPosition) {
                const defaultPosition = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAll();
                const firstPosition = defaultPosition.length > 0 ? defaultPosition[0] : null;
                if (!firstPosition) {
                    throw new common_1.NotFoundException('Í∏∞Î≥∏ ÏßÅÏ±ÖÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                }
                currentPosition = firstPosition;
            }
            if (departmentAssignment) {
                await transactionalEntityManager.update(entities_1.EmployeeDepartmentPosition, { id: departmentAssignment.id }, {
                    departmentId: terminatedDepartment.id,
                    positionId: currentPosition.id,
                    isManager: false,
                });
            }
            else {
                await transactionalEntityManager.save(entities_1.EmployeeDepartmentPosition, {
                    employeeId,
                    departmentId: terminatedDepartment.id,
                    positionId: currentPosition.id,
                    isManager: false,
                });
            }
            await transactionalEntityManager.delete(entities_1.EmployeeToken, { employeeId });
            await transactionalEntityManager.delete(entities_1.EmployeeFcmToken, { employeeId });
            await transactionalEntityManager.delete(entities_1.EmployeeSystemRole, { employeeId });
            const updatedEmployee = await transactionalEntityManager.findOne(entities_1.Employee, {
                where: { id: employeeId },
            });
            if (!updatedEmployee) {
                throw new common_1.NotFoundException('ÏóÖÎç∞Ïù¥Ìä∏Îêú ÏßÅÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
            return {
                employee: updatedEmployee,
                message: `${employee.name}(${employee.employeeNumber}) ÏßÅÏõêÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ìá¥ÏÇ¨Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§.`,
            };
        });
    }
    Ìá¥ÏÇ¨Ï≤òÎ¶¨_Í≤ÄÏ¶ùÏùÑ_ÏàòÌñâÌïúÎã§(employee, terminationDate) {
        if (terminationDate <= employee.hireDate) {
            throw new Error(`Ìá¥ÏÇ¨ÏùºÏùÄ ÏûÖÏÇ¨ÏùºÎ≥¥Îã§ Îä¶Ïñ¥Ïïº Ìï©ÎãàÎã§. ÏûÖÏÇ¨Ïùº: ${employee.hireDate.toISOString().split('T')[0]}`);
        }
    }
    async Î∂ÄÏÑúÎ•º_ÏÉùÏÑ±ÌïúÎã§(Î∂ÄÏÑúÏ†ïÎ≥¥) {
        const isDuplicate = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.isCodeDuplicate(Î∂ÄÏÑúÏ†ïÎ≥¥.departmentCode);
        if (isDuplicate) {
            throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Î∂ÄÏÑú ÏΩîÎìúÏûÖÎãàÎã§.');
        }
        if (Î∂ÄÏÑúÏ†ïÎ≥¥.parentDepartmentId) {
            const parentExists = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.exists(Î∂ÄÏÑúÏ†ïÎ≥¥.parentDepartmentId);
            console.log('Î∂ÄÏÑúÏ†ïÎ≥¥.parentDepartmentId', Î∂ÄÏÑúÏ†ïÎ≥¥.parentDepartmentId);
            console.log('parentExists', parentExists);
            if (!parentExists) {
                throw new Error('ÏÉÅÏúÑ Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
        }
        let order = Î∂ÄÏÑúÏ†ïÎ≥¥.order;
        if (order === undefined) {
            order = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.getNextOrderForParent(Î∂ÄÏÑúÏ†ïÎ≥¥.parentDepartmentId || null);
        }
        return await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.createDepartment({
            departmentName: Î∂ÄÏÑúÏ†ïÎ≥¥.departmentName,
            departmentCode: Î∂ÄÏÑúÏ†ïÎ≥¥.departmentCode,
            type: Î∂ÄÏÑúÏ†ïÎ≥¥.type,
            parentDepartmentId: Î∂ÄÏÑúÏ†ïÎ≥¥.parentDepartmentId,
            order,
        });
    }
    async Î∂ÄÏÑúÎ•º_ÏàòÏ†ïÌïúÎã§(departmentId, ÏàòÏ†ïÏ†ïÎ≥¥) {
        const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(departmentId);
        if (!department) {
            throw new common_1.NotFoundException('Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        if (ÏàòÏ†ïÏ†ïÎ≥¥.departmentCode) {
            const isDuplicate = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.isCodeDuplicate(ÏàòÏ†ïÏ†ïÎ≥¥.departmentCode, departmentId);
            if (isDuplicate) {
                throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Î∂ÄÏÑú ÏΩîÎìúÏûÖÎãàÎã§.');
            }
        }
        if (ÏàòÏ†ïÏ†ïÎ≥¥.parentDepartmentId) {
            const parentExists = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.exists(ÏàòÏ†ïÏ†ïÎ≥¥.parentDepartmentId);
            if (!parentExists) {
                throw new Error('ÏÉÅÏúÑ Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
            }
        }
        const oldParentDepartmentId = department.parentDepartmentId || null;
        const newParentDepartmentId = ÏàòÏ†ïÏ†ïÎ≥¥.parentDepartmentId !== undefined ? ÏàòÏ†ïÏ†ïÎ≥¥.parentDepartmentId || null : oldParentDepartmentId;
        let newOrder = undefined;
        if (oldParentDepartmentId !== newParentDepartmentId) {
            const currentOrder = department.order;
            const nextOrder = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.getNextOrderForParent(newParentDepartmentId);
            await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.updateDepartment(departmentId, {
                parentDepartmentId: newParentDepartmentId,
                order: -999,
            });
            const oldSiblingDepartments = oldParentDepartmentId === null
                ? await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findRootDepartments()
                : await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findChildDepartments(oldParentDepartmentId);
            const orderUpdates = [];
            for (const sibling of oldSiblingDepartments) {
                if (sibling.id !== departmentId && sibling.order > currentOrder) {
                    orderUpdates.push({ id: sibling.id, order: sibling.order - 1 });
                }
            }
            if (orderUpdates.length > 0) {
                await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.bulkUpdateOrders(orderUpdates);
            }
            newOrder = nextOrder;
        }
        const updateData = {
            ...ÏàòÏ†ïÏ†ïÎ≥¥,
            ...(newOrder !== undefined && { order: newOrder }),
        };
        return await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.updateDepartment(departmentId, updateData);
    }
    async Î∂ÄÏÑúÎ•º_ÏÇ≠Ï†úÌïúÎã§(departmentId) {
        const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(departmentId);
        if (!department) {
            throw new common_1.NotFoundException('Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const childDepartments = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findChildDepartments(departmentId);
        if (childDepartments.length > 0) {
            throw new Error('ÌïòÏúÑ Î∂ÄÏÑúÍ∞Ä Ï°¥Ïû¨ÌïòÏó¨ ÏÇ≠Ï†úÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const assignedEmployees = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findByDepartmentId(departmentId);
        if (assignedEmployees.length > 0) {
            throw new Error('Ìï¥Îãπ Î∂ÄÏÑúÏóê Î∞∞ÏπòÎêú ÏßÅÏõêÏù¥ ÏûàÏñ¥ ÏÇ≠Ï†úÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const parentDepartmentId = department.parentDepartmentId || null;
        const deletedOrder = department.order;
        await this.Î∂ÄÏÑúÎ†àÌè¨ÏßÄÌÜ†Î¶¨.manager.transaction(async (transactionalEntityManager) => {
            await transactionalEntityManager.update(entities_1.Department, { id: departmentId }, { order: -999 });
            const queryBuilder = transactionalEntityManager
                .createQueryBuilder(entities_1.Department, 'department')
                .where('department.id != :departmentId', { departmentId });
            if (parentDepartmentId === null) {
                queryBuilder.andWhere('department.parentDepartmentId IS NULL');
            }
            else {
                queryBuilder.andWhere('department.parentDepartmentId = :parentDepartmentId', {
                    parentDepartmentId,
                });
            }
            queryBuilder
                .andWhere('department.order > :deletedOrder', { deletedOrder })
                .orderBy('department.order', 'ASC');
            const departmentsToUpdate = await queryBuilder.getMany();
            if (departmentsToUpdate.length > 0) {
                const tempOffset = -1000000;
                for (let i = 0; i < departmentsToUpdate.length; i++) {
                    await transactionalEntityManager.update(entities_1.Department, { id: departmentsToUpdate[i].id }, { order: tempOffset - i });
                }
                for (const dept of departmentsToUpdate) {
                    await transactionalEntityManager.update(entities_1.Department, { id: dept.id }, { order: dept.order - 1 });
                }
            }
            await transactionalEntityManager.delete(entities_1.Department, { id: departmentId });
        });
    }
    async Î∂ÄÏÑúÏàúÏÑúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(departmentId, newOrder) {
        const department = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(departmentId);
        if (!department) {
            throw new Error('Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const currentOrder = department.order;
        const parentDepartmentId = department.parentDepartmentId || null;
        const departmentCount = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.countByParentDepartmentId(parentDepartmentId);
        const minOrderValue = 0;
        const maxOrderValue = departmentCount - 1 > 0 ? departmentCount - 1 : 0;
        if (newOrder < minOrderValue) {
            newOrder = minOrderValue;
        }
        else if (newOrder > maxOrderValue) {
            newOrder = maxOrderValue;
        }
        if (currentOrder === newOrder) {
            return department;
        }
        const minOrderRange = Math.min(currentOrder, newOrder);
        const maxOrderRange = Math.max(currentOrder, newOrder);
        const affectedDepartments = await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findDepartmentsInOrderRange(parentDepartmentId, minOrderRange, maxOrderRange);
        await this.Î∂ÄÏÑúÎ†àÌè¨ÏßÄÌÜ†Î¶¨.manager.transaction(async (transactionalEntityManager) => {
            await transactionalEntityManager.update(entities_1.Department, { id: departmentId }, { order: -999 });
            const updates = [];
            if (currentOrder < newOrder) {
                console.log('affectedDepartments', affectedDepartments);
                for (const dept of affectedDepartments) {
                    if (dept.id !== departmentId && dept.order > currentOrder && dept.order <= newOrder) {
                        updates.push({ id: dept.id, order: dept.order - 1 });
                    }
                }
            }
            else {
                for (const dept of affectedDepartments) {
                    if (dept.id !== departmentId && dept.order >= newOrder && dept.order < currentOrder) {
                        updates.push({ id: dept.id, order: dept.order + 1 });
                    }
                }
            }
            if (updates.length > 0) {
                const tempOffset = -1000000;
                for (let i = 0; i < updates.length; i++) {
                    await transactionalEntityManager.update(entities_1.Department, { id: updates[i].id }, { order: tempOffset - i });
                }
                for (const update of updates) {
                    await transactionalEntityManager.update(entities_1.Department, { id: update.id }, { order: update.order });
                }
            }
            await transactionalEntityManager.update(entities_1.Department, { id: departmentId }, { order: newOrder });
        });
        return await this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findById(departmentId);
    }
    async ÏßÅÏ±ÖÏùÑ_ÏÉùÏÑ±ÌïúÎã§(ÏßÅÏ±ÖÏ†ïÎ≥¥) {
        const isDuplicate = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.isCodeDuplicate(ÏßÅÏ±ÖÏ†ïÎ≥¥.positionCode);
        if (isDuplicate) {
            throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏßÅÏ±Ö ÏΩîÎìúÏûÖÎãàÎã§.');
        }
        const existingPosition = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findOneByLevel(ÏßÅÏ±ÖÏ†ïÎ≥¥.level);
        if (existingPosition) {
            throw new common_1.BadRequestException(`Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî levelÏûÖÎãàÎã§: ${ÏßÅÏ±ÖÏ†ïÎ≥¥.level}`);
        }
        const allPositions = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllPositions();
        const maxLevel = allPositions.length > 0 ? Math.max(...allPositions.map((p) => p.level)) : 0;
        const expectedLevel = maxLevel + 1;
        if (ÏßÅÏ±ÖÏ†ïÎ≥¥.level !== expectedLevel) {
            throw new common_1.BadRequestException(`levelÏùÄ ${expectedLevel}Ïù¥Ïñ¥Ïïº Ìï©ÎãàÎã§. (ÌòÑÏû¨ ÏµúÎåÄ level: ${maxLevel})`);
        }
        return await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.createPosition({
            positionTitle: ÏßÅÏ±ÖÏ†ïÎ≥¥.positionTitle,
            positionCode: ÏßÅÏ±ÖÏ†ïÎ≥¥.positionCode,
            level: ÏßÅÏ±ÖÏ†ïÎ≥¥.level,
            hasManagementAuthority: ÏßÅÏ±ÖÏ†ïÎ≥¥.hasManagementAuthority || false,
        });
    }
    async ÏßÅÏ±ÖÏùÑ_ÏàòÏ†ïÌïúÎã§(positionId, ÏàòÏ†ïÏ†ïÎ≥¥) {
        await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(positionId);
        if (ÏàòÏ†ïÏ†ïÎ≥¥.positionCode) {
            const isDuplicate = await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.isCodeDuplicate(ÏàòÏ†ïÏ†ïÎ≥¥.positionCode, positionId);
            if (isDuplicate) {
                throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏßÅÏ±Ö ÏΩîÎìúÏûÖÎãàÎã§.');
            }
        }
        if (ÏàòÏ†ïÏ†ïÎ≥¥.level !== undefined) {
            await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.changeLevel(positionId, ÏàòÏ†ïÏ†ïÎ≥¥.level);
            const { level, ...restData } = ÏàòÏ†ïÏ†ïÎ≥¥;
            if (Object.keys(restData).length > 0) {
                return await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.updatePosition(positionId, restData);
            }
            else {
                return await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(positionId);
            }
        }
        return await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.updatePosition(positionId, ÏàòÏ†ïÏ†ïÎ≥¥);
    }
    async ÏßÅÏ±ÖÏùÑ_ÏÇ≠Ï†úÌïúÎã§(positionId) {
        await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findById(positionId);
        const assignedEmployees = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findByPositionId(positionId);
        if (assignedEmployees.length > 0) {
            throw new common_1.BadRequestException('Ìï¥Îãπ ÏßÅÏ±ÖÏóê Î∞∞ÏπòÎêú ÏßÅÏõêÏù¥ ÏûàÏñ¥ ÏÇ≠Ï†úÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.deletePosition(positionId);
    }
    async ÏßÅÍ∏âÏùÑ_ÏÉùÏÑ±ÌïúÎã§(ÏßÅÍ∏âÏ†ïÎ≥¥) {
        const isDuplicate = await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.isCodeDuplicate(ÏßÅÍ∏âÏ†ïÎ≥¥.rankCode);
        if (isDuplicate) {
            throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏßÅÍ∏â ÏΩîÎìúÏûÖÎãàÎã§.');
        }
        return await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.createRank({
            rankName: ÏßÅÍ∏âÏ†ïÎ≥¥.rankName,
            rankCode: ÏßÅÍ∏âÏ†ïÎ≥¥.rankCode,
            level: ÏßÅÍ∏âÏ†ïÎ≥¥.level,
        });
    }
    async ÏßÅÍ∏âÏùÑ_ÏàòÏ†ïÌïúÎã§(rankId, ÏàòÏ†ïÏ†ïÎ≥¥) {
        await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findById(rankId);
        if (ÏàòÏ†ïÏ†ïÎ≥¥.rankCode) {
            const isDuplicate = await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.isCodeDuplicate(ÏàòÏ†ïÏ†ïÎ≥¥.rankCode, rankId);
            if (isDuplicate) {
                throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏßÅÍ∏â ÏΩîÎìúÏûÖÎãàÎã§.');
            }
        }
        return await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.updateRank(rankId, ÏàòÏ†ïÏ†ïÎ≥¥);
    }
    async ÏßÅÍ∏âÏùÑ_ÏÇ≠Ï†úÌïúÎã§(rankId) {
        await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findById(rankId);
        const employeesWithRank = await this.ÏßÅÏõêÏÑúÎπÑÏä§.findByRankId(rankId);
        if (employeesWithRank.length > 0) {
            throw new common_1.BadRequestException('Ìï¥Îãπ ÏßÅÍ∏âÏùÑ Í∞ÄÏßÑ ÏßÅÏõêÏù¥ ÏûàÏñ¥ ÏÇ≠Ï†úÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const rankHistories = await this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.findByRankId(rankId);
        if (rankHistories.length > 0) {
            throw new common_1.BadRequestException('Ìï¥Îãπ ÏßÅÍ∏âÏùò Ïù¥Î†•Ïù¥ ÏûàÏñ¥ ÏÇ≠Ï†úÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.ÏßÅÍ∏âÏÑúÎπÑÏä§.deleteRank(rankId);
    }
    async ÏßÅÏõêÏùÑ_Î∂ÄÏÑúÏóê_Î∞∞ÏπòÌïúÎã§(Î∞∞ÏπòÏ†ïÎ≥¥) {
        try {
            const existingAssignment = await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findByEmployeeAndDepartment(Î∞∞ÏπòÏ†ïÎ≥¥.employeeId, Î∞∞ÏπòÏ†ïÎ≥¥.departmentId);
            throw new Error('Ïù¥ÎØ∏ Ìï¥Îãπ Î∂ÄÏÑúÏóê Î∞∞ÏπòÎêòÏñ¥ ÏûàÏäµÎãàÎã§.');
        }
        catch (error) {
            if (error instanceof common_1.NotFoundException) {
            }
            else {
                throw error;
            }
        }
        return await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.createAssignment({
            employeeId: Î∞∞ÏπòÏ†ïÎ≥¥.employeeId,
            departmentId: Î∞∞ÏπòÏ†ïÎ≥¥.departmentId,
            positionId: Î∞∞ÏπòÏ†ïÎ≥¥.positionId,
            isManager: Î∞∞ÏπòÏ†ïÎ≥¥.isManager || false,
        });
    }
    async ÏßÅÏõêÎ∞∞ÏπòÏ†ïÎ≥¥Î•º_ÏàòÏ†ïÌïúÎã§(assignmentId, ÏàòÏ†ïÏ†ïÎ≥¥) {
        return await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.updateAssignment(assignmentId, ÏàòÏ†ïÏ†ïÎ≥¥);
    }
    async ÏßÅÏõêÎ∞∞ÏπòÎ•º_Ìï¥Ï†úÌïúÎã§(assignmentId) {
        await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.deleteAssignment(assignmentId);
    }
    async ÏßÅÏõêÎ∞∞Ïπò_Í¥ÄÎ¶¨ÏûêÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(assignmentId, isManager) {
        const assignment = await this.Î∞∞Ïπò_IDÎ°ú_Î∞∞ÏπòÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(assignmentId);
        if (!assignment) {
            throw new Error('Î∞∞Ïπò Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return await this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.updateAssignment(assignmentId, { isManager });
    }
    async ÏßÅÏõêÏùò_ÏßÅÍ∏âÏùÑ_Î≥ÄÍ≤ΩÌïúÎã§(employeeId, newRankId) {
        const updatedEmployee = await this.ÏßÅÏõêÏÑúÎπÑÏä§.updateEmployee(employeeId, {
            currentRankId: newRankId,
        });
        const rankHistory = await this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.createHistory({
            employeeId,
            rankId: newRankId,
        });
        return {
            employee: updatedEmployee,
            rankHistory,
        };
    }
    async ÏßÅÍ∏âÏù¥Î†•ÏùÑ_ÏÇ≠Ï†úÌïúÎã§(historyId) {
        await this.ÏßÅÏõêÏßÅÍ∏âÏù¥Î†•ÏÑúÎπÑÏä§.deleteHistory(historyId);
    }
    async Ï°∞ÏßÅÎèÑ_ÌÜµÍ≥ÑÎ•º_Ï°∞ÌöåÌïúÎã§() {
        const [departments, allEmployees, positions, ranks, assignments] = await Promise.all([
            this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findAllDepartmentsWithChildren(),
            this.ÏßÅÏõêÏÑúÎπÑÏä§.findAllEmployees(true),
            this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllPositions(),
            this.ÏßÅÍ∏âÏÑúÎπÑÏä§.findAllRanks(),
            this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllAssignments(),
        ]);
        const ÌôúÏÑ±_ÏßÅÏõêÏàò = allEmployees.filter((emp) => emp.status === 'Ïû¨ÏßÅÏ§ë').length;
        const Ìú¥ÏßÅ_ÏßÅÏõêÏàò = allEmployees.filter((emp) => emp.status === 'Ìú¥ÏßÅ').length;
        const Ìá¥ÏÇ¨_ÏßÅÏõêÏàò = allEmployees.filter((emp) => emp.status === 'Ìá¥ÏÇ¨').length;
        const positionMap = new Map(positions.map((pos) => [pos.id, pos.positionTitle]));
        const positionStats = new Map();
        for (const assignment of assignments) {
            const positionTitle = positionMap.get(assignment.positionId) || 'Ïïå Ïàò ÏóÜÏùå';
            positionStats.set(positionTitle, (positionStats.get(positionTitle) || 0) + 1);
        }
        const rankMap = new Map(ranks.map((rank) => [rank.id, rank.rankName]));
        const rankStats = new Map();
        for (const employee of allEmployees) {
            if (employee.currentRankId) {
                const rankName = rankMap.get(employee.currentRankId) || 'Ïïå Ïàò ÏóÜÏùå';
                rankStats.set(rankName, (rankStats.get(rankName) || 0) + 1);
            }
        }
        return {
            Ï¥ù_Î∂ÄÏÑúÏàò: this.Î™®Îì†_Î∂ÄÏÑú_Í∞úÏàòÎ•º_Í≥ÑÏÇ∞ÌïúÎã§(departments),
            Ï¥ù_ÏßÅÏõêÏàò: allEmployees.length,
            ÌôúÏÑ±_ÏßÅÏõêÏàò,
            Ìú¥ÏßÅ_ÏßÅÏõêÏàò,
            Ìá¥ÏÇ¨_ÏßÅÏõêÏàò,
            ÏßÅÏ±ÖÎ≥Ñ_ÌÜµÍ≥Ñ: Array.from(positionStats.entries()).map(([ÏßÅÏ±ÖÎ™Ö, Ïù∏ÏõêÏàò]) => ({ ÏßÅÏ±ÖÎ™Ö, Ïù∏ÏõêÏàò })),
            ÏßÅÍ∏âÎ≥Ñ_ÌÜµÍ≥Ñ: Array.from(rankStats.entries()).map(([ÏßÅÍ∏âÎ™Ö, Ïù∏ÏõêÏàò]) => ({ ÏßÅÍ∏âÎ™Ö, Ïù∏ÏõêÏàò })),
        };
    }
    Î™®Îì†_Î∂ÄÏÑú_Í∞úÏàòÎ•º_Í≥ÑÏÇ∞ÌïúÎã§(departments) {
        let count = departments.length;
        for (const dept of departments) {
            if (dept.childDepartments) {
                count += this.Î™®Îì†_Î∂ÄÏÑú_Í∞úÏàòÎ•º_Í≥ÑÏÇ∞ÌïúÎã§(dept.childDepartments);
            }
        }
        return count;
    }
    async Ï†ÑÏ≤¥_ÏßÅÏõêÏùò_Í¥ÄÎ¶¨Ïûê_ÎùºÏù∏ÏùÑ_Ï°∞ÌöåÌïúÎã§(includeTerminated = false) {
        const employees = await this.Ï†ÑÏ≤¥_ÏßÅÏõêÏ†ïÎ≥¥Î•º_Ï°∞ÌöåÌïúÎã§(includeTerminated);
        if (employees.length === 0) {
            return [];
        }
        const employeeIds = employees.map((emp) => emp.id);
        const [allAssignments, allDepartments, allPositions] = await Promise.all([
            this.ÏßÅÏõêÎ∂ÄÏÑúÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllByEmployeeIds(employeeIds),
            this.Î∂ÄÏÑúÏÑúÎπÑÏä§.findAllDepartments(),
            this.ÏßÅÏ±ÖÏÑúÎπÑÏä§.findAllPositions(),
        ]);
        const departmentMap = new Map(allDepartments.map((dept) => [dept.id, dept]));
        const positionMap = new Map(allPositions.map((pos) => [pos.id, pos]));
        const employeeAssignmentsMap = new Map();
        for (const assignment of allAssignments) {
            const assignments = employeeAssignmentsMap.get(assignment.employeeId) || [];
            assignments.push(assignment);
            employeeAssignmentsMap.set(assignment.employeeId, assignments);
        }
        const managersByDepartmentMap = new Map();
        for (const assignment of allAssignments) {
            if (assignment.isManager) {
                const managers = managersByDepartmentMap.get(assignment.departmentId) || [];
                managers.push(assignment);
                managersByDepartmentMap.set(assignment.departmentId, managers);
            }
        }
        const result = [];
        for (const employee of employees) {
            const employeeAssignments = employeeAssignmentsMap.get(employee.id);
            if (!employeeAssignments || employeeAssignments.length === 0) {
                continue;
            }
            const departments = [];
            for (const assignment of employeeAssignments) {
                const currentDepartmentId = assignment.departmentId;
                const currentDepartment = departmentMap.get(currentDepartmentId);
                if (!currentDepartment) {
                    continue;
                }
                const managerLine = [];
                let currentDeptId = currentDepartmentId;
                let depth = 0;
                while (currentDeptId) {
                    const dept = departmentMap.get(currentDeptId);
                    if (!dept) {
                        break;
                    }
                    const managerAssignments = managersByDepartmentMap.get(currentDeptId) || [];
                    const managers = managerAssignments
                        .map((managerAssignment) => {
                        const managerEmployee = employees.find((emp) => emp.id === managerAssignment.employeeId);
                        if (!managerEmployee) {
                            return null;
                        }
                        const position = positionMap.get(managerAssignment.positionId);
                        if (!position) {
                            return null;
                        }
                        return {
                            employeeId: managerEmployee.id,
                            name: managerEmployee.name,
                            employeeNumber: managerEmployee.employeeNumber,
                            email: managerEmployee.email,
                            positionId: position.id,
                            positionTitle: position.positionTitle,
                        };
                    })
                        .filter((m) => m !== null);
                    managerLine.push({
                        departmentId: dept.id,
                        departmentName: dept.departmentName,
                        departmentCode: dept.departmentCode,
                        type: dept.type,
                        parentDepartmentId: dept.parentDepartmentId,
                        depth,
                        managers,
                    });
                    currentDeptId = dept.parentDepartmentId;
                    depth++;
                }
                departments.push({
                    departmentId: currentDepartment.id,
                    departmentName: currentDepartment.departmentName,
                    managerLine,
                });
            }
            result.push({
                employeeId: employee.id,
                name: employee.name,
                employeeNumber: employee.employeeNumber,
                departments,
            });
        }
        return result;
    }
};
exports.OrganizationManagementContextService = OrganizationManagementContextService;
exports.OrganizationManagementContextService = OrganizationManagementContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object, typeof (_b = typeof employee_repository_1.DomainEmployeeRepository !== "undefined" && employee_repository_1.DomainEmployeeRepository) === "function" ? _b : Object, typeof (_c = typeof department_service_1.DomainDepartmentService !== "undefined" && department_service_1.DomainDepartmentService) === "function" ? _c : Object, typeof (_d = typeof department_repository_1.DomainDepartmentRepository !== "undefined" && department_repository_1.DomainDepartmentRepository) === "function" ? _d : Object, typeof (_e = typeof position_service_1.DomainPositionService !== "undefined" && position_service_1.DomainPositionService) === "function" ? _e : Object, typeof (_f = typeof rank_service_1.DomainRankService !== "undefined" && rank_service_1.DomainRankService) === "function" ? _f : Object, typeof (_g = typeof employee_department_position_service_1.DomainEmployeeDepartmentPositionService !== "undefined" && employee_department_position_service_1.DomainEmployeeDepartmentPositionService) === "function" ? _g : Object, typeof (_h = typeof employee_rank_history_service_1.DomainEmployeeRankHistoryService !== "undefined" && employee_rank_history_service_1.DomainEmployeeRankHistoryService) === "function" ? _h : Object, typeof (_j = typeof employee_validation_service_1.DomainEmployeeValidationService !== "undefined" && employee_validation_service_1.DomainEmployeeValidationService) === "function" ? _j : Object, typeof (_k = typeof employee_token_service_1.DomainEmployeeTokenService !== "undefined" && employee_token_service_1.DomainEmployeeTokenService) === "function" ? _k : Object, typeof (_l = typeof employee_fcm_token_service_1.DomainEmployeeFcmTokenService !== "undefined" && employee_fcm_token_service_1.DomainEmployeeFcmTokenService) === "function" ? _l : Object, typeof (_m = typeof employee_system_role_service_1.DomainEmployeeSystemRoleService !== "undefined" && employee_system_role_service_1.DomainEmployeeSystemRoleService) === "function" ? _m : Object])
], OrganizationManagementContextService);


/***/ }),

/***/ "./src/modules/context/system-management/system-management-context.module.ts":
/*!***********************************************************************************!*\
  !*** ./src/modules/context/system-management/system-management-context.module.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemManagementContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_management_context_service_1 = __webpack_require__(/*! ./system-management-context.service */ "./src/modules/context/system-management/system-management-context.service.ts");
const system_module_1 = __webpack_require__(/*! ../../domain/system/system.module */ "./src/modules/domain/system/system.module.ts");
const system_webhook_module_1 = __webpack_require__(/*! ../../domain/system-webhook/system-webhook.module */ "./src/modules/domain/system-webhook/system-webhook.module.ts");
const system_role_module_1 = __webpack_require__(/*! ../../domain/system-role/system-role.module */ "./src/modules/domain/system-role/system-role.module.ts");
const employee_system_role_module_1 = __webpack_require__(/*! ../../domain/employee-system-role/employee-system-role.module */ "./src/modules/domain/employee-system-role/employee-system-role.module.ts");
const department_module_1 = __webpack_require__(/*! ../../domain/department/department.module */ "./src/modules/domain/department/department.module.ts");
const employee_department_position_module_1 = __webpack_require__(/*! ../../domain/employee-department-position/employee-department-position.module */ "./src/modules/domain/employee-department-position/employee-department-position.module.ts");
let SystemManagementContextModule = class SystemManagementContextModule {
};
exports.SystemManagementContextModule = SystemManagementContextModule;
exports.SystemManagementContextModule = SystemManagementContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            system_module_1.DomainSystemModule,
            system_webhook_module_1.DomainSystemWebhookModule,
            system_role_module_1.DomainSystemRoleModule,
            employee_system_role_module_1.DomainEmployeeSystemRoleModule,
            department_module_1.DomainDepartmentModule,
            employee_department_position_module_1.DomainEmployeeDepartmentPositionModule,
        ],
        providers: [system_management_context_service_1.SystemManagementContextService],
        exports: [system_management_context_service_1.SystemManagementContextService],
    })
], SystemManagementContextModule);


/***/ }),

/***/ "./src/modules/context/system-management/system-management-context.service.ts":
/*!************************************************************************************!*\
  !*** ./src/modules/context/system-management/system-management-context.service.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var SystemManagementContextService_1;
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemManagementContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_service_1 = __webpack_require__(/*! ../../domain/system/system.service */ "./src/modules/domain/system/system.service.ts");
const system_role_service_1 = __webpack_require__(/*! ../../domain/system-role/system-role.service */ "./src/modules/domain/system-role/system-role.service.ts");
const employee_system_role_service_1 = __webpack_require__(/*! ../../domain/employee-system-role/employee-system-role.service */ "./src/modules/domain/employee-system-role/employee-system-role.service.ts");
let SystemManagementContextService = SystemManagementContextService_1 = class SystemManagementContextService {
    constructor(ÏãúÏä§ÌÖúÏÑúÎπÑÏä§, ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§, ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§) {
        this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§ = ÏãúÏä§ÌÖúÏÑúÎπÑÏä§;
        this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§ = ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§;
        this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§ = ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§;
        this.logger = new common_1.Logger(SystemManagementContextService_1.name);
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†_ÏÉùÏÑ±_ÎòêÎäî_Ï°∞Ìöå(systemId, roleCode, roleName, description, permissions) {
        try {
            const existingRole = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemIdAndRoleCode(systemId, roleCode);
            if (existingRole) {
                this.logger.log(`Í∏∞Ï°¥ ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÇ¨Ïö©: ${roleCode}`);
                return existingRole;
            }
        }
        catch (error) {
        }
        const newRole = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.createSystemRole({
            systemId,
            roleCode,
            roleName,
            description,
            permissions,
            sortOrder: 0,
        });
        this.logger.log(`ÏÉà ÏãúÏä§ÌÖú Ïó≠Ìï† ÏÉùÏÑ±: ${roleCode}`);
        return newRole;
    }
    async Ïó≠Ìï†_Ìï†Îãπ_ÏãúÎèÑ(employeeId, systemRoleId) {
        try {
            const existing = await this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findByEmployeeIdAndSystemRoleId(employeeId, systemRoleId);
            if (existing) {
                return;
            }
            await this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.assignRole(employeeId, systemRoleId);
        }
        catch (error) {
            if (error.message?.includes('Ïù¥ÎØ∏ Ìï†ÎãπÎêú Ïó≠Ìï†')) {
                return;
            }
            throw error;
        }
    }
    async ÏãúÏä§ÌÖúÏùÑ_ÏÉùÏÑ±ÌïúÎã§(data) {
        const existingSystem = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findByName(data.name);
        if (existingSystem) {
            throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶ÑÏûÖÎãàÎã§.');
        }
        const { clientId, clientSecret, hash } = this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.generateCredentials();
        const systemData = {
            clientId,
            clientSecret: hash,
            name: data.name,
            description: data.description,
            domain: data.domain,
            allowedOrigin: data.allowedOrigin,
            healthCheckUrl: data.healthCheckUrl,
            isActive: data.isActive ?? true,
        };
        const savedSystem = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.save(systemData);
        return {
            system: { ...savedSystem, roles: [] },
            originalSecret: clientSecret,
        };
    }
    async Î™®Îì†_ÏãúÏä§ÌÖúÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        const systems = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findAllSystems();
        const systemsWithRoles = await Promise.all(systems.map(async (system) => {
            const roles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(system.id);
            return { ...system, roles };
        }));
        return systemsWithRoles;
    }
    async ÏãúÏä§ÌÖúÏùÑ_Í≤ÄÏÉâÌïúÎã§(query) {
        const systems = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.searchSystems(query);
        const systemsWithRoles = await Promise.all(systems.map(async (system) => {
            const roles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(system.id);
            return { ...system, roles };
        }));
        return systemsWithRoles;
    }
    async ÏãúÏä§ÌÖúÏùÑ_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(systemId) {
        const system = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findOne({ where: { id: systemId } });
        if (!system) {
            return null;
        }
        const roles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(system.id);
        return { ...system, roles };
    }
    async ÏãúÏä§ÌÖúÏùÑ_ÏàòÏ†ïÌïúÎã§(systemId, data) {
        const system = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findOne({ where: { id: systemId } });
        if (!system) {
            throw new Error('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        if (data.name && data.name !== system.name) {
            const existingSystem = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findByName(data.name);
            if (existingSystem) {
                throw new Error('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏãúÏä§ÌÖú Ïù¥Î¶ÑÏûÖÎãàÎã§.');
            }
        }
        const updatedSystem = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.update(systemId, data);
        const roles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(systemId);
        return { ...updatedSystem, roles };
    }
    async ÏãúÏä§ÌÖú_ÌôúÏÑ±ÏÉÅÌÉúÎ•º_Î≥ÄÍ≤ΩÌïúÎã§(systemId, isActive) {
        const system = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findOne({ where: { id: systemId } });
        if (!system) {
            throw new Error('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const updatedSystem = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.update(systemId, { isActive });
        const roles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(systemId);
        return { ...updatedSystem, roles };
    }
    async ÏãúÏä§ÌÖúÏùÑ_ÏÇ≠Ï†úÌïúÎã§(systemId) {
        const system = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findOne({ where: { id: systemId } });
        if (!system) {
            throw new Error('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.delete(systemId);
    }
    async ÏãúÏä§ÌÖúÏùò_APIÌÇ§Î•º_Ïû¨ÏÉùÏÑ±ÌïúÎã§(systemId) {
        const system = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findOne({ where: { id: systemId } });
        if (!system) {
            throw new Error('Ìï¥Îãπ ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        const { clientSecret, hash } = this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.generateSecret();
        const updatedSystem = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.update(systemId, {
            clientSecret: hash,
        });
        const roles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(systemId);
        return {
            system: { ...updatedSystem, roles },
            originalSecret: clientSecret,
        };
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_ÏÉùÏÑ±ÌïúÎã§(data) {
        return this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.createSystemRole(data);
    }
    async Î™®Îì†_ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        const systemRoles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findAllSystemRoles();
        const uniqueSystemIds = new Set(systemRoles.map((role) => role.systemId));
        const allSystems = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findAllSystems();
        const systems = allSystems.filter((system) => uniqueSystemIds.has(system.id));
        const systemMap = new Map();
        systems.forEach((system) => {
            systemMap.set(system.id, system);
        });
        return systemRoles.map((role) => ({
            ...role,
            system: systemMap.get(role.systemId),
        }));
    }
    async ÏãúÏä§ÌÖúÏùò_Ïó≠Ìï†Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(systemId) {
        const systemRoles = await this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemId(systemId);
        const uniqueSystemIds = new Set(systemRoles.map((role) => role.systemId));
        const allSystems = await this.ÏãúÏä§ÌÖúÏÑúÎπÑÏä§.findAllSystems();
        const systems = allSystems.filter((system) => uniqueSystemIds.has(system.id));
        const systemMap = new Map();
        systems.forEach((system) => {
            systemMap.set(system.id, system);
        });
        return systemRoles.map((role) => ({
            ...role,
            system: systemMap.get(role.systemId),
        }));
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_IDÎ°ú_Ï°∞ÌöåÌïúÎã§(systemRoleId) {
        return this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findById(systemRoleId);
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_ÏàòÏ†ïÌïúÎã§(systemRoleId, data) {
        return this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.updateSystemRole(systemRoleId, data);
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_ÎπÑÌôúÏÑ±ÌôîÌïúÎã§(systemRoleId) {
        return this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.deactivateSystemRole(systemRoleId);
    }
    async ÏßÅÏõêÏóêÍ≤å_ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_Ìï†ÎãπÌïúÎã§(employeeId, systemRoleId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.assignRole(employeeId, systemRoleId);
    }
    async ÏßÅÏõêÏùò_ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_Ìï¥Ï†úÌïúÎã§(employeeId, systemRoleId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.unassignRole(employeeId, systemRoleId);
    }
    async ÏßÅÏõêÏùò_Î™®Îì†_ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_Ìï¥Ï†úÌïúÎã§(employeeId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.unassignAllRolesByEmployeeId(employeeId);
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†Ïùò_Î™®Îì†_Ìï†ÎãπÏùÑ_Ìï¥Ï†úÌïúÎã§(systemRoleId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.unassignAllRolesBySystemRoleId(systemRoleId);
    }
    async ÏßÅÏõêÏùò_ÏãúÏä§ÌÖúÏó≠Ìï†Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†Ïùò_ÏßÅÏõêÎ™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(systemRoleId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findBySystemRoleId(systemRoleId);
    }
    async ÏßÅÏõêÏù¥_ÏãúÏä§ÌÖúÏó≠Ìï†ÏùÑ_Í∞ÄÏßÄÍ≥†ÏûàÎäîÏßÄ_ÌôïÏù∏ÌïúÎã§(employeeId, systemRoleId) {
        const assignment = await this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findByEmployeeIdAndSystemRoleId(employeeId, systemRoleId);
        return !!assignment;
    }
    async ÏßÅÏõêÏùò_ÏãúÏä§ÌÖúÏó≠Ìï†IDÎ™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.getSystemRoleIdsByEmployeeId(employeeId);
    }
    async ÏãúÏä§ÌÖúÏó≠Ìï†Ïùò_ÏßÅÏõêIDÎ™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(systemRoleId) {
        return this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.getEmployeeIdsBySystemRoleId(systemRoleId);
    }
    async ÏßÅÏõêÏù¥_ÏãúÏä§ÌÖúÏóêÏÑú_Í∞ÄÏßÑ_Ïó≠Ìï†Î™©Î°ùÏùÑ_Ï°∞ÌöåÌïúÎã§(employeeId) {
        const employeeSystemRoles = await this.ÏßÅÏõêÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findByEmployeeId(employeeId);
        const systemRoles = employeeSystemRoles.map((esr) => esr.systemRole).filter(Boolean);
        return systemRoles;
    }
    async Î™®Îì†_Í∏∞Î≥∏Ïó≠Ìï†ÏùÑ_Ï°∞ÌöåÌïúÎã§() {
        return this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findDefaultRoles();
    }
    async ÏãúÏä§ÌÖúÏùò_Í∏∞Î≥∏Ïó≠Ìï†ÏùÑ_Ï°∞ÌöåÌïúÎã§(systemId) {
        return this.ÏãúÏä§ÌÖúÏó≠Ìï†ÏÑúÎπÑÏä§.findDefaultRolesBySystemId(systemId);
    }
    async ÏßÅÏõêÏóêÍ≤å_Í∏∞Î≥∏Ïó≠Ìï†Îì§ÏùÑ_Ìï†ÎãπÌïúÎã§(employeeId) {
        const defaultRoles = await this.Î™®Îì†_Í∏∞Î≥∏Ïó≠Ìï†ÏùÑ_Ï°∞ÌöåÌïúÎã§();
        if (defaultRoles.length === 0) {
            this.logger.log('Ìï†ÎãπÌï† Í∏∞Î≥∏ Ïó≠Ìï†Ïù¥ ÏóÜÏäµÎãàÎã§.');
            return;
        }
        for (const role of defaultRoles) {
            await this.Ïó≠Ìï†_Ìï†Îãπ_ÏãúÎèÑ(employeeId, role.id);
        }
        this.logger.log(`ÏßÅÏõê ${employeeId}ÏóêÍ≤å ${defaultRoles.length}Í∞úÏùò Í∏∞Î≥∏ Ïó≠Ìï†ÏùÑ Ìï†ÎãπÌñàÏäµÎãàÎã§.`);
    }
};
exports.SystemManagementContextService = SystemManagementContextService;
exports.SystemManagementContextService = SystemManagementContextService = SystemManagementContextService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof system_service_1.DomainSystemService !== "undefined" && system_service_1.DomainSystemService) === "function" ? _a : Object, typeof (_b = typeof system_role_service_1.DomainSystemRoleService !== "undefined" && system_role_service_1.DomainSystemRoleService) === "function" ? _b : Object, typeof (_c = typeof employee_system_role_service_1.DomainEmployeeSystemRoleService !== "undefined" && employee_system_role_service_1.DomainEmployeeSystemRoleService) === "function" ? _c : Object])
], SystemManagementContextService);


/***/ }),

/***/ "./src/modules/domain/department/department.entity.ts":
/*!************************************************************!*\
  !*** ./src/modules/domain/department/department.entity.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Department = exports.DepartmentType = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
var DepartmentType;
(function (DepartmentType) {
    DepartmentType["COMPANY"] = "COMPANY";
    DepartmentType["DIVISION"] = "DIVISION";
    DepartmentType["DEPARTMENT"] = "DEPARTMENT";
    DepartmentType["TEAM"] = "TEAM";
})(DepartmentType || (exports.DepartmentType = DepartmentType = {}));
let Department = class Department {
};
exports.Department = Department;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Department.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Î∂ÄÏÑúÎ™Ö' }),
    __metadata("design:type", String)
], Department.prototype, "departmentName", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'Î∂ÄÏÑú ÏΩîÎìú' }),
    __metadata("design:type", String)
], Department.prototype, "departmentCode", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïú†Ìòï', type: 'enum', enum: DepartmentType, default: DepartmentType.DEPARTMENT }),
    __metadata("design:type", String)
], Department.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏÉÅÏúÑ Î∂ÄÏÑú ID', type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "parentDepartmentId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ï†ïÎ†¨ ÏàúÏÑú', default: 0 }),
    __metadata("design:type", Number)
], Department.prototype, "order", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', type: 'boolean', default: true }),
    __metadata("design:type", Boolean)
], Department.prototype, "isActive", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏòàÏô∏Ï≤òÎ¶¨ Ïó¨Î∂Ä', type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], Department.prototype, "isException", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => Department, (department) => department.childDepartments, { nullable: true }),
    (0, typeorm_1.JoinColumn)({ name: 'parentDepartmentId' }),
    __metadata("design:type", Department)
], Department.prototype, "parentDepartment", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => Department, (department) => department.parentDepartment),
    __metadata("design:type", Array)
], Department.prototype, "childDepartments", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Department.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Department.prototype, "updatedAt", void 0);
exports.Department = Department = __decorate([
    (0, typeorm_1.Entity)('departments'),
    (0, typeorm_1.Unique)('UQ_departments_parent_order', ['parentDepartmentId', 'order']),
    (0, typeorm_1.Index)('IDX_departments_parent_order', ['parentDepartmentId', 'order']),
    (0, typeorm_1.Index)('UQ_departments_root_order', ['order'], {
        unique: true,
        where: '"parentDepartmentId" IS NULL',
    })
], Department);


/***/ }),

/***/ "./src/modules/domain/department/department.module.ts":
/*!************************************************************!*\
  !*** ./src/modules/domain/department/department.module.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainDepartmentModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const department_service_1 = __webpack_require__(/*! ./department.service */ "./src/modules/domain/department/department.service.ts");
const department_repository_1 = __webpack_require__(/*! ./department.repository */ "./src/modules/domain/department/department.repository.ts");
const department_entity_1 = __webpack_require__(/*! ./department.entity */ "./src/modules/domain/department/department.entity.ts");
let DomainDepartmentModule = class DomainDepartmentModule {
};
exports.DomainDepartmentModule = DomainDepartmentModule;
exports.DomainDepartmentModule = DomainDepartmentModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([department_entity_1.Department])],
        providers: [department_service_1.DomainDepartmentService, department_repository_1.DomainDepartmentRepository],
        exports: [department_service_1.DomainDepartmentService, department_repository_1.DomainDepartmentRepository],
    })
], DomainDepartmentModule);


/***/ }),

/***/ "./src/modules/domain/department/department.repository.ts":
/*!****************************************************************!*\
  !*** ./src/modules/domain/department/department.repository.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainDepartmentRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainDepartmentRepository = class DomainDepartmentRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        const result = await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return result.filter((department) => department.isException === false);
    }
};
exports.DomainDepartmentRepository = DomainDepartmentRepository;
exports.DomainDepartmentRepository = DomainDepartmentRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Department)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainDepartmentRepository);


/***/ }),

/***/ "./src/modules/domain/department/department.service.ts":
/*!*************************************************************!*\
  !*** ./src/modules/domain/department/department.service.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var DomainDepartmentService_1;
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainDepartmentService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const department_repository_1 = __webpack_require__(/*! ./department.repository */ "./src/modules/domain/department/department.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainDepartmentService = DomainDepartmentService_1 = class DomainDepartmentService extends base_service_1.BaseService {
    constructor(departmentRepository) {
        super(departmentRepository);
        this.departmentRepository = departmentRepository;
        this.logger = new common_1.Logger(DomainDepartmentService_1.name);
    }
    async findById(departmentId) {
        const department = await this.departmentRepository.findOne({
            where: { id: departmentId },
        });
        return department;
    }
    async findByIdWithParent(departmentId) {
        const department = await this.departmentRepository.findOne({
            where: { id: departmentId },
            relations: ['parentDepartment'],
        });
        return department;
    }
    async findByIds(departmentIds) {
        if (departmentIds.length === 0)
            return [];
        return this.departmentRepository.findAll({
            where: { id: (0, typeorm_1.In)(departmentIds) },
        });
    }
    async findByIdsWithParent(departmentIds) {
        if (departmentIds.length === 0)
            return [];
        return this.departmentRepository.findAll({
            where: { id: (0, typeorm_1.In)(departmentIds) },
            relations: ['parentDepartment'],
        });
    }
    async findByName(departmentName) {
        const department = await this.departmentRepository.findOne({
            where: { departmentName },
        });
        if (!department) {
            throw new common_1.NotFoundException('Î∂ÄÏÑúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return department;
    }
    async findByCode(departmentCode) {
        const department = await this.departmentRepository.findOne({
            where: { departmentCode },
        });
        return department;
    }
    async findByDepartmentCode(departmentCode) {
        return this.findByCode(departmentCode);
    }
    async findAllDepartments() {
        return this.departmentRepository.findAll({
            order: { departmentName: 'ASC' },
        });
    }
    async findRootDepartments() {
        return this.departmentRepository.findAll({
            where: { parentDepartmentId: null },
            order: { order: 'ASC' },
        });
    }
    async findAllDepartmentsWithChildren() {
        return this.departmentRepository.findAll({
            order: { order: 'ASC' },
        });
    }
    async findChildDepartments(departmentId) {
        return this.departmentRepository.findAll({
            where: { parentDepartmentId: departmentId },
            order: { order: 'ASC' },
        });
    }
    async createDepartment(data) {
        return this.save(data);
    }
    async updateDepartment(departmentId, data) {
        return this.update(departmentId, data);
    }
    async deleteDepartment(departmentId) {
        return this.delete(departmentId);
    }
    async exists(departmentId) {
        const department = await this.findById(departmentId);
        console.log('department', department);
        if (department) {
            return true;
        }
        return false;
    }
    async isCodeDuplicate(departmentCode, excludeId) {
        const department = await this.findByCode(departmentCode);
        if (department) {
            return true;
        }
        return false;
    }
    async findDepartmentsInOrderRange(parentDepartmentId, minOrder, maxOrder) {
        const queryBuilder = this.departmentRepository.createQueryBuilder('department');
        if (parentDepartmentId === null) {
            queryBuilder.where('department.parentDepartmentId IS NULL');
        }
        else {
            queryBuilder.where('department.parentDepartmentId = :parentDepartmentId', { parentDepartmentId });
        }
        return queryBuilder
            .andWhere('department.order >= :minOrder', { minOrder })
            .andWhere('department.order <= :maxOrder', { maxOrder })
            .orderBy('department.order', 'ASC')
            .getMany();
    }
    async bulkUpdateOrders(updates) {
        await this.departmentRepository.manager.transaction(async (transactionalEntityManager) => {
            const tempOffset = -1000000;
            for (let i = 0; i < updates.length; i++) {
                await transactionalEntityManager.update(entities_1.Department, { id: updates[i].id }, { order: tempOffset - i });
            }
            for (const update of updates) {
                await transactionalEntityManager.update(entities_1.Department, { id: update.id }, { order: update.order });
            }
        });
    }
    async bulkUpdate(departmentIds, updateData) {
        if (departmentIds.length === 0)
            return;
        await this.departmentRepository.manager.transaction(async (transactionalEntityManager) => {
            for (const id of departmentIds) {
                await transactionalEntityManager.update(entities_1.Department, { id }, updateData);
            }
        });
    }
    async countByParentDepartmentId(parentDepartmentId) {
        const queryBuilder = this.departmentRepository.createQueryBuilder('department');
        if (parentDepartmentId === null) {
            queryBuilder.where('department.parentDepartmentId IS NULL');
        }
        else {
            queryBuilder.where('department.parentDepartmentId = :parentDepartmentId', { parentDepartmentId });
        }
        return queryBuilder.getCount();
    }
    async getNextOrderForParent(parentDepartmentId) {
        const count = await this.countByParentDepartmentId(parentDepartmentId);
        return count;
    }
};
exports.DomainDepartmentService = DomainDepartmentService;
exports.DomainDepartmentService = DomainDepartmentService = DomainDepartmentService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof department_repository_1.DomainDepartmentRepository !== "undefined" && department_repository_1.DomainDepartmentRepository) === "function" ? _a : Object])
], DomainDepartmentService);


/***/ }),

/***/ "./src/modules/domain/employee-department-position/employee-department-position.entity.ts":
/*!************************************************************************************************!*\
  !*** ./src/modules/domain/employee-department-position/employee-department-position.entity.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeDepartmentPosition = exports.ManagerType = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ../employee/employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const department_entity_1 = __webpack_require__(/*! ../department/department.entity */ "./src/modules/domain/department/department.entity.ts");
const position_entity_1 = __webpack_require__(/*! ../position/position.entity */ "./src/modules/domain/position/position.entity.ts");
var ManagerType;
(function (ManagerType) {
    ManagerType["DIRECT"] = "direct";
    ManagerType["FUNCTIONAL"] = "functional";
    ManagerType["PROJECT"] = "project";
    ManagerType["TEMPORARY"] = "temporary";
    ManagerType["DEPUTY"] = "deputy";
})(ManagerType || (exports.ManagerType = ManagerType = {}));
let EmployeeDepartmentPosition = class EmployeeDepartmentPosition {
};
exports.EmployeeDepartmentPosition = EmployeeDepartmentPosition;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmployeeDepartmentPosition.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÏõê ID', type: 'uuid' }),
    __metadata("design:type", String)
], EmployeeDepartmentPosition.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Î∂ÄÏÑú ID', type: 'uuid' }),
    __metadata("design:type", String)
], EmployeeDepartmentPosition.prototype, "departmentId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÏ±Ö ID', type: 'uuid' }),
    __metadata("design:type", String)
], EmployeeDepartmentPosition.prototype, "positionId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Í¥ÄÎ¶¨Ïûê Í∂åÌïú Ïó¨Î∂Ä', type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], EmployeeDepartmentPosition.prototype, "isManager", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeDepartmentPosition.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeDepartmentPosition.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_c = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _c : Object)
], EmployeeDepartmentPosition.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => department_entity_1.Department),
    (0, typeorm_1.JoinColumn)({ name: 'departmentId' }),
    __metadata("design:type", typeof (_d = typeof department_entity_1.Department !== "undefined" && department_entity_1.Department) === "function" ? _d : Object)
], EmployeeDepartmentPosition.prototype, "department", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => position_entity_1.Position),
    (0, typeorm_1.JoinColumn)({ name: 'positionId' }),
    __metadata("design:type", typeof (_e = typeof position_entity_1.Position !== "undefined" && position_entity_1.Position) === "function" ? _e : Object)
], EmployeeDepartmentPosition.prototype, "position", void 0);
exports.EmployeeDepartmentPosition = EmployeeDepartmentPosition = __decorate([
    (0, typeorm_1.Entity)('employee_department_positions'),
    (0, typeorm_1.Unique)(['employeeId', 'departmentId']),
    (0, typeorm_1.Index)(['employeeId']),
    (0, typeorm_1.Index)(['departmentId']),
    (0, typeorm_1.Index)(['positionId'])
], EmployeeDepartmentPosition);


/***/ }),

/***/ "./src/modules/domain/employee-department-position/employee-department-position.module.ts":
/*!************************************************************************************************!*\
  !*** ./src/modules/domain/employee-department-position/employee-department-position.module.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeDepartmentPositionModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_department_position_service_1 = __webpack_require__(/*! ./employee-department-position.service */ "./src/modules/domain/employee-department-position/employee-department-position.service.ts");
const employee_department_position_repository_1 = __webpack_require__(/*! ./employee-department-position.repository */ "./src/modules/domain/employee-department-position/employee-department-position.repository.ts");
const employee_department_position_entity_1 = __webpack_require__(/*! ./employee-department-position.entity */ "./src/modules/domain/employee-department-position/employee-department-position.entity.ts");
let DomainEmployeeDepartmentPositionModule = class DomainEmployeeDepartmentPositionModule {
};
exports.DomainEmployeeDepartmentPositionModule = DomainEmployeeDepartmentPositionModule;
exports.DomainEmployeeDepartmentPositionModule = DomainEmployeeDepartmentPositionModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_department_position_entity_1.EmployeeDepartmentPosition])],
        providers: [employee_department_position_service_1.DomainEmployeeDepartmentPositionService, employee_department_position_repository_1.DomainEmployeeDepartmentPositionRepository],
        exports: [employee_department_position_service_1.DomainEmployeeDepartmentPositionService],
    })
], DomainEmployeeDepartmentPositionModule);


/***/ }),

/***/ "./src/modules/domain/employee-department-position/employee-department-position.repository.ts":
/*!****************************************************************************************************!*\
  !*** ./src/modules/domain/employee-department-position/employee-department-position.repository.ts ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeDepartmentPositionRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainEmployeeDepartmentPositionRepository = class DomainEmployeeDepartmentPositionRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEmployeeDepartmentPositionRepository = DomainEmployeeDepartmentPositionRepository;
exports.DomainEmployeeDepartmentPositionRepository = DomainEmployeeDepartmentPositionRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.EmployeeDepartmentPosition)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeDepartmentPositionRepository);


/***/ }),

/***/ "./src/modules/domain/employee-department-position/employee-department-position.service.ts":
/*!*************************************************************************************************!*\
  !*** ./src/modules/domain/employee-department-position/employee-department-position.service.ts ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeDepartmentPositionService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_department_position_repository_1 = __webpack_require__(/*! ./employee-department-position.repository */ "./src/modules/domain/employee-department-position/employee-department-position.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! libs/database/entities */ "./libs/database/entities/index.ts");
let DomainEmployeeDepartmentPositionService = class DomainEmployeeDepartmentPositionService extends base_service_1.BaseService {
    constructor(employeeDepartmentPositionRepository) {
        super(employeeDepartmentPositionRepository);
        this.employeeDepartmentPositionRepository = employeeDepartmentPositionRepository;
    }
    async findByEmployeeId(employeeId) {
        return this.employeeDepartmentPositionRepository.findOne({
            where: { employeeId, department: { type: entities_1.DepartmentType.DEPARTMENT } },
        });
    }
    async findAllByEmployeeIds(employeeIds) {
        return this.employeeDepartmentPositionRepository.findAll({
            where: { employeeId: (0, typeorm_1.In)(employeeIds) },
            order: { createdAt: 'DESC' },
        });
    }
    async findAllByEmployeeId(employeeId) {
        return this.employeeDepartmentPositionRepository.findAll({
            where: { employeeId },
            order: { createdAt: 'DESC' },
        });
    }
    async findById(assignmentId) {
        return this.employeeDepartmentPositionRepository.findOne({
            where: { id: assignmentId },
        });
    }
    async findByDepartmentId(departmentId) {
        return this.employeeDepartmentPositionRepository.findAll({
            where: { departmentId },
            order: { createdAt: 'DESC' },
        });
    }
    async findByDepartmentIds(departmentIds) {
        if (departmentIds.length === 0)
            return [];
        return this.employeeDepartmentPositionRepository.findAll({
            where: { departmentId: (0, typeorm_1.In)(departmentIds) },
            order: { departmentId: 'ASC', createdAt: 'DESC' },
        });
    }
    async findByPositionId(positionId) {
        return this.employeeDepartmentPositionRepository.findAll({
            where: { positionId },
            order: { createdAt: 'DESC' },
        });
    }
    async findByEmployeeAndDepartment(employeeId, departmentId) {
        const position = await this.employeeDepartmentPositionRepository.findOne({
            where: { employeeId, departmentId },
        });
        if (!position) {
            throw new common_1.NotFoundException('Ìï¥Îãπ Î∂ÄÏÑúÏóêÏÑú ÏßÅÏõêÏùò ÏßÅÏ±ÖÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return position;
    }
    async createEmployeeDepartmentPosition(employeeId, departmentId, positionId) {
        return this.employeeDepartmentPositionRepository.save({
            employeeId,
            departmentId,
            positionId,
        });
    }
    async deleteEmployeeDepartmentPosition(id) {
        await this.employeeDepartmentPositionRepository.delete(id);
    }
    async transferEmployee(employeeId, newDepartmentId, newPositionId) {
        return this.createEmployeeDepartmentPosition(employeeId, newDepartmentId, newPositionId);
    }
    async getDepartmentPositionStats(departmentId) {
        const positions = await this.findByDepartmentId(departmentId);
        const stats = positions.reduce((acc, position) => {
            acc[position.positionId] = (acc[position.positionId] || 0) + 1;
            return acc;
        }, {});
        return stats;
    }
    async findCurrentPositionByEmployeeId(employeeId) {
        const positions = await this.employeeDepartmentPositionRepository.findAll({
            where: { employeeId },
            order: { createdAt: 'DESC' },
            take: 1,
        });
        if (!positions.length) {
            throw new common_1.NotFoundException('ÏßÅÏõêÏùò Î∂ÄÏÑú-ÏßÅÏ±Ö Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return positions[0];
    }
    async findManagersByDepartment(departmentId) {
        return this.employeeDepartmentPositionRepository.findAll({
            where: { departmentId },
            order: { createdAt: 'DESC' },
        });
    }
    async findRecentOrganizationChanges(limit = 20) {
        return this.employeeDepartmentPositionRepository.findAll({
            order: { createdAt: 'DESC' },
            take: limit,
        });
    }
    async findAllAssignments() {
        return this.employeeDepartmentPositionRepository.findAll({
            order: { createdAt: 'DESC' },
        });
    }
    async createAssignment(data) {
        return this.save(data);
    }
    async updateAssignment(assignmentId, data) {
        return this.update(assignmentId, data);
    }
    async deleteAssignment(assignmentId) {
        return this.delete(assignmentId);
    }
};
exports.DomainEmployeeDepartmentPositionService = DomainEmployeeDepartmentPositionService;
exports.DomainEmployeeDepartmentPositionService = DomainEmployeeDepartmentPositionService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_department_position_repository_1.DomainEmployeeDepartmentPositionRepository !== "undefined" && employee_department_position_repository_1.DomainEmployeeDepartmentPositionRepository) === "function" ? _a : Object])
], DomainEmployeeDepartmentPositionService);


/***/ }),

/***/ "./src/modules/domain/employee-fcm-token/employee-fcm-token.entity.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/domain/employee-fcm-token/employee-fcm-token.entity.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeFcmToken = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ../employee/employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const fcm_token_entity_1 = __webpack_require__(/*! ../fcm-token/fcm-token.entity */ "./src/modules/domain/fcm-token/fcm-token.entity.ts");
let EmployeeFcmToken = class EmployeeFcmToken {
};
exports.EmployeeFcmToken = EmployeeFcmToken;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmployeeFcmToken.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeFcmToken.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'FCM ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeFcmToken.prototype, "fcmTokenId", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'Ïó∞Í≤∞ ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeFcmToken.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'Ïó∞Í≤∞ ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeFcmToken.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_c = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _c : Object)
], EmployeeFcmToken.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => fcm_token_entity_1.FcmToken),
    (0, typeorm_1.JoinColumn)({ name: 'fcmTokenId' }),
    __metadata("design:type", typeof (_d = typeof fcm_token_entity_1.FcmToken !== "undefined" && fcm_token_entity_1.FcmToken) === "function" ? _d : Object)
], EmployeeFcmToken.prototype, "fcmToken", void 0);
exports.EmployeeFcmToken = EmployeeFcmToken = __decorate([
    (0, typeorm_1.Entity)('employee_fcm_tokens'),
    (0, typeorm_1.Index)(['employeeId', 'fcmTokenId'], { unique: true }),
    (0, typeorm_1.Index)(['employeeId']),
    (0, typeorm_1.Index)(['fcmTokenId'])
], EmployeeFcmToken);


/***/ }),

/***/ "./src/modules/domain/employee-fcm-token/employee-fcm-token.module.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/domain/employee-fcm-token/employee-fcm-token.module.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeFcmTokenModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_fcm_token_service_1 = __webpack_require__(/*! ./employee-fcm-token.service */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.service.ts");
const employee_fcm_token_repository_1 = __webpack_require__(/*! ./employee-fcm-token.repository */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.repository.ts");
const employee_fcm_token_entity_1 = __webpack_require__(/*! ./employee-fcm-token.entity */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.entity.ts");
let DomainEmployeeFcmTokenModule = class DomainEmployeeFcmTokenModule {
};
exports.DomainEmployeeFcmTokenModule = DomainEmployeeFcmTokenModule;
exports.DomainEmployeeFcmTokenModule = DomainEmployeeFcmTokenModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_fcm_token_entity_1.EmployeeFcmToken])],
        providers: [employee_fcm_token_service_1.DomainEmployeeFcmTokenService, employee_fcm_token_repository_1.DomainEmployeeFcmTokenRepository],
        exports: [employee_fcm_token_service_1.DomainEmployeeFcmTokenService],
    })
], DomainEmployeeFcmTokenModule);


/***/ }),

/***/ "./src/modules/domain/employee-fcm-token/employee-fcm-token.repository.ts":
/*!********************************************************************************!*\
  !*** ./src/modules/domain/employee-fcm-token/employee-fcm-token.repository.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeFcmTokenRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_fcm_token_entity_1 = __webpack_require__(/*! ./employee-fcm-token.entity */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.entity.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainEmployeeFcmTokenRepository = class DomainEmployeeFcmTokenRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEmployeeFcmTokenRepository = DomainEmployeeFcmTokenRepository;
exports.DomainEmployeeFcmTokenRepository = DomainEmployeeFcmTokenRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(employee_fcm_token_entity_1.EmployeeFcmToken)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeFcmTokenRepository);


/***/ }),

/***/ "./src/modules/domain/employee-fcm-token/employee-fcm-token.service.ts":
/*!*****************************************************************************!*\
  !*** ./src/modules/domain/employee-fcm-token/employee-fcm-token.service.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeFcmTokenService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_fcm_token_repository_1 = __webpack_require__(/*! ./employee-fcm-token.repository */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainEmployeeFcmTokenService = class DomainEmployeeFcmTokenService extends base_service_1.BaseService {
    constructor(employeeFcmTokenRepository) {
        super(employeeFcmTokenRepository);
        this.employeeFcmTokenRepository = employeeFcmTokenRepository;
    }
    async findByEmployeeId(employeeId) {
        return this.employeeFcmTokenRepository.findAll({
            where: { employeeId },
            relations: ['fcmToken'],
        });
    }
    async findByEmployeeIds(employeeIds) {
        if (employeeIds.length === 0)
            return [];
        return this.employeeFcmTokenRepository.findAll({
            where: { employeeId: (0, typeorm_1.In)(employeeIds) },
            relations: ['fcmToken'],
        });
    }
    async findByFcmTokenId(fcmTokenId) {
        return this.employeeFcmTokenRepository.findAll({
            where: { fcmTokenId },
            relations: ['employee'],
        });
    }
    async createOrUpdateRelation(employeeId, fcmTokenId) {
        const existingRelation = await this.employeeFcmTokenRepository.findOne({
            where: { employeeId, fcmTokenId },
        });
        if (existingRelation) {
            return this.employeeFcmTokenRepository.update(existingRelation.id, {
                updatedAt: new Date(),
            });
        }
        return this.employeeFcmTokenRepository.save({
            employeeId,
            fcmTokenId,
        });
    }
    async findRelation(employeeId, fcmTokenId) {
        return this.employeeFcmTokenRepository.findOne({
            where: { employeeId, fcmTokenId },
        });
    }
    async deleteRelation(employeeId, fcmTokenId) {
        const relation = await this.findRelation(employeeId, fcmTokenId);
        if (relation) {
            await this.employeeFcmTokenRepository.delete(relation.id);
        }
    }
    async deleteAllByEmployeeId(employeeId) {
        const relations = await this.findByEmployeeId(employeeId);
        for (const relation of relations) {
            await this.employeeFcmTokenRepository.delete(relation.id);
        }
    }
    async updateUsage(employeeId, fcmTokenId) {
        const relation = await this.employeeFcmTokenRepository.findOne({
            where: { employeeId, fcmTokenId },
        });
        if (!relation) {
            throw new common_1.NotFoundException('ÏßÅÏõêÍ≥º FCM ÌÜ†ÌÅ∞Ïùò Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return this.employeeFcmTokenRepository.update(relation.id, {
            updatedAt: new Date(),
        });
    }
    async countEmployeesByFcmToken(fcmTokenId) {
        return this.employeeFcmTokenRepository.count({
            where: { fcmTokenId },
        });
    }
    async countFcmTokensByEmployee(employeeId) {
        return this.employeeFcmTokenRepository.count({
            where: { employeeId },
        });
    }
    async deleteOldTokens(cutoffDate) {
        const relations = await this.employeeFcmTokenRepository.findAll({
            where: {},
        });
        let count = 0;
        for (const relation of relations) {
            if (relation.updatedAt && relation.updatedAt < cutoffDate) {
                await this.employeeFcmTokenRepository.delete(relation.id);
                count++;
            }
        }
        return count;
    }
    async updateTokenUsage(fcmTokenId) {
        const relations = await this.employeeFcmTokenRepository.findAll({
            where: { fcmTokenId },
        });
        for (const relation of relations) {
            await this.employeeFcmTokenRepository.update(relation.id, {
                updatedAt: new Date(),
            });
        }
    }
};
exports.DomainEmployeeFcmTokenService = DomainEmployeeFcmTokenService;
exports.DomainEmployeeFcmTokenService = DomainEmployeeFcmTokenService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_fcm_token_repository_1.DomainEmployeeFcmTokenRepository !== "undefined" && employee_fcm_token_repository_1.DomainEmployeeFcmTokenRepository) === "function" ? _a : Object])
], DomainEmployeeFcmTokenService);


/***/ }),

/***/ "./src/modules/domain/employee-rank-history/employee-rank-history.entity.ts":
/*!**********************************************************************************!*\
  !*** ./src/modules/domain/employee-rank-history/employee-rank-history.entity.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeRankHistory = exports.PromotionType = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ../employee/employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const rank_entity_1 = __webpack_require__(/*! ../rank/rank.entity */ "./src/modules/domain/rank/rank.entity.ts");
var PromotionType;
(function (PromotionType) {
    PromotionType["INITIAL"] = "initial";
    PromotionType["PROMOTION"] = "promotion";
    PromotionType["DEMOTION"] = "demotion";
    PromotionType["ADJUSTMENT"] = "adjustment";
})(PromotionType || (exports.PromotionType = PromotionType = {}));
let EmployeeRankHistory = class EmployeeRankHistory {
};
exports.EmployeeRankHistory = EmployeeRankHistory;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmployeeRankHistory.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÏõê ID', type: 'uuid' }),
    __metadata("design:type", String)
], EmployeeRankHistory.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÍ∏â ID', type: 'uuid' }),
    __metadata("design:type", String)
], EmployeeRankHistory.prototype, "rankId", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeRankHistory.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], EmployeeRankHistory.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeRankHistory.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => rank_entity_1.Rank),
    (0, typeorm_1.JoinColumn)({ name: 'rankId' }),
    __metadata("design:type", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], EmployeeRankHistory.prototype, "rank", void 0);
exports.EmployeeRankHistory = EmployeeRankHistory = __decorate([
    (0, typeorm_1.Entity)('employee_rank_histories'),
    (0, typeorm_1.Index)(['employeeId', 'rankId'])
], EmployeeRankHistory);


/***/ }),

/***/ "./src/modules/domain/employee-rank-history/employee-rank-history.module.ts":
/*!**********************************************************************************!*\
  !*** ./src/modules/domain/employee-rank-history/employee-rank-history.module.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeRankHistoryModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_rank_history_service_1 = __webpack_require__(/*! ./employee-rank-history.service */ "./src/modules/domain/employee-rank-history/employee-rank-history.service.ts");
const employee_rank_history_repository_1 = __webpack_require__(/*! ./employee-rank-history.repository */ "./src/modules/domain/employee-rank-history/employee-rank-history.repository.ts");
const employee_rank_history_entity_1 = __webpack_require__(/*! ./employee-rank-history.entity */ "./src/modules/domain/employee-rank-history/employee-rank-history.entity.ts");
let DomainEmployeeRankHistoryModule = class DomainEmployeeRankHistoryModule {
};
exports.DomainEmployeeRankHistoryModule = DomainEmployeeRankHistoryModule;
exports.DomainEmployeeRankHistoryModule = DomainEmployeeRankHistoryModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_rank_history_entity_1.EmployeeRankHistory])],
        providers: [employee_rank_history_service_1.DomainEmployeeRankHistoryService, employee_rank_history_repository_1.DomainEmployeeRankHistoryRepository],
        exports: [employee_rank_history_service_1.DomainEmployeeRankHistoryService],
    })
], DomainEmployeeRankHistoryModule);


/***/ }),

/***/ "./src/modules/domain/employee-rank-history/employee-rank-history.repository.ts":
/*!**************************************************************************************!*\
  !*** ./src/modules/domain/employee-rank-history/employee-rank-history.repository.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeRankHistoryRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainEmployeeRankHistoryRepository = class DomainEmployeeRankHistoryRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEmployeeRankHistoryRepository = DomainEmployeeRankHistoryRepository;
exports.DomainEmployeeRankHistoryRepository = DomainEmployeeRankHistoryRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.EmployeeRankHistory)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeRankHistoryRepository);


/***/ }),

/***/ "./src/modules/domain/employee-rank-history/employee-rank-history.service.ts":
/*!***********************************************************************************!*\
  !*** ./src/modules/domain/employee-rank-history/employee-rank-history.service.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeRankHistoryService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_rank_history_repository_1 = __webpack_require__(/*! ./employee-rank-history.repository */ "./src/modules/domain/employee-rank-history/employee-rank-history.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
let DomainEmployeeRankHistoryService = class DomainEmployeeRankHistoryService extends base_service_1.BaseService {
    constructor(employeeRankHistoryRepository) {
        super(employeeRankHistoryRepository);
        this.employeeRankHistoryRepository = employeeRankHistoryRepository;
    }
    async findByEmployeeId(employeeId) {
        return this.employeeRankHistoryRepository.findAll({
            where: { employeeId },
            order: { createdAt: 'DESC' },
        });
    }
    async findByRankId(rankId) {
        return this.employeeRankHistoryRepository.findAll({
            where: { rankId },
            order: { createdAt: 'DESC' },
        });
    }
    async findCurrentRankByEmployeeId(employeeId) {
        const histories = await this.employeeRankHistoryRepository.findAll({
            where: { employeeId },
            order: { createdAt: 'DESC' },
            take: 1,
        });
        if (!histories.length) {
            throw new common_1.NotFoundException('ÏßÅÏõêÏùò ÏßÅÍ∏â Ïù¥Î†•ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return histories[0];
    }
    async findByEmployeeAndRank(employeeId, rankId) {
        return this.employeeRankHistoryRepository.findAll({
            where: { employeeId, rankId },
            order: { createdAt: 'DESC' },
        });
    }
    async createRankHistory(employeeId, rankId) {
        return this.employeeRankHistoryRepository.save({
            employeeId,
            rankId,
        });
    }
    async findByDateRange(startDate, endDate) {
        return this.employeeRankHistoryRepository.findAll({
            order: { createdAt: 'DESC' },
        });
    }
    async getRankChangeCountByEmployeeId(employeeId) {
        const histories = await this.findByEmployeeId(employeeId);
        return histories.length;
    }
    async findRecentRankChanges(limit = 20) {
        return this.employeeRankHistoryRepository.findAll({
            order: { createdAt: 'DESC' },
            take: limit,
        });
    }
    async findById(historyId) {
        return this.employeeRankHistoryRepository.findOne({
            where: { id: historyId },
        });
    }
    async createHistory(data) {
        return this.save(data);
    }
    async deleteHistory(historyId) {
        return this.delete(historyId);
    }
};
exports.DomainEmployeeRankHistoryService = DomainEmployeeRankHistoryService;
exports.DomainEmployeeRankHistoryService = DomainEmployeeRankHistoryService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_rank_history_repository_1.DomainEmployeeRankHistoryRepository !== "undefined" && employee_rank_history_repository_1.DomainEmployeeRankHistoryRepository) === "function" ? _a : Object])
], DomainEmployeeRankHistoryService);


/***/ }),

/***/ "./src/modules/domain/employee-system-role/employee-system-role.entity.ts":
/*!********************************************************************************!*\
  !*** ./src/modules/domain/employee-system-role/employee-system-role.entity.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeSystemRole = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ../employee/employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const system_role_entity_1 = __webpack_require__(/*! ../system-role/system-role.entity */ "./src/modules/domain/system-role/system-role.entity.ts");
let EmployeeSystemRole = class EmployeeSystemRole {
};
exports.EmployeeSystemRole = EmployeeSystemRole;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmployeeSystemRole.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeSystemRole.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_a = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _a : Object)
], EmployeeSystemRole.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏãúÏä§ÌÖú Ïó≠Ìï† ID' }),
    __metadata("design:type", String)
], EmployeeSystemRole.prototype, "systemRoleId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => system_role_entity_1.SystemRole, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'systemRoleId' }),
    __metadata("design:type", typeof (_b = typeof system_role_entity_1.SystemRole !== "undefined" && system_role_entity_1.SystemRole) === "function" ? _b : Object)
], EmployeeSystemRole.prototype, "systemRole", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], EmployeeSystemRole.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], EmployeeSystemRole.prototype, "updatedAt", void 0);
exports.EmployeeSystemRole = EmployeeSystemRole = __decorate([
    (0, typeorm_1.Entity)('employee_system_roles'),
    (0, typeorm_1.Index)(['employeeId', 'systemRoleId'], { unique: true }),
    (0, typeorm_1.Index)(['employeeId']),
    (0, typeorm_1.Index)(['systemRoleId']),
    (0, typeorm_1.Index)(['createdAt'])
], EmployeeSystemRole);


/***/ }),

/***/ "./src/modules/domain/employee-system-role/employee-system-role.module.ts":
/*!********************************************************************************!*\
  !*** ./src/modules/domain/employee-system-role/employee-system-role.module.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeSystemRoleModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_system_role_entity_1 = __webpack_require__(/*! ./employee-system-role.entity */ "./src/modules/domain/employee-system-role/employee-system-role.entity.ts");
const employee_system_role_repository_1 = __webpack_require__(/*! ./employee-system-role.repository */ "./src/modules/domain/employee-system-role/employee-system-role.repository.ts");
const employee_system_role_service_1 = __webpack_require__(/*! ./employee-system-role.service */ "./src/modules/domain/employee-system-role/employee-system-role.service.ts");
let DomainEmployeeSystemRoleModule = class DomainEmployeeSystemRoleModule {
};
exports.DomainEmployeeSystemRoleModule = DomainEmployeeSystemRoleModule;
exports.DomainEmployeeSystemRoleModule = DomainEmployeeSystemRoleModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_system_role_entity_1.EmployeeSystemRole])],
        providers: [employee_system_role_repository_1.DomainEmployeeSystemRoleRepository, employee_system_role_service_1.DomainEmployeeSystemRoleService],
        exports: [employee_system_role_service_1.DomainEmployeeSystemRoleService],
    })
], DomainEmployeeSystemRoleModule);


/***/ }),

/***/ "./src/modules/domain/employee-system-role/employee-system-role.repository.ts":
/*!************************************************************************************!*\
  !*** ./src/modules/domain/employee-system-role/employee-system-role.repository.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeSystemRoleRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_system_role_entity_1 = __webpack_require__(/*! ./employee-system-role.entity */ "./src/modules/domain/employee-system-role/employee-system-role.entity.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainEmployeeSystemRoleRepository = class DomainEmployeeSystemRoleRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEmployeeSystemRoleRepository = DomainEmployeeSystemRoleRepository;
exports.DomainEmployeeSystemRoleRepository = DomainEmployeeSystemRoleRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(employee_system_role_entity_1.EmployeeSystemRole)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeSystemRoleRepository);


/***/ }),

/***/ "./src/modules/domain/employee-system-role/employee-system-role.service.ts":
/*!*********************************************************************************!*\
  !*** ./src/modules/domain/employee-system-role/employee-system-role.service.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeSystemRoleService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_system_role_repository_1 = __webpack_require__(/*! ./employee-system-role.repository */ "./src/modules/domain/employee-system-role/employee-system-role.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainEmployeeSystemRoleService = class DomainEmployeeSystemRoleService extends base_service_1.BaseService {
    constructor(employeeSystemRoleRepository) {
        super(employeeSystemRoleRepository);
        this.employeeSystemRoleRepository = employeeSystemRoleRepository;
    }
    async findByEmployeeId(employeeId) {
        return this.employeeSystemRoleRepository.findAll({
            where: { employeeId },
            relations: ['systemRole', 'systemRole.system', 'employee'],
        });
    }
    async findByEmployeeIds(employeeIds) {
        if (employeeIds.length === 0)
            return [];
        return this.employeeSystemRoleRepository.findAll({
            where: { employeeId: (0, typeorm_1.In)(employeeIds) },
            relations: ['systemRole', 'systemRole.system', 'employee'],
        });
    }
    async findBySystemRoleId(systemRoleId) {
        return this.employeeSystemRoleRepository.findAll({
            where: { systemRoleId },
            relations: ['employee'],
        });
    }
    async findByEmployeeIdAndSystemRoleId(employeeId, systemRoleId) {
        return this.employeeSystemRoleRepository.findOne({
            where: { employeeId, systemRoleId },
            relations: ['systemRole'],
        });
    }
    async assignRole(employeeId, systemRoleId) {
        const existing = await this.findByEmployeeIdAndSystemRoleId(employeeId, systemRoleId);
        if (existing) {
            throw new common_1.BadRequestException('Ïù¥ÎØ∏ Ìï†ÎãπÎêú Ïó≠Ìï†ÏûÖÎãàÎã§.');
        }
        return this.employeeSystemRoleRepository.save({
            employeeId,
            systemRoleId,
        });
    }
    async unassignRole(employeeId, systemRoleId) {
        const employeeSystemRole = await this.findByEmployeeIdAndSystemRoleId(employeeId, systemRoleId);
        if (!employeeSystemRole) {
            throw new common_1.NotFoundException('Ìï†ÎãπÎêú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.employeeSystemRoleRepository.delete(employeeSystemRole.id);
    }
    async unassignAllRolesByEmployeeId(employeeId) {
        const roles = await this.findByEmployeeId(employeeId);
        if (roles.length > 0) {
            for (const role of roles) {
                await this.employeeSystemRoleRepository.delete(role.id);
            }
        }
    }
    async unassignAllRolesBySystemRoleId(systemRoleId) {
        const assignments = await this.findBySystemRoleId(systemRoleId);
        if (assignments.length > 0) {
            for (const assignment of assignments) {
                await this.employeeSystemRoleRepository.delete(assignment.id);
            }
        }
    }
    async getEmployeeIdsBySystemRoleId(systemRoleId) {
        const assignments = await this.employeeSystemRoleRepository.findAll({
            where: { systemRoleId },
            select: { employeeId: true },
        });
        return assignments.map((assignment) => assignment.employeeId);
    }
    async getSystemRoleIdsByEmployeeId(employeeId) {
        const assignments = await this.employeeSystemRoleRepository.findAll({
            where: { employeeId },
            select: { systemRoleId: true },
        });
        return assignments.map((assignment) => assignment.systemRoleId);
    }
};
exports.DomainEmployeeSystemRoleService = DomainEmployeeSystemRoleService;
exports.DomainEmployeeSystemRoleService = DomainEmployeeSystemRoleService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_system_role_repository_1.DomainEmployeeSystemRoleRepository !== "undefined" && employee_system_role_repository_1.DomainEmployeeSystemRoleRepository) === "function" ? _a : Object])
], DomainEmployeeSystemRoleService);


/***/ }),

/***/ "./src/modules/domain/employee-token/employee-token.entity.ts":
/*!********************************************************************!*\
  !*** ./src/modules/domain/employee-token/employee-token.entity.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeToken = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ../employee/employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const token_entity_1 = __webpack_require__(/*! ../token/token.entity */ "./src/modules/domain/token/token.entity.ts");
let EmployeeToken = class EmployeeToken {
};
exports.EmployeeToken = EmployeeToken;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmployeeToken.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏßÅÏõê ID' }),
    __metadata("design:type", String)
], EmployeeToken.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÌÜ†ÌÅ∞ ID' }),
    __metadata("design:type", String)
], EmployeeToken.prototype, "tokenId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_a = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _a : Object)
], EmployeeToken.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => token_entity_1.Token),
    (0, typeorm_1.JoinColumn)({ name: 'tokenId' }),
    __metadata("design:type", typeof (_b = typeof token_entity_1.Token !== "undefined" && token_entity_1.Token) === "function" ? _b : Object)
], EmployeeToken.prototype, "token", void 0);
exports.EmployeeToken = EmployeeToken = __decorate([
    (0, typeorm_1.Entity)('employee_tokens'),
    (0, typeorm_1.Index)(['employeeId', 'tokenId'], { unique: true }),
    (0, typeorm_1.Index)(['employeeId']),
    (0, typeorm_1.Index)(['tokenId'])
], EmployeeToken);


/***/ }),

/***/ "./src/modules/domain/employee-token/employee-token.module.ts":
/*!********************************************************************!*\
  !*** ./src/modules/domain/employee-token/employee-token.module.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeTokenModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_token_service_1 = __webpack_require__(/*! ./employee-token.service */ "./src/modules/domain/employee-token/employee-token.service.ts");
const employee_token_repository_1 = __webpack_require__(/*! ./employee-token.repository */ "./src/modules/domain/employee-token/employee-token.repository.ts");
const employee_token_entity_1 = __webpack_require__(/*! ./employee-token.entity */ "./src/modules/domain/employee-token/employee-token.entity.ts");
let DomainEmployeeTokenModule = class DomainEmployeeTokenModule {
};
exports.DomainEmployeeTokenModule = DomainEmployeeTokenModule;
exports.DomainEmployeeTokenModule = DomainEmployeeTokenModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_token_entity_1.EmployeeToken])],
        providers: [employee_token_service_1.DomainEmployeeTokenService, employee_token_repository_1.DomainEmployeeTokenRepository],
        exports: [employee_token_service_1.DomainEmployeeTokenService],
    })
], DomainEmployeeTokenModule);


/***/ }),

/***/ "./src/modules/domain/employee-token/employee-token.repository.ts":
/*!************************************************************************!*\
  !*** ./src/modules/domain/employee-token/employee-token.repository.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeTokenRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainEmployeeTokenRepository = class DomainEmployeeTokenRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEmployeeTokenRepository = DomainEmployeeTokenRepository;
exports.DomainEmployeeTokenRepository = DomainEmployeeTokenRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.EmployeeToken)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeTokenRepository);


/***/ }),

/***/ "./src/modules/domain/employee-token/employee-token.service.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/domain/employee-token/employee-token.service.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeTokenService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_token_repository_1 = __webpack_require__(/*! ./employee-token.repository */ "./src/modules/domain/employee-token/employee-token.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainEmployeeTokenService = class DomainEmployeeTokenService extends base_service_1.BaseService {
    constructor(employeeTokenRepository) {
        super(employeeTokenRepository);
        this.employeeTokenRepository = employeeTokenRepository;
    }
    async findByEmployeeId(employeeId) {
        return this.employeeTokenRepository.findAll({
            where: { employeeId },
            relations: ['token'],
        });
    }
    async findByEmployeeIds(employeeIds) {
        if (employeeIds.length === 0)
            return [];
        return this.employeeTokenRepository.findAll({
            where: { employeeId: (0, typeorm_1.In)(employeeIds) },
            relations: ['token'],
        });
    }
    async findByTokenId(tokenId) {
        return this.employeeTokenRepository.findAll({
            where: { tokenId },
        });
    }
    async createOrUpdateRelation(employeeId, tokenId, relationData) {
        const existingRelation = await this.employeeTokenRepository.findOne({
            where: { employeeId, tokenId },
        });
        if (existingRelation) {
            return this.employeeTokenRepository.update(existingRelation.id, relationData);
        }
        return this.employeeTokenRepository.save({
            employeeId,
            tokenId,
            ...relationData,
        });
    }
    async deleteByTokenIds(tokenIds) {
        let deletedCount = 0;
        for (const tokenId of tokenIds) {
            const relations = await this.employeeTokenRepository.findAll({
                where: { tokenId },
            });
            for (const relation of relations) {
                await this.employeeTokenRepository.delete(relation.id);
                deletedCount++;
            }
        }
        return { deletedCount };
    }
    async deleteAllByEmployeeId(employeeId) {
        const relations = await this.findByEmployeeId(employeeId);
        for (const relation of relations) {
            await this.employeeTokenRepository.delete(relation.id);
        }
    }
};
exports.DomainEmployeeTokenService = DomainEmployeeTokenService;
exports.DomainEmployeeTokenService = DomainEmployeeTokenService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_token_repository_1.DomainEmployeeTokenRepository !== "undefined" && employee_token_repository_1.DomainEmployeeTokenRepository) === "function" ? _a : Object])
], DomainEmployeeTokenService);


/***/ }),

/***/ "./src/modules/domain/employee/employee-validation.service.ts":
/*!********************************************************************!*\
  !*** ./src/modules/domain/employee/employee-validation.service.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeValidationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_repository_1 = __webpack_require__(/*! ./employee.repository */ "./src/modules/domain/employee/employee.repository.ts");
const employee_errors_1 = __webpack_require__(/*! ./employee.errors */ "./src/modules/domain/employee/employee.errors.ts");
let DomainEmployeeValidationService = class DomainEmployeeValidationService {
    constructor(employeeRepository) {
        this.employeeRepository = employeeRepository;
    }
    validateEmployeeNumberFormat(employeeNumber) {
        if (!employeeNumber || employeeNumber.length !== 5) {
            throw new employee_errors_1.InvalidEmployeeNumberFormatError(employeeNumber);
        }
        if (!/^\d{5}$/.test(employeeNumber)) {
            throw new employee_errors_1.InvalidEmployeeNumberFormatError(employeeNumber);
        }
    }
    validateEmailFormat(email) {
        if (!email)
            return;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            throw new employee_errors_1.InvalidEmailFormatError(email);
        }
    }
    validateBirthDateWithHireDate(birthDate, hireDate) {
        if (!birthDate || !hireDate)
            return;
        if (birthDate >= hireDate) {
            throw new employee_errors_1.InvalidBirthDateError(birthDate, hireDate);
        }
    }
    validateEmployeeNumberSequenceLimit(employeeNumber, maxLimit = 999) {
        const sequence = parseInt(employeeNumber.slice(2));
        if (sequence > maxLimit) {
            throw new employee_errors_1.EmployeeNumberSequenceExceedsLimitError(sequence, maxLimit);
        }
    }
    validateEmployeeCreation(data) {
        this.validateEmployeeNumberFormat(data.employeeNumber);
        this.validateEmailFormat(data.email);
        this.validateEmployeeNumberSequenceLimit(data.employeeNumber);
    }
};
exports.DomainEmployeeValidationService = DomainEmployeeValidationService;
exports.DomainEmployeeValidationService = DomainEmployeeValidationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_repository_1.DomainEmployeeRepository !== "undefined" && employee_repository_1.DomainEmployeeRepository) === "function" ? _a : Object])
], DomainEmployeeValidationService);


/***/ }),

/***/ "./src/modules/domain/employee/employee.entity.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/employee/employee.entity.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Employee = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const enums_1 = __webpack_require__(/*! ../../../../libs/common/enums */ "./libs/common/enums/index.ts");
const rank_entity_1 = __webpack_require__(/*! ../rank/rank.entity */ "./src/modules/domain/rank/rank.entity.ts");
const employee_department_position_entity_1 = __webpack_require__(/*! ../employee-department-position/employee-department-position.entity */ "./src/modules/domain/employee-department-position/employee-department-position.entity.ts");
const employee_fcm_token_entity_1 = __webpack_require__(/*! ../employee-fcm-token/employee-fcm-token.entity */ "./src/modules/domain/employee-fcm-token/employee-fcm-token.entity.ts");
let Employee = class Employee {
};
exports.Employee = Employee;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Employee.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'ÏÇ¨Î≤à' }),
    __metadata("design:type", String)
], Employee.prototype, "employeeNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], Employee.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'Ïù¥Î©îÏùº', nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "email", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÎπÑÎ∞ÄÎ≤àÌò∏', nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "password", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ï†ÑÌôîÎ≤àÌò∏', nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "phoneNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏÉùÎÖÑÏõîÏùº', type: 'date', nullable: true }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Employee.prototype, "dateOfBirth", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÏÑ±Î≥Ñ',
        type: 'enum',
        enum: enums_1.Gender,
        nullable: true,
    }),
    __metadata("design:type", typeof (_b = typeof enums_1.Gender !== "undefined" && enums_1.Gender) === "function" ? _b : Object)
], Employee.prototype, "gender", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏûÖÏÇ¨Ïùº', type: 'date' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], Employee.prototype, "hireDate", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'Ïû¨ÏßÅ ÏÉÅÌÉú',
        type: 'enum',
        enum: enums_1.EmployeeStatus,
        default: enums_1.EmployeeStatus.Active,
    }),
    __metadata("design:type", typeof (_d = typeof enums_1.EmployeeStatus !== "undefined" && enums_1.EmployeeStatus) === "function" ? _d : Object)
], Employee.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÌòÑÏû¨ ÏßÅÍ∏â ID', type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "currentRankId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => rank_entity_1.Rank, { eager: true }),
    (0, typeorm_1.JoinColumn)({ name: 'currentRankId' }),
    __metadata("design:type", typeof (_e = typeof rank_entity_1.Rank !== "undefined" && rank_entity_1.Rank) === "function" ? _e : Object)
], Employee.prototype, "currentRank", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ìá¥ÏÇ¨Ïùº', type: 'date', nullable: true }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], Employee.prototype, "terminationDate", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ìá¥ÏÇ¨ ÏÇ¨Ïú†', type: 'text', nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "terminationReason", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Î©îÌÉÄÎç∞Ïù¥ÌÑ∞', type: 'jsonb', nullable: true }),
    __metadata("design:type", typeof (_g = typeof Record !== "undefined" && Record) === "function" ? _g : Object)
], Employee.prototype, "metadata", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÑ§Ï†ï Ïó¨Î∂Ä', default: false }),
    __metadata("design:type", Boolean)
], Employee.prototype, "isInitialPasswordSet", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_department_position_entity_1.EmployeeDepartmentPosition, (edp) => edp.employee),
    __metadata("design:type", Array)
], Employee.prototype, "departmentPositions", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_fcm_token_entity_1.EmployeeFcmToken, (eft) => eft.employee),
    __metadata("design:type", Array)
], Employee.prototype, "fcmTokens", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], Employee.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_j = typeof Date !== "undefined" && Date) === "function" ? _j : Object)
], Employee.prototype, "updatedAt", void 0);
exports.Employee = Employee = __decorate([
    (0, typeorm_1.Entity)('employees')
], Employee);


/***/ }),

/***/ "./src/modules/domain/employee/employee.errors.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/employee/employee.errors.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PositionNotFoundError = exports.DepartmentNotFoundError = exports.RankNotFoundError = exports.DuplicateEmailError = exports.DuplicateEmployeeNumberError = exports.EmployeeContextError = exports.MinimumAgePolicyError = exports.EmployeeNumberSequenceExceedsLimitError = exports.InvalidEmployeeNumberYearPolicyError = exports.EmployeePolicyError = exports.InvalidBirthDateError = exports.InvalidHireDateError = exports.InvalidDateRangeError = exports.InvalidEmailFormatError = exports.InvalidEmployeeNumberFormatError = exports.EmployeeInvariantError = exports.EmployeeDomainError = void 0;
class EmployeeDomainError extends Error {
    constructor(message) {
        super(message);
        this.name = this.constructor.name;
    }
}
exports.EmployeeDomainError = EmployeeDomainError;
class EmployeeInvariantError extends EmployeeDomainError {
    constructor() {
        super(...arguments);
        this.errorCode = 'EMPLOYEE_INVARIANT_VIOLATION';
        this.statusCode = 422;
    }
}
exports.EmployeeInvariantError = EmployeeInvariantError;
class InvalidEmployeeNumberFormatError extends EmployeeInvariantError {
    constructor(employeeNumber) {
        super(`ÏûòÎ™ªÎêú ÏÇ¨Î≤à ÌòïÏãùÏûÖÎãàÎã§: ${employeeNumber}. 5ÏûêÎ¶¨ Ïà´ÏûêÏó¨Ïïº Ìï©ÎãàÎã§.`);
        this.errorCode = 'INVALID_EMPLOYEE_NUMBER_FORMAT';
    }
}
exports.InvalidEmployeeNumberFormatError = InvalidEmployeeNumberFormatError;
class InvalidEmailFormatError extends EmployeeInvariantError {
    constructor(email) {
        super(`ÏûòÎ™ªÎêú Ïù¥Î©îÏùº ÌòïÏãùÏûÖÎãàÎã§: ${email}`);
        this.errorCode = 'INVALID_EMAIL_FORMAT';
    }
}
exports.InvalidEmailFormatError = InvalidEmailFormatError;
class InvalidDateRangeError extends EmployeeInvariantError {
    constructor(fieldName, date) {
        super(`ÏûòÎ™ªÎêú ÎÇ†ÏßúÏûÖÎãàÎã§: ${fieldName} - ${date}`);
        this.errorCode = 'INVALID_DATE_RANGE';
    }
}
exports.InvalidDateRangeError = InvalidDateRangeError;
class InvalidHireDateError extends EmployeeInvariantError {
    constructor(hireDate) {
        super(`ÏûÖÏÇ¨ÏùºÏù¥ ÎØ∏ÎûòÏùº Ïàò ÏóÜÏäµÎãàÎã§: ${hireDate.toISOString().split('T')[0]}`);
        this.errorCode = 'INVALID_HIRE_DATE';
    }
}
exports.InvalidHireDateError = InvalidHireDateError;
class InvalidBirthDateError extends EmployeeInvariantError {
    constructor(birthDate, hireDate) {
        super(`ÏÉùÎÖÑÏõîÏùºÏù¥ ÏûÖÏÇ¨ÏùºÎ≥¥Îã§ Îä¶ÏùÑ Ïàò ÏóÜÏäµÎãàÎã§: ÏÉùÎÖÑÏõîÏùº=${birthDate.toISOString().split('T')[0]}, ÏûÖÏÇ¨Ïùº=${hireDate.toISOString().split('T')[0]}`);
        this.errorCode = 'INVALID_BIRTH_DATE';
    }
}
exports.InvalidBirthDateError = InvalidBirthDateError;
class EmployeePolicyError extends EmployeeDomainError {
    constructor() {
        super(...arguments);
        this.errorCode = 'EMPLOYEE_POLICY_VIOLATION';
        this.statusCode = 409;
    }
}
exports.EmployeePolicyError = EmployeePolicyError;
class InvalidEmployeeNumberYearPolicyError extends EmployeePolicyError {
    constructor(employeeNumber, expectedYear) {
        super(`ÏÇ¨Î≤àÏùò Ïó∞ÎèÑÍ∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§: ${employeeNumber}. ${expectedYear}ÎÖÑÎèÑ Ìå®ÌÑ¥Ïù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.`);
        this.errorCode = 'INVALID_EMPLOYEE_NUMBER_YEAR_POLICY';
    }
}
exports.InvalidEmployeeNumberYearPolicyError = InvalidEmployeeNumberYearPolicyError;
class EmployeeNumberSequenceExceedsLimitError extends EmployeePolicyError {
    constructor(sequence, maxLimit) {
        super(`ÏÇ¨Î≤à ÏàúÎ≤àÏù¥ ÏµúÎåÄ ÌïúÍ≥ÑÎ•º Ï¥àÍ≥ºÌñàÏäµÎãàÎã§: ${sequence} > ${maxLimit}`);
        this.errorCode = 'EMPLOYEE_NUMBER_SEQUENCE_EXCEEDS_LIMIT';
    }
}
exports.EmployeeNumberSequenceExceedsLimitError = EmployeeNumberSequenceExceedsLimitError;
class MinimumAgePolicyError extends EmployeePolicyError {
    constructor(age, minimumAge) {
        super(`ÏµúÏÜå Ïó∞Î†π ÏöîÍµ¨ÏÇ¨Ìï≠ÏùÑ ÎßåÏ°±ÌïòÏßÄ ÏïäÏäµÎãàÎã§: ${age}ÏÑ∏ < ${minimumAge}ÏÑ∏`);
        this.errorCode = 'MINIMUM_AGE_POLICY_VIOLATION';
    }
}
exports.MinimumAgePolicyError = MinimumAgePolicyError;
class EmployeeContextError extends Error {
    constructor(message) {
        super(message);
        this.name = this.constructor.name;
    }
}
exports.EmployeeContextError = EmployeeContextError;
class DuplicateEmployeeNumberError extends EmployeeContextError {
    constructor(employeeNumber) {
        super(`Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏÇ¨Î≤àÏûÖÎãàÎã§: ${employeeNumber}`);
        this.errorCode = 'DUPLICATE_EMPLOYEE_NUMBER';
        this.statusCode = 409;
    }
}
exports.DuplicateEmployeeNumberError = DuplicateEmployeeNumberError;
class DuplicateEmailError extends EmployeeContextError {
    constructor(email) {
        super(`Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Ïù¥Î©îÏùºÏûÖÎãàÎã§: ${email}`);
        this.errorCode = 'DUPLICATE_EMAIL';
        this.statusCode = 409;
    }
}
exports.DuplicateEmailError = DuplicateEmailError;
class RankNotFoundError extends EmployeeContextError {
    constructor(rankId) {
        super(`Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÍ∏âÏûÖÎãàÎã§: ${rankId}`);
        this.errorCode = 'RANK_NOT_FOUND';
        this.statusCode = 404;
    }
}
exports.RankNotFoundError = RankNotFoundError;
class DepartmentNotFoundError extends EmployeeContextError {
    constructor(departmentId) {
        super(`Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî Î∂ÄÏÑúÏûÖÎãàÎã§: ${departmentId}`);
        this.errorCode = 'DEPARTMENT_NOT_FOUND';
        this.statusCode = 404;
    }
}
exports.DepartmentNotFoundError = DepartmentNotFoundError;
class PositionNotFoundError extends EmployeeContextError {
    constructor(positionId) {
        super(`Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏßÅÏ±ÖÏûÖÎãàÎã§: ${positionId}`);
        this.errorCode = 'POSITION_NOT_FOUND';
        this.statusCode = 404;
    }
}
exports.PositionNotFoundError = PositionNotFoundError;


/***/ }),

/***/ "./src/modules/domain/employee/employee.module.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/employee/employee.module.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_service_1 = __webpack_require__(/*! ./employee.service */ "./src/modules/domain/employee/employee.service.ts");
const employee_repository_1 = __webpack_require__(/*! ./employee.repository */ "./src/modules/domain/employee/employee.repository.ts");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const employee_validation_service_1 = __webpack_require__(/*! ./employee-validation.service */ "./src/modules/domain/employee/employee-validation.service.ts");
let DomainEmployeeModule = class DomainEmployeeModule {
};
exports.DomainEmployeeModule = DomainEmployeeModule;
exports.DomainEmployeeModule = DomainEmployeeModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_entity_1.Employee])],
        providers: [employee_service_1.DomainEmployeeService, employee_repository_1.DomainEmployeeRepository, employee_validation_service_1.DomainEmployeeValidationService],
        exports: [employee_service_1.DomainEmployeeService, employee_validation_service_1.DomainEmployeeValidationService, employee_repository_1.DomainEmployeeRepository],
    })
], DomainEmployeeModule);


/***/ }),

/***/ "./src/modules/domain/employee/employee.repository.ts":
/*!************************************************************!*\
  !*** ./src/modules/domain/employee/employee.repository.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./src/modules/domain/employee/employee.entity.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainEmployeeRepository = class DomainEmployeeRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        const result = await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return result.filter((employee) => employee.employeeNumber !== '00000');
    }
};
exports.DomainEmployeeRepository = DomainEmployeeRepository;
exports.DomainEmployeeRepository = DomainEmployeeRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(employee_entity_1.Employee)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeRepository);


/***/ }),

/***/ "./src/modules/domain/employee/employee.service.ts":
/*!*********************************************************!*\
  !*** ./src/modules/domain/employee/employee.service.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_repository_1 = __webpack_require__(/*! ./employee.repository */ "./src/modules/domain/employee/employee.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const enums_1 = __webpack_require__(/*! ../../../../libs/common/enums */ "./libs/common/enums/index.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const bcrypt = __webpack_require__(/*! @node-rs/bcrypt */ "@node-rs/bcrypt");
let DomainEmployeeService = class DomainEmployeeService extends base_service_1.BaseService {
    constructor(employeeRepository) {
        super(employeeRepository);
        this.employeeRepository = employeeRepository;
    }
    async findByEmployeeId(employeeId) {
        const employee = await this.employeeRepository.findOne({ where: { id: employeeId } });
        return employee;
    }
    async findByEmail(email) {
        const employee = await this.employeeRepository.findOne({
            where: { email },
        });
        return employee;
    }
    async findByEmployeeNumber(employeeNumber) {
        const employee = await this.employeeRepository.findOne({ where: { employeeNumber } });
        return employee;
    }
    async updatePassword(employeeId, hashedPassword) {
        return this.update(employeeId, { password: hashedPassword });
    }
    hashPassword(password = '1234') {
        return bcrypt.hashSync(password, 10);
    }
    async verifyPassword(password, employee) {
        return bcrypt.compare(password, employee.password);
    }
    async bulkSave(employees) {
        const savedEmployees = [];
        for (const employee of employees) {
            const saved = await this.save(employee);
            savedEmployees.push(saved);
        }
        return savedEmployees;
    }
    async findByEmployeeIds(employeeIds, includeTerminated = false) {
        const where = { id: (0, typeorm_1.In)(employeeIds) };
        if (!includeTerminated) {
            where.status = (0, typeorm_1.Not)(enums_1.EmployeeStatus.Terminated);
        }
        return this.employeeRepository.findAll({ where });
    }
    async findByEmployeeNumbers(employeeNumbers, includeTerminated = false) {
        const where = { employeeNumber: (0, typeorm_1.In)(employeeNumbers) };
        if (!includeTerminated) {
            where.status = (0, typeorm_1.Not)(enums_1.EmployeeStatus.Terminated);
        }
        return this.employeeRepository.findAll({ where });
    }
    async findAllEmployees(includeTerminated = false) {
        const where = {};
        if (!includeTerminated) {
            where.status = (0, typeorm_1.Not)(enums_1.EmployeeStatus.Terminated);
        }
        return this.employeeRepository.findAll({
            where,
            order: { employeeNumber: 'ASC' },
        });
    }
    async findByStatus(status) {
        return this.employeeRepository.findAll({
            where: { status },
            order: { employeeNumber: 'ASC' },
        });
    }
    async findByEmployeeNumberPattern(pattern) {
        return await this.employeeRepository.findAll({
            where: {
                employeeNumber: (0, typeorm_1.Like)(`${pattern}%`),
            },
            order: { employeeNumber: 'ASC' },
        });
    }
    async findByRankId(rankId) {
        return this.employeeRepository.findAll({
            where: { currentRankId: rankId },
            order: { employeeNumber: 'ASC' },
        });
    }
    async saveEmployee(data) {
        return this.save({
            ...data,
            password: this.hashPassword(data.employeeNumber),
            isInitialPasswordSet: true,
        });
    }
    async createEmployee(data) {
        return this.save({
            ...data,
            password: this.hashPassword(data.employeeNumber),
            isInitialPasswordSet: true,
        });
    }
    async updateEmployee(employeeId, data) {
        return this.update(employeeId, data);
    }
    async deleteEmployee(employeeId) {
        return this.delete(employeeId);
    }
    async generateNextEmployeeNumber() {
        const currentYear = new Date().getFullYear();
        const yearSuffix = currentYear.toString().slice(-2);
        const employees = await this.findByEmployeeNumberPattern(yearSuffix);
        const sequences = employees
            .map((employee) => employee.employeeNumber)
            .filter((employeeNumber) => employeeNumber.length === 5 && employeeNumber.startsWith(yearSuffix))
            .map((employeeNumber) => parseInt(employeeNumber.slice(2)))
            .filter((sequence) => !isNaN(sequence));
        const maxSequence = sequences.length > 0 ? Math.max(...sequences) : 0;
        const nextSequence = maxSequence + 1;
        return `${yearSuffix}${nextSequence.toString().padStart(3, '0')}`;
    }
    async generateUniqueEmployeeName(baseName) {
        const existingEmployee = await this.findByName(baseName);
        if (!existingEmployee) {
            return baseName;
        }
        const patternNames = await this.findNamesByPattern(baseName);
        const maxNumber = this.findMaxNumberFromNames(baseName, patternNames);
        const nextNumber = maxNumber + 1;
        return `${baseName}${nextNumber}`;
    }
    async findNamesByPattern(baseName) {
        try {
            const exactMatch = await this.employeeRepository.findAll({
                where: {
                    name: baseName,
                },
            });
            const allNamesStartingWith = await this.employeeRepository.findAll({
                where: {
                    name: (0, typeorm_1.Like)(`${baseName}%`),
                },
            });
            const patternNames = allNamesStartingWith
                .map((emp) => emp.name)
                .filter((name) => this.isExactPatternMatch(baseName, name));
            const allNames = [...exactMatch.map((emp) => emp.name), ...patternNames];
            return allNames;
        }
        catch {
            return [];
        }
    }
    isExactPatternMatch(baseName, name) {
        if (name === baseName) {
            return true;
        }
        if (name.startsWith(baseName)) {
            const suffix = name.slice(baseName.length);
            return /^\d+$/.test(suffix);
        }
        return false;
    }
    findMaxNumberFromNames(baseName, names) {
        let maxNumber = 0;
        for (const name of names) {
            if (name === baseName) {
                maxNumber = Math.max(maxNumber, 0);
            }
            else if (name.startsWith(baseName)) {
                const suffix = name.slice(baseName.length);
                if (/^\d+$/.test(suffix)) {
                    const number = parseInt(suffix);
                    if (!isNaN(number)) {
                        maxNumber = Math.max(maxNumber, number);
                    }
                }
            }
        }
        return maxNumber;
    }
    async findByName(name) {
        try {
            return await this.employeeRepository.findOne({ where: { name } });
        }
        catch {
            return null;
        }
    }
    async isEmployeeNumberDuplicate(employeeNumber, excludeId) {
        try {
            const employee = await this.findByEmployeeNumber(employeeNumber);
            if (!employee) {
                return false;
            }
            return excludeId ? employee.id !== excludeId : true;
        }
        catch {
            return false;
        }
    }
    async isEmailDuplicate(email, excludeId) {
        if (!email)
            return false;
        try {
            const employee = await this.findByEmail(email);
            if (!employee) {
                return false;
            }
            return excludeId ? employee.id !== excludeId : true;
        }
        catch {
            return false;
        }
    }
};
exports.DomainEmployeeService = DomainEmployeeService;
exports.DomainEmployeeService = DomainEmployeeService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_repository_1.DomainEmployeeRepository !== "undefined" && employee_repository_1.DomainEmployeeRepository) === "function" ? _a : Object])
], DomainEmployeeService);


/***/ }),

/***/ "./src/modules/domain/fcm-token/fcm-token.entity.ts":
/*!**********************************************************!*\
  !*** ./src/modules/domain/fcm-token/fcm-token.entity.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FcmToken = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let FcmToken = class FcmToken {
};
exports.FcmToken = FcmToken;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], FcmToken.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'text', comment: 'FCM ÌÜ†ÌÅ∞ Í∞í', unique: true }),
    __metadata("design:type", String)
], FcmToken.prototype, "fcmToken", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'varchar',
        length: 50,
        comment: 'ÎîîÎ∞îÏù¥Ïä§ ÌÉÄÏûÖ (Ïòà: lsms-prod, portal-prod)',
    }),
    __metadata("design:type", String)
], FcmToken.prototype, "deviceType", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'text', comment: 'ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ≥¥', default: 'mobile' }),
    __metadata("design:type", String)
], FcmToken.prototype, "deviceInfo", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'boolean', comment: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú', default: true }),
    __metadata("design:type", Boolean)
], FcmToken.prototype, "isActive", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], FcmToken.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], FcmToken.prototype, "updatedAt", void 0);
exports.FcmToken = FcmToken = __decorate([
    (0, typeorm_1.Entity)('fcm_tokens'),
    (0, typeorm_1.Index)(['fcmToken'], { unique: true }),
    (0, typeorm_1.Index)(['isActive'])
], FcmToken);


/***/ }),

/***/ "./src/modules/domain/fcm-token/fcm-token.module.ts":
/*!**********************************************************!*\
  !*** ./src/modules/domain/fcm-token/fcm-token.module.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFcmTokenModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const fcm_token_service_1 = __webpack_require__(/*! ./fcm-token.service */ "./src/modules/domain/fcm-token/fcm-token.service.ts");
const fcm_token_repository_1 = __webpack_require__(/*! ./fcm-token.repository */ "./src/modules/domain/fcm-token/fcm-token.repository.ts");
const fcm_token_entity_1 = __webpack_require__(/*! ./fcm-token.entity */ "./src/modules/domain/fcm-token/fcm-token.entity.ts");
let DomainFcmTokenModule = class DomainFcmTokenModule {
};
exports.DomainFcmTokenModule = DomainFcmTokenModule;
exports.DomainFcmTokenModule = DomainFcmTokenModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([fcm_token_entity_1.FcmToken])],
        providers: [fcm_token_service_1.DomainFcmTokenService, fcm_token_repository_1.DomainFcmTokenRepository],
        exports: [fcm_token_service_1.DomainFcmTokenService],
    })
], DomainFcmTokenModule);


/***/ }),

/***/ "./src/modules/domain/fcm-token/fcm-token.repository.ts":
/*!**************************************************************!*\
  !*** ./src/modules/domain/fcm-token/fcm-token.repository.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFcmTokenRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainFcmTokenRepository = class DomainFcmTokenRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    deleteInactiveTokens(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.delete({
            isActive: false,
        });
    }
    async findByEmployeeAndDeviceType(employeeId, deviceType, deviceInfo) {
        return this.repository
            .createQueryBuilder('fcmToken')
            .innerJoin('employee_fcm_tokens', 'eft', 'eft.fcmTokenId = fcmToken.id')
            .where('eft.employeeId = :employeeId', { employeeId })
            .andWhere('fcmToken.deviceType = :deviceType', { deviceType })
            .andWhere('fcmToken.deviceInfo = :deviceInfo', { deviceInfo })
            .andWhere('fcmToken.isActive = :isActive', { isActive: true })
            .getOne();
    }
    async deleteOrphanTokens() {
        const result = await this.repository
            .createQueryBuilder('fcmToken')
            .delete()
            .where('id NOT IN (SELECT DISTINCT "fcmTokenId" FROM employee_fcm_tokens WHERE "fcmTokenId" IS NOT NULL)')
            .execute();
        return result.affected || 0;
    }
};
exports.DomainFcmTokenRepository = DomainFcmTokenRepository;
exports.DomainFcmTokenRepository = DomainFcmTokenRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.FcmToken)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainFcmTokenRepository);


/***/ }),

/***/ "./src/modules/domain/fcm-token/fcm-token.service.ts":
/*!***********************************************************!*\
  !*** ./src/modules/domain/fcm-token/fcm-token.service.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFcmTokenService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const fcm_token_repository_1 = __webpack_require__(/*! ./fcm-token.repository */ "./src/modules/domain/fcm-token/fcm-token.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
let DomainFcmTokenService = class DomainFcmTokenService extends base_service_1.BaseService {
    constructor(fcmTokenRepository) {
        super(fcmTokenRepository);
        this.fcmTokenRepository = fcmTokenRepository;
    }
    async findByFcmToken(fcmToken) {
        return this.fcmTokenRepository.findOne({
            where: { fcmToken },
        });
    }
    async findByEmployeeAndDeviceType(employeeId, deviceType, deviceInfo) {
        return this.fcmTokenRepository.findByEmployeeAndDeviceType(employeeId, deviceType, deviceInfo);
    }
    async createOrFindByEmployeeAndDevice(employeeId, fcmToken, deviceType, deviceInfo) {
        const existingToken = await this.findByEmployeeAndDeviceType(employeeId, deviceType, deviceInfo);
        if (existingToken) {
            return this.fcmTokenRepository.update(existingToken.id, {
                fcmToken,
            });
        }
        try {
            return await this.fcmTokenRepository.save({
                fcmToken,
                deviceType,
                deviceInfo,
            });
        }
        catch (error) {
            throw new common_1.ConflictException('FCM ÌÜ†ÌÅ∞ÏùÑ ÏÉùÏÑ±Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
        }
    }
    async createOrFind(fcmToken, deviceType = 'pc', deviceInfo) {
        const existingToken = await this.findByFcmToken(fcmToken);
        if (existingToken) {
            return this.fcmTokenRepository.update(existingToken.id, {
                deviceType,
                deviceInfo,
                isActive: true,
            });
        }
        try {
            return await this.fcmTokenRepository.save({
                fcmToken,
                deviceType,
                deviceInfo,
                isActive: true,
            });
        }
        catch (error) {
            if (error.code === '23505') {
                const token = await this.findByFcmToken(fcmToken);
                if (token) {
                    return token;
                }
            }
            throw error;
        }
    }
    async findByDeviceType(deviceType) {
        return this.fcmTokenRepository.findAll({
            where: { deviceType, isActive: true },
        });
    }
    async deactivateToken(fcmToken) {
        const token = await this.findByFcmToken(fcmToken);
        if (!token) {
            throw new common_1.ConflictException('FCM ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return this.fcmTokenRepository.update(token.id, {
            isActive: false,
        });
    }
    async cleanupInactiveTokens() {
        await this.fcmTokenRepository.deleteInactiveTokens({
            where: { isActive: false },
        });
    }
    validateFcmToken(fcmToken) {
        if (!fcmToken || typeof fcmToken !== 'string') {
            return false;
        }
        if (fcmToken.length < 140) {
            return false;
        }
        const fcmTokenPattern = /^[A-Za-z0-9:_-]+$/;
        return fcmTokenPattern.test(fcmToken);
    }
    async countActiveTokens() {
        return this.fcmTokenRepository.count({
            where: { isActive: true },
        });
    }
    async countTokensByDeviceType() {
        const counts = await Promise.all([
            this.fcmTokenRepository.count({
                where: { deviceType: 'android', isActive: true },
            }),
            this.fcmTokenRepository.count({
                where: { deviceType: 'ios', isActive: true },
            }),
            this.fcmTokenRepository.count({
                where: { deviceType: 'pc', isActive: true },
            }),
            this.fcmTokenRepository.count({
                where: { deviceType: 'web', isActive: true },
            }),
        ]);
        return {
            android: counts[0],
            ios: counts[1],
            pc: counts[2],
            web: counts[3],
        };
    }
    async getStatisticsByDeviceType() {
        const counts = await this.countTokensByDeviceType();
        return Object.entries(counts).map(([deviceType, count]) => ({
            deviceType,
            count,
        }));
    }
    async delete(id) {
        await this.fcmTokenRepository.delete(id);
    }
    async deleteOrphanTokens() {
        return this.fcmTokenRepository.deleteOrphanTokens();
    }
};
exports.DomainFcmTokenService = DomainFcmTokenService;
exports.DomainFcmTokenService = DomainFcmTokenService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof fcm_token_repository_1.DomainFcmTokenRepository !== "undefined" && fcm_token_repository_1.DomainFcmTokenRepository) === "function" ? _a : Object])
], DomainFcmTokenService);


/***/ }),

/***/ "./src/modules/domain/log/log.entity.ts":
/*!**********************************************!*\
  !*** ./src/modules/domain/log/log.entity.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Log = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let Log = class Log {
};
exports.Log = Log;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Log.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ìò∏Ïä§Ìä∏ Ï†ïÎ≥¥' }),
    __metadata("design:type", String)
], Log.prototype, "host", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'HTTP Î©îÏÑúÎìú' }),
    __metadata("design:type", String)
], Log.prototype, "method", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏöîÏ≤≠ URL' }),
    __metadata("design:type", String)
], Log.prototype, "url", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        nullable: true,
        comment: 'ÏöîÏ≤≠ ÌååÎùºÎØ∏ÌÑ∞',
    }),
    __metadata("design:type", Object)
], Log.prototype, "params", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        nullable: true,
        comment: 'ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞',
    }),
    __metadata("design:type", Object)
], Log.prototype, "query", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        nullable: true,
        comment: 'ÏöîÏ≤≠ Î≥∏Î¨∏',
    }),
    __metadata("design:type", Object)
], Log.prototype, "body", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'IP Ï£ºÏÜå' }),
    __metadata("design:type", String)
], Log.prototype, "ip", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏÇ¨Ïö©Ïûê ÏóêÏù¥Ï†ÑÌä∏' }),
    __metadata("design:type", String)
], Log.prototype, "userAgent", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'timestamp with time zone',
        nullable: true,
        comment: 'ÏöîÏ≤≠ ÏãúÏûë ÏãúÍ∞Ñ',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Log.prototype, "requestTimestamp", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'timestamp with time zone',
        nullable: true,
        comment: 'ÏùëÎãµ ÏôÑÎ£å ÏãúÍ∞Ñ',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Log.prototype, "responseTimestamp", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: 'ÏùëÎãµ ÏãúÍ∞Ñ (Î∞ÄÎ¶¨Ï¥à)',
    }),
    __metadata("design:type", Number)
], Log.prototype, "responseTime", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: 'HTTP ÏÉÅÌÉú ÏΩîÎìú',
    }),
    __metadata("design:type", Number)
], Log.prototype, "statusCode", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        nullable: true,
        comment: 'ÏùëÎãµ Îç∞Ïù¥ÌÑ∞',
    }),
    __metadata("design:type", Object)
], Log.prototype, "response", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: 'ÏãúÏä§ÌÖú Íµ¨Î∂ÑÏûê',
    }),
    __metadata("design:type", String)
], Log.prototype, "system", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        nullable: true,
        comment: 'ÏóêÎü¨ Ï†ïÎ≥¥',
    }),
    __metadata("design:type", Object)
], Log.prototype, "error", void 0);
__decorate([
    (0, typeorm_1.Column)({
        default: false,
        comment: 'ÏóêÎü¨ Î∞úÏÉù Ïó¨Î∂Ä',
    }),
    __metadata("design:type", Boolean)
], Log.prototype, "isError", void 0);
exports.Log = Log = __decorate([
    (0, typeorm_1.Entity)('logs'),
    (0, typeorm_1.Index)(['requestTimestamp']),
    (0, typeorm_1.Index)(['isError']),
    (0, typeorm_1.Index)(['statusCode']),
    (0, typeorm_1.Index)(['system']),
    (0, typeorm_1.Index)(['method', 'url'])
], Log);


/***/ }),

/***/ "./src/modules/domain/log/log.module.ts":
/*!**********************************************!*\
  !*** ./src/modules/domain/log/log.module.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainLogModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const log_service_1 = __webpack_require__(/*! ./log.service */ "./src/modules/domain/log/log.service.ts");
const log_repository_1 = __webpack_require__(/*! ./log.repository */ "./src/modules/domain/log/log.repository.ts");
const log_entity_1 = __webpack_require__(/*! ./log.entity */ "./src/modules/domain/log/log.entity.ts");
let DomainLogModule = class DomainLogModule {
};
exports.DomainLogModule = DomainLogModule;
exports.DomainLogModule = DomainLogModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([log_entity_1.Log])],
        providers: [log_service_1.DomainLogService, log_repository_1.DomainLogRepository],
        exports: [log_service_1.DomainLogService],
    })
], DomainLogModule);


/***/ }),

/***/ "./src/modules/domain/log/log.repository.ts":
/*!**************************************************!*\
  !*** ./src/modules/domain/log/log.repository.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainLogRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainLogRepository = class DomainLogRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainLogRepository = DomainLogRepository;
exports.DomainLogRepository = DomainLogRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Log)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainLogRepository);


/***/ }),

/***/ "./src/modules/domain/log/log.service.ts":
/*!***********************************************!*\
  !*** ./src/modules/domain/log/log.service.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainLogService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const log_repository_1 = __webpack_require__(/*! ./log.repository */ "./src/modules/domain/log/log.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
let DomainLogService = class DomainLogService extends base_service_1.BaseService {
    constructor(logRepository) {
        super(logRepository);
        this.logRepository = logRepository;
    }
    async findByMethodAndUrl(method, url) {
        return this.logRepository.findAll({
            order: { requestTimestamp: 'DESC' },
        });
    }
    async findErrorLogs() {
        return this.logRepository.findAll({
            where: { isError: true },
            order: { requestTimestamp: 'DESC' },
        });
    }
    async findBySystem(system) {
        return this.logRepository.findAll({
            where: { system },
            order: { requestTimestamp: 'DESC' },
        });
    }
    async findByStatusCode(statusCode) {
        return this.logRepository.findAll({
            order: { requestTimestamp: 'DESC' },
        });
    }
    async findByIpAddress(ip) {
        return this.logRepository.findAll({
            where: { ip },
            order: { requestTimestamp: 'DESC' },
        });
    }
    async findSlowRequests(minResponseTime = 1000) {
        return this.logRepository.findAll({
            order: { responseTime: 'DESC' },
        });
    }
};
exports.DomainLogService = DomainLogService;
exports.DomainLogService = DomainLogService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof log_repository_1.DomainLogRepository !== "undefined" && log_repository_1.DomainLogRepository) === "function" ? _a : Object])
], DomainLogService);


/***/ }),

/***/ "./src/modules/domain/position/position.entity.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/position/position.entity.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Position = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let Position = class Position {
};
exports.Position = Position;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Position.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÏ±ÖÎ™Ö (Ïòà: Î∂ÄÏÑúÏû•, ÌååÌä∏Ïû•, ÌåÄÏû•, ÏßÅÏõê)' }),
    __metadata("design:type", String)
], Position.prototype, "positionTitle", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'ÏßÅÏ±Ö ÏΩîÎìú (Ïòà: DEPT_HEAD, PART_HEAD, TEAM_LEADER, STAFF)' }),
    __metadata("design:type", String)
], Position.prototype, "positionCode", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÏ±Ö Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÏ±Ö)' }),
    __metadata("design:type", Number)
], Position.prototype, "level", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Í¥ÄÎ¶¨ Í∂åÌïú Ïó¨Î∂Ä', default: false }),
    __metadata("design:type", Boolean)
], Position.prototype, "hasManagementAuthority", void 0);
exports.Position = Position = __decorate([
    (0, typeorm_1.Entity)('positions')
], Position);


/***/ }),

/***/ "./src/modules/domain/position/position.module.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/position/position.module.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainPositionModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const position_service_1 = __webpack_require__(/*! ./position.service */ "./src/modules/domain/position/position.service.ts");
const position_repository_1 = __webpack_require__(/*! ./position.repository */ "./src/modules/domain/position/position.repository.ts");
const position_entity_1 = __webpack_require__(/*! ./position.entity */ "./src/modules/domain/position/position.entity.ts");
let DomainPositionModule = class DomainPositionModule {
};
exports.DomainPositionModule = DomainPositionModule;
exports.DomainPositionModule = DomainPositionModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([position_entity_1.Position])],
        providers: [position_service_1.DomainPositionService, position_repository_1.DomainPositionRepository],
        exports: [position_service_1.DomainPositionService],
    })
], DomainPositionModule);


/***/ }),

/***/ "./src/modules/domain/position/position.repository.ts":
/*!************************************************************!*\
  !*** ./src/modules/domain/position/position.repository.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainPositionRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainPositionRepository = class DomainPositionRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainPositionRepository = DomainPositionRepository;
exports.DomainPositionRepository = DomainPositionRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Position)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainPositionRepository);


/***/ }),

/***/ "./src/modules/domain/position/position.service.ts":
/*!*********************************************************!*\
  !*** ./src/modules/domain/position/position.service.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainPositionService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const position_repository_1 = __webpack_require__(/*! ./position.repository */ "./src/modules/domain/position/position.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainPositionService = class DomainPositionService extends base_service_1.BaseService {
    constructor(positionRepository) {
        super(positionRepository);
        this.positionRepository = positionRepository;
    }
    async findById(positionId) {
        const position = await this.positionRepository.findOne({
            where: { id: positionId },
        });
        return position;
    }
    async findByIds(positionIds) {
        if (positionIds.length === 0)
            return [];
        return this.positionRepository.findAll({
            where: { id: (0, typeorm_1.In)(positionIds) },
        });
    }
    async findByTitle(positionTitle) {
        const position = await this.positionRepository.findOne({
            where: { positionTitle },
        });
        return position;
    }
    async findByCode(positionCode) {
        const position = await this.positionRepository.findOne({
            where: { positionCode },
        });
        return position;
    }
    async findByPositionCode(positionCode) {
        return this.findByCode(positionCode);
    }
    async findByLevel(level) {
        return this.positionRepository.findAll({
            where: { level },
            order: { level: 'ASC' },
        });
    }
    async findManagementPositions() {
        return this.positionRepository.findAll({
            where: { hasManagementAuthority: true },
            order: { level: 'DESC' },
        });
    }
    async findAllPositions() {
        return this.positionRepository.findAll({
            order: { level: 'ASC', positionTitle: 'ASC' },
        });
    }
    async createPosition(data) {
        return this.save(data);
    }
    async updatePosition(positionId, data) {
        return this.update(positionId, data);
    }
    async findOneByLevel(level) {
        return this.positionRepository.findOne({
            where: { level },
        });
    }
    async findByLevelRange(minLevel, maxLevel) {
        const queryBuilder = this.positionRepository.createQueryBuilder('position');
        return queryBuilder
            .where('position.level >= :minLevel', { minLevel })
            .andWhere('position.level <= :maxLevel', { maxLevel })
            .orderBy('position.level', 'ASC')
            .getMany();
    }
    async findLowestPosition() {
        const queryBuilder = this.positionRepository.createQueryBuilder('position');
        const result = await queryBuilder.orderBy('position.level', 'DESC').limit(1).getOne();
        return result;
    }
    async changeLevel(positionId, newLevel) {
        const currentPosition = await this.findById(positionId);
        const currentLevel = currentPosition.level;
        if (currentLevel === newLevel) {
            return currentPosition;
        }
        if (newLevel < 1) {
            newLevel = 1;
            if (currentLevel === newLevel) {
                return currentPosition;
            }
        }
        const queryBuilder = this.positionRepository.createQueryBuilder('position');
        const maxLevelResult = await queryBuilder.select('MAX(position.level)', 'maxLevel').getRawOne();
        const maxLevel = maxLevelResult?.maxLevel ?? 0;
        if (newLevel > maxLevel) {
            newLevel = maxLevel;
            if (currentLevel === newLevel) {
                return currentPosition;
            }
        }
        const existingPosition = await this.findOneByLevel(newLevel);
        if (existingPosition) {
            const tempLevel = maxLevel + 1000;
            await this.update(positionId, { level: tempLevel });
            if (currentLevel < newLevel) {
                const positionsToShift = await this.findByLevelRange(currentLevel + 1, newLevel);
                for (const position of positionsToShift) {
                    await this.update(position.id, { level: position.level - 1 });
                }
            }
            else {
                const positionsToShift = await this.findByLevelRange(newLevel, currentLevel - 1);
                for (let i = positionsToShift.length - 1; i >= 0; i--) {
                    await this.update(positionsToShift[i].id, { level: positionsToShift[i].level + 1 });
                }
            }
            return await this.update(positionId, { level: newLevel });
        }
        else {
            return await this.update(positionId, { level: newLevel });
        }
    }
    async deletePosition(positionId) {
        return this.delete(positionId);
    }
    async exists(positionId) {
        const position = await this.findById(positionId);
        console.log('position', position);
        if (position) {
            await this.findById(positionId);
            return true;
        }
        return false;
    }
    async isCodeDuplicate(positionCode, excludeId) {
        const position = await this.findByCode(positionCode);
        console.log('position', position);
        if (position) {
            return true;
        }
        return false;
    }
};
exports.DomainPositionService = DomainPositionService;
exports.DomainPositionService = DomainPositionService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof position_repository_1.DomainPositionRepository !== "undefined" && position_repository_1.DomainPositionRepository) === "function" ? _a : Object])
], DomainPositionService);


/***/ }),

/***/ "./src/modules/domain/rank/rank.entity.ts":
/*!************************************************!*\
  !*** ./src/modules/domain/rank/rank.entity.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Rank = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let Rank = class Rank {
};
exports.Rank = Rank;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Rank.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÍ∏âÎ™Ö' }),
    __metadata("design:type", String)
], Rank.prototype, "rankName", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'ÏßÅÍ∏â ÏΩîÎìú' }),
    __metadata("design:type", String)
], Rank.prototype, "rankCode", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏßÅÍ∏â Î†àÎ≤® (ÎÇÆÏùÑÏàòÎ°ù ÏÉÅÏúÑ ÏßÅÍ∏â)' }),
    __metadata("design:type", Number)
], Rank.prototype, "level", void 0);
exports.Rank = Rank = __decorate([
    (0, typeorm_1.Entity)('ranks')
], Rank);


/***/ }),

/***/ "./src/modules/domain/rank/rank.module.ts":
/*!************************************************!*\
  !*** ./src/modules/domain/rank/rank.module.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainRankModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const rank_service_1 = __webpack_require__(/*! ./rank.service */ "./src/modules/domain/rank/rank.service.ts");
const rank_repository_1 = __webpack_require__(/*! ./rank.repository */ "./src/modules/domain/rank/rank.repository.ts");
const rank_entity_1 = __webpack_require__(/*! ./rank.entity */ "./src/modules/domain/rank/rank.entity.ts");
let DomainRankModule = class DomainRankModule {
};
exports.DomainRankModule = DomainRankModule;
exports.DomainRankModule = DomainRankModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([rank_entity_1.Rank])],
        providers: [rank_service_1.DomainRankService, rank_repository_1.DomainRankRepository],
        exports: [rank_service_1.DomainRankService],
    })
], DomainRankModule);


/***/ }),

/***/ "./src/modules/domain/rank/rank.repository.ts":
/*!****************************************************!*\
  !*** ./src/modules/domain/rank/rank.repository.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainRankRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainRankRepository = class DomainRankRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainRankRepository = DomainRankRepository;
exports.DomainRankRepository = DomainRankRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Rank)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainRankRepository);


/***/ }),

/***/ "./src/modules/domain/rank/rank.service.ts":
/*!*************************************************!*\
  !*** ./src/modules/domain/rank/rank.service.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainRankService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const rank_repository_1 = __webpack_require__(/*! ./rank.repository */ "./src/modules/domain/rank/rank.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainRankService = class DomainRankService extends base_service_1.BaseService {
    constructor(rankRepository) {
        super(rankRepository);
        this.rankRepository = rankRepository;
    }
    async findById(rankId) {
        const rank = await this.rankRepository.findOne({
            where: { id: rankId },
        });
        return rank;
    }
    async findByIds(rankIds) {
        if (rankIds.length === 0)
            return [];
        return this.rankRepository.findAll({
            where: { id: (0, typeorm_1.In)(rankIds) },
        });
    }
    async findByName(rankName) {
        const rank = await this.rankRepository.findOne({
            where: { rankName },
        });
        return rank;
    }
    async findByCode(rankCode) {
        const rank = await this.rankRepository.findOne({
            where: { rankCode },
        });
        return rank;
    }
    async findByRankCode(rankCode) {
        return this.findByCode(rankCode);
    }
    async findAllRanks() {
        return this.rankRepository.findAll({
            order: { level: 'DESC' },
        });
    }
    async findByLevel(level) {
        return this.rankRepository.findAll({
            where: { level },
            order: { rankName: 'ASC' },
        });
    }
    async findByMinLevel(minLevel) {
        return this.rankRepository.findAll({
            order: { level: 'DESC' },
        });
    }
    async createRank(data) {
        return this.save(data);
    }
    async updateRank(rankId, data) {
        return this.update(rankId, data);
    }
    async deleteRank(rankId) {
        return this.delete(rankId);
    }
    async exists(rankId) {
        const rank = await this.findById(rankId);
        console.log('rank', rank);
        if (rank) {
            return true;
        }
        return false;
    }
    async isCodeDuplicate(rankCode, excludeId) {
        const rank = await this.findByCode(rankCode);
        console.log('rank', rank);
        if (rank) {
            return true;
        }
        return false;
    }
};
exports.DomainRankService = DomainRankService;
exports.DomainRankService = DomainRankService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof rank_repository_1.DomainRankRepository !== "undefined" && rank_repository_1.DomainRankRepository) === "function" ? _a : Object])
], DomainRankService);


/***/ }),

/***/ "./src/modules/domain/system-role/system-role.entity.ts":
/*!**************************************************************!*\
  !*** ./src/modules/domain/system-role/system-role.entity.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemRole = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const system_entity_1 = __webpack_require__(/*! ../system/system.entity */ "./src/modules/domain/system/system.entity.ts");
const employee_system_role_entity_1 = __webpack_require__(/*! ../employee-system-role/employee-system-role.entity */ "./src/modules/domain/employee-system-role/employee-system-role.entity.ts");
let SystemRole = class SystemRole {
    Ïó≠Ìï†Ïù¥Î¶ÑÏùÑÏÑ§Ï†ïÌïúÎã§(roleName) {
        this.roleName = roleName;
    }
    Ïó≠Ìï†ÏΩîÎìúÎ•ºÏÑ§Ï†ïÌïúÎã§(roleCode) {
        this.roleCode = roleCode;
    }
    Ïó≠Ìï†ÏÑ§Î™ÖÏùÑÏÑ§Ï†ïÌïúÎã§(description) {
        this.description = description;
    }
    Í∂åÌïúÎ™©Î°ùÏùÑÏÑ§Ï†ïÌïúÎã§(permissions) {
        this.permissions = permissions;
    }
    Ï†ïÎ†¨ÏàúÏÑúÎ•ºÏÑ§Ï†ïÌïúÎã§(sortOrder) {
        this.sortOrder = sortOrder;
    }
    ÌôúÏÑ±ÏÉÅÌÉúÎ•ºÏÑ§Ï†ïÌïúÎã§(isActive) {
        this.isActive = isActive;
    }
    Í∏∞Î≥∏Ïó≠Ìï†Î°úÏÑ§Ï†ïÌïúÎã§() {
        this.isDefault = true;
    }
    Í∏∞Î≥∏Ïó≠Ìï†ÏÑ§Ï†ïÏùÑÌï¥Ï†úÌïúÎã§() {
        this.isDefault = false;
    }
    Í∏∞Î≥∏Ïó≠Ìï†Ïó¨Î∂ÄÎ•ºÏÑ§Ï†ïÌïúÎã§(isDefault) {
        this.isDefault = isDefault;
    }
    ÎπÑÌôúÏÑ±ÌôîÌïúÎã§() {
        this.isActive = false;
    }
};
exports.SystemRole = SystemRole;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], SystemRole.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], SystemRole.prototype, "systemId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => system_entity_1.System, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'systemId' }),
    __metadata("design:type", typeof (_a = typeof system_entity_1.System !== "undefined" && system_entity_1.System) === "function" ? _a : Object)
], SystemRole.prototype, "system", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïó≠Ìï† Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], SystemRole.prototype, "roleName", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïó≠Ìï† ÏΩîÎìú' }),
    __metadata("design:type", String)
], SystemRole.prototype, "roleCode", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true, comment: 'Ïó≠Ìï† ÏÑ§Î™Ö' }),
    __metadata("design:type", String)
], SystemRole.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        default: [],
        comment: 'Í∂åÌïú Î™©Î°ù',
    }),
    __metadata("design:type", Array)
], SystemRole.prototype, "permissions", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ï†ïÎ†¨ ÏàúÏÑú', default: 0 }),
    __metadata("design:type", Number)
], SystemRole.prototype, "sortOrder", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true, comment: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú' }),
    __metadata("design:type", Boolean)
], SystemRole.prototype, "isActive", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false, comment: 'Í∏∞Î≥∏ Ïó≠Ìï† Ïó¨Î∂Ä (ÏßÅÏõê ÏÉùÏÑ± Ïãú ÏûêÎèô Ìï†Îãπ)' }),
    __metadata("design:type", Boolean)
], SystemRole.prototype, "isDefault", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_system_role_entity_1.EmployeeSystemRole, (esr) => esr.systemRole),
    __metadata("design:type", Array)
], SystemRole.prototype, "employeeSystemRoles", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±Ïùº' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], SystemRole.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùº' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], SystemRole.prototype, "updatedAt", void 0);
exports.SystemRole = SystemRole = __decorate([
    (0, typeorm_1.Entity)('system_roles'),
    (0, typeorm_1.Index)(['systemId', 'roleCode'], { unique: true }),
    (0, typeorm_1.Index)(['systemId', 'isActive'])
], SystemRole);


/***/ }),

/***/ "./src/modules/domain/system-role/system-role.module.ts":
/*!**************************************************************!*\
  !*** ./src/modules/domain/system-role/system-role.module.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemRoleModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const system_role_entity_1 = __webpack_require__(/*! ./system-role.entity */ "./src/modules/domain/system-role/system-role.entity.ts");
const system_role_repository_1 = __webpack_require__(/*! ./system-role.repository */ "./src/modules/domain/system-role/system-role.repository.ts");
const system_role_service_1 = __webpack_require__(/*! ./system-role.service */ "./src/modules/domain/system-role/system-role.service.ts");
let DomainSystemRoleModule = class DomainSystemRoleModule {
};
exports.DomainSystemRoleModule = DomainSystemRoleModule;
exports.DomainSystemRoleModule = DomainSystemRoleModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([system_role_entity_1.SystemRole])],
        providers: [system_role_repository_1.DomainSystemRoleRepository, system_role_service_1.DomainSystemRoleService],
        exports: [system_role_service_1.DomainSystemRoleService],
    })
], DomainSystemRoleModule);


/***/ }),

/***/ "./src/modules/domain/system-role/system-role.repository.ts":
/*!******************************************************************!*\
  !*** ./src/modules/domain/system-role/system-role.repository.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemRoleRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const system_role_entity_1 = __webpack_require__(/*! ./system-role.entity */ "./src/modules/domain/system-role/system-role.entity.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainSystemRoleRepository = class DomainSystemRoleRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainSystemRoleRepository = DomainSystemRoleRepository;
exports.DomainSystemRoleRepository = DomainSystemRoleRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(system_role_entity_1.SystemRole)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainSystemRoleRepository);


/***/ }),

/***/ "./src/modules/domain/system-role/system-role.service.ts":
/*!***************************************************************!*\
  !*** ./src/modules/domain/system-role/system-role.service.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemRoleService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_role_repository_1 = __webpack_require__(/*! ./system-role.repository */ "./src/modules/domain/system-role/system-role.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
let DomainSystemRoleService = class DomainSystemRoleService extends base_service_1.BaseService {
    constructor(systemRoleRepository) {
        super(systemRoleRepository);
        this.systemRoleRepository = systemRoleRepository;
    }
    async findById(id) {
        return this.systemRoleRepository.findOne({ where: { id } });
    }
    async findAllSystemRoles() {
        return this.systemRoleRepository.findAll({
            order: { systemId: 'ASC', sortOrder: 'ASC', roleName: 'ASC' },
        });
    }
    async findBySystemId(systemId) {
        return this.systemRoleRepository.findAll({
            where: { systemId, isActive: true },
            order: { sortOrder: 'ASC', roleName: 'ASC' },
        });
    }
    async findBySystemIdAndRoleCode(systemId, roleCode) {
        return this.systemRoleRepository.findOne({
            where: { systemId, roleCode },
        });
    }
    async createSystemRole(data) {
        const existing = await this.findBySystemIdAndRoleCode(data.systemId, data.roleCode);
        if (existing) {
            throw new common_1.BadRequestException(`Ïó≠Ìï† ÏΩîÎìú '${data.roleCode}'Îäî Ïù¥ÎØ∏ Ï°¥Ïû¨Ìï©ÎãàÎã§.`);
        }
        return this.systemRoleRepository.save({
            systemId: data.systemId,
            roleName: data.roleName,
            roleCode: data.roleCode,
            description: data.description,
            permissions: data.permissions || [],
            sortOrder: data.sortOrder || 0,
            isActive: true,
            isDefault: data.isDefault || false,
        });
    }
    async updateSystemRole(id, data) {
        const systemRole = await this.systemRoleRepository.findOne({ where: { id } });
        if (!systemRole) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        if (data.roleCode && data.roleCode !== systemRole.roleCode) {
            const existing = await this.findBySystemIdAndRoleCode(systemRole.systemId, data.roleCode);
            if (existing) {
                throw new common_1.BadRequestException(`Ïó≠Ìï† ÏΩîÎìú '${data.roleCode}'Îäî Ïù¥ÎØ∏ Ï°¥Ïû¨Ìï©ÎãàÎã§.`);
            }
        }
        await this.systemRoleRepository.update(id, data);
        return this.systemRoleRepository.findOne({ where: { id } });
    }
    async deactivateSystemRole(id) {
        const systemRole = await this.systemRoleRepository.findOne({ where: { id } });
        if (!systemRole) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú Ïó≠Ìï†ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        await this.systemRoleRepository.update(id, { isActive: false });
    }
    async findDefaultRoles() {
        return this.systemRoleRepository.findAll({
            where: { isDefault: true, isActive: true },
            order: { sortOrder: 'ASC', roleName: 'ASC' },
        });
    }
    async findDefaultRolesBySystemId(systemId) {
        return this.systemRoleRepository.findAll({
            where: { systemId, isDefault: true, isActive: true },
            order: { sortOrder: 'ASC', roleName: 'ASC' },
        });
    }
};
exports.DomainSystemRoleService = DomainSystemRoleService;
exports.DomainSystemRoleService = DomainSystemRoleService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof system_role_repository_1.DomainSystemRoleRepository !== "undefined" && system_role_repository_1.DomainSystemRoleRepository) === "function" ? _a : Object])
], DomainSystemRoleService);


/***/ }),

/***/ "./src/modules/domain/system-webhook/system-webhook.entity.ts":
/*!********************************************************************!*\
  !*** ./src/modules/domain/system-webhook/system-webhook.entity.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SystemWebhook = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let SystemWebhook = class SystemWebhook {
};
exports.SystemWebhook = SystemWebhook;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], SystemWebhook.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏãúÏä§ÌÖú ID' }),
    __metadata("design:type", String)
], SystemWebhook.prototype, "systemId", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏõπÌõÖ ID' }),
    __metadata("design:type", String)
], SystemWebhook.prototype, "webhookId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: 'ÎßàÏßÄÎßâ Ïã§ÌñâÏùºÏãú',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], SystemWebhook.prototype, "lastExecutedAt", void 0);
__decorate([
    (0, typeorm_1.Column)({
        default: 0,
        comment: 'Ï¥ù Ïã§Ìñâ ÌöüÏàò',
    }),
    __metadata("design:type", Number)
], SystemWebhook.prototype, "executionCount", void 0);
__decorate([
    (0, typeorm_1.Column)({
        default: 0,
        comment: 'ÏÑ±Í≥µ ÌöüÏàò',
    }),
    __metadata("design:type", Number)
], SystemWebhook.prototype, "successCount", void 0);
__decorate([
    (0, typeorm_1.Column)({
        default: 0,
        comment: 'Ïã§Ìå® ÌöüÏàò',
    }),
    __metadata("design:type", Number)
], SystemWebhook.prototype, "failureCount", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], SystemWebhook.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)('System', { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'systemId' }),
    __metadata("design:type", Object)
], SystemWebhook.prototype, "system", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)('Webhook', { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'webhookId' }),
    __metadata("design:type", Object)
], SystemWebhook.prototype, "webhook", void 0);
exports.SystemWebhook = SystemWebhook = __decorate([
    (0, typeorm_1.Entity)('system_webhooks'),
    (0, typeorm_1.Index)(['systemId', 'webhookId'], { unique: true }),
    (0, typeorm_1.Index)(['systemId']),
    (0, typeorm_1.Index)(['webhookId'])
], SystemWebhook);


/***/ }),

/***/ "./src/modules/domain/system-webhook/system-webhook.module.ts":
/*!********************************************************************!*\
  !*** ./src/modules/domain/system-webhook/system-webhook.module.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemWebhookModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const system_webhook_service_1 = __webpack_require__(/*! ./system-webhook.service */ "./src/modules/domain/system-webhook/system-webhook.service.ts");
const system_webhook_repository_1 = __webpack_require__(/*! ./system-webhook.repository */ "./src/modules/domain/system-webhook/system-webhook.repository.ts");
const system_webhook_entity_1 = __webpack_require__(/*! ./system-webhook.entity */ "./src/modules/domain/system-webhook/system-webhook.entity.ts");
let DomainSystemWebhookModule = class DomainSystemWebhookModule {
};
exports.DomainSystemWebhookModule = DomainSystemWebhookModule;
exports.DomainSystemWebhookModule = DomainSystemWebhookModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([system_webhook_entity_1.SystemWebhook])],
        providers: [system_webhook_service_1.DomainSystemWebhookService, system_webhook_repository_1.DomainSystemWebhookRepository],
        exports: [system_webhook_service_1.DomainSystemWebhookService],
    })
], DomainSystemWebhookModule);


/***/ }),

/***/ "./src/modules/domain/system-webhook/system-webhook.repository.ts":
/*!************************************************************************!*\
  !*** ./src/modules/domain/system-webhook/system-webhook.repository.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemWebhookRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainSystemWebhookRepository = class DomainSystemWebhookRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainSystemWebhookRepository = DomainSystemWebhookRepository;
exports.DomainSystemWebhookRepository = DomainSystemWebhookRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.SystemWebhook)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainSystemWebhookRepository);


/***/ }),

/***/ "./src/modules/domain/system-webhook/system-webhook.service.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/domain/system-webhook/system-webhook.service.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemWebhookService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_webhook_repository_1 = __webpack_require__(/*! ./system-webhook.repository */ "./src/modules/domain/system-webhook/system-webhook.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
let DomainSystemWebhookService = class DomainSystemWebhookService extends base_service_1.BaseService {
    constructor(systemWebhookRepository) {
        super(systemWebhookRepository);
        this.systemWebhookRepository = systemWebhookRepository;
    }
    async findBySystemId(systemId) {
        return this.systemWebhookRepository.findAll({
            where: { systemId },
            order: { createdAt: 'DESC' },
        });
    }
    async findByWebhookId(webhookId) {
        return this.systemWebhookRepository.findAll({
            where: { webhookId },
            order: { createdAt: 'DESC' },
        });
    }
    async findBySystemAndWebhook(systemId, webhookId) {
        const relation = await this.systemWebhookRepository.findOne({
            where: { systemId, webhookId },
        });
        if (!relation) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖú-ÏõπÌõÖ Í¥ÄÍ≥ÑÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return relation;
    }
    async updateExecutionStats(systemId, webhookId, isSuccess) {
        const relation = await this.findBySystemAndWebhook(systemId, webhookId);
        const updateData = {
            lastExecutedAt: new Date(),
            executionCount: relation.executionCount + 1,
        };
        if (isSuccess) {
            updateData.successCount = relation.successCount + 1;
        }
        else {
            updateData.failureCount = relation.failureCount + 1;
        }
        return this.systemWebhookRepository.update(relation.id, updateData);
    }
    async findMostExecuted(limit = 10) {
        return this.systemWebhookRepository.findAll({
            order: { executionCount: 'DESC' },
            take: limit,
        });
    }
    async findHighFailureRate(minExecutions = 10) {
        return this.systemWebhookRepository.findAll({
            order: { failureCount: 'DESC' },
        });
    }
    async createRelation(systemId, webhookId) {
        return this.systemWebhookRepository.save({
            systemId,
            webhookId,
            executionCount: 0,
            successCount: 0,
            failureCount: 0,
        });
    }
};
exports.DomainSystemWebhookService = DomainSystemWebhookService;
exports.DomainSystemWebhookService = DomainSystemWebhookService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof system_webhook_repository_1.DomainSystemWebhookRepository !== "undefined" && system_webhook_repository_1.DomainSystemWebhookRepository) === "function" ? _a : Object])
], DomainSystemWebhookService);


/***/ }),

/***/ "./src/modules/domain/system/system.entity.ts":
/*!****************************************************!*\
  !*** ./src/modules/domain/system/system.entity.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.System = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let System = class System {
};
exports.System = System;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], System.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ID' }),
    __metadata("design:type", String)
], System.prototype, "clientId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏãúÌÅ¨Î¶ø' }),
    __metadata("design:type", String)
], System.prototype, "clientSecret", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, comment: 'ÏãúÏä§ÌÖú Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], System.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true, comment: 'ÏãúÏä§ÌÖú ÏÑ§Î™Ö' }),
    __metadata("design:type", String)
], System.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÎèÑÎ©îÏù∏' }),
    __metadata("design:type", String)
], System.prototype, "domain", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        default: [],
        comment: 'ÌóàÏö©Îêú Ïò§Î¶¨ÏßÑ Î™©Î°ù',
    }),
    __metadata("design:type", Array)
], System.prototype, "allowedOrigin", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true, comment: 'Ìó¨Ïä§Ï≤¥ÌÅ¨ URL' }),
    __metadata("design:type", String)
], System.prototype, "healthCheckUrl", void 0);
__decorate([
    (0, typeorm_1.Column)({
        default: true,
        comment: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú',
    }),
    __metadata("design:type", Boolean)
], System.prototype, "isActive", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], System.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùºÏãú' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], System.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)({ comment: 'ÏÇ≠Ï†úÏùºÏãú' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], System.prototype, "deletedAt", void 0);
exports.System = System = __decorate([
    (0, typeorm_1.Entity)('systems')
], System);


/***/ }),

/***/ "./src/modules/domain/system/system.module.ts":
/*!****************************************************!*\
  !*** ./src/modules/domain/system/system.module.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const system_service_1 = __webpack_require__(/*! ./system.service */ "./src/modules/domain/system/system.service.ts");
const system_repository_1 = __webpack_require__(/*! ./system.repository */ "./src/modules/domain/system/system.repository.ts");
const system_entity_1 = __webpack_require__(/*! ./system.entity */ "./src/modules/domain/system/system.entity.ts");
let DomainSystemModule = class DomainSystemModule {
};
exports.DomainSystemModule = DomainSystemModule;
exports.DomainSystemModule = DomainSystemModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([system_entity_1.System])],
        providers: [system_service_1.DomainSystemService, system_repository_1.DomainSystemRepository],
        exports: [system_service_1.DomainSystemService],
    })
], DomainSystemModule);


/***/ }),

/***/ "./src/modules/domain/system/system.repository.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/system/system.repository.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainSystemRepository = class DomainSystemRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainSystemRepository = DomainSystemRepository;
exports.DomainSystemRepository = DomainSystemRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.System)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainSystemRepository);


/***/ }),

/***/ "./src/modules/domain/system/system.service.ts":
/*!*****************************************************!*\
  !*** ./src/modules/domain/system/system.service.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainSystemService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const system_repository_1 = __webpack_require__(/*! ./system.repository */ "./src/modules/domain/system/system.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const crypto_1 = __webpack_require__(/*! crypto */ "crypto");
const bcrypt = __webpack_require__(/*! @node-rs/bcrypt */ "@node-rs/bcrypt");
const uuid_1 = __webpack_require__(/*! uuid */ "uuid");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainSystemService = class DomainSystemService extends base_service_1.BaseService {
    constructor(systemRepository) {
        super(systemRepository);
        this.systemRepository = systemRepository;
    }
    async findByClientId(clientId) {
        const system = await this.systemRepository.findOne({
            where: { clientId },
        });
        if (!system) {
            throw new common_1.NotFoundException('ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return system;
    }
    async findByName(name) {
        return this.systemRepository.findOne({
            where: { name },
        });
    }
    async findAllSystems() {
        return this.systemRepository.findAll({
            order: { name: 'ASC' },
        });
    }
    async searchSystems(query) {
        if (!query || query.trim() === '') {
            return this.findAll();
        }
        const options = {
            where: [
                { name: (0, typeorm_1.ILike)(`%${query}%`) },
                { description: (0, typeorm_1.ILike)(`%${query}%`) },
                { clientId: (0, typeorm_1.ILike)(`%${query}%`) },
                { domain: (0, typeorm_1.ILike)(`%${query}%`) },
            ],
            order: { name: 'ASC' },
        };
        return this.systemRepository.findAll(options);
    }
    async findActiveSystems() {
        return this.systemRepository.findAll({
            where: { isActive: true },
            order: { name: 'ASC' },
        });
    }
    async findByDomain(domain) {
        const system = await this.systemRepository.findOne({
            where: { domain },
        });
        if (!system) {
            throw new common_1.NotFoundException('Ìï¥Îãπ ÎèÑÎ©îÏù∏Ïùò ÏãúÏä§ÌÖúÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return system;
    }
    async verifyClientSecret(clientSecret, system) {
        return bcrypt.compare(clientSecret, system.clientSecret);
    }
    generateCredentials() {
        const clientId = (0, uuid_1.v4)();
        const { clientSecret, hash } = this.generateSecret();
        return { clientId, clientSecret, hash };
    }
    generateSecret() {
        const clientSecret = (0, crypto_1.randomBytes)(32).toString('hex');
        const hash = bcrypt.hashSync(clientSecret, 10);
        return { clientSecret, hash };
    }
};
exports.DomainSystemService = DomainSystemService;
exports.DomainSystemService = DomainSystemService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof system_repository_1.DomainSystemRepository !== "undefined" && system_repository_1.DomainSystemRepository) === "function" ? _a : Object])
], DomainSystemService);


/***/ }),

/***/ "./src/modules/domain/token/token.entity.ts":
/*!**************************************************!*\
  !*** ./src/modules/domain/token/token.entity.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Token = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let Token = class Token {
};
exports.Token = Token;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Token.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞' }),
    __metadata("design:type", String)
], Token.prototype, "accessToken", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÌÜ†ÌÅ∞ ÎßåÎ£åÏùºÏãú' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Token.prototype, "tokenExpiresAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞', nullable: true }),
    __metadata("design:type", String)
], Token.prototype, "refreshToken", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ ÎßåÎ£åÏùºÏãú', nullable: true }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Token.prototype, "refreshTokenExpiresAt", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï†ïÎ≥¥ (Î∏åÎùºÏö∞Ï†Ä, Ïï± Îì±)',
    }),
    __metadata("design:type", String)
], Token.prototype, "clientInfo", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: 'IP Ï£ºÏÜå',
    }),
    __metadata("design:type", String)
], Token.prototype, "ipAddress", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], Token.prototype, "lastAccess", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Token.prototype, "isActive", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], Token.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], Token.prototype, "updatedAt", void 0);
exports.Token = Token = __decorate([
    (0, typeorm_1.Entity)('tokens')
], Token);


/***/ }),

/***/ "./src/modules/domain/token/token.module.ts":
/*!**************************************************!*\
  !*** ./src/modules/domain/token/token.module.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainTokenModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const token_service_1 = __webpack_require__(/*! ./token.service */ "./src/modules/domain/token/token.service.ts");
const token_repository_1 = __webpack_require__(/*! ./token.repository */ "./src/modules/domain/token/token.repository.ts");
const token_entity_1 = __webpack_require__(/*! ./token.entity */ "./src/modules/domain/token/token.entity.ts");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
let DomainTokenModule = class DomainTokenModule {
};
exports.DomainTokenModule = DomainTokenModule;
exports.DomainTokenModule = DomainTokenModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([token_entity_1.Token]), jwt_1.JwtModule.register({})],
        providers: [token_service_1.DomainTokenService, token_repository_1.DomainTokenRepository],
        exports: [token_service_1.DomainTokenService, token_repository_1.DomainTokenRepository],
    })
], DomainTokenModule);


/***/ }),

/***/ "./src/modules/domain/token/token.repository.ts":
/*!******************************************************!*\
  !*** ./src/modules/domain/token/token.repository.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainTokenRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! ../../../../libs/database/entities */ "./libs/database/entities/index.ts");
const base_repository_1 = __webpack_require__(/*! ../../../../libs/common/repositories/base.repository */ "./libs/common/repositories/base.repository.ts");
let DomainTokenRepository = class DomainTokenRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainTokenRepository = DomainTokenRepository;
exports.DomainTokenRepository = DomainTokenRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Token)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainTokenRepository);


/***/ }),

/***/ "./src/modules/domain/token/token.service.ts":
/*!***************************************************!*\
  !*** ./src/modules/domain/token/token.service.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainTokenService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const token_repository_1 = __webpack_require__(/*! ./token.repository */ "./src/modules/domain/token/token.repository.ts");
const base_service_1 = __webpack_require__(/*! ../../../../libs/common/services/base.service */ "./libs/common/services/base.service.ts");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainTokenService = class DomainTokenService extends base_service_1.BaseService {
    constructor(tokenRepository, jwtService, configService) {
        super(tokenRepository);
        this.tokenRepository = tokenRepository;
        this.jwtService = jwtService;
        this.configService = configService;
    }
    async findByAccessToken(accessToken) {
        const token = await this.tokenRepository.findOne({
            where: { accessToken },
        });
        if (!token) {
            throw new common_1.NotFoundException('ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return token;
    }
    async findByRefreshToken(refreshToken) {
        const token = await this.tokenRepository.findOne({
            where: { refreshToken },
        });
        if (!token) {
            throw new common_1.NotFoundException('Î¶¨ÌîÑÎ†àÏãú ÌÜ†ÌÅ∞ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        return token;
    }
    async findAllTokens() {
        return this.tokenRepository.findAll({
            order: { createdAt: 'DESC' },
        });
    }
    async findExpiredTokens() {
        const now = new Date();
        return this.tokenRepository.findAll({
            where: {
                tokenExpiresAt: (0, typeorm_1.LessThan)(now),
                isActive: true,
            },
            order: { tokenExpiresAt: 'ASC' },
        });
    }
    async deleteExpiredTokens() {
        const now = new Date();
        const expiredTokens = await this.tokenRepository.findAll({
            where: {
                tokenExpiresAt: (0, typeorm_1.LessThan)(now),
                isActive: true,
            },
        });
        let deletedCount = 0;
        for (const token of expiredTokens) {
            await this.tokenRepository.delete(token.id);
            deletedCount++;
        }
        return { deletedCount };
    }
    generateJwtToken(payload, expiresIn) {
        return this.jwtService.sign(payload, {
            secret: this.configService.get('GLOBAL_SECRET'),
            expiresIn: expiresIn,
        });
    }
    verifyJwtToken(token) {
        return this.jwtService.verify(token, {
            secret: this.configService.get('GLOBAL_SECRET'),
        });
    }
};
exports.DomainTokenService = DomainTokenService;
exports.DomainTokenService = DomainTokenService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof token_repository_1.DomainTokenRepository !== "undefined" && token_repository_1.DomainTokenRepository) === "function" ? _a : Object, typeof (_b = typeof jwt_1.JwtService !== "undefined" && jwt_1.JwtService) === "function" ? _b : Object, typeof (_c = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _c : Object])
], DomainTokenService);


/***/ }),

/***/ "./src/modules/domain/webhook-event-log/webhook-event-log.entity.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/domain/webhook-event-log/webhook-event-log.entity.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebhookEventLog = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let WebhookEventLog = class WebhookEventLog {
};
exports.WebhookEventLog = WebhookEventLog;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], WebhookEventLog.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏõπÌõÖ ID' }),
    __metadata("design:type", String)
], WebhookEventLog.prototype, "webhookId", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïù¥Î≤§Ìä∏ Ïú†Ìòï' }),
    __metadata("design:type", String)
], WebhookEventLog.prototype, "eventType", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', comment: 'ÏóîÌã∞Ìã∞ ID' }),
    __metadata("design:type", String)
], WebhookEventLog.prototype, "entityId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÌéòÏù¥Î°úÎìú Îç∞Ïù¥ÌÑ∞ (JSON ÌòïÏãù)',
        type: 'jsonb',
    }),
    __metadata("design:type", typeof (_a = typeof Record !== "undefined" && Record) === "function" ? _a : Object)
], WebhookEventLog.prototype, "payload", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÏùëÎãµ ÏÉÅÌÉú ÏΩîÎìú',
        type: 'int',
        nullable: true,
    }),
    __metadata("design:type", Number)
], WebhookEventLog.prototype, "responseCode", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÏùëÎãµ Î≥∏Î¨∏',
        type: 'text',
        nullable: true,
    }),
    __metadata("design:type", String)
], WebhookEventLog.prototype, "responseBody", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÏãúÎèÑ ÌöüÏàò',
        type: 'int',
        default: 1,
    }),
    __metadata("design:type", Number)
], WebhookEventLog.prototype, "attemptCount", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÏÑ±Í≥µ Ïó¨Î∂Ä',
        type: 'boolean',
        default: false,
    }),
    __metadata("design:type", Boolean)
], WebhookEventLog.prototype, "isSuccess", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÎßàÏßÄÎßâ ÏãúÎèÑ ÏãúÍ∞Ñ',
        type: 'timestamp with time zone',
        default: () => 'CURRENT_TIMESTAMP',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], WebhookEventLog.prototype, "lastAttemptAt", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], WebhookEventLog.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)('Webhook', { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'webhookId' }),
    __metadata("design:type", Object)
], WebhookEventLog.prototype, "webhook", void 0);
exports.WebhookEventLog = WebhookEventLog = __decorate([
    (0, typeorm_1.Entity)('webhook_event_logs'),
    (0, typeorm_1.Index)(['webhookId']),
    (0, typeorm_1.Index)(['eventType']),
    (0, typeorm_1.Index)(['entityId']),
    (0, typeorm_1.Index)(['isSuccess']),
    (0, typeorm_1.Index)(['createdAt'])
], WebhookEventLog);


/***/ }),

/***/ "./src/modules/domain/webhook/webhook.entity.ts":
/*!******************************************************!*\
  !*** ./src/modules/domain/webhook/webhook.entity.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Webhook = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let Webhook = class Webhook {
};
exports.Webhook = Webhook;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Webhook.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏõπÌõÖ Ïù¥Î¶Ñ' }),
    __metadata("design:type", String)
], Webhook.prototype, "webhookName", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏÑ§Î™Ö', nullable: true }),
    __metadata("design:type", String)
], Webhook.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÎåÄÏÉÅ URL' }),
    __metadata("design:type", String)
], Webhook.prototype, "targetUrl", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'Ïù¥Î≤§Ìä∏ Ïú†Ìòï' }),
    __metadata("design:type", String)
], Webhook.prototype, "eventType", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏóîÌã∞Ìã∞ Ïú†Ìòï' }),
    __metadata("design:type", String)
], Webhook.prototype, "entityType", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: 'ÏãúÌÅ¨Î¶ø ÌÇ§', nullable: true }),
    __metadata("design:type", String)
], Webhook.prototype, "secretKey", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'Ìó§Îçî Ï†ïÎ≥¥ (JSON ÌòïÏãù)',
        type: 'jsonb',
        nullable: true,
    }),
    __metadata("design:type", typeof (_a = typeof Record !== "undefined" && Record) === "function" ? _a : Object)
], Webhook.prototype, "headers", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÌôúÏÑ±Ìôî ÏÉÅÌÉú',
        type: 'boolean',
        default: true,
    }),
    __metadata("design:type", Boolean)
], Webhook.prototype, "isActive", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'Ïû¨ÏãúÎèÑ ÌöüÏàò',
        type: 'int',
        default: 3,
    }),
    __metadata("design:type", Number)
], Webhook.prototype, "retryCount", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: 'ÌÉÄÏûÑÏïÑÏõÉ ÏãúÍ∞Ñ(Ï¥à)',
        type: 'int',
        default: 30,
    }),
    __metadata("design:type", Number)
], Webhook.prototype, "timeoutSeconds", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ comment: 'ÏÉùÏÑ±ÏùºÏãú' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Webhook.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ comment: 'ÏàòÏ†ïÏùºÏãú' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], Webhook.prototype, "updatedAt", void 0);
exports.Webhook = Webhook = __decorate([
    (0, typeorm_1.Entity)('webhooks')
], Webhook);


/***/ }),

/***/ "@nestjs/common":
/*!*********************************!*\
  !*** external "@nestjs/common" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@nestjs/common");

/***/ }),

/***/ "@nestjs/config":
/*!*********************************!*\
  !*** external "@nestjs/config" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@nestjs/config");

/***/ }),

/***/ "@nestjs/core":
/*!*******************************!*\
  !*** external "@nestjs/core" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("@nestjs/core");

/***/ }),

/***/ "@nestjs/jwt":
/*!******************************!*\
  !*** external "@nestjs/jwt" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("@nestjs/jwt");

/***/ }),

/***/ "@nestjs/passport":
/*!***********************************!*\
  !*** external "@nestjs/passport" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("@nestjs/passport");

/***/ }),

/***/ "@nestjs/swagger":
/*!**********************************!*\
  !*** external "@nestjs/swagger" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@nestjs/swagger");

/***/ }),

/***/ "@nestjs/typeorm":
/*!**********************************!*\
  !*** external "@nestjs/typeorm" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@nestjs/typeorm");

/***/ }),

/***/ "@node-rs/bcrypt":
/*!**********************************!*\
  !*** external "@node-rs/bcrypt" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@node-rs/bcrypt");

/***/ }),

/***/ "class-transformer":
/*!************************************!*\
  !*** external "class-transformer" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("class-transformer");

/***/ }),

/***/ "class-validator":
/*!**********************************!*\
  !*** external "class-validator" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("class-validator");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("express");

/***/ }),

/***/ "hbs":
/*!**********************!*\
  !*** external "hbs" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("hbs");

/***/ }),

/***/ "rxjs":
/*!***********************!*\
  !*** external "rxjs" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("rxjs");

/***/ }),

/***/ "rxjs/operators":
/*!*********************************!*\
  !*** external "rxjs/operators" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("rxjs/operators");

/***/ }),

/***/ "typeorm":
/*!**************************!*\
  !*** external "typeorm" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("typeorm");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("uuid");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const app_module_1 = __webpack_require__(/*! ./app.module */ "./src/app.module.ts");
const swagger_1 = __webpack_require__(/*! ../libs/common/utils/swagger */ "./libs/common/utils/swagger.ts");
const dtos = __webpack_require__(/*! ./dtos.index */ "./src/dtos.index.ts");
const path_1 = __webpack_require__(/*! path */ "path");
const logging_interceptor_1 = __webpack_require__(/*! ../libs/common/interceptors/logging.interceptor */ "./libs/common/interceptors/logging.interceptor.ts");
const log_application_service_1 = __webpack_require__(/*! ./modules/application/admin/log/log-application.service */ "./src/modules/application/admin/log/log-application.service.ts");
const hbs = __webpack_require__(/*! hbs */ "hbs");
const request_interceptor_1 = __webpack_require__(/*! ../libs/common/interceptors/request.interceptor */ "./libs/common/interceptors/request.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! ../libs/common/interceptors/error.interceptor */ "./libs/common/interceptors/error.interceptor.ts");
async function bootstrap() {
    if (process.env.VERCEL || process.env.NOW_REGION) {
        console.log('Running in Vercel environment, skipping bootstrap');
        return;
    }
    const app = await core_1.NestFactory.create(app_module_1.AppModule);
    const ALLOW_ORIGINS = [
        'https://lsso.vercel.app',
        'https://lsso-git-dev-lumir-tech7s-projects.vercel.app',
        'https://lsso-admin.vercel.app',
        'https://lsso-admin-git-dev-lumir-tech7s-projects.vercel.app',
        'https://portal.lumir.space',
        'https://lsms.lumir.space',
        'https://lsso-dev.vercel.app',
        'http://localhost:3000',
    ];
    app.enableCors({
        origin: ALLOW_ORIGINS,
        methods: 'GET,HEAD,POST,PATCH,PUT,DELETE,OPTIONS',
    });
    app.useGlobalPipes(new common_1.ValidationPipe({
        whitelist: true,
        transform: true,
        forbidNonWhitelisted: true,
    }));
    app.setGlobalPrefix('api', {
        exclude: ['/set-initial-password', '/change-password'],
    });
    (0, swagger_1.setupSwagger)(app, [...Object.values(dtos)]);
    app.useGlobalInterceptors(new request_interceptor_1.RequestInterceptor(), new error_interceptor_1.ErrorInterceptor());
    app.useGlobalInterceptors(new logging_interceptor_1.LoggingInterceptor(app.get(log_application_service_1.LogApplicationService)));
    app.useStaticAssets((0, path_1.join)(__dirname, '..', 'public'), {
        prefix: '/static',
    });
    app.setBaseViewsDir((0, path_1.join)(__dirname, '..', 'src', 'views'));
    app.setViewEngine('hbs');
    hbs.registerPartials((0, path_1.join)(__dirname, '..', 'views/partials'));
    await app.listen(process.env.PORT ?? 3000);
}
bootstrap();

})();

/******/ })()
;